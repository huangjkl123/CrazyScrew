window.__require=function t(e,o,n){function i(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var d=o[a]={exports:{}};e[a][0].call(d.exports,function(t){return i(e[a][1][t]||t)},d,d.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AddHomeBtn:[function(t,e,o){"use strict";cc._RF.push(e,"ceb71XE/U1Ls4IFHKqkFnL7","AddHomeBtn");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("TipManager"),l=i("ShuShuConst"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.start=function(){if(this.node.active=!1,window.tt){var t=this,e=window.tt;if(!e.checkShortcut)return console.error("## \u5b57\u8282\u7528\u6237\u7248\u672c\u8fc7\u4f4e\uff0c\u6ca1\u6709\u6dfb\u52a0\u684c\u9762\u529f\u80fd");e.checkShortcut({success:function(e){console.log("## \u68c0\u67e5\u5feb\u6377\u65b9\u5f0f  res.status\uff1a ",JSON.stringify(e.status)),0!=e.status.exist&&1!=e.status.needUpdate||(t.node.active=!0)},fail:function(t){console.log("## \u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",JSON.stringify(t.errMsg))}})}},e.prototype.btnClick_addHome=function(){cc.game.emit("gamelog_Thinking",l.ShuShuConst.btn,{id:"011"});var t=this;window.tt.addShortcut({success:function(){t.node.active=!1,console.log("## \u6dfb\u52a0\u684c\u9762\u6210\u529f"),s.Tip.show("\u6dfb\u52a0\u684c\u9762\u6210\u529f")},fail:function(t){console.log("## \u6dfb\u52a0\u684c\u9762\u5931\u8d25",JSON.stringify(t.errMsg))}})},c([p],e)}(cc.Component));r.default=h,cc._RF.pop()},{}],AgeTip:[function(t,e,o){"use strict";cc._RF.push(e,"80238wgshFJbp6+kf1BaEPu","AgeTip");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("PlatformConst"),d=i("PlatformManager"),p=i("PopupManager"),h=cc._decorator,u=h.ccclass,f=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){if(t.prototype.onLoad.call(this),this.addBtnOn("defineBtn",this.clickDefine,this),d.Platform.getConfig().ageTipType==l.AgeTipType.AGE_12){var e=this.dict.text.getComponent(cc.Label).string.replace("16\u5468\u5c81","12\u5468\u5c81");this.dict.text.getComponent(cc.Label).string=e}},e.prototype.clickDefine=function(){p.Popup.hide()},c([u],e)}(s.default));r.default=f,cc._RF.pop()},{}],AndroidOPPO:[function(t,e,o){"use strict";cc._RF.push(e,"127b3B8bHdBgbAqnSy7lNOF","AndroidOPPO");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],a=0,c=r.length;a<c;a++,i++)n[i]=r[a];return n};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BmsManager"),l=i("Android"),d=window.jsb&&jsb.reflection?jsb.reflection.callStaticMethod:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},p="org/cocos2dx/javascript/SdkBridge",h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canReward=!1,e.onRewardSucFunc=null,e.onRewardFaiFunc=function(){},e.onInterstitialFeedSucFunc=function(){},e.onInterstitialFeedFaiFunc=function(){},e.isRewardVideo=!1,e.isGetReward=!1,e}return a(e,t),e.prototype.javaCall=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];d.apply(void 0,c([p],t))},e.prototype.bindEvents=function(){var t=this,e={onRewardVideoComplete:function(){console.log("== [AndroidOppo] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5b8c\u6210 =="),t._canReward=!0,cc.audioEngine.resumeAll(),setTimeout(function(){t.onRewardAdCallBack("adCompleted")},200)},onRewardVideoClose:function(){console.log("== [AndroidOppo] \u6fc0\u52b1\u89c6\u9891\u5173\u95ed \u662f\u5426\u53d1\u653e\u5956\u52b1: "+t._canReward+" =="),t._canReward=!1},onRewardVideoShow:function(){console.log("== [AndroidOppo] \u6fc0\u52b1\u89c6\u9891\u5c55\u793a =="),t.onRewardAdCallBack("rewardVideoSuccess"),t._canReward=!1,cc.audioEngine.pauseAll()},onRewardVideoFailed:function(){console.log("== [AndroidOppo] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5931\u8d25 =="),t._canReward=!1,t.onRewardAdCallBack("adsVideoFail")},onInterstitialVideoShow:function(){console.log("== [AndroidOppo] \u63d2\u5c4f\u5c55\u793a =="),cc.audioEngine.pauseAll()},onInterstitialVideoClose:function(){console.log("== [AndroidOppo] \u63d2\u5c4f\u8df3\u8fc7 =="),cc.audioEngine.resumeAll()},onInterstitialVideoShowFailed:function(){},onFeedShow:function(){},onFeedShowFailed:function(){},onFeedClose:function(){},onBannerShow:function(){},onBannerShowFailed:function(){},onBannerRemove:function(){},onBannerFeedShow:function(){},onBannerFeedShowFailed:function(){},onBannerFeedRemove:function(){},onInterstitialFeedShow:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a]"),cc.game.emit("onInterstitialFeedShow")},onInterstitialFeedShowFailed:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a\u5931\u8d25]"),cc.game.emit("onInterstitialFeedShowFailed")},onInterstitialFeedRemove:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u79fb\u9664]")},onLargeFeedShow:function(){},onLargeFeedShowFailed:function(){},onLargeFeedRemove:function(){},onInterstitialFeedClick:function(){},onInterstitialClick:function(){console.log("[\u63d2\u5c4f\u70b9\u51fb]")},onUserCloseBannerFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751fbanner]")},onUserCloseLargeFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u5927\u56fe]")},onUserCloseInterstitialFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u63d2\u5c4f]"),cc.game.emit("onInterstitialFeedRemove")}};window.oppoAdCallback=e;var o={onForeground:function(){t.showSplash()},onBackground:function(){}};window.appStatusCallback=o},e.prototype.onRewardAdCallBack=function(t){var e=this;setTimeout(function(){"adCompleted"==t?(console.log("[this] --\x3e \u89c6\u9891\u89c2\u770b\u5b8c\u6bd5"),cc.audioEngine.resumeAll(),e.onRewardSucFunc&&e.onRewardSucFunc(0),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[this] --\x3e \u4e2d\u9014\u5173\u95ed\u5e7f\u544a"),cc.audioEngine.resumeAll(),window.iOSSendMsg=function(){},e.onRewardSucFunc&&e.onRewardSucFunc(1)):"adsVideoFail"==t?(console.log("[this] --\x3e \u89c6\u9891\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e"),console.log("[AndroidAdCtrler] --\x3e [adsVideoFail]"),e.onRewardSucFunc&&e.onRewardSucFunc(-1),window.iOSSendMsg=function(){}):"rewardVideoSuccess"==t&&(console.log("[AndroidAdCtrler] --\x3e [rewardVideoSuccess]"),cc.audioEngine.pauseAll())},100)},e.prototype.setNativeAdId=function(t){d(p,"saveNativeAdPosId","(Ljava/lang/String;)V",t)},e.prototype.showRewardAds=function(t){this.isRewardVideo=!0,d(p,"showVideo","(Ljava/lang/String;)V",""),this.onRewardSucFunc=t,window.iOSSendMsg=this.onRewardAdCallBack.bind(this)},e.prototype.showInsert=function(){this.javaCall("showFullVideo","()V"),window.iOSSendMsg=this.onFullAdCallBack.bind(this)},e.prototype.onFullAdCallBack=function(t){"adCompleted"==t?(console.log("[AndroidAdCtrler][insertCallBack][adCompleted]"),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[AndroidAdCtrler][insertCallBack][adSkipped]"),console.log("\u4e2d\u9014\u64ad\u653e")):"adsVideoFail"==t?(console.log("[AndroidAdCtrler][insertCallBack][adsVideoFail]"),window.iOSSendMsg=function(){}):"insetVideoSuccess"==t&&console.log("[AndroidAdCtrler][insertCallBack][insetVideoSuccess]")},e.prototype.showBanner=function(){d(p,"showBanner","()V")},e.prototype.showBannerFeed2=function(t){d(p,"showBannerFeed","(Ljava/lang/String;IIII)V",t.posID,2,0,0,t.ratio,1)},e.prototype.showLargeFeed=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),jsb.reflection.callStaticMethod(p,"showLargeFeed","(Ljava/lang/String;III)V",t,0,0,e)},e.prototype.removeLargePicFeed=function(t){void 0===t&&(t=""),jsb.reflection.callStaticMethod(p,"removeLargePicFeed","(Ljava/lang/String;)V",t)},e.prototype.showInterstitialFeed=function(t,e,o,n){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===n&&(n=0),jsb.reflection.callStaticMethod(p,"showInterstitialFeed","(Ljava/lang/String;IIIII)V",t,e,0,0,o,n)},e.prototype.removeInterstitialFeed=function(t){void 0===t&&(t=""),jsb.reflection.callStaticMethod(p,"removeInterstitialFeed","(Ljava/lang/String;)V",t)},e.prototype.hideBanner=function(){d(p,"removeBannerFeed","()V"),d(p,"removeBanner","()V")},e.prototype.showSplash=function(){var t=s.BMS.getKey("isCheck");console.log("[isCheck-showSplash]",t),t||s.BMS.getKey("openkp")&&d(p,"showSplash","()V")},e}(l.Android);r.default=h,cc._RF.pop()},{}],AndroidVIVO:[function(t,e,o){"use strict";cc._RF.push(e,"6fdf6GtxzFCJIVJDPn7n3kv","AndroidVIVO");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],a=0,c=r.length;a<c;a++,i++)n[i]=r[a];return n};Object.defineProperty(r,"__esModule",{value:!0});var s=i("Android"),l=window.jsb&&jsb.reflection?jsb.reflection.callStaticMethod:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},d="org/cocos2dx/javascript/SdkBridge",p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canReward=!1,e.onRewardSucFunc=null,e.onRewardFaiFunc=function(){},e.onInterstitialFeedSucFunc=function(){},e.onInterstitialFeedFaiFunc=function(){},e.isRewardVideo=!1,e.isGetReward=!1,e}return a(e,t),e.prototype.javaCall=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l.apply(void 0,c([d],t))},e.prototype.bindEvents=function(){var t=this,e={onRewardVideoComplete:function(){console.log("== [AndroidVIVO] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5b8c\u6210 =="),t._canReward=!0,cc.audioEngine.resumeAll(),setTimeout(function(){t.onRewardAdCallBack("adCompleted")},200)},onRewardVideoClose:function(){console.log("== [AndroidVIVO] \u6fc0\u52b1\u89c6\u9891\u5173\u95ed \u662f\u5426\u53d1\u653e\u5956\u52b1: "+t._canReward+" =="),t._canReward=!1},onRewardVideoShow:function(){console.log("== [AndroidVIVO] \u6fc0\u52b1\u89c6\u9891\u5c55\u793a =="),t.onRewardAdCallBack("rewardVideoSuccess"),t._canReward=!1,cc.audioEngine.pauseAll()},onRewardVideoFailed:function(){console.log("== [AndroidVIVO] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5931\u8d25 =="),t._canReward=!1,t.onRewardAdCallBack("adsVideoFail")},onInterstitialVideoShow:function(){console.log("== [AndroidVIVO] \u63d2\u5c4f\u5c55\u793a =="),cc.audioEngine.pauseAll()},onInterstitialVideoClose:function(){console.log("== [AndroidVIVO] \u63d2\u5c4f\u8df3\u8fc7 =="),cc.audioEngine.resumeAll()},onInterstitialVideoShowFailed:function(){},onFeedShow:function(){},onFeedShowFailed:function(){},onFeedClose:function(){},onBannerShow:function(){},onBannerShowFailed:function(){},onBannerRemove:function(){},onBannerFeedShow:function(){},onBannerFeedShowFailed:function(){},onBannerFeedRemove:function(){},onInterstitialFeedShow:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a]"),cc.game.emit("onInterstitialFeedShow")},onInterstitialFeedShowFailed:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a\u5931\u8d25]"),cc.game.emit("onInterstitialFeedShowFailed")},onInterstitialFeedRemove:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u79fb\u9664]")},onLargeFeedShow:function(){},onLargeFeedShowFailed:function(){},onLargeFeedRemove:function(){},onInterstitialFeedClick:function(){},onInterstitialClick:function(){console.log("[\u63d2\u5c4f\u70b9\u51fb]")},onUserCloseBannerFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751fbanner]")},onUserCloseLargeFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u5927\u56fe]")},onUserCloseInterstitialFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u63d2\u5c4f]"),cc.game.emit("onInterstitialFeedRemove")}};window.vivoAdCallback=e},e.prototype.onRewardAdCallBack=function(t){var e=this;setTimeout(function(){"adCompleted"==t?(console.log("[this] --\x3e \u89c6\u9891\u89c2\u770b\u5b8c\u6bd5"),cc.audioEngine.resumeAll(),e.onRewardSucFunc&&e.onRewardSucFunc(0),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[this] --\x3e \u4e2d\u9014\u5173\u95ed\u5e7f\u544a"),cc.audioEngine.resumeAll(),window.iOSSendMsg=function(){},e.onRewardSucFunc&&e.onRewardSucFunc(1)):"adsVideoFail"==t?(console.log("[this] --\x3e \u89c6\u9891\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e"),console.log("[AndroidAdCtrler] --\x3e [adsVideoFail]"),e.onRewardSucFunc&&e.onRewardSucFunc(-1),window.iOSSendMsg=function(){}):"rewardVideoSuccess"==t&&(console.log("[AndroidAdCtrler] --\x3e [rewardVideoSuccess]"),cc.audioEngine.pauseAll())},100)},e.prototype.setNativeAdId=function(t){l(d,"saveNativeAdPosId","(Ljava/lang/String;)V",t)},e.prototype.showRewardAds=function(t){this.isRewardVideo=!0,l(d,"showVideo","(Ljava/lang/String;)V",""),this.onRewardSucFunc=t,window.iOSSendMsg=this.onRewardAdCallBack.bind(this)},e.prototype.showInsert=function(){this.javaCall("showFullVideo","()V"),window.iOSSendMsg=this.onFullAdCallBack.bind(this)},e.prototype.onFullAdCallBack=function(t){"adCompleted"==t?(console.log("[AndroidAdCtrler][insertCallBack][adCompleted]"),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[AndroidAdCtrler][insertCallBack][adSkipped]"),console.log("\u4e2d\u9014\u64ad\u653e")):"adsVideoFail"==t?(console.log("[AndroidAdCtrler][insertCallBack][adsVideoFail]"),window.iOSSendMsg=function(){}):"insetVideoSuccess"==t&&console.log("[AndroidAdCtrler][insertCallBack][insetVideoSuccess]")},e.prototype.showBanner=function(){l(d,"showBanner","()V")},e.prototype.showBannerFeed=function(t){l(d,"showBannerFeed","(IIII)V",2,0,0,t.ratio)},e.prototype.showLargeFeed=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),jsb.reflection.callStaticMethod(d,"showLargeFeed","(Ljava/lang/String;III)V",t,0,0,e)},e.prototype.removeLargePicFeed=function(t){void 0===t&&(t=""),jsb.reflection.callStaticMethod("com/wonder/xiaomi/XiaomiSdk","removeLargePicFeed","(Ljava/lang/String;)V",t)},e.prototype.showInterstitialFeed=function(t,e,o,n){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===n&&(n=0),jsb.reflection.callStaticMethod(d,"showInterstitialFeed","(Ljava/lang/String;IIIII)V",t,e,0,0,o,n)},e.prototype.hideBanner=function(){l(d,"removeBannerFeed","()V"),l(d,"removeBanner","()V")},e}(s.Android);r.default=p,cc._RF.pop()},{}],AndroidXiaoMi:[function(t,e,o){"use strict";cc._RF.push(e,"19ec4L6AdNPkZspkCQE0E/f","AndroidXiaoMi");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],a=0,c=r.length;a<c;a++,i++)n[i]=r[a];return n};Object.defineProperty(r,"__esModule",{value:!0});var s=i("Android"),l=window.jsb&&jsb.reflection?jsb.reflection.callStaticMethod:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},d="org/cocos2dx/javascript/SdkBridge",p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canReward=!1,e.onRewardSucFunc=null,e.onRewardFaiFunc=function(){},e.onInterstitialFeedSucFunc=function(){},e.onInterstitialFeedFaiFunc=function(){},e.isRewardVideo=!1,e.isGetReward=!1,e.canShowInsertAd=!0,e}return a(e,t),e.prototype.javaCall=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l.apply(void 0,c([d],t))},e.prototype.bindEvents=function(){var t=this,e={onRewardVideoComplete:function(){console.log("== [AndroidXiaoMi] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5b8c\u6210 =="),t._canReward=!0},onRewardVideoClose:function(){console.log("== [AndroidXiaoMi] \u6fc0\u52b1\u89c6\u9891\u5173\u95ed \u662f\u5426\u53d1\u653e\u5956\u52b1: "+t._canReward+" =="),cc.audioEngine.resumeAll(),t._canReward?setTimeout(function(){t.onRewardAdCallBack("adCompleted")},200):t.onRewardAdCallBack("adSkipped"),t._canReward=!1},onRewardVideoShow:function(){console.log("== [AndroidXiaoMi] \u6fc0\u52b1\u89c6\u9891\u5c55\u793a =="),t.onRewardAdCallBack("rewardVideoSuccess"),t._canReward=!1,cc.audioEngine.pauseAll(),t.intercept()},onRewardVideoFail:function(){console.log("== [AndroidXiaoMi] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5931\u8d25 =="),t._canReward=!1,t.onRewardAdCallBack("adsVideoFail")},onInterstitialShow:function(){console.log("== [AndroidXiaoMi] \u63d2\u5c4f\u5c55\u793a =="),cc.audioEngine.pauseAll()},onInterstitialClose:function(){console.log("== [AndroidXiaoMi] \u63d2\u5c4f\u8df3\u8fc7 =="),cc.audioEngine.resumeAll()},onInterstitialShowFail:function(){},onFeedShow:function(){},onFeedShowFail:function(){},onFeedClose:function(){},onBannerShow:function(){},onBannerShowFailed:function(){},onBannerRemove:function(){},onBannerFeedShow:function(){},onBannerFeedShowFailed:function(){},onBannerFeedRemove:function(){},onInterstitialFeedShow:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a]"),cc.game.emit("onInterstitialFeedShow")},onInterstitialFeedShowFailed:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a\u5931\u8d25]"),cc.game.emit("onInterstitialFeedShowFailed")},onInterstitialFeedRemove:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u79fb\u9664]"),t.intercept()},onLargeFeedShow:function(){},onLargeFeedShowFailed:function(){},onLargeFeedRemove:function(){},onInterstitialFeedClick:function(){},onInterstitialClick:function(){console.log("[\u63d2\u5c4f\u70b9\u51fb]")},onUserCloseBannerFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751fbanner]")},onUserCloseLargeFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u5927\u56fe]")},onUserCloseInterstitialFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u63d2\u5c4f]"),cc.game.emit("onInterstitialFeedRemove"),t.intercept()}};window.xiaomiAdCallback=e;var o={onForeground:function(){cc.game.emit("onForeground")},onBackground:function(){}};window.appStatusCallback=o},e.prototype.intercept=function(){var t=this;this.canShowInsertAd=!1,setTimeout(function(){t.canShowInsertAd=!0},2e3)},e.prototype.onRewardAdCallBack=function(t){var e=this;setTimeout(function(){"adCompleted"==t?(console.log("[this] --\x3e \u89c6\u9891\u89c2\u770b\u5b8c\u6bd5"),cc.audioEngine.resumeAll(),e.onRewardSucFunc&&e.onRewardSucFunc(0),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[this] --\x3e \u4e2d\u9014\u5173\u95ed\u5e7f\u544a"),cc.audioEngine.resumeAll(),window.iOSSendMsg=function(){},e.onRewardSucFunc&&e.onRewardSucFunc(1)):"adsVideoFail"==t?(console.log("[this] --\x3e \u89c6\u9891\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e"),console.log("[AndroidAdCtrler] --\x3e [adsVideoFail]"),e.onRewardSucFunc&&e.onRewardSucFunc(-1),window.iOSSendMsg=function(){}):"rewardVideoSuccess"==t&&(console.log("[AndroidAdCtrler] --\x3e [rewardVideoSuccess]"),cc.audioEngine.pauseAll())},100)},e.prototype.setNativeAdId=function(t){l(d,"saveNativeAdPosId","(Ljava/lang/String;)V",t)},e.prototype.showRewardAds=function(t){this.isRewardVideo=!0,l(d,"showVideo","(Ljava/lang/String;)V",""),this.onRewardSucFunc=t,window.iOSSendMsg=this.onRewardAdCallBack.bind(this)},e.prototype.showInsert=function(){this.javaCall("showFullVideo","()V"),window.iOSSendMsg=this.onFullAdCallBack.bind(this)},e.prototype.onFullAdCallBack=function(t){"adCompleted"==t?(console.log("[AndroidAdCtrler][insertCallBack][adCompleted]"),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[AndroidAdCtrler][insertCallBack][adSkipped]"),console.log("\u4e2d\u9014\u64ad\u653e")):"adsVideoFail"==t?(console.log("[AndroidAdCtrler][insertCallBack][adsVideoFail]"),window.iOSSendMsg=function(){}):"insetVideoSuccess"==t&&console.log("[AndroidAdCtrler][insertCallBack][insetVideoSuccess]")},e.prototype.showBanner=function(){console.log("\u5c55\u793abanner"),l(d,"showBanner","()V")},e.prototype.showBannerFeed=function(t){console.log("\u5c55\u793a\u539f\u751fbanner"),l(d,"showBannerFeed","(IIII)V",2,0,0,t.ratio)},e.prototype.showLargeFeed=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),jsb.reflection.callStaticMethod(d,"showLargeFeed","(Ljava/lang/String;III)V",t,0,0,e)},e.prototype.removeLargePicFeed=function(t){void 0===t&&(t=""),jsb.reflection.callStaticMethod("com/wonder/xiaomi/XiaomiSdk","removeLargePicFeed","(Ljava/lang/String;)V",t)},e.prototype.showInterstitialFeed=function(t,e,o,n){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===n&&(n=0),this.canShowInsertAd&&jsb.reflection.callStaticMethod(d,"showInterstitialFeed","(Ljava/lang/String;IIIII)V",t,e,0,0,o,n)},e.prototype.hideBanner=function(){l(d,"removeBannerFeed","()V"),l(d,"removeBanner","()V")},e.prototype.removeBannerFeed=function(){l(d,"removeBannerFeed","()V")},e}(s.Android);r.default=p,cc._RF.pop()},{}],Android:[function(t,e,o){"use strict";cc._RF.push(e,"f27edY2HIxOF6zY0Ckxtlsy","Android");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],a=0,c=r.length;a<c;a++,i++)n[i]=r[a];return n};Object.defineProperty(r,"__esModule",{value:!0}),r.Android=void 0;var s=i("BasePlatform"),l=window.jsb&&jsb.reflection?jsb.reflection.callStaticMethod:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},d=function(t){function e(){var e=t.call(this)||this;return e._rewardAdsCb=null,e._isGetReward=!1,e.insertCallBack=null,e.rewardCallBack=null,e.nativeAdvanceBigBannerCallBack=null,e.nativeInsertBannerImgCallBack=null,e.nativeAdvanceBigBannerTotal=0,e.nativeInsertBannerImgTotal=0,e.defaultClass="org/cocos2dx/javascript/AppActivity",console.log("\u5b89\u5353"),e.bindEvents(),e}return a(e,t),e.prototype.getInstance=function(){return this},e.prototype.showRewardAds=function(){console.log("[platform] [AndroidPlatform] showRewardAds")},e.prototype.showBanner=function(){console.log("[platform] [AndroidPlatform] showBanner"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","addBanner","(Ljava/lang/String;)V",this._config.bannerID)},e.prototype.hideBanner=function(){console.log("[platform] [AndroidPlatform] hideBanner"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideBanner","()V")},e.prototype.showNativeAdvanceBigBanner=function(t,e){if(void 0===e&&(e=!1),this.nativeAdvanceBigBannerTotal>0)return t&&t();this.nativeAdvanceBigBannerTotal++,console.log("[platform] [AndroidPlatform] showNativeAdvanceBigBanner"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showNativeAdvanceBigBanner","(Z)V",e),this.nativeAdvanceBigBannerCallBack=t},e.prototype.showAdDebugger=function(){console.log("\u8c03\u7528debug"),this.javaCall("showAdDebugger","()V")},e.prototype.hideNativeAdvanceBigBanner=function(){console.log("[platform] [AndroidPlatform] hideNativeAdvanceBigBanner"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideNativeAdvanceBigBanner","()V"),this.nativeAdvanceBigBannerTotal--,this.nativeAdvanceBigBannerTotal<=0&&(this.nativeAdvanceBigBannerTotal=0)},e.prototype.showInsertBannerImg=function(t,e){if(void 0===e&&(e=!1),this.nativeInsertBannerImgTotal>0)return t&&t(0);this.nativeInsertBannerImgTotal++,console.log("[platform] [AndroidPlatform] showInsertBannerImg"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showInsertBannerImg","(Z)V",e),this.nativeInsertBannerImgCallBack=t},e.prototype.hideInsertBannerImg=function(){console.log("[platform] [AndroidPlatform] hideInsertBannerImg"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideInsertBannerImg","()V"),this.nativeInsertBannerImgTotal--,this.nativeInsertBannerImgTotal<=0&&(this.nativeInsertBannerImgTotal=0)},e.prototype.showInsert=function(){console.log("[platform] [AndroidPlatform] showInsert"),cc.game.emit("insetVideoAsk"),window.iOSSendMsg=this.insertCallBack,window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showInsertBanner","(Ljava/lang/String;)V",this._config.insertID)},e.prototype.showPrivacyPolicy=function(){console.log("[platform] [AndroidPlatform] showPrivacyPolicy"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","lookPrivacyPolicy","()V")},e.prototype.bindEvents=function(){var t=this;window.bannerShow=function(){console.log("[platform] [AndroidPlatform] bannerShow")},window.bannerShow_err=function(){console.log("[platform] [AndroidPlatform] bannerShow_err")},window.clickBanner=function(){console.log("[platform] [AndroidPlatform] clickBanner")},window.videoUnfinish=function(){console.log("[platform] [AndroidPlatform] videoUnfinish"),setTimeout(function(){t._rewardAdsCb&&t._rewardAdsCb(1),t._rewardAdsCb=null},200)},window.videoFinish=function(){console.log("[platform] [AndroidPlatform] videoFinish"),setTimeout(function(){t._rewardAdsCb&&t._rewardAdsCb(0),t._rewardAdsCb=null},200)},window.videoError=function(){console.log("[platform] [AndroidPlatform] videoError"),setTimeout(function(){t._rewardAdsCb&&t._rewardAdsCb(-1),t._rewardAdsCb=null},200)},window.insetVideoSuccess=function(){console.log("[platform] [AndroidPlatform] insetVideoSuccess")},window.rewardVideoSuccess=function(){console.log("[platform] [AndroidPlatform] rewardVideoSuccess")};var e={onRequestPermissionsSuccess:function(){console.log("[platform] [AndroidPlatform] \u6743\u9650\u83b7\u53d6\u6210\u529f")},onRequestPermissionsFail:function(){console.log("[platform] [AndroidPlatform] \u6743\u9650\u83b7\u53d6\u5931\u8d25")},onRequestFailAndNeverAsk:function(){console.log("[platform] [AndroidPlatform] \u6743\u9650\u83b7\u53d6\u5931\u8d25\u4e14\u7528\u6237\u70b9\u9009\u4e0d\u518d\u8be2\u95ee")},onPrivacyAccept:function(){console.log("[platform] [AndroidPlatform] \u540c\u610f\u9690\u79c1\u534f\u8bae")},onPrivacyReject:function(){console.log("[platform] [AndroidPlatform] \u62d2\u7edd\u9690\u79c1\u534f\u8bae")},onRewardVideoShow:function(){console.log("[platform] [AndroidPlatform] \u6fc0\u52b1\u89c6\u9891\u5c55\u793a"),cc.audioEngine.pauseAll(),window.rewardVideoSuccess(),t._isGetReward=!1},onRewardVideoComplete:function(){console.log("[platform] [AndroidPlatform] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5b8c\u6210"),t._isGetReward=!0},onRewardVideoClose:function(){console.log("[platform] [AndroidPlatform] \u6fc0\u52b1\u89c6\u9891\u5173\u95ed \u662f\u5426\u53d1\u653e\u5956\u52b1:",t._isGetReward),cc.audioEngine.resumeAll(),t._isGetReward?setTimeout(function(){window.videoFinish()},200):window.videoUnfinish(),t._isGetReward=!1},onRewardVideoFail:function(){console.log("[platform] [AndroidPlatform] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5931\u8d25"),window.videoError(),t._isGetReward=!1},onInterstitialShow:function(){console.log("[platform] [AndroidPlatform] \u63d2\u5c4f\u5c55\u793a"),window.insetVideoSuccess(),cc.audioEngine.pauseAll()},onInterstitialClose:function(){console.log("[platform] [AndroidPlatform] \u63d2\u5c4f\u8df3\u8fc7"),cc.audioEngine.resumeAll()},onFeedRenderSuccess:function(){console.log("[platform] [AndroidPlatform] \u4fe1\u606f\u6d41\u6e32\u67d3\u6210\u529f")},onFeedRenderFail:function(){console.log("[platform] [AndroidPlatform] \u4fe1\u606f\u6d41\u6e32\u67d3\u5931\u8d25")},onSplashShow:function(){console.log("[platform] [AndroidPlatform] onSplashShow")},onSplashClose:function(){console.log("[platform] [AndroidPlatform] onSplashClose")},onUnionSdkInitSuccess:function(){console.log("[platform] [AndroidPlatform] \u805a\u5408sdk\u521d\u59cb\u5316\u6210\u529f")},onNativeAdvanceBigBannerShow:function(){console.log("[platform] [AndroidPlatform] \u539f\u751f\u5927\u56fe\u6210\u529f\u5c55\u793a"),t.nativeAdvanceBigBannerCallBack&&t.nativeAdvanceBigBannerCallBack(),t.nativeAdvanceBigBannerCallBack=null},onInsertBannerImgClose:function(){console.log("[platform] [AndroidPlatform] \u63d2\u5c4f\u56fe\u7247\u5173\u95ed\u5c55\u793a"),t.nativeInsertBannerImgCallBack&&t.nativeInsertBannerImgCallBack(0),t.nativeInsertBannerImgCallBack=null,t.nativeInsertBannerImgTotal--,t.nativeInsertBannerImgTotal<=0&&(t.nativeInsertBannerImgTotal=0)},onBannerShow:function(){},onBannerRemoved:function(){console.log("onBannerRemoved"),cc.game.emit("onBannerRemoved")}};window.unionSdkCallback=e,this.insertCallBack=function(t){"adCompleted"==t?console.log("[AndroidAdCtrler][insertCallBack][adCompleted]"):"adSkipped"==t?(console.log("[AndroidAdCtrler][insertCallBack][adSkipped]"),cc.game.emit("adSkipped"),console.log("\u4e2d\u9014\u64ad\u653e")):"adsVideoFail"==t?(console.log("[AndroidAdCtrler][insertCallBack][adsVideoFail]"),cc.game.emit("adsVideoFail"),window.iOSSendMsg=function(){}):"insetVideoSuccess"==t&&(cc.game.emit("insetVideoSuccess"),console.log("[AndroidAdCtrler][insertCallBack][insetVideoSuccess]"))},this.rewardCallBack=function(e){"adCompleted"==e?(console.log("[AndroidAdCtrler][rewardCallBack][videoFinish] \u770b\u5b8c\u5e7f\u544a"),window.iOSSendMsg=function(){},t._rewardAdsCb&&t._rewardAdsCb(0),t._rewardAdsCb=null,cc.audioEngine.resumeAll()):"adSkipped"==e?(console.log("[AndroidAdCtrler][rewardCallBack][videoUnfinish] \u4e2d\u9014\u5e7f\u544a"),cc.audioEngine.resumeAll(),window.iOSSendMsg=function(){},t._rewardAdsCb&&t._rewardAdsCb(1),t._rewardAdsCb=null):"adsVideoFail"==e?(console.log("[AndroidAdCtrler][rewardCallBack][adsVideoFail]"),window.iOSSendMsg=function(){},t._rewardAdsCb&&t._rewardAdsCb(1),t._rewardAdsCb=null,cc.audioEngine.resumeAll()):"rewardVideoSuccess"==e&&(console.log("[AndroidAdCtrler][rewardCallBack][rewardVideoSuccess]"),cc.audioEngine.pauseAll())},window.androidSignInClose=function(){setTimeout(function(){cc.game.emit("androidSignInClose")},0)},window.androidSignInSuc=function(){setTimeout(function(){cc.game.emit("androidSignInSuc")},0)},window.insetVideoSkip=function(){cc.game.emit("interad_close")},window.insetVideoClose=function(){cc.game.emit("interad_close")},window.adNotReady=function(){cc.game.emit("adNotReady")}},e.prototype.report=function(t,e){"number"==typeof e&&(e=e.toString())},e.prototype.javaCall=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return l.apply(void 0,c([this.defaultClass],t))},e.prototype.showMoreGame=function(){this.javaCall("jumpLeisureSubject","()V")},e.prototype.signIn=function(){console.log("\u8c03\u7528\u767b\u5f55"),this.javaCall("signIn","()V")},e.prototype.gameComment=function(){this.javaCall("onCommentBtn","()V")},e}(s.BasePlatform);r.Android=d,cc._RF.pop()},{}],Api:[function(t,e,o){"use strict";cc._RF.push(e,"9c193marbdExb2qZAnPEXpF","Api");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.serverTime=i.getOpenid=i.report=i.click=void 0;var r=n("Request"),a=n("config"),c=n("md5");i.click=function(t,e,o,n){void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),void 0===n&&(n=function(){}),r.default.post({url:a.DOMAIN+"/common/app-track/click",data:t,dataType:"json",success:e,fail:o,complete:n})},i.report=function(t,e,o,n){void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),void 0===n&&(n=function(){}),r.default.post({url:a.DOMAIN+"/common/user-op/op-merge-report?trace_id="+c.md5((Math.round(Date.now()/1e3)+1e3*Math.random()).toString()),data:t,dataType:"json",success:e,fail:o,complete:n})},i.getOpenid=function(t,e,o,n){void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),void 0===n&&(n=function(){}),r.default.post({url:a.DOMAIN+"/common/tt/session/sign_in",data:t,dataType:"json",success:e,fail:o,complete:n})},i.serverTime=function(t,e,o){void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),r.default.get({url:a.DOMAIN+"/common/common/time",dataType:"json",success:t,fail:e,complete:o})},cc._RF.pop()},{}],App:[function(t,e,o){"use strict";cc._RF.push(e,"5952891SnBNaZF4y1ZkrNHW","App");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),i("EventConst");var s=i("PlatformConst"),l=i("SceneConst"),d=i("UserConst"),p=i("AudioManager"),h=i("BmsManager"),u=(i("EventManager"),i("LanguageManager")),f=i("PlatformManager"),g=i("ReportManager"),m=i("SceneManager"),y=i("TipManager"),v=i("UserManager"),_=(i("ChallengeHttp"),i("CopyRightDialog")),C=i("OPPOAndroidAdUtils"),w=i("XMADUtils"),P={zh:0,en:0,ja:1,tw:2},b=cc._decorator,T=b.ccclass,S=b.property,A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loading=null,e.fonts=[],e.OPPOClickBtn=null,e.internalDefaultBMS={isAuditing:0,isAuditingLevelMap:1,configSuffix:"",TiLi:60,WuxianTiLi:1,BuchongTiLi:20,fullAdsType:0,fullScreenAd:"no",AdIntervals:0,bannerAdIntervals:0,startWinFullScreenAd:3,spaceWinFullScreenAd:3,spaceWinFullScreenAdND:3,startLevelWinFullScreenAds:11,spaceLevelWinFullScreenAd:3,GM:0,ugc:0,ugcad:0,newmodead:1,evaluatelv:[1200,2500,5e3],evaluatebtndelay:2,evaluatestar:5,keyVideo:7,AllThemeUnlock:0,UnlockThemeMainLv:[10,10],UnlockThemeSubLv:[5,10],UnlockThemeList:[1,6,7,4,3,2,5]},e.externalDefaultBMS={isAuditing:0,isAuditingLevelMap:1,configSuffix:"",TiLi:0,WuxianTiLi:0,BuchongTiLi:20,fullAdsType:0,fullScreenAd:"all",AdIntervals:0,bannerAdIntervals:0,startWinFullScreenAd:3,spaceWinFullScreenAd:1,spaceWinFullScreenAdND:1,startLevelWinFullScreenAds:11,spaceLevelWinFullScreenAd:1,GM:0,ugc:0,ugcad:0,newmodead:1,evaluatelv:[1200,2500,5e3],evaluatebtndelay:2,evaluatestar:5,keyVideo:7,AllThemeUnlock:0,UnlockThemeMainLv:[10,10],UnlockThemeSubLv:[5,10],UnlockThemeList:[1,6,7,4,3,2,5]},e.isEnterMain=!1,e.abBunds={},e}return a(e,t),e.prototype.onLoad=function(){this.initMgr(),this.initEvent(),(new _.default).init()},e.prototype.startOppo=function(){var t=this,e=f.Platform.getConfig().flag,o=f.Platform.getConfig().version;if(-1!=e.indexOf("oppo")||-1!=o.indexOf("oppo")){var n=h.BMS.getKey("isCheck");console.log("[isCheck-showSplash]",n),n||(this.showInterstitialFeedTimer(),this.OPPOClickBtn.on(cc.Node.EventType.TOUCH_START,function(){var e=f.Platform.getConfig().flag,o=f.Platform.getConfig().version;-1==e.indexOf("oppo")&&-1==o.indexOf("oppo")||(console.log("oppo\u76d1\u542c\u5230\u73a9\u5bb6\u64cd\u4f5c"),t.unscheduleAllCallbacks(),t.showInterstitialFeedTimer())},this),this.OPPOClickBtn._touchListener&&this.OPPOClickBtn._touchListener.setSwallowTouches(!1))}cc.game.on("onBannerRemoved",this.onBannerRemoved,this)},e.prototype.onBannerRemoved=function(){console.log("bannerAdCounter",0),f.Platform.bannerAdCounter=0},e.prototype.showInterstitialFeedTimer=function(){var t=this,e=h.BMS.getKey("timeTC");this.scheduleOnce(function(){console.log("\u957f\u65f6\u95f4\u6ca1\u64cd\u4f5c,\u81ea\u52a8\u5f39\u51fa\u63d2\u5c4f"),C.OPPOAndroidAd.showInterstitialFeed(),t.showInterstitialFeedTimer2()},e)},e.prototype.showInterstitialFeedTimer2=function(){var t=this;this.scheduleOnce(function(){C.OPPOAndroidAd.removeInterstitialFeed()},30),this.scheduleOnce(function(){C.OPPOAndroidAd.showInterstitialFeed(),t.showInterstitialFeedTimer2()},31)},e.prototype.initMgr=function(){f.Platform.startInit();var t=u.default.instance;t.init(),t.setFont(this.fonts[P[t.lan]]),p.Audio.init(),g.Report.init(),this.initStopDebug(),this.initBMS()},e.prototype.initStopDebug=function(){cc.sys.isMobile&&cc.view.enableAutoFullScreen(!1)},e.prototype.initEvent=function(){cc.game.on("adNotReady",this.adNotReady,this),cc.game.on("iosApplicationDidBecomeActive",this.iosApplicationDidBecomeActive,this),cc.game.on("onForeground",this.onForeground,this)},e.prototype.onForeground=function(){w.XMAD.onForeground()},e.prototype.iosApplicationDidBecomeActive=function(){var t=h.BMS.getKey("splash");if(t){var e=v.User.get(d.UserData.loginDaysTimes);console.log("\u767b\u9646\u5929\u6570",e,"splash",t),e>=t&&(console.log("\u6253\u5f00\u5f00\u5c4f"),f.Platform.showOpenAd())}},e.prototype.adNotReady=function(){y.Tip.show("Ad Not Ready!")},e.prototype.initBMS=function(){var t=this,e=f.Platform.getConfig().version,o=cc.sys,n=o.platform;n!=o.IPHONE&&n!=o.IPAD||(e=jsb.reflection.callStaticMethod("AppController","gainIOSBMSVersion"),console.log("\u83b7\u5f97\u7248\u672c\u53f7",e),window.haiwai?h.BMS.setDefaultData(this.externalDefaultBMS):h.BMS.setDefaultData(this.internalDefaultBMS));var i=void 0,r=f.Platform.getConfig().flag,a=f.Platform.getConfig().version;-1==r.indexOf("oppo")&&-1==a.indexOf("oppo")||(i="oppo"),-1==r.indexOf("ios")&&-1==a.indexOf("ios")||(i="ios"),h.BMS.init(f.Platform.getConfig().flag,e,function(){f.Platform.is(s.EPlatform.IOS)&&h.BMS.checkKey("isAdsTrack")&&jsb.reflection.callStaticMethod("AppController","gainGameState:",1);var e=h.BMS.getKey("configSuffix");f.Platform.getConfig().configSuffix=e,t.sucEnterMain()},i).catch(function(){console.log("BMS\u52a0\u8f7d\u5931\u8d25")}),this.scheduleOnce(function(){console.log("\u4e24\u79d2\u6ca1\u8df3\u8f6c\u76f4\u63a5\u8fdb\u5165"),t.sucEnterMain()},2)},e.prototype.sucEnterMain=function(){var t=v.User.get("uuid")||this.guid();v.User.set("uuid",t),console.log("uuid",t),f.Platform.taInit(t),this.startOppo(),this.isEnterMain||(this.isEnterMain=!0,this.scheduleOnce(function(){m.Scene.loadScene(l.SceneConst.Home,null,!1)},f.Platform.getConfig().loadingDelay+2))},e.prototype.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},e.prototype.loadAssetsBundle=function(t,e){var o=this;cc.assetManager.loadBundle(t,function(n,i){null!==n?(console.log("[ResMgr]:Load AssetsBundle Error: "+t),o.abBunds[t]=null):(console.log("[ResMgr]:Load AssetsBundle Success: "+t),o.abBunds[t]=i),e&&e()})},c([S(cc.Node)],e.prototype,"loading",void 0),c([S([cc.TTFFont])],e.prototype,"fonts",void 0),c([S(cc.Node)],e.prototype,"OPPOClickBtn",void 0),c([T],e)}(cc.Component);r.default=A,cc._RF.pop()},{}],AudioConst:[function(t,e,o){"use strict";cc._RF.push(e,"17e98iahj5KEZASiyBT+WGN","AudioConst");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.AudioConst=void 0,function(t){t.CLICK="audio/click",t.BGM_MAIN="audio/bgmMain",t.GAME_WIN="audio/game_win",t.GAME_FAIL="audio/game_fail",t.CLICK_DINGZI="audio/bobo",t.CLICK_DINGZICUOWU="audio/cuowu",t.GAME_GOLD="audio/gamegold",t.BGM_GAME="audio/bgmGame"}(n.AudioConst||(n.AudioConst={})),cc._RF.pop()},{}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"c843dkp+89EnK8NseHJe9h5","AudioManager");var n=t,i=o,r=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.Audio=void 0;var c=n("AudioConst"),s=function(){function t(){this.node=null,this.musicMute=0,this.effectMute=0,this.effectVolume=1,this.musicVolume=1,this.musicAs=null,this.effectAs=[],this.curAs=0,this.pathPrefix="audio/",this.currentBgm=null}return t.prototype.readLocalAudio=function(){var t=cc.sys.localStorage.getItem("musicMute");t=t?parseInt(t):0,this.musicMute=t;var e=cc.sys.localStorage.getItem("effectMute");e=e?parseInt(e):0,this.effectMute=e,cc.sys.localStorage.setItem("musicMute",this.musicMute),cc.sys.localStorage.setItem("effectMute",this.effectMute),window.musicMute=this.musicMute,window.effectMute=this.effectMute},t.prototype.init=function(){this.readLocalAudio(),this.node=cc.find("Canvas"),this.musicAs=this.node.addComponent(cc.AudioSource),this.musicAs.volume=this.musicVolume,1===this.musicMute&&(this.musicAs.volume=0);for(var t=0;t<8;t++){var e=this.node.addComponent(cc.AudioSource);this.effectAs.push(e),e.volume=this.effectVolume,1===this.effectMute&&(e.volume=0)}this.curAs=0,cc.game.on("playClickAudio",this.playClickAudio,this),cc.game.on("set_music_mute",this.setMusicMute,this),cc.game.on("set_effect_mute",this.setEffectMute,this)},t.prototype.playClickAudio=function(){this.playEffect(c.AudioConst.CLICK)},t.prototype.getMusicVolume=function(){return this.musicVolume},t.prototype.setMusicVolume=function(t){this.musicVolume=t,this.musicAs.volume=t,cc.sys.localStorage.setItem("musicVolume",t)},t.prototype.getMusicMute=function(){return this.musicMute},t.prototype.setMusicMute=function(t){var e=t?1:0;this.musicMute!=e&&(this.musicMute=e,1===this.musicMute?this.musicAs.volume=0:this.musicAs.volume=this.musicVolume,cc.sys.localStorage.setItem("musicMute",e),window.musicMute=this.musicMute)},t.prototype.getEffectVolume=function(){return this.effectVolume},t.prototype.setEffectVolume=function(t){for(var e=0;e<this.effectAs.length;e++)this.effectAs[e].volume=t;this.effectVolume=t,cc.sys.localStorage.setItem("effectVolume",t)},t.prototype.getEffectMute=function(){return this.effectMute},t.prototype.setEffectMute=function(t){var e=t?1:0;if(this.effectMute!=e){this.effectMute=e;for(var o=0;o<this.effectAs.length;o++)1===this.effectMute?this.effectAs[o].volume=0:this.effectAs[o].volume=this.effectVolume;cc.sys.localStorage.setItem("effectMute",e),window.effectMute=this.effectMute}},t.prototype.playMusic=function(t,e){return void 0===t&&(t="bgm"),void 0===e&&(e=!0),r(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return this.stopMusic(),this.currentBgm=t,e=!!e,this.musicAs.loop=e,o=this.musicAs,[4,this.load(t)];case 1:return o.clip=n.sent(),this.musicAs.clip?this.musicAs.play():cc.error("music audio clip null: ",t),[2]}})})},t.prototype.load=function(t){return new Promise(function(e,o){cc.resources.load(t,function(t,n){return t?(cc.error(t),o()):e(n)})})},t.prototype.stopMusic=function(){this.musicAs.stop()},t.prototype.playEffect=function(t){return r(this,void 0,void 0,function(){var e,o;return a(this,function(n){switch(n.label){case 0:return e=this.effectAs[this.curAs],this.curAs++,this.curAs>=8&&(this.curAs=0),o=e,[4,this.load(t)];case 1:return o.clip=n.sent(),e.clip?e.play():cc.error("effect audio clip null: ",t),[2]}})})},t}();i.Audio=new s,cc._RF.pop()},{}],AudioSwitch:[function(t,e,o){"use strict";cc._RF.push(e,"82609iuVnlJgrfh978tkuTD","AudioSwitch");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("AudioManager"),l=cc._decorator,d=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e}return a(e,t),e.prototype.onLoad=function(){0===this.type?(this.musicMute=s.Audio.getMusicMute(),this.musicMute?(console.log("\u9759\u97f3"),this.node.getChildByName("off").active=!0,this.node.getChildByName("on").active=!1):(console.log("\u6709\u97f3"),this.node.getChildByName("off").active=!1,this.node.getChildByName("on").active=!0)):1===this.type&&(this.effectMute=s.Audio.getEffectMute(),this.effectMute?(this.node.getChildByName("off").active=!0,this.node.getChildByName("on").active=!1):(this.node.getChildByName("off").active=!1,this.node.getChildByName("on").active=!0))},e.prototype.switchHandle=function(){var t;0===this.type?(t=s.Audio.getMusicMute()?0:1,console.log("\u6d4b\u8bd5",this.musicMute,t),cc.game.emit("set_music_mute",t)):1===this.type&&(console.log("this.effectMute",this.effectMute),t=s.Audio.getEffectMute()?0:1,cc.game.emit("set_effect_mute",t)),0==this.type&&console.log("b_mute",this.type,t),t?(this.node.getChildByName("off").active=!0,this.node.getChildByName("on").active=!1):(this.node.getChildByName("off").active=!1,this.node.getChildByName("on").active=!0)},c([p],e.prototype,"type",void 0),c([d],e)}(cc.Component);r.default=h,cc._RF.pop()},{}],BallItem2:[function(t,e,o){"use strict";cc._RF.push(e,"55b15urjoxEU74Q53JH0dje","BallItem2");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.line=null,e.circle=null,e.labNumber=null,e.isMove=!1,e.isCollider=!1,e.speed=1500,e.limitedY=0,e.isInit=!1,e.isConnected=!1,e.value=0,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){this.line=this.node.getChildByName("line"),this.circle=this.node.getChildByName("circle");var t=this.circle.getChildByName("labNumber");this.labNumber=t.getComponent(cc.Label)},e.prototype.init=function(t,e,o){this.mgr=o,this.line.color=t,this.circle.color=t,this.value=e,this.updateLabel(),this.isInit=!0},e.prototype.update=function(t){this.isInit&&(this.mgr.isEnd||this.isMove&&!this.isCollider&&(this.node.y+=t*this.speed))},e.prototype.updateLabel=function(){0===this.value?this.labNumber.node.active=!1:(this.labNumber.node.active=!0,this.labNumber.string=this.value.toString())},e.prototype.onCollisionEnter=function(t){if(this.isInit&&!this.mgr.isEnd&&!this.isCollider)if(this.isCollider=!0,2===t.tag)this.mgr.ballToCircle(),this.isMove=!1;else{var e=t.node.getComponent(o);e.isCollider=!0,this.isConnected?(t.node.active=!1,this.circle.opacity=255,this.value=e.value,this.updateLabel()):(this.node.active=!1,e.circle.opacity=255,e.value=this.value,e.updateLabel(),this.node.removeFromParent(),this.node.parent=e.node.parent,this.node.setPosition(0,0)),this.mgr.ballToBall()}},o=a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],BallItem3:[function(t,e,o){"use strict";cc._RF.push(e,"b58d3MXpSlP6JJaOWNG0UNp","BallItem3");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.line=null,e.circle=null,e.labNumber=null,e.isMove=!1,e.isCollider=!1,e.speed=1500,e.limitedY=0,e.isInit=!1,e.isConnected=!1,e.value=0,e}return r(e,t),e.prototype.onLoad=function(){this.line=this.node.getChildByName("line"),this.circle=this.node.getChildByName("circle");var t=this.circle.getChildByName("labNumber");this.labNumber=t.getComponent(cc.Label)},e.prototype.init=function(t,e,o){this.mgr=o,this.line.color=t,this.circle.color=t,this.value=e,this.updateLabel(),this.line.opacity=0,this.isInit=!0},e.prototype.update=function(t){this.isInit&&(this.mgr.isEnd||this.isMove&&!this.isCollider&&(this.node.y+=t*this.speed))},e.prototype.updateLabel=function(){0===this.value?this.labNumber.node.active=!1:(this.labNumber.node.active=!0,this.labNumber.string=this.value.toString())},e.prototype.onCollisionEnter=function(t){this.isInit&&(this.mgr.isEnd||this.isCollider||(this.isCollider=!0,cc.log("\u81ea\u5df1\u7684\u989c\u8272",this.node.colorIndex),cc.log("\u53e6\u5916\u7684\u989c\u8272",t.node.colorIndex),0===t.tag&&this.node.colorIndex===t.node.colorIndex?(this.node.active=!1,this.node.removeFromParent(),this.mgr.colliderRight(this.node.colorIndex)):this.mgr.colliderWrong()))},a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],BallItem:[function(t,e,o){"use strict";cc._RF.push(e,"7acbb39cv5PjL0a6RaU7W7W","BallItem");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.line=null,e.circle=null,e.labNumber=null,e.isMove=!1,e.isCollider=!1,e.speed=1500,e.limitedY=0,e.isInit=!1,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){this.line=this.node.getChildByName("line"),this.circle=this.node.getChildByName("circle");var t=this.circle.getChildByName("labNumber");this.labNumber=t.getComponent(cc.Label),"itemLayer"==this.node.parent.name&&(this.line.opacity=0)},e.prototype.init=function(t,e,o){this.mgr=o,this.line.color=t,this.circle.color=t,this.labNumber.string=e.toString(),this.labNumber.node.active=0!==e;var n=this.mgr.container,i=n.parent.convertToWorldSpaceAR(n.position),r=this.node.parent.convertToNodeSpaceAR(i);this.limitedY=r.y-this.node.height,this.isInit=!0},e.prototype.update=function(t){this.isInit&&(this.mgr.isEnd||this.isMove&&!this.isCollider&&(this.node.y+=t*this.speed,this.node.y>=this.limitedY&&(this.line.opacity=255,cc.game.emit("ball_circle",this.node.uuid),this.isMove=!1)))},e.prototype.onCollisionEnter=function(t){this.isInit&&(this.mgr.isEnd||this.isCollider||(cc.log("iscollider"),this.line.opacity=255,this.isCollider=!0,t.node.getComponent(o).isCollider=!0,cc.game.emit("ball_ball",this.node.uuid)))},o=a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],BasePlatform:[function(t,e,o){"use strict";cc._RF.push(e,"e11e6AeupRLB6UmCWyKBjp9","BasePlatform");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.BasePlatform=void 0;var i=function(){function t(){}return t.prototype.setConfig=function(t){this._config=t},t.prototype.showRewardAds=function(t){return t(0)},t.prototype.showAdDebugger=function(){},t.prototype.login=function(){return new Promise(function(t){t(null)})},t.prototype.signIn=function(){},t.prototype.shareRecordCap=function(t){return t(0)},t.prototype.startRecordCap=function(){},t.prototype.stopRecordCap=function(){},t.prototype.showBanner=function(t){void 0===t&&(t={id:""})},t.prototype.hideBanner=function(){},t.prototype.clickAdJump=function(){},t.prototype.share=function(){cc.game.emit("shareSuc")},t.prototype.showInsert=function(){},t.prototype.destroyInsert=function(){},t.prototype.showOpenAd=function(){},t.prototype.gainIOSBMSVersion=function(){},t.prototype.showInsertImg=function(){},t.prototype.showNativeAdvanceBigBanner=function(t,e){void 0===e&&(e=!1)},t.prototype.showSplashAd=function(){},t.prototype.showNativeAdvanceBannerType=function(){},t.prototype.hideNativeAdvanceBigBanner=function(){},t.prototype.saveNativeAdPosId=function(){},t.prototype.getWxScene=function(){return 0},t.prototype.showBlockAds=function(){},t.prototype.hideBlockAds=function(){},t.prototype.gameLog=function(){},t.prototype.gameTimePageLog=function(){},t.prototype.gameLevelLog=function(){},t.prototype.showPrivacyPolicy=function(){},t.prototype.report=function(){},t.prototype.showMoreGame=function(){},t.prototype.showBannerFeed=function(){},t.prototype.showBannerFeed2=function(){},t.prototype.showSplash=function(){},t.prototype.removeBannerFeed=function(){},t.prototype.gameComment=function(){console.log("\u8df3\u8f6c\u5230\u8bc4\u5206")},t.prototype.showInterstitialFeed=function(t,e,o,n){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===n&&(n=0)},t.prototype.removeLargePicFeed=function(){},t.prototype.removeInterstitialFeed=function(){},t.prototype.showLargeFeed=function(t,e){void 0===e&&(e=0)},t.prototype.getShareStatus=function(){return null},t.prototype.showNativeAds=function(){},t.prototype.hideNativeAds=function(){},t.prototype.showAppBoxAds=function(){},t.prototype.hideAppBoxAds=function(){},t.prototype.changeBlockAdsPos=function(){},t.prototype.showInsertBannerImg=function(t,e){void 0===e&&(e=!1)},t.prototype.hideInsertBannerImg=function(){},t.prototype.hideCustomAd1=function(){},t.prototype.hideCustomAd2=function(){},t.prototype.showCustomAd1=function(){},t.prototype.showCustomAd2=function(){},t.prototype.showCustomAd=function(){},t.prototype.hideCustomAd=function(){},t.prototype.showCustomAd_1=function(){},t.prototype.showCustomAd_2=function(){},t.prototype.hideCustomAd_1=function(){},t.prototype.hideCustomAd_2=function(){},t.prototype.taInit=function(){},t.prototype.follow=function(t){t(0)},t}();n.BasePlatform=i,cc._RF.pop()},{}],BaseUI:[function(t,e,o){"use strict";cc._RF.push(e,"7bbb1IoePRKOomJZz3+A/Cg","BaseUI");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dict={},e.childNum=0,e}return r(e,t),e.prototype.onLoad=function(){this.node.setContentSize(cc.winSize),this.loadAllObj(this.node)},e.prototype.loadAllObj=function(t,e){if(void 0===e&&(e=""),"_"!=t.name[0]&&-1==t.name.indexOf("copy")){var o=e,n="";this.childNum&&(o=e+t.name,this.dict[t.name]||(this.dict[t.name]=t),n=o+"/");for(var i=0;i<t.children.length;++i)this.childNum++,this.loadAllObj(t.children[i],n)}},e.prototype.addBtnOn=function(t,e,o){var n=this.dict[t];if(!n)return cc.warn("\u6ca1\u6709"+t+"\u8be5\u8282\u70b9");n.getComponent(cc.Button)||n.addComponent(cc.Button);var i=n.getComponent(cc.Button);i.transition=cc.Button.Transition.SCALE,i.duration=.1,i.zoomScale=1.2,n.on(cc.Node.EventType.TOUCH_END,function(){cc.game.emit("playClickAudio"),e.call(o)},this)},a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],BaseboardItem:[function(t,e,o){"use strict";cc._RF.push(e,"3eb06s9yotJKJmE+7KfArNG","BaseboardItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("EventConst"),d=i("UserConst"),p=i("EventManager"),h=i("UserManager"),u=cc._decorator,f=u.ccclass,g=u.property;(function(t){t[t.lock=0]="lock",t[t.getNoUnlock=1]="getNoUnlock",t[t.unlockNoUse=2]="unlockNoUse",t[t.unlockUse=3]="unlockUse"})(s||(s={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lock=null,e.unlockNoUse=null,e.unlockUse=null,e.param=null,e.state=s.lock,e.starAmount=0,e.skinNameArr=[],e}return a(e,t),e.prototype.onLoad=function(){this.skinNameArr=new Array(6).fill("pifu").map(function(t,e){return t+(e+1)})},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.state=this.param.eState,this.refresh()},e.prototype.refresh=function(){var t=this,e=this.param.index+1;this.lock.active=!1,this.unlockNoUse.active=!1,this.unlockUse.active=!1,cc.resources.load("texture/skin/diban_"+e,function(e,o){if(e)return console.log(e);switch(t.unlockNoUse.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),t.state){case s.lock:t.unlockNoUse.active=!0,t.lock.active=!0;break;case s.unlockNoUse:t.unlockNoUse.active=!0;break;case s.unlockUse:t.unlockNoUse.active=!0,t.unlockUse.active=!0}})},e.prototype.clickEnter=function(){if(h.User.setTempData("chooseSkinPage",1),h.User.setTempData("chooseSkin",this.param.index+1),!this.unlockUse.active&&!this.lock.active){var t=h.User.get(d.UserData.useSkinIDList);t[1]=this.param.index,h.User.set(d.UserData.useSkinIDList,t),p.Event.emit(l.default.update_use_skin)}},e.state=s,c([g(cc.Node)],e.prototype,"lock",void 0),c([g(cc.Node)],e.prototype,"unlockNoUse",void 0),c([g(cc.Node)],e.prototype,"unlockUse",void 0),c([f],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],BeadCurtainsItem:[function(t,e,o){"use strict";cc._RF.push(e,"36d580KGCNFtowWP7cJ9VnC","BeadCurtainsItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("ClickLock"),d=cc._decorator,p=d.ccclass,h=d.property;(function(t){t[t.Bead=0]="Bead",t[t.Curtains=1]="Curtains"})(s||(s={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currType=s.Bead,e.mgr=null,e.isMove=!1,e.touchStartPos=null,e.prev=null,e.next=null,e.backTweenTime=.2,e.isExit=!1,e}var o;return a(e,t),o=e,e.prototype.init=function(t){cc.log("[BeadCurtainsItem] init"),this.mgr=t},e.prototype.onLoad=function(){this.initEvent()},e.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){var e=this;if(!this.mgr.currTouchNode&&!this.mgr.isAnimation&&!this.mgr.isEnd){var o=function(){e.mgr.currTouchNode=t.target,e.mgr.isTouching=!0,e.recordTouchStartPos(),e.updateSelected(!0),e.mgr.isCollision=!1,e.mgr.isPlayConnect=!1,e.mgr.playBreakAndConnectSound(),e.mgr.canCollision=!0};this.mgr.isGuidance?this.mgr.guidanceNodeList[this.mgr.currGuidanceIndex]==t.target&&o():o()}},e.prototype.onTouchMove=function(t){var e=this;if(this.mgr.currTouchNode&&(!this.mgr.isTouching||this.mgr.currTouchNode.uuid==t.target.uuid)&&this.mgr.isTouching&&!this.mgr.isEnd&&!this.mgr.isAnimation){var o=function(){e.mgr.isCollision||e.move(t.getDelta())};this.mgr.isGuidance?this.mgr.guidanceNodeList[this.mgr.currGuidanceIndex]==t.target&&o():o()}},e.prototype.resetTouchTag=function(){this.mgr.isTouching=!1,this.mgr.currTouchNode=null,this.mgr.canCollision=!1},e.prototype.onTouchEnd=function(t){var e=this;if(this.mgr.currTouchNode&&(!this.mgr.isTouching||this.mgr.currTouchNode.uuid==t.target.uuid)&&this.mgr.isTouching&&(this.mgr.currTouchNode.uuid==t.target.uuid&&this.resetTouchTag(),!this.mgr.isEnd&&!this.mgr.isAnimation)){var o=function(){e.updateSelected(!1),e.mgr.isCollision||(e.back(),e.mgr.isAnimation=!1,e.mgr.isCollision=!1,e.scheduleOnce(function(){},e.backTweenTime+.1))};this.mgr.isGuidance?this.mgr.guidanceNodeList[this.mgr.currGuidanceIndex]==t.target&&o():o()}},e.prototype.recordTouchStartPos=function(){this.touchStartPos=this.node.position,this.next&&this.next.getComponent(o).recordTouchStartPos()},e.prototype.move=function(t){this.node.position=this.node.position.add(t),this.next&&this.next.getComponent(o).move(t)},e.prototype.back=function(){this.node.position=this.touchStartPos,this.mgr.playBreakAndConnectSound(),this.next&&this.next.getComponent(o).back()},e.prototype.onCollisionEnter=function(t,e){if(!this.mgr.isEnd&&!this.mgr.isCollision&&!this.mgr.isAnimation&&this.mgr.canCollision&&this.mgr.currTouchNode&&e.node.uuid==this.mgr.currTouchNode.uuid)if(0==t.tag){if(this.prev&&this.prev.uuid==t.node.uuid)return;var n=t.node.getComponent(o);n&&null==n.next&&this.node.name==t.node.name&&(this.updateSelected(!1),this.mgr.isCollision=!0,this.node.parent!=t.node.parent&&this.updateParent(t.node.parent),this.prev&&(this.prev.getComponent(o).next=null),this.prev=t.node,n.next=this.node,this.updatePosition(),e.node==this.mgr.currTouchNode&&this.resetTouchTag())}else if(1==t.tag&&0==e.tag){var i=t.node.name.indexOf(this.node.name)>=0;0==t.node.children[0].childrenCount&&i&&(this.updateSelected(!1),this.mgr.isCollision=!0,this.node.parent!=t.node.children[0]&&this.updateParent(t.node.children[0]),this.prev&&(this.prev.getComponent(o).next=null,this.prev=null),this.updatePosition(!1),e.node==this.mgr.currTouchNode&&this.resetTouchTag())}},e.prototype.updateSelected=function(t){this.node.getComponent(cc.Sprite).spriteFrame=this.mgr.getSpriteFrame(t,this.node.name),this.next&&this.next.getComponent(o).updateSelected(t)},e.prototype.updateParent=function(t){this.node.removeFromParent(!1),this.node.parent=t,this.next&&this.next.getComponent(o).updateParent(t)},e.prototype.updatePosition=function(t){void 0===t&&(t=!0);var e=cc.v2();e=t?this.transformPosition(this.prev,this.node).sub(cc.v2(0,this.node.height)):cc.v2(0,-31),this.node.position=e,this.mgr.isPlayConnect||(this.mgr.isPlayConnect=!0,this.mgr.playBreakAndConnectSound()),this.next?(cc.log("next",this.node.name,this.node.y,this.next.name),t=!0,this.next.getComponent(o).updatePosition(t)):this.mgr.checkIsWin()},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},e.prototype.transformPosition=function(t,e){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO))},c([h({type:cc.Enum(s),tooltip:"\u7c7b\u578b"})],e.prototype,"currType",void 0),c([l.ClickLock(.1)],e.prototype,"onTouchStart",null),o=c([p],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],BeadCurtainsMgr:[function(t,e,o){"use strict";cc._RF.push(e,"9701b6zRY9N/LOCUEtRWO3/","BeadCurtainsMgr");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("zqddn_level_base"),l=i("BeadCurtainsItem"),d=cc._decorator,p=d.ccclass,h=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.parentNode=null,e.result=null,e.touchNode=null,e.sfs=[],e.shiningParticle=null,e.shiningClip=null,e.breakAndConnectClip=null,e.guidanceNodeList=[],e.fingerTweenNodeList=[],e.finger=null,e.isPlayConnect=!1,e.isGuidance=!1,e.currGuidanceIndex=0,e.game=null,e.nodeList=[],e.isCollision=!1,e.canCollision=!1,e.isAnimation=!1,e.isTouching=!1,e.currTouchNode=null,e.isEnd=!1,e.fingerTween=null,e.canMoveMinNumber=9,e.moveOffset=0,e.beadHeight=62,e.minGameY=-33,e}return a(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,this.init()},e.prototype.init=function(){this.game=this.parentNode.parent,this.isGuidance="zqddn_zhb_level-2639"==this.node.name,this.isGuidance&&this.fingerAnimation(),this.initEvent(),this.initNodeData()},e.prototype.initEvent=function(){this.touchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onTouchStart=function(){},e.prototype.onTouchMove=function(t){if(!this.isEnd&&this.moveOffset>0){var e=t.getDeltaY();this.game.y+=e,this.game.y<this.minGameY&&(this.game.y=this.minGameY),this.game.y>this.moveOffset*this.beadHeight&&(this.game.y=this.moveOffset*this.beadHeight)}},e.prototype.onTouchEnd=function(){},e.prototype.initNodeData=function(){var t=this;this.parentNode.children.forEach(function(e){var o=e.children[0];o.getComponent(cc.Layout).enabled=!1,cc.log("parent.childrenCount",o.name,o.childrenCount);for(var n=0;n<o.childrenCount;n++){var i=o.children[n],r=i.getComponent(cc.BoxCollider);r&&(r.size.width=60,r.size.height=60),cc.log("init ",i.name);var a=i.getComponent(l.default);if(a){a.init(t);var c=o.children[n-1],s=o.children[n+1];a.prev=c||null,a.next=s||null}}})},e.prototype.fingerAnimation=function(){var t=this,e=this.guidanceNodeList[this.currGuidanceIndex],o=this.fingerTweenNodeList[this.currGuidanceIndex],n=this.transformPosition(e,this.finger),i=this.transformPosition(o,this.finger);this.finger.opacity=0,this.fingerTween&&(this.fingerTween.stop(),this.fingerTween=null),this.isAnimation=!0,this.fingerTween=cc.tween(this.finger).call(function(){t.finger.opacity=255,t.finger.position=n}).to(.8,{position:i}).delay(.2).call(function(){t.finger.opacity=0,t.isAnimation=!1}).union().repeatForever().start()},e.prototype.getSpriteFrame=function(t,e){var o=0,n=t?4:0;switch(e){case"red":o=0;break;case"green":o=1;break;case"blue":o=2;break;case"yellow":o=3}return this.sfs[o+n]},e.prototype.playBreakAndConnectSound=function(){cc.audioEngine.play(this.breakAndConnectClip,!1,1)},e.prototype.checkIsWin=function(){this.isGuidance&&(this.currGuidanceIndex+=1,this.currGuidanceIndex<this.guidanceNodeList.length?this.fingerAnimation():this.finger&&(this.isGuidance=!1,this.finger.active=!1));for(var t=!0,e=0;e<this.parentNode.childrenCount;e++){var o=this.parentNode.children[e];cc.log("---------------------------------"),cc.log("parent.name",o.name);for(var n=o.children[0],i=0;i<n.childrenCount;i++){var r=n.children[i];cc.log("item",r.name),n.name.indexOf(r.name)<0&&(t=!1)}}t?(this.isEnd=!0,this.gameWin()):this.updateMoveScreenState()},e.prototype.updateMoveScreenState=function(){for(var t=this,e=0,o=0;o<this.parentNode.childrenCount;o++){var n=this.parentNode.children[o].children[0];n.childrenCount>=e&&(e=n.childrenCount)}e>this.canMoveMinNumber?this.moveOffset=e-this.canMoveMinNumber:(this.moveOffset=0,this.isAnimation=!0,cc.tween(this.game).to(.1,{y:this.minGameY}).call(function(){t.isAnimation=!1}).start())},e.prototype.updateTailView=function(){var t=this;this.parentNode.children.forEach(function(e){for(var o=[],n=e.children[0],i=0;i<n.childrenCount;i++){var r=n.children[i];o.push(r.position)}if(n.children[0]){var a=(o=o.sort(function(t,e){return t.y-e.y}))[0],c=t.result.convertToNodeSpaceAR(n.convertToWorldSpaceAR(a)),s=null;switch(n.children[0].name){case"red":s=t.result.children[0];break;case"green":s=t.result.children[1];break;case"blue":s=t.result.children[2];break;case"yellow":s=t.result.children[3]}s.opacity=0,s.active=!0,s.position=cc.v2(c.x,c.y-n.children[0].height/2-s.height/2),t.isAnimation=!0,cc.tween(s).to(.5,{opacity:255}).call(function(){t.isAnimation=!1}).start()}})},e.prototype.gameWin=function(){var t=this;this.updateTailView(),this.isEnd=!0,this.scheduleOnce(function(){t.shiningParticle.node.active=!0,t.shiningParticle.resetSystem(),cc.audioEngine.play(t.shiningClip,!1,1),t.gameBase.gameRight(1)},.3)},e.prototype.gameFail=function(){},e.prototype.transformPosition=function(t,e){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO))},c([h(s.default)],e.prototype,"gameBase",void 0),c([h(cc.Node)],e.prototype,"parentNode",void 0),c([h(cc.Node)],e.prototype,"result",void 0),c([h(cc.Node)],e.prototype,"touchNode",void 0),c([h([cc.SpriteFrame])],e.prototype,"sfs",void 0),c([h(cc.ParticleSystem)],e.prototype,"shiningParticle",void 0),c([h({type:cc.AudioClip})],e.prototype,"shiningClip",void 0),c([h({type:cc.AudioClip})],e.prototype,"breakAndConnectClip",void 0),c([h([cc.Node])],e.prototype,"guidanceNodeList",void 0),c([h([cc.Node])],e.prototype,"fingerTweenNodeList",void 0),c([h(cc.Node)],e.prototype,"finger",void 0),c([p],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],BeeCannonBallBullet:[function(t,e,o){"use strict";cc._RF.push(e,"c92f4VOCclE1LkfhbWCrlws","BeeCannonBallBullet");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("DrawPhysicsLineContact"),l=i("DrawPhysicsLineTagFilter"),d=i("BeeThornDogTag"),p=cc._decorator,h=p.ccclass,u=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._run=!1,e._runTime=0,e.mgr=null,e}return a(e,t),e.prototype.init=function(t,e,o){this._originPos=this.node.position,this.mgr=o;var n=this.node.addComponent(cc.RigidBody);n.bullet=!0,n.gravityScale=0,n.type=cc.RigidBodyType.Dynamic;var i=this.node.addComponent(cc.PhysicsBoxCollider);i.tag=d.BeeThornDogTag.cannon,i.size=cc.size(1,1),i.density=1e4,n.linearVelocity=t.rotate(e),this.node.addComponent(l.default).ignoreTags.push(5),this.node.addComponent(s.default).onBeginContact=this.onBeginContact.bind(this),this._run=!0},e.prototype.onBeginContact=function(t,e,o){o.tag==d.BeeThornDogTag.role&&(o.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),this.mgr.fail(2))},e.prototype.update=function(t){this._run&&(this._runTime+=t,(this.getDistance(this._originPos,this.node.position)>=50||this._runTime>=.1)&&(this._run=!1,this.node.destroy()))},e.prototype.getDistance=function(t,e){return t.sub(e).mag()},c([h],e)}(cc.Component));r.default=u,cc._RF.pop()},{}],BeeCannonBallItem:[function(t,e,o){"use strict";cc._RF.push(e,"069e2YegP5NQoMHqKRmwK5X","BeeCannonBallItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineContact"),d=i("BeeCannonBallBullet"),p=i("BeeThornDogTag"),h=cc._decorator,u=h.ccclass;h.property,function(t){t[t.init=0]="init",t[t.fly=1]="fly",t[t.boom=2]="boom"}(s||(s={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.speed=1,e.beeIndex=-1,e.startPos=null,e.isLeftPower=!0,e.hitAmount=0,e.localPoints=[],e.state=s.init,e.routeIndex=0,e.flyArr=[],e.radius=200,e.mgr=null,e.isToLeft=!0,e}return a(e,t),e.prototype.init=function(t,e){this.node.getComponent(l.default).onBeginContact=this.onBeginContact.bind(this),this.mgr=e,this.node.parent.parent.parent.getChildByName("dir")&&(this.isToLeft=!1),this.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,this.target=t,this.state=s.fly},e.prototype.onBeginContact=function(t,e,o){var n=this;if((o.tag==p.BeeThornDogTag.floor||o.tag==p.BeeThornDogTag.line||o.tag==p.BeeThornDogTag.role)&&!e.node.isFall){e.node.isFall=!0;var i=this.node.getComponent(cc.RigidBody);i.linearVelocity=cc.v2(),this.state=s.boom,this.scheduleOnce(function(){i.type=cc.RigidBodyType.Static,n.node.getComponent(cc.PhysicsPolygonCollider).sensor=!0}),this.node.getComponent(cc.Sprite).enabled=!1;var r=this.node.children[0];r.active=!0,r.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),r.getComponent(sp.Skeleton).setCompleteListener(function(){r.active=!1,n.scheduleOnce(function(){n.node.destroy()},3)});for(var a=0;a<8;a++){var c=new cc.Node;c.addComponent(d.default).init(cc.v2(500,0),40*a,this.mgr),this.node.addChild(c)}}},e.prototype.update=function(t){var e=this.getWorldPos(this.node),o=this.node.getComponent(cc.RigidBody);if(this.state==s.fly){var n=this.getWorldPos(this.target),i=n.sub(e);this.move(i,o,t);var r=this.getAngle(e,n);this.node.parent.scaleX>0?this.node.angle=r-180:this.node.angle=Math.abs(r)-30}},e.prototype.move=function(t,e,o){(t=t.normalize()).scaleSelf(cc.v2(this.speed,this.speed)),t.x>=2e3?t.x=2e3:t.x<=-2e3&&(t.x=-2e3),t.y>=2e3?t.y=2e3:t.y<=-2e3&&(t.y=-2e3),e.linearVelocity=t,this.speed+=5e3*o,this.speed>=5e3&&(this.speed=5e3)},e.prototype.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},c([u],e)}(cc.Component);r.default=f,cc._RF.pop()},{}],BeeCannonItem:[function(t,e,o){"use strict";cc._RF.push(e,"2d5f8/RBRRAeK/8sC7I/kY1","BeeCannonItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineBody"),d=i("DrawPhysicsLineContact"),p=i("BeeCannonBallItem"),h=i("BeeThornDogTag"),u=cc._decorator,f=u.ccclass;u.property,function(t){t[t.normal=0]="normal",t[t.start=1]="start",t[t.shoot=2]="shoot",t[t.search=3]="search",t[t.bounce=4]="bounce",t[t.edge=5]="edge"}(s||(s={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.speed=1,e.beeIndex=-1,e.startPos=null,e.isLeftPower=!0,e.hitAmount=0,e.localPoints=[],e.state=s.normal,e.routeIndex=0,e.flyArr=[],e.radius=200,e.mgr=null,e.isToLeft=!0,e.isShoot=!1,e.cruiseInterval=2,e.lastShootTime=0,e.offset=800,e}return a(e,t),e.prototype.init=function(t,e,o){if(this.node.getComponent(d.default).onBeginContact=this.onBeginContact.bind(this),this.mgr=o,this.localPoints=o.getComponent(l.default).lineLocalPoints[0],this.beeIndex=t,this.target=e,this.startPos=this.node.parent.parent.getChildByName("startPos").position,this.node.parent.parent.getChildByName("dir")&&(this.isToLeft=!1),t%2!=0&&(this.isLeftPower=!1),0!=this.beeIndex){var n=this.randomNum(-this.radius,0);this.node.parent.parent.getChildByName("dir")&&(n=this.randomNum(0,this.radius));var i=this.randomNum(-this.radius,this.radius),r=cc.v2(this.startPos.x+n,this.startPos.y+i);this.startPos=r}this.state=s.start,this.node.getComponent(cc.PhysicsPolygonCollider).density=34,window.beeThornDogPower&&(console.log("\u81ea\u5b9a\u4e49\u871c\u8702\u529b\u5ea6",window.beeThornDogPower),this.node.getComponent(cc.PhysicsPolygonCollider).density=4*window.beeThornDogPower)},e.prototype.getEdgeRoute_toLeft=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x>=n.x&&a.y>=n.y&&(null==t||a.x>=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x<=n.x&&(null==o||a.x<=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.getEdgeRoute_toRight=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x<=n.x&&a.y>=n.y&&(null==t||a.x<=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x>=n.x&&(null==o||a.x>=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.onBeginContact=function(t,e,o){var n=this;if(this.state!=s.shoot&&this.isShoot&&(o.tag==h.BeeThornDogTag.floor||o.tag==h.BeeThornDogTag.line||o.tag==h.BeeThornDogTag.role)&&!e.node.isFall){e.node.isFall=!0;var i=this.getWorldPos(this.target),r=this.getWorldPos(this.node);this.isLeftPower?(r.x-=this.offset,r.y+=this.offset):(r.x+=this.offset,r.y-=this.offset),this.scheduleOnce(function(){n.state=s.bounce,n.hitAmount+=1;var t=r.sub(i),e=n.node.getComponent(cc.RigidBody);(t=t.normalize()).scaleSelf(cc.v2(1e3,1e3)),e.linearVelocity=t}),3==this.hitAmount&&0==this.beeIndex?this.scheduleOnce(function(){(n.isToLeft?n.getEdgeRoute_toLeft():n.getEdgeRoute_toRight()).length>0&&(n.state=s.edge)},.25):this.scheduleOnce(function(){n.state=s.search,n.speed=0,e.node.isFall=!1},.05)}},e.prototype.randomNum=function(t,e,o){var n=e-t,i=o||Math.random();return t+Math.round(i*n)},e.prototype.update=function(t){var e=this,o=this.getWorldPos(this.node),n=this.node.getComponent(cc.RigidBody);if(this.state==s.start){if((r=(c=this.node.parent.parent.convertToWorldSpaceAR(this.startPos)).sub(o)).mag()<=5||this.lastShootTime>=this.cruiseInterval)return void(this.state=s.shoot);this.lastShootTime+=t,this.move(r,n,t)}if(this.state!=s.shoot||this.isShoot||(this.isShoot=!0,this.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"gongji",!1),this.scheduleOnce(function(){var t=e.node.getChildByName("cannonBall");t.active=!0,t.getComponent(p.default).init(e.target,e.mgr)},.25),this.node.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(){e.node.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(null),e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"daiji",!0),e.scheduleOnce(function(){e.state=s.search},1)})),this.state==s.search){var i=this.target.position,r=(c=this.target.parent.convertToWorldSpaceAR(i)).sub(o);this.move(r,n,t);var a=this.getAngle(c,o);this.isToLeft?(this.node.angle=a,this.node.angle>=120&&this.node.angle<=250?this.node.scaleY=-1:this.node.scaleY=1):(this.node.angle=a-180,this.node.angle<=-120&&this.node.angle>=-250?this.node.scaleY=-1:this.node.scaleY=1)}if(this.state==s.edge){var c,l=this.getWorldPos(this.node),d=(r=(c=this.flyArr[this.routeIndex]).sub(l),this.node.getComponent(cc.RigidBody));if(this.move(r,d,t),r.mag()<=120){if(this.flyArr.length-1==this.routeIndex)return this.state=s.search,void(this.node.isFall=!1);this.routeIndex+=1}}},e.prototype.move=function(t,e,o){(t=t.normalize()).scaleSelf(cc.v2(this.speed,this.speed)),t.x>=2e3?t.x=2e3:t.x<=-2e3&&(t.x=-2e3),t.y>=2e3?t.y=2e3:t.y<=-2e3&&(t.y=-2e3),e.linearVelocity=t;var n=1e3,i=800;window.isBeeBigPower&&(n=1400,i=1e3),this.state==s.edge?(this.speed+=n/1*o,this.speed>=n&&(this.speed=n)):(this.speed+=i/1*o,this.speed>=i&&(this.speed=i))},e.prototype.getDistance=function(t,e){return t.sub(e).mag()},e.prototype.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},c([f],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],BeeDogSpider:[function(t,e,o){"use strict";cc._RF.push(e,"d6147cNIlZLHoWkh7RuJahd","BeeDogSpider");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("DrawPhysicsLineBody"),l=i("DrawPhysicsLineContact"),d=i("DrawPhysicsLineCowGame"),p=i("DrawPhysicsLineGame2"),h=i("zqddn_level_base"),u=i("zqddn_level_baseui"),f=i("BeeItem"),g=i("BeeThornDogTag"),m=i("SpiderItem"),y=cc._decorator,v=y.ccclass,_=y.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.beeAmount=8,e.base=null,e.lineGame=null,e.roleRoot=null,e.hiveRoot=null,e.spiderRoot=null,e.thornAmount=[],e.targetIndex=0,e.isOver=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.base=this.node.getComponent(h.default),this.lineGame=this.node.getComponent(d.default),this.node.getComponent(s.default).maxLength=240,this.lineGame.onTimeEndCallBack=this.onTimeEndCallBack.bind(this),this.lineGame.onFirstDrawEndCallBack=this.onFirstDrawEndCallBack.bind(this),this.roleRoot=this.dict.roleRoot,this.hiveRoot=this.dict.hiveRoot,this.spiderRoot=this.dict.spiderRoot;for(var e=0;e<this.roleRoot.childrenCount;e++){var o=this.roleRoot.children[e];o.name=""+e,this.thornAmount.push(0),o.getComponent(l.default).onBeginContact=this.onBeginContact_role.bind(this)}window.beeThornDogAmount&&(this.beeAmount=window.beeThornDogAmount),window.beeThornDogLineWidth&&(this.node.getComponent(s.default).drawPen.lineWidth=window.beeThornDogLineWidth)},e.prototype.onBeginContact_role=function(t,e,o){var n=this;if(o.tag==g.BeeThornDogTag.bee&&!e.node.isFall){e.node.isFall=!0;var i=Number(e.node.name);this.thornAmount[i]+=1,1==this.thornAmount[i]?e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation2",!1):2==this.thornAmount[i]&&(e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),this.fail()),this.scheduleOnce(function(){e.node.isFall=!1},1)}if(o.tag!=g.BeeThornDogTag.spider||e.node.isFall||(e.node.isFall=!0,i=Number(e.node.name),this.thornAmount[i]+=1,1==this.thornAmount[i]&&e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),this.scheduleOnce(function(){e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),n.fail()},1)),o.tag==g.BeeThornDogTag.magma&&e.node.children[0].active&&(e.node.isDie||(e.node.isDie=!0,e.node.getChildByName("spine").active=!1,this.scheduleOnce(function(){e.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static}),e.node.getChildByName("die").active=!0,this.fail())),o.tag==g.BeeThornDogTag.thorn&&!e.node.isDie){e.node.isDie=!0,e.node.getChildByName("spine").active=!1,this.scheduleOnce(function(){e.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static}),e.node.getChildByName("die").active=!0;var r=e.node.getChildByName("grey");this.scheduleOnce(function(){r.active=!0},.2),this.fail()}o.tag==g.BeeThornDogTag.die&&this.fail(2)},e.prototype.onTimeEndCallBack=function(){this.suc()},e.prototype.onFirstDrawEndCallBack=function(){var t=this;this.scheduleOnce(function(){for(var e=0;e<t.roleRoot.childrenCount;e++)t.roleRoot.children[e].getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;for(t.node.getComponent(s.default).lineBody.bullet=!0,t.createBee(),t.dict.stop&&(t.dict.stop.active=!1),e=0;e<t.spiderRoot.childrenCount;e++)t.spiderRoot.children[e].getComponent(m.default).init(t.node)},0)},e.prototype.createBee=function(){for(var t=this,e=this.beeAmount/this.hiveRoot.childrenCount,o=function(o){for(var i=n.hiveRoot.children[o],r=function(r){var a=o;n.scheduleOnce(function(){var o=i.getChildByName("bee"),n=cc.instantiate(o);if(i.getChildByName("beeRoot").addChild(n),n.active=!0,1==t.roleRoot.childrenCount)n.getComponent(f.default).init(r,t.roleRoot.children[0],t.node);else if(2==t.roleRoot.childrenCount)(a*e+r)%2==0?n.getComponent(f.default).init(r,t.roleRoot.children[0],t.node):n.getComponent(f.default).init(r,t.roleRoot.children[1],t.node);else if(3==t.roleRoot.childrenCount){var c=a*e+r;console.log(c%3),n.getComponent(f.default).init(r,t.roleRoot.children[c%3],t.node)}r==e-1&&t.scheduleOnce(function(){i.getChildByName("other").active=!1},.5)},.3*r)},a=0;a<e;a++)r(a)},n=this,i=0;i<this.hiveRoot.childrenCount;i++)o(i)},e.prototype.suc=function(){this.isOver||(this.isOver=!0,this.node.getComponent(p.default).lblTime.node.active=!1,this.base.gameRight(1))},e.prototype.fail=function(t){void 0===t&&(t=1),this.isOver||(this.isOver=!0,this.node.getComponent(p.default).lblTime.node.active=!1,this.base.showWrong(null,t,!0))},e.prototype.playClickAudio=function(){this.base.playClickSound()},e.prototype.die=function(t,e){t.getComponent(cc.Sprite).enabled=!1,cc.tween(t).call(function(){e&&e()}).start()},c([_({tooltip:"\u871c\u8702\u603b\u6570\u91cf"})],e.prototype,"beeAmount",void 0),c([v],e)}(u.default);r.default=C,cc._RF.pop()},{}],BeeDongFeng17Item:[function(t,e,o){"use strict";cc._RF.push(e,"a8c79uH1sdFTq0mrfuNiVv9","BeeDongFeng17Item");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineBody"),d=i("DrawPhysicsLineContact"),p=i("BeeCannonBallItem"),h=i("BeeThornDogTag"),u=cc._decorator,f=u.ccclass,g=u.property;(function(t){t[t.normal=0]="normal",t[t.start=1]="start",t[t.shoot=2]="shoot",t[t.cruise=3]="cruise",t[t.search=4]="search",t[t.bounce=5]="bounce",t[t.edge=6]="edge"})(s||(s={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLoopShoot=!1,e.target=null,e.speed=1,e.beeIndex=-1,e.startPos=null,e.isLeftPower=!0,e.hitAmount=0,e.localPoints=[],e.state=s.normal,e.routeIndex=0,e.flyArr=[],e.radius=200,e.mgr=null,e.isToLeft=!0,e.isShoot=!1,e.cruiseList=[],e.cruiseIndex=0,e.cruiseInterval=2,e.lastShootTime=0,e.offset=800,e}return a(e,t),e.prototype.init=function(t,e,o){if(this.node.getComponent(d.default).onBeginContact=this.onBeginContact.bind(this),this.mgr=o,this.localPoints=o.getComponent(l.default).lineLocalPoints[0],this.beeIndex=t,this.target=e,this.startPos=this.node.parent.parent.getChildByName("startPos").position,this.cruiseList=this.node.parent.parent.getChildByName("cruisePos").children,this.node.parent.parent.getChildByName("dir")&&(this.isToLeft=!1),t%2!=0&&(this.isLeftPower=!1),0!=this.beeIndex){var n=this.randomNum(-this.radius,0);this.node.parent.parent.getChildByName("dir")&&(n=this.randomNum(0,this.radius));var i=this.randomNum(-this.radius,this.radius),r=cc.v2(this.startPos.x+n,this.startPos.y+i);this.startPos=r}this.state=s.start,this.node.getComponent(cc.PhysicsPolygonCollider).density=34,window.beeThornDogPower&&(console.log("\u81ea\u5b9a\u4e49\u871c\u8702\u529b\u5ea6",window.beeThornDogPower),this.node.getComponent(cc.PhysicsPolygonCollider).density=4*window.beeThornDogPower)},e.prototype.getEdgeRoute_toLeft=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x>=n.x&&a.y>=n.y&&(null==t||a.x>=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x<=n.x&&(null==o||a.x<=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.getEdgeRoute_toRight=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x<=n.x&&a.y>=n.y&&(null==t||a.x<=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x>=n.x&&(null==o||a.x>=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.onBeginContact=function(t,e,o){var n=this;if(this.state!=s.shoot&&this.isShoot&&(o.tag==h.BeeThornDogTag.floor||o.tag==h.BeeThornDogTag.line||o.tag==h.BeeThornDogTag.role)&&!e.node.isFall){e.node.isFall=!0;var i=this.getWorldPos(this.target),r=this.getWorldPos(this.node);this.isLeftPower?(r.x-=this.offset,r.y+=this.offset):(r.x+=this.offset,r.y-=this.offset),this.scheduleOnce(function(){n.state=s.bounce,n.hitAmount+=1;var t=r.sub(i),e=n.node.getComponent(cc.RigidBody);(t=t.normalize()).scaleSelf(cc.v2(1e3,1e3)),e.linearVelocity=t}),3==this.hitAmount&&0==this.beeIndex?this.scheduleOnce(function(){(n.isToLeft?n.getEdgeRoute_toLeft():n.getEdgeRoute_toRight()).length>0&&(n.state=s.edge)},.25):this.scheduleOnce(function(){n.state=s.search,n.speed=0,e.node.isFall=!1},.05)}},e.prototype.randomNum=function(t,e,o){var n=e-t,i=o||Math.random();return t+Math.round(i*n)},e.prototype.update=function(t){var e=this,o=this.getWorldPos(this.node),n=this.node.getComponent(cc.RigidBody);if(this.state==s.start){if((r=(c=this.node.parent.parent.convertToWorldSpaceAR(this.startPos)).sub(o)).mag()<=10||this.lastShootTime>=this.cruiseInterval)return this.lastShootTime=0,void(this.state=s.shoot);this.lastShootTime+=t,this.move(r,n,t)}if(this.state!=s.shoot||this.isShoot||(this.isShoot=!0,this.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"gongji",!1),this.scheduleOnce(function(){var t=e.node.getChildByName("cannonBall"),o=cc.instantiate(t);t.parent.addChild(o),o.position=t.position,o.active=!0,o.getComponent(p.default).init(e.target,e.mgr)},.25),this.node.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(){e.node.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(null),e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"daiji",!0),e.scheduleOnce(function(){e.cruiseIndex>=e.cruiseList.length?e.isLoopShoot?(e.cruiseIndex=0,e.state=s.cruise):e.state=s.search:e.state=s.cruise},1)})),this.state==s.cruise){this.isShoot=!1;var i=this.cruiseList[this.cruiseIndex].position;if((r=(c=this.node.parent.parent.convertToWorldSpaceAR(i)).sub(o)).mag()<=10||this.lastShootTime>=this.cruiseInterval)return this.state=s.shoot,this.cruiseIndex++,void(this.lastShootTime=0);this.lastShootTime+=t,this.move(r,n,t),o.x<this.getWorldPos(this.target).x?this.node.scaleX=-1:this.node.scaleX=1}if(this.state==s.search){i=this.target.position;var r=(c=this.target.parent.convertToWorldSpaceAR(i)).sub(o);this.move(r,n,t);var a=this.getAngle(c,o);this.node.scaleX>0?(this.node.angle=a,this.node.angle>=120&&this.node.angle<=250?this.node.scaleY=-1:this.node.scaleY=1):(this.node.angle=a-180,this.node.angle<=-120&&this.node.angle>=-250?this.node.scaleY=-1:this.node.scaleY=1)}if(this.state==s.edge){var c,l=this.getWorldPos(this.node),d=(r=(c=this.flyArr[this.routeIndex]).sub(l),this.node.getComponent(cc.RigidBody));if(this.move(r,d,t),r.mag()<=120){if(this.flyArr.length-1==this.routeIndex)return this.state=s.search,void(this.node.isFall=!1);this.routeIndex+=1}}},e.prototype.move=function(t,e,o){(t=t.normalize()).scaleSelf(cc.v2(this.speed,this.speed)),t.x>=2e3?t.x=2e3:t.x<=-2e3&&(t.x=-2e3),t.y>=2e3?t.y=2e3:t.y<=-2e3&&(t.y=-2e3),e.linearVelocity=t;var n=1e3,i=800;window.isBeeBigPower&&(n=1400,i=1e3),this.state==s.edge?(this.speed+=n/1*o,this.speed>=n&&(this.speed=n)):(this.speed+=i/1*o,this.speed>=i&&(this.speed=i))},e.prototype.getDistance=function(t,e){return t.sub(e).mag()},e.prototype.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},c([g],e.prototype,"isLoopShoot",void 0),c([f],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],BeeItem2:[function(t,e,o){"use strict";cc._RF.push(e,"7ae98PNnRpIcqjTXEwFRj6Z","BeeItem2");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineBody"),d=i("DrawPhysicsLineContact"),p=i("BeeThornDogTag"),h=cc._decorator,u=h.ccclass,f=h.property;(function(t){t[t.normal=0]="normal",t[t.start=1]="start",t[t.start2=2]="start2",t[t.search=3]="search",t[t.bounce=4]="bounce",t[t.edge=5]="edge",t[t.die=6]="die"})(s||(s={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isBack=!0,e.target=null,e.speed=1,e.beeIndex=-1,e.startPos=null,e.startPos2=null,e.isLeftPower=!0,e.hitAmount=0,e.localPoints=[],e.state=s.normal,e.routeIndex=0,e.flyArr=[],e.radius=200,e.mgr=null,e.isToLeft=!0,e.turn90=!1,e.offset=200,e}return a(e,t),e.prototype.init=function(t,e,o){var n=this;this.node.getComponent(d.default).onBeginContact=this.onBeginContact.bind(this),this.mgr=o,this.localPoints=o.getComponent(l.default).lineLocalPoints[0],this.beeIndex=t,this.target=e,this.startPos=cc.v2(1,-55),this.startPos2=this.node.parent.parent.getChildByName("startPos").position,this.node.parent.parent.getChildByName("dir")&&(this.isToLeft=!1),this.node.parent.parent.getChildByName("reversal")?this.startPos=cc.v2(1,105):this.node.parent.parent.getChildByName("turn90")&&(this.turn90=!0,this.startPos=cc.v2(60,5)),t%2!=0&&(this.isLeftPower=!1);var i=(this.turn90,this.randomNum(-10,10)),r=this.turn90?this.randomNum(-10,10):this.randomNum(-60,-20),a=cc.v2(this.startPos.x+i,this.startPos.y+r);if(this.startPos=a,0!=this.beeIndex){var c=this.randomNum(-30,30),p=this.randomNum(-100,100),h=cc.v2(this.startPos2.x+c,this.startPos2.y+p);this.startPos2=h}this.state=s.start,this.scheduleOnce(function(){n.state!=s.start&&n.state!=s.start2||(n.state=s.search)},4),this.node.getComponent(cc.PhysicsPolygonCollider).density=8.5,window.beeThornDogPower&&(console.log("\u81ea\u5b9a\u4e49\u871c\u8702\u529b\u5ea6",window.beeThornDogPower),this.node.getComponent(cc.PhysicsPolygonCollider).density=4*window.beeThornDogPower)},e.prototype.getEdgeRoute_toLeft=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x>=n.x&&a.y>=n.y&&(null==t||a.x>=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x<=n.x&&(null==o||a.x<=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.getEdgeRoute_toRight=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x<=n.x&&a.y>=n.y&&(null==t||a.x<=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x>=n.x&&(null==o||a.x>=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.onBeginContact=function(t,e,o){var n=this;if(this.state!=s.die&&this.isBack)if(o.tag==p.BeeThornDogTag.floor||o.tag==p.BeeThornDogTag.line||o.tag==p.BeeThornDogTag.role||o.tag==p.BeeThornDogTag.lightWoodenBox){if(!e.node.isFall){e.node.isFall=!0;var i=this.getWorldPos(this.target),r=this.getWorldPos(this.node);this.isLeftPower?(r.x-=this.offset,r.y+=this.offset):(r.x+=this.offset,r.y-=this.offset),this.state=s.bounce,this.hitAmount+=1;var a=r.sub(i),c=this.node.getComponent(cc.RigidBody);(a=a.normalize()).scaleSelf(cc.v2(1e3,1e3)),c.linearVelocity=a,3==this.hitAmount&&0==this.beeIndex?this.scheduleOnce(function(){(n.isToLeft?n.getEdgeRoute_toLeft():n.getEdgeRoute_toRight()).length>0&&(n.state=s.edge)},.5):this.scheduleOnce(function(){n.state=s.search,n.speed=0,e.node.isFall=!1},.1)}}else if(o.tag==p.BeeThornDogTag.laser){var l=e.node.getChildByName("die");l&&(this.state=s.die,e.node.getChildByName("spine").active=!1,l.active=!0)}},e.prototype.randomNum=function(t,e,o){var n=e-t,i=o||Math.random();return t+Math.round(i*n)},e.prototype.update=function(t){var e=this.getWorldPos(this.node),o=this.node.getComponent(cc.RigidBody);if(this.state==s.start){if((i=(a=this.node.parent.parent.convertToWorldSpaceAR(this.startPos)).sub(e)).mag()<=5)return void(this.state=s.start2);this.move(i,o,t)}if(this.state==s.start2){if((i=(a=this.node.parent.parent.convertToWorldSpaceAR(this.startPos2)).sub(e)).mag()<=5)return void(this.state=s.search);this.move(i,o,t)}if(this.state==s.search){var n=this.target.position,i=(a=this.target.parent.convertToWorldSpaceAR(n)).sub(e);this.move(i,o,t);var r=this.getAngle(a,e);this.node.angle=r}if(this.state==s.edge){var a,c=this.getWorldPos(this.node),l=(i=(a=this.flyArr[this.routeIndex]).sub(c),this.node.getComponent(cc.RigidBody));if(this.move(i,l,t),i.mag()<=10){if(this.flyArr.length-1==this.routeIndex)return this.state=s.search,void(this.node.isFall=!1);this.routeIndex+=1}}},e.prototype.move=function(t,e,o){(t=t.normalize()).scaleSelf(cc.v2(this.speed,this.speed)),t.x>=2e3?t.x=2e3:t.x<=-2e3&&(t.x=-2e3),t.y>=2e3?t.y=2e3:t.y<=-2e3&&(t.y=-2e3),e.linearVelocity=t;var n=500,i=300;window.isBeeBigPower&&(n=700,i=500),this.state==s.edge?(this.speed+=n/1*o,this.speed>=n&&(this.speed=n)):(this.speed+=i/1*o,this.speed>=i&&(this.speed=i))},e.prototype.getDistance=function(t,e){return t.sub(e).mag()},e.prototype.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},c([f],e.prototype,"isBack",void 0),c([u],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],BeeItemGivePower:[function(t,e,o){"use strict";cc._RF.push(e,"90e75Ln4P9J15nEEqBkfmWU","BeeItemGivePower");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineBody"),d=i("DrawPhysicsLineContact"),p=i("BeeThornDogTag"),h=cc._decorator,u=h.ccclass,f=h.property;(function(t){t[t.normal=0]="normal",t[t.start=1]="start",t[t.search=2]="search",t[t.bounce=3]="bounce",t[t.edge=4]="edge",t[t.die=5]="die"})(s||(s={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isBack=!0,e.givePower=cc.v2(),e.target=null,e.speed=1,e.beeIndex=-1,e.startPos=null,e.isLeftPower=!0,e.hitAmount=0,e.localPoints=[],e.state=s.normal,e.routeIndex=0,e.flyArr=[],e.radius=200,e.mgr=null,e.isToLeft=!0,e.offset=200,e}return a(e,t),e.prototype.init=function(t,e,o){var n=this;if(this.node.getComponent(d.default).onBeginContact=this.onBeginContact.bind(this),this.mgr=o,this.localPoints=o.getComponent(l.default).lineLocalPoints[0],this.beeIndex=t,this.target=e,this.startPos=this.node.parent.parent.getChildByName("startPos").position,this.node.parent.parent.getChildByName("dir")&&(this.isToLeft=!1),t%2!=0&&(this.isLeftPower=!1),0!=this.beeIndex){var i=this.randomNum(-this.radius,0);this.node.parent.parent.getChildByName("dir")&&(i=this.randomNum(0,this.radius));var r=this.randomNum(-this.radius,this.radius),a=cc.v2(this.startPos.x+i,this.startPos.y+r);this.startPos=a}this.state=s.start,this.scheduleOnce(function(){n.state==s.start&&(n.state=s.search)},4),this.node.getComponent(cc.PhysicsPolygonCollider).density=8.5,window.beeThornDogPower&&(console.log("\u81ea\u5b9a\u4e49\u871c\u8702\u529b\u5ea6",window.beeThornDogPower),this.node.getComponent(cc.PhysicsPolygonCollider).density=4*window.beeThornDogPower)},e.prototype.getEdgeRoute_toLeft=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x>=n.x&&a.y>=n.y&&(null==t||a.x>=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x<=n.x&&(null==o||a.x<=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.getEdgeRoute_toRight=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x<=n.x&&a.y>=n.y&&(null==t||a.x<=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x>=n.x&&(null==o||a.x>=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.onBeginContact=function(t,e,o){var n=this;if(this.state!=s.die&&this.isBack)if(o.tag==p.BeeThornDogTag.floor||o.tag==p.BeeThornDogTag.line||o.tag==p.BeeThornDogTag.role||o.tag==p.BeeThornDogTag.lightWoodenBox){if(!e.node.isFall){e.node.isFall=!0;var i=this.getWorldPos(this.target),r=this.getWorldPos(this.node);this.isLeftPower?(r.x-=this.offset,r.y+=this.offset):(r.x+=this.offset,r.y-=this.offset),this.state=s.bounce,this.hitAmount+=1;var a=r.sub(i),c=this.node.getComponent(cc.RigidBody);(a=a.normalize()).scaleSelf(cc.v2(1e3,1e3)),c.linearVelocity=a,o.tag!=p.BeeThornDogTag.line||this.givePower.equals(cc.v2())||(o.node.getComponent(cc.RigidBody).linearVelocity=o.node.getComponent(cc.RigidBody).linearVelocity.add(this.givePower)),3==this.hitAmount&&0==this.beeIndex?this.scheduleOnce(function(){(n.isToLeft?n.getEdgeRoute_toLeft():n.getEdgeRoute_toRight()).length>0&&(n.state=s.edge)},.5):this.scheduleOnce(function(){n.state=s.search,n.speed=0,e.node.isFall=!1},.1)}}else if(o.tag==p.BeeThornDogTag.laser){var l=e.node.getChildByName("die");l&&(this.unscheduleAllCallbacks(),this.state=s.die,e.node.getChildByName("spine").active=!1,l.active=!0,(c=this.node.getComponent(cc.RigidBody)).gravityScale=0,c.linearVelocity=cc.v2(0,0))}},e.prototype.randomNum=function(t,e,o){var n=e-t,i=o||Math.random();return t+Math.round(i*n)},e.prototype.update=function(t){var e=this.getWorldPos(this.node),o=this.node.getComponent(cc.RigidBody);if(this.state==s.start){if((i=(a=this.node.parent.parent.convertToWorldSpaceAR(this.startPos)).sub(e)).mag()<=5)return void(this.state=s.search);this.move(i,o,t)}if(this.state==s.search){var n=this.target.position,i=(a=this.target.parent.convertToWorldSpaceAR(n)).sub(e);this.move(i,o,t);var r=this.getAngle(a,e);this.node.angle=r}if(this.state==s.edge){var a,c=this.getWorldPos(this.node),l=(i=(a=this.flyArr[this.routeIndex]).sub(c),this.node.getComponent(cc.RigidBody));if(this.move(i,l,t),i.mag()<=10){if(this.flyArr.length-1==this.routeIndex)return this.state=s.search,void(this.node.isFall=!1);this.routeIndex+=1}}},e.prototype.move=function(t,e,o){(t=t.normalize()).scaleSelf(cc.v2(this.speed,this.speed)),t.x>=2e3?t.x=2e3:t.x<=-2e3&&(t.x=-2e3),t.y>=2e3?t.y=2e3:t.y<=-2e3&&(t.y=-2e3),e.linearVelocity=t;var n=500,i=300;window.isBeeBigPower&&(n=700,i=500),this.state==s.edge?(this.speed+=n/1*o,this.speed>=n&&(this.speed=n)):(this.speed+=i/1*o,this.speed>=i&&(this.speed=i))},e.prototype.getDistance=function(t,e){return t.sub(e).mag()},e.prototype.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},e.prototype.isDie=function(){return this.state==s.die},e.prototype.setDie=function(){this.unscheduleAllCallbacks(),this.getComponent(cc.PhysicsPolygonCollider).points=[],this.getComponent(cc.PhysicsPolygonCollider).apply(),this.state=s.die},c([f],e.prototype,"isBack",void 0),c([f(cc.Vec2)],e.prototype,"givePower",void 0),c([u],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],BeeItem:[function(t,e,o){"use strict";cc._RF.push(e,"0f1e6czTcZFiaHP+lPgfg69","BeeItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineBody"),d=i("DrawPhysicsLineContact"),p=i("BeeThornDogTag"),h=cc._decorator,u=h.ccclass,f=h.property;(function(t){t[t.normal=0]="normal",t[t.start=1]="start",t[t.search=2]="search",t[t.bounce=3]="bounce",t[t.edge=4]="edge",t[t.die=5]="die"})(s||(s={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isBack=!0,e.target=null,e.speed=1,e.beeIndex=-1,e.startPos=null,e.isLeftPower=!0,e.hitAmount=0,e.localPoints=[],e.state=s.normal,e.routeIndex=0,e.flyArr=[],e.radius=200,e.mgr=null,e.isToLeft=!0,e.offset=200,e}return a(e,t),e.prototype.init=function(t,e,o){var n=this;if(this.node.getComponent(d.default).onBeginContact=this.onBeginContact.bind(this),this.mgr=o,this.localPoints=o.getComponent(l.default).lineLocalPoints[0],this.beeIndex=t,this.target=e,this.startPos=this.node.parent.parent.getChildByName("startPos").position,this.node.parent.parent.getChildByName("dir")&&(this.isToLeft=!1),t%2!=0&&(this.isLeftPower=!1),0!=this.beeIndex){var i=this.randomNum(-this.radius,0);this.node.parent.parent.getChildByName("dir")&&(i=this.randomNum(0,this.radius));var r=this.randomNum(-this.radius,this.radius),a=cc.v2(this.startPos.x+i,this.startPos.y+r);this.startPos=a}this.state=s.start,this.scheduleOnce(function(){n.state==s.start&&(n.state=s.search)},4),this.node.getComponent(cc.PhysicsPolygonCollider).density=8.5,window.beeThornDogPower&&(console.log("\u81ea\u5b9a\u4e49\u871c\u8702\u529b\u5ea6",window.beeThornDogPower),this.node.getComponent(cc.PhysicsPolygonCollider).density=4*window.beeThornDogPower)},e.prototype.getEdgeRoute_toLeft=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x>=n.x&&a.y>=n.y&&(null==t||a.x>=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x<=n.x&&(null==o||a.x<=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.getEdgeRoute_toRight=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x<=n.x&&a.y>=n.y&&(null==t||a.x<=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x>=n.x&&(null==o||a.x>=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.onBeginContact=function(t,e,o){var n=this;if(this.state!=s.die&&this.isBack)if(o.tag==p.BeeThornDogTag.floor||o.tag==p.BeeThornDogTag.line||o.tag==p.BeeThornDogTag.role||o.tag==p.BeeThornDogTag.lightWoodenBox){if(!e.node.isFall){e.node.isFall=!0;var i=this.getWorldPos(this.target),r=this.getWorldPos(this.node);this.isLeftPower?(r.x-=this.offset,r.y+=this.offset):(r.x+=this.offset,r.y-=this.offset),this.state=s.bounce,this.hitAmount+=1;var a=r.sub(i),c=this.node.getComponent(cc.RigidBody);(a=a.normalize()).scaleSelf(cc.v2(1e3,1e3)),c.linearVelocity=a,3==this.hitAmount&&0==this.beeIndex?this.scheduleOnce(function(){(n.isToLeft?n.getEdgeRoute_toLeft():n.getEdgeRoute_toRight()).length>0&&(n.state=s.edge)},.5):this.scheduleOnce(function(){n.state=s.search,n.speed=0,e.node.isFall=!1},.1)}}else if(o.tag==p.BeeThornDogTag.laser){var l=e.node.getChildByName("die");l&&(this.unscheduleAllCallbacks(),this.state=s.die,e.node.getChildByName("spine").active=!1,l.active=!0,(c=this.node.getComponent(cc.RigidBody)).gravityScale=0,c.linearVelocity=cc.v2(0,0))}},e.prototype.randomNum=function(t,e,o){var n=e-t,i=o||Math.random();return t+Math.round(i*n)},e.prototype.update=function(t){var e=this.getWorldPos(this.node),o=this.node.getComponent(cc.RigidBody);if(this.state==s.start){if((i=(a=this.node.parent.parent.convertToWorldSpaceAR(this.startPos)).sub(e)).mag()<=5)return void(this.state=s.search);this.move(i,o,t)}if(this.state==s.search){var n=this.target.position,i=(a=this.target.parent.convertToWorldSpaceAR(n)).sub(e);this.move(i,o,t);var r=this.getAngle(a,e);this.node.angle=r}if(this.state==s.edge){var a,c=this.getWorldPos(this.node),l=(i=(a=this.flyArr[this.routeIndex]).sub(c),this.node.getComponent(cc.RigidBody));if(this.move(i,l,t),i.mag()<=10){if(this.flyArr.length-1==this.routeIndex)return this.state=s.search,void(this.node.isFall=!1);this.routeIndex+=1}}},e.prototype.move=function(t,e,o){(t=t.normalize()).scaleSelf(cc.v2(this.speed,this.speed)),t.x>=2e3?t.x=2e3:t.x<=-2e3&&(t.x=-2e3),t.y>=2e3?t.y=2e3:t.y<=-2e3&&(t.y=-2e3),e.linearVelocity=t;var n=500,i=300;window.isBeeBigPower&&(n=700,i=500),this.state==s.edge?(this.speed+=n/1*o,this.speed>=n&&(this.speed=n)):(this.speed+=i/1*o,this.speed>=i&&(this.speed=i))},e.prototype.getDistance=function(t,e){return t.sub(e).mag()},e.prototype.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},e.prototype.isDie=function(){return this.state==s.die},e.prototype.setDie=function(){this.unscheduleAllCallbacks(),this.getComponent(cc.PhysicsPolygonCollider).points=[],this.getComponent(cc.PhysicsPolygonCollider).apply(),this.state=s.die},c([f],e.prototype,"isBack",void 0),c([u],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],BeeKingItem:[function(t,e,o){"use strict";cc._RF.push(e,"d24e57fZ69MD4MlVzy1h9Rg","BeeKingItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineBody"),d=i("DrawPhysicsLineContact"),p=i("BeeThornDogTag"),h=cc._decorator,u=h.ccclass;h.property,function(t){t[t.normal=0]="normal",t[t.start=1]="start",t[t.search=2]="search",t[t.bounce=3]="bounce",t[t.edge=4]="edge"}(s||(s={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.speed=1,e.beeIndex=-1,e.startPos=null,e.isLeftPower=!0,e.hitAmount=0,e.localPoints=[],e.state=s.normal,e.routeIndex=0,e.flyArr=[],e.radius=200,e.mgr=null,e.isToLeft=!0,e.offset=200,e}return a(e,t),e.prototype.init=function(t,e,o){if(this.node.getComponent(d.default).onBeginContact=this.onBeginContact.bind(this),this.mgr=o,this.localPoints=o.getComponent(l.default).lineLocalPoints[0],this.beeIndex=t,this.target=e,this.startPos=this.node.parent.parent.getChildByName("startPos").position,this.node.parent.parent.getChildByName("dir")&&(this.isToLeft=!1),t%2!=0&&(this.isLeftPower=!1),0!=this.beeIndex){var n=this.randomNum(-this.radius,0);this.node.parent.parent.getChildByName("dir")&&(n=this.randomNum(0,this.radius));var i=this.randomNum(-this.radius,this.radius),r=cc.v2(this.startPos.x+n,this.startPos.y+i);this.startPos=r}this.state=s.start,this.node.getComponent(cc.PhysicsPolygonCollider).density=10.5,window.beeThornDogPower&&(console.log("\u81ea\u5b9a\u4e49\u871c\u8702\u529b\u5ea6",window.beeThornDogPower),this.node.getComponent(cc.PhysicsPolygonCollider).density=window.beeThornDogPower+2)},e.prototype.getEdgeRoute_toLeft=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x>=n.x&&a.y>=n.y&&(null==t||a.x>=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x<=n.x&&(null==o||a.x<=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.getEdgeRoute_toRight=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x<=n.x&&a.y>=n.y&&(null==t||a.x<=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x>=n.x&&(null==o||a.x>=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.onBeginContact=function(t,e,o){var n=this;if((o.tag==p.BeeThornDogTag.floor||o.tag==p.BeeThornDogTag.line||o.tag==p.BeeThornDogTag.role)&&!e.node.isFall){e.node.isFall=!0;var i=this.getWorldPos(this.target),r=this.getWorldPos(this.node);this.isLeftPower?(r.x-=this.offset,r.y+=this.offset):(r.x+=this.offset,r.y-=this.offset),this.state=s.bounce,this.hitAmount+=1;var a=r.sub(i),c=this.node.getComponent(cc.RigidBody);(a=a.normalize()).scaleSelf(cc.v2(1e3,1e3)),c.linearVelocity=a,3==this.hitAmount&&0==this.beeIndex?this.scheduleOnce(function(){(n.isToLeft?n.getEdgeRoute_toLeft():n.getEdgeRoute_toRight()).length>0&&(n.state=s.edge)},.5):this.scheduleOnce(function(){n.state=s.search,n.speed=0,e.node.isFall=!1},.1)}},e.prototype.randomNum=function(t,e,o){var n=e-t,i=o||Math.random();return t+Math.round(i*n)},e.prototype.update=function(t){var e=this.getWorldPos(this.node),o=this.node.getComponent(cc.RigidBody);if(this.state==s.start){if((i=(a=this.node.parent.parent.convertToWorldSpaceAR(this.startPos)).sub(e)).mag()<=5)return void(this.state=s.search);this.move(i,o,t)}if(this.state==s.search){var n=this.target.position,i=(a=this.target.parent.convertToWorldSpaceAR(n)).sub(e);this.move(i,o,t);var r=this.getAngle(a,e);this.isToLeft?this.node.angle=r:this.node.angle=r-180}if(this.state==s.edge){var a,c=this.getWorldPos(this.node),l=(i=(a=this.flyArr[this.routeIndex]).sub(c),this.node.getComponent(cc.RigidBody));if(this.move(i,l,t),i.mag()<=10){if(this.flyArr.length-1==this.routeIndex)return this.state=s.search,void(this.node.isFall=!1);this.routeIndex+=1}}},e.prototype.move=function(t,e,o){(t=t.normalize()).scaleSelf(cc.v2(this.speed,this.speed)),t.x>=2e3?t.x=2e3:t.x<=-2e3&&(t.x=-2e3),t.y>=2e3?t.y=2e3:t.y<=-2e3&&(t.y=-2e3),e.linearVelocity=t;var n=750,i=550;window.isBeeBigPower&&(n=850,i=600),this.state==s.edge?(this.speed+=n/1*o,this.speed>=n&&(this.speed=n)):(this.speed+=i/1*o,this.speed>=i&&(this.speed=i))},e.prototype.getDistance=function(t,e){return t.sub(e).mag()},e.prototype.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},c([u],e)}(cc.Component);r.default=f,cc._RF.pop()},{}],BeeKingThornDog:[function(t,e,o){"use strict";cc._RF.push(e,"5f41c8GzyRGNZS71MB0Mv6R","BeeKingThornDog");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("DrawPhysicsLineBody"),l=i("DrawPhysicsLineContact"),d=i("DrawPhysicsLineCowGame"),p=i("DrawPhysicsLineGame2"),h=i("zqddn_level_base"),u=i("zqddn_level_baseui"),f=i("BeeItem"),g=i("BeeKingItem"),m=i("BeeThornDogTag"),y=cc._decorator,v=y.ccclass,_=y.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.beeAmount=8,e.base=null,e.lineGame=null,e.roleRoot=null,e.hiveRoot=null,e.spiderRoot=null,e.thornAmount=[],e.isStart=!1,e.targetIndex=0,e.isOver=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.base=this.node.getComponent(h.default),this.lineGame=this.node.getComponent(d.default),this.node.getComponent(s.default).maxLength=240,this.lineGame.onTimeEndCallBack=this.onTimeEndCallBack.bind(this),this.lineGame.onFirstDrawEndCallBack=this.onFirstDrawEndCallBack.bind(this),this.roleRoot=this.dict.roleRoot,this.hiveRoot=this.dict.hiveRoot,this.spiderRoot=this.dict.spiderRoot;for(var e=0;e<this.roleRoot.childrenCount;e++){var o=this.roleRoot.children[e];o.name=""+e,this.thornAmount.push(0),o.getComponent(l.default).onBeginContact=this.onBeginContact_role.bind(this)}window.beeThornDogAmount&&(this.beeAmount=window.beeThornDogAmount),window.beeThornDogLineWidth&&(this.node.getComponent(s.default).drawPen.lineWidth=window.beeThornDogLineWidth)},e.prototype.onBeginContact_role=function(t,e,o){if(o.tag==m.BeeThornDogTag.bee&&!e.node.isFall){e.node.isFall=!0;var n=Number(e.node.name);this.thornAmount[n]+=1,1==this.thornAmount[n]?e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation2",!1):2==this.thornAmount[n]&&(e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),this.fail()),this.scheduleOnce(function(){e.node.isFall=!1},1)}if(o.tag==m.BeeThornDogTag.magma&&e.node.children[0].active&&(e.node.isDie||(e.node.isDie=!0,e.node.getChildByName("spine").active=!1,this.scheduleOnce(function(){e.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static}),e.node.getChildByName("die").active=!0,this.fail())),o.tag==m.BeeThornDogTag.thorn&&!e.node.isDie){e.node.isDie=!0,e.node.getChildByName("spine").active=!1,this.scheduleOnce(function(){e.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static}),e.node.getChildByName("die").active=!0;var i=e.node.getChildByName("grey");this.scheduleOnce(function(){i?i.active=!0:(e.node.getChildByName("spine").active=!0,e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation7",!0))},.2),this.fail()}o.tag==m.BeeThornDogTag.die&&this.fail(2)},e.prototype.onTimeEndCallBack=function(){this.suc()},e.prototype.onFirstDrawEndCallBack=function(){var t=this;this.isStart=!0,this.scheduleOnce(function(){for(var e=0;e<t.roleRoot.childrenCount;e++)t.roleRoot.children[e].getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;t.node.getComponent(s.default).lineBody.bullet=!0,t.createBeeKing(),t.scheduleOnce(function(){t.createBee()},.3),t.dict.stop&&(t.dict.stop.active=!1)},0)},e.prototype.createBeeKing=function(){var t=this.hiveRoot.children[0],e=t.getChildByName("beeKing"),o=cc.instantiate(e);t.getChildByName("beeRoot").addChild(o),o.active=!0,o.getComponent(g.default).init(0,this.roleRoot.children[0],this.node)},e.prototype.createBee=function(){for(var t=this,e=this.beeAmount/this.hiveRoot.childrenCount,o=function(o){for(var i=n.hiveRoot.children[o],r=function(r){var a=o;n.scheduleOnce(function(){var n=i.getChildByName("bee"),c=cc.instantiate(n);if(i.getChildByName("beeRoot").addChild(c),c.active=!0,console.log("index * j",a,o*e+r),1==t.roleRoot.childrenCount)c.getComponent(f.default).init(r,t.roleRoot.children[0],t.node);else if(2==t.roleRoot.childrenCount)(a*e+r)%2==0?c.getComponent(f.default).init(r,t.roleRoot.children[0],t.node):c.getComponent(f.default).init(r,t.roleRoot.children[1],t.node);else if(3==t.roleRoot.childrenCount){var s=a*e+r;console.log(s%3),c.getComponent(f.default).init(r,t.roleRoot.children[s%3],t.node)}r==e-1&&t.scheduleOnce(function(){i.getChildByName("other").active=!1},.5)},.3*r)},a=0;a<e;a++)r(a)},n=this,i=0;i<this.hiveRoot.childrenCount;i++)o(i)},e.prototype.suc=function(){this.isOver||(this.isOver=!0,this.node.getComponent(p.default).lblTime.node.active=!1,this.base.gameRight(1))},e.prototype.fail=function(t){void 0===t&&(t=1),this.isOver||(this.isOver=!0,this.node.getComponent(p.default).lblTime.node.active=!1,this.base.showWrong(null,t,!0))},e.prototype.playClickAudio=function(){this.base.playClickSound()},e.prototype.die=function(t,e){t.getComponent(cc.Sprite).enabled=!1,cc.tween(t).call(function(){e&&e()}).start()},c([_({tooltip:"\u871c\u8702\u603b\u6570\u91cf"})],e.prototype,"beeAmount",void 0),c([v],e)}(u.default);r.default=C,cc._RF.pop()},{}],BeePopeyeItem:[function(t,e,o){"use strict";cc._RF.push(e,"37003cbhu9M+JtDQDjg6VlI","BeePopeyeItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineBody"),d=i("DrawPhysicsLineContact"),p=i("BeeThornDogTag"),h=cc._decorator,u=h.ccclass,f=h.property;(function(t){t[t.normal=0]="normal",t[t.start=1]="start",t[t.search=2]="search",t[t.bounce=3]="bounce",t[t.edge=4]="edge"})(s||(s={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.densityScale=4,e.target=null,e.speed=1,e.beeIndex=-1,e.startPos=null,e.isLeftPower=!0,e.hitAmount=0,e.localPoints=[],e.state=s.normal,e.routeIndex=0,e.flyArr=[],e.radius=200,e.mgr=null,e.isToLeft=!0,e.offset=800,e}return a(e,t),e.prototype.init=function(t,e,o){if(this.node.getComponent(d.default).onBeginContact=this.onBeginContact.bind(this),this.mgr=o,this.localPoints=o.getComponent(l.default).lineLocalPoints[0],this.beeIndex=t,this.target=e,this.startPos=this.node.parent.parent.getChildByName("startPos").position,this.node.parent.parent.getChildByName("dir")&&(this.isToLeft=!1),t%2!=0&&(this.isLeftPower=!1),0!=this.beeIndex){var n=this.randomNum(-this.radius,0);this.node.parent.parent.getChildByName("dir")&&(n=this.randomNum(0,this.radius));var i=this.randomNum(-this.radius,this.radius),r=cc.v2(this.startPos.x+n,this.startPos.y+i);this.startPos=r}this.state=s.start,this.node.getComponent(cc.PhysicsPolygonCollider).density=8.5*this.densityScale,window.beeThornDogPower&&(console.log("\u81ea\u5b9a\u4e49\u871c\u8702\u529b\u5ea6",window.beeThornDogPower),this.node.getComponent(cc.PhysicsPolygonCollider).density=window.beeThornDogPower*this.densityScale)},e.prototype.getEdgeRoute_toLeft=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x>=n.x&&a.y>=n.y&&(null==t||a.x>=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x<=n.x&&(null==o||a.x<=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.getEdgeRoute_toRight=function(){var t=null,e=null,o=null;this.flyArr=[];for(var n=this.getWorldPos(this.node),i=0;i<this.localPoints.length;i++){var r=this.localPoints[i],a=this.mgr.getComponent(l.default).lineBody.node.convertToWorldSpaceAR(r);a.x<=n.x&&a.y>=n.y&&(null==t||a.x<=t.x)&&(t=a),(null==e||a.y>=e.y)&&(e=a),a.x>=n.x&&(null==o||a.x>=o.x)&&(o=a)}return t&&(t=cc.v2(t.x+40,t.y),this.flyArr.push(t)),e&&(e=cc.v2(e.x,e.y+40),this.flyArr.push(e)),o&&(o=cc.v2(o.x-40,o.y+40),this.flyArr.push(o)),this.flyArr},e.prototype.onBeginContact=function(t,e,o){var n=this;if((o.tag==p.BeeThornDogTag.floor||o.tag==p.BeeThornDogTag.line||o.tag==p.BeeThornDogTag.role)&&!e.node.isFall){e.node.isFall=!0;var i=this.getWorldPos(this.target),r=this.getWorldPos(this.node);this.isLeftPower?(r.x-=this.offset,r.y+=this.offset):(r.x+=this.offset,r.y-=this.offset),this.scheduleOnce(function(){n.state=s.bounce,n.hitAmount+=1;var t=r.sub(i),e=n.node.getComponent(cc.RigidBody);(t=t.normalize()).scaleSelf(cc.v2(1e3,1e3)),e.linearVelocity=t}),3==this.hitAmount&&0==this.beeIndex?this.scheduleOnce(function(){(n.isToLeft?n.getEdgeRoute_toLeft():n.getEdgeRoute_toRight()).length>0&&(n.state=s.edge)},.25):this.scheduleOnce(function(){n.state=s.search,n.speed=0,e.node.isFall=!1},.05)}},e.prototype.randomNum=function(t,e,o){var n=e-t,i=o||Math.random();return t+Math.round(i*n)},e.prototype.update=function(t){var e=this.getWorldPos(this.node),o=this.node.getComponent(cc.RigidBody);if(this.state==s.start){if((i=(a=this.node.parent.parent.convertToWorldSpaceAR(this.startPos)).sub(e)).mag()<=5)return void(this.state=s.search);this.move(i,o,t)}if(this.state==s.search){var n=this.target.position,i=(a=this.target.parent.convertToWorldSpaceAR(n)).sub(e);this.move(i,o,t);var r=this.getAngle(a,e);this.isToLeft?(this.node.angle=r,this.node.angle>=120&&this.node.angle<=250?this.node.scaleY=-1:this.node.scaleY=1):(this.node.angle=r-180,this.node.angle<=-120&&this.node.angle>=-250?this.node.scaleY=-1:this.node.scaleY=1)}if(this.state==s.edge){var a,c=this.getWorldPos(this.node),l=(i=(a=this.flyArr[this.routeIndex]).sub(c),this.node.getComponent(cc.RigidBody));if(this.move(i,l,t),i.mag()<=120){if(this.flyArr.length-1==this.routeIndex)return this.state=s.search,void(this.node.isFall=!1);this.routeIndex+=1}}},e.prototype.move=function(t,e,o){(t=t.normalize()).scaleSelf(cc.v2(this.speed,this.speed)),t.x>=2e3?t.x=2e3:t.x<=-2e3&&(t.x=-2e3),t.y>=2e3?t.y=2e3:t.y<=-2e3&&(t.y=-2e3),e.linearVelocity=t;var n=1e3,i=800;window.isBeeBigPower&&(n=1400,i=1e3),this.state==s.edge?(this.speed+=n/1*o,this.speed>=n&&(this.speed=n)):(this.speed+=i/1*o,this.speed>=i&&(this.speed=i))},e.prototype.getDistance=function(t,e){return t.sub(e).mag()},e.prototype.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},c([f({type:cc.Float,tooltip:"\u666e\u901a\u871c\u8702\u7684\u500d\u6570"})],e.prototype,"densityScale",void 0),c([u],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],BeeSpecialThornDog:[function(t,e,o){"use strict";cc._RF.push(e,"e9c28oVZr1Is67GW3FLfilL","BeeSpecialThornDog");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("DrawPhysicsLineBody"),l=i("DrawPhysicsLineContact"),d=i("DrawPhysicsLineCowGame"),p=i("DrawPhysicsLineGame2"),h=i("zqddn_level_base"),u=i("zqddn_level_baseui"),f=i("BeeCannonItem"),g=i("BeeDongFeng17Item"),m=i("BeeItem"),y=i("BeePopeyeItem"),v=i("BeeThornDogTag"),_=cc._decorator,C=_.ccclass,w=_.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.beeAmount=8,e.base=null,e.lineGame=null,e.roleRoot=null,e.hiveRoot=null,e.spiderRoot=null,e.thornAmount=[],e.targetIndex=0,e.isOver=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.base=this.node.getComponent(h.default),this.lineGame=this.node.getComponent(d.default),this.node.getComponent(s.default).maxLength=240,this.lineGame.onTimeEndCallBack=this.onTimeEndCallBack.bind(this),this.lineGame.onFirstDrawEndCallBack=this.onFirstDrawEndCallBack.bind(this),this.roleRoot=this.dict.roleRoot,this.hiveRoot=this.dict.hiveRoot,this.spiderRoot=this.dict.spiderRoot;for(var e=0;e<this.roleRoot.childrenCount;e++){var o=this.roleRoot.children[e];o.name=""+e,this.thornAmount.push(0),o.getComponent(l.default).onBeginContact=this.onBeginContact_role.bind(this)}window.beeThornDogAmount&&(this.beeAmount=window.beeThornDogAmount),window.beeThornDogLineWidth&&(this.node.getComponent(s.default).drawPen.lineWidth=window.beeThornDogLineWidth)},e.prototype.onBeginContact_role=function(t,e,o){if(o.tag==v.BeeThornDogTag.bee&&!e.node.isFall){e.node.isFall=!0;var n=Number(e.node.name);this.thornAmount[n]+=1,1==this.thornAmount[n]?e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation2",!1):2==this.thornAmount[n]&&(e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),this.fail()),this.scheduleOnce(function(){e.node.isFall=!1},1)}if(o.tag==v.BeeThornDogTag.magma&&e.node.children[0].active&&(e.node.isDie||(e.node.isDie=!0,e.node.getChildByName("spine").active=!1,this.scheduleOnce(function(){e.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static}),e.node.getChildByName("die").active=!0,this.fail())),o.tag==v.BeeThornDogTag.thorn&&!e.node.isDie){e.node.isDie=!0,e.node.getChildByName("spine").active=!1,this.scheduleOnce(function(){e.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static}),e.node.getChildByName("die").active=!0;var i=e.node.getChildByName("grey");this.scheduleOnce(function(){i?i.active=!0:(e.node.getChildByName("spine").active=!0,e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation7",!0))},.2),this.fail()}o.tag==v.BeeThornDogTag.die&&this.fail(2)},e.prototype.onTimeEndCallBack=function(){this.suc()},e.prototype.onFirstDrawEndCallBack=function(){var t=this;this.scheduleOnce(function(){for(var e=0;e<t.roleRoot.childrenCount;e++)t.roleRoot.children[e].getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;t.node.getComponent(s.default).lineBody.bullet=!0;var o=t.node.getComponent(s.default).lines;for(e=0;e<o.length;e++)o[e].density=1,o[e].restitution=.8,o[e].apply();t.createSpecialBee(),t.scheduleOnce(function(){t.createBee()},.3),t.dict.stop&&(t.dict.stop.active=!1)},0)},e.prototype.createSpecialBee=function(){for(var t=0;t<this.hiveRoot.childrenCount;t++){var e=this.hiveRoot.children[t],o=void 0;e.getChildByName("popeyeBee")?o=e.getChildByName("popeyeBee"):e.getChildByName("cannonBee")?o=e.getChildByName("cannonBee"):e.getChildByName("dongFeng17Bee")&&(o=e.getChildByName("dongFeng17Bee")),o&&(o.parent=e.getChildByName("beeRoot"),o.name.indexOf("popeye")>=0?o.getComponent(y.default).init(0,this.roleRoot.children[0],this.node):o.name.indexOf("cannon")>=0?o.getComponent(f.default).init(0,this.roleRoot.children[0],this):o.name.indexOf("dongFeng17")>=0&&o.getComponent(g.default).init(0,this.roleRoot.children[0],this))}},e.prototype.createBee=function(){for(var t=this,e=Math.ceil(this.beeAmount/this.hiveRoot.childrenCount),o=function(o){for(var i=n.hiveRoot.children[o],r=function(r){var a=o;n.scheduleOnce(function(){var o=i.getChildByName("bee"),n=cc.instantiate(o);if(i.getChildByName("beeRoot").addChild(n),n.active=!0,1==t.roleRoot.childrenCount)n.getComponent(m.default).init(r<=1?0:r,t.roleRoot.children[0],t.node);else if(2==t.roleRoot.childrenCount)(a*e+r)%2==0?n.getComponent(m.default).init(r<=1?0:r,t.roleRoot.children[0],t.node):n.getComponent(m.default).init(r<=1?0:r,t.roleRoot.children[1],t.node);else if(3==t.roleRoot.childrenCount){var c=a*e+r;n.getComponent(m.default).init(r<=1?0:r,t.roleRoot.children[c%3],t.node)}else c=a*e+r,n.getComponent(m.default).init(r,t.roleRoot.children[c%t.roleRoot.childrenCount],t.node);r==e-1&&t.scheduleOnce(function(){i.getChildByName("other").active=!1},.5)},.3*r)},a=0;a<e;a++)r(a)},n=this,i=0;i<this.hiveRoot.childrenCount;i++)o(i)},e.prototype.suc=function(){this.isOver||(this.isOver=!0,this.node.getComponent(p.default).lblTime.node.active=!1,this.base.gameRight(1))},e.prototype.fail=function(t){void 0===t&&(t=1),this.isOver||(this.isOver=!0,this.node.getComponent(p.default).lblTime.node.active=!1,this.base.showWrong(null,t,!0))},e.prototype.playClickAudio=function(){this.base.playClickSound()},e.prototype.die=function(t,e){t.getComponent(cc.Sprite).enabled=!1,cc.tween(t).call(function(){e&&e()}).start()},c([w({tooltip:"\u871c\u8702\u603b\u6570\u91cf"})],e.prototype,"beeAmount",void 0),c([C],e)}(u.default);r.default=P,cc._RF.pop()},{}],BeeThornDogTag:[function(t,e,o){"use strict";cc._RF.push(e,"e39ccSK1WdOlIHjp2uj2te5","BeeThornDogTag");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.BeeType=n.HiveType=n.BeeThornDogTag=void 0,function(t){t[t.line=0]="line",t[t.role=1]="role",t[t.floor=2]="floor",t[t.bee=3]="bee",t[t.magma=4]="magma",t[t.hive=5]="hive",t[t.thorn=6]="thorn",t[t.die=7]="die",t[t.stop=8]="stop",t[t.spider=9]="spider",t[t.boom=10]="boom",t[t.laser=11]="laser",t[t.ciWei=12]="ciWei",t[t.role2=13]="role2",t[t.water=14]="water",t[t.bone=15]="bone",t[t.balloon=16]="balloon",t[t.stone=17]="stone",t[t.woodenBox=18]="woodenBox",t[t.crocodile=50]="crocodile",t[t.crocodileMouth=51]="crocodileMouth",t[t.beetle=52]="beetle",t[t.beetleHorn=53]="beetleHorn",t[t.cannon=54]="cannon",t[t.rotaBlock=98]="rotaBlock",t[t.lightWoodenBox=100]="lightWoodenBox",t[t.bubble=101]="bubble",t[t.gear=102]="gear",t[t.dogBody=103]="dogBody"}(n.BeeThornDogTag||(n.BeeThornDogTag={})),function(t){t.left_4="left_4",t.right_4="right_4",t.left_8="left_8",t.right_8="right_8"}(n.HiveType||(n.HiveType={})),function(t){t[t.lead=0]="lead",t[t.follow=1]="follow",t[t.edge=2]="edge"}(n.BeeType||(n.BeeType={})),cc._RF.pop()},{}],BeeThornDogWater:[function(t,e,o){"use strict";cc._RF.push(e,"5b91c2HIBlCE5ND8/dBjthW","BeeThornDogWater");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("DrawPhysicsLineBody"),l=i("zqddn_level_baseui"),d=i("BeeThornDog"),p=cc._decorator,h=p.ccclass,u=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleRoot=null,e.waterRoot=null,e.waterX=[],e.waterY=0,e.isGivePower=!1,e.rootScript=null,e}return a(e,t),e.prototype.onLoad=function(){if(t.prototype.onLoad.call(this),this.rootScript=this.node.getComponent(d.default),this.roleRoot=this.rootScript.dict.roleRoot,this.waterRoot=this.rootScript.dict.waterRoot,this.waterRoot&&this.waterRoot.childrenCount){this.rootScript.method=d.method.water;var e=this.waterRoot.children[0].parent.convertToWorldSpaceAR(this.waterRoot.children[0].position).x;this.waterX.push(e-this.waterRoot.children[0].width/2,e+this.waterRoot.children[0].width/2),this.waterY=this.waterRoot.children[0].parent.convertToWorldSpaceAR(this.waterRoot.children[0].position).y}for(var o=0;o<this.roleRoot.childrenCount;o++){var n=this.roleRoot.children[o];n.inWater=!1,this.roleRoot.convertToWorldSpaceAR(n.position).y>=this.waterY-45?n.fall=!0:n.fall=!1}},e.prototype.update=function(){for(var t=this,e=this.node.getComponent(s.default).lineWPosArr,o=0;o<e.length;o++)if(e[o].y<=this.waterY&&e[o].x>=this.waterX[0]&&e[o].x<=this.waterX[1]){this.scheduleOnce(function(){t.isGivePower=!0});break}if(this.isGivePower){for(var n=this.node.getComponent(s.default).lines,i=0;i<n.length;i++)n[i].node.getComponent(cc.RigidBody).gravityScale=-1;var r=this.node.getComponent(s.default).lineWPosArr,a=r.length,c=0;for(o=0;o<a;o++)if(r[o].y>this.waterY&&++c>=a/1.4){this.scheduleOnce(function(){t.isGivePower=!1;for(var e=0;e<n.length;e++)n[e].node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),n[e].node.getComponent(cc.RigidBody).gravityScale=0});break}}for(i=0;i<this.roleRoot.children.length;i++){var l=this.roleRoot.children[i],d=l.getComponent(cc.RigidBody).getWorldCenter();d.y>=this.waterY+5?l.inWater?(l.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation",!0),l.inWater=!1,d.y>this.waterY+5&&l.fall?l.getComponent(cc.RigidBody).gravityScale=1:(l.getComponent(cc.RigidBody).gravityScale=0,l.getComponent(cc.RigidBody).linearVelocity=cc.v2())):d.y>this.waterY+5&&l.fall?l.getComponent(cc.RigidBody).gravityScale=1:(l.getComponent(cc.RigidBody).gravityScale=0,l.getComponent(cc.RigidBody).linearVelocity=cc.v2()):(l.inWater||l.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation6",!0),l.inWater=!0,l.fall&&(l.getComponent(cc.RigidBody).gravityScale=-.4),l.fall=!1)}},c([h],e)}(l.default));r.default=u,cc._RF.pop()},{}],BeeThornDog:[function(t,e,o){"use strict";cc._RF.push(e,"060b7AdNaxCTo8mtmtsFAOp","BeeThornDog");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.method=void 0;var s,l=i("DrawPhysicsLineBody"),d=i("DrawPhysicsLineContact"),p=i("DrawPhysicsLineCowGame"),h=i("DrawPhysicsLineGame2"),u=i("zqddn_level_base"),f=i("zqddn_level_baseui"),g=i("BeeItem"),m=i("BeeItem2"),y=i("BeeItemGivePower"),v=i("BeeThornDogTag"),_=i("BeeThornDogWater"),C=i("BoomItem");(function(t){t[t.normal=0]="normal",t[t.lover=1]="lover",t[t.water=2]="water",t[t.bone=3]="bone"})(s=r.method||(r.method={}));var w=cc._decorator,P=w.ccclass,b=w.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boomClip=null,e.beeAmount=8,e.base=null,e.lineGame=null,e.roleRoot=null,e.hiveRoot=null,e.boomRoot=null,e.effectRoot=null,e.ciWeiRoot=null,e.waterRoot=null,e.boneRoot=null,e.balloonRoot=null,e.balanceRoot=null,e.stoneRoot=null,e.woodenBoxRoot=null,e.thornAmount=[],e.roleSp=null,e.method=s.normal,e.waterX=[],e.waterY=0,e.isGivePower=!1,e.eatBone=!1,e.isStart=!1,e.touchLover=!1,e.targetIndex=0,e.isOver=!1,e.isBoom=!1,e}return a(e,t),e.prototype.onLoad=function(){if(t.prototype.onLoad.call(this),this.base=this.node.getComponent(u.default),this.lineGame=this.node.getComponent(p.default),this.node.getComponent(l.default).maxLength=240,this.lineGame.onTimeEndCallBack=this.onTimeEndCallBack.bind(this),this.lineGame.onFirstDrawEndCallBack=this.onFirstDrawEndCallBack.bind(this),this.roleRoot=this.dict.roleRoot,this.hiveRoot=this.dict.hiveRoot,this.boomRoot=this.dict.boomRoot,this.effectRoot=this.dict.effectRoot,this.ciWeiRoot=this.dict.ciWeiRoot,this.waterRoot=this.dict.waterRoot,this.boneRoot=this.dict.boneRoot,this.balloonRoot=this.dict.balloonRoot,this.balanceRoot=this.dict.balanceRoot,this.stoneRoot=this.dict.stoneRoot,this.woodenBoxRoot=this.dict.woodenBoxRoot,this.waterRoot&&this.waterRoot.childrenCount&&this.waterRoot.children[0].active){this.method=s.water;var e=this.waterRoot.children[0].parent.convertToWorldSpaceAR(this.waterRoot.children[0].position).x;this.waterX.push(e-this.waterRoot.children[0].width/2,e+this.waterRoot.children[0].width/2),this.waterY=this.waterRoot.children[0].parent.convertToWorldSpaceAR(this.waterRoot.children[0].position).y}for(var o=0;o<this.roleRoot.childrenCount;o++)(n=this.roleRoot.children[o]).name=""+o,this.thornAmount.push(0),n.getComponent(d.default).onBeginContact=this.onBeginContact_role.bind(this),n.inWater=!1,this.roleRoot.convertToWorldSpaceAR(n.position).y>=this.waterY-45?n.fall=!0:n.fall=!1,n.getComponent(cc.PhysicsPolygonCollider).tag==v.BeeThornDogTag.role2&&(this.method=s.lover);if(this.boneRoot&&this.boneRoot.childrenCount&&(this.method=s.bone),this.balloonRoot&&this.balloonRoot.childrenCount)for(o=0;o<this.balloonRoot.childrenCount;o++){var n;(n=this.balloonRoot.children[o]).getComponent(d.default).onBeginContact=this.onBeginContact_balloon.bind(this)}this.init(),window.beeThornDogAmount&&(this.beeAmount=window.beeThornDogAmount),window.beeThornDogLineWidth&&(this.node.getComponent(l.default).drawPen.lineWidth=window.beeThornDogLineWidth),cc.game.on("clickAmountNode",this.clickAmountNode,this)},e.prototype.onDisable=function(){cc.game.off("clickAmountNode",this.clickAmountNode,this)},e.prototype.clickAmountNode=function(){this.dict.hand&&(this.dict.hand.active=!1)},e.prototype.init=function(){this.boomRoot&&this.initBoom()},e.prototype.initBoom=function(){var t=this;this.boomRoot.children.forEach(function(e){e.getComponent(C.default).init(t)})},e.prototype.update=function(){var t=this;if(!this.isOver&&this.method==s.water&&!this.node.getComponent(_.default)){for(var e=this.node.getComponent(l.default).lineWPosArr,o=0;o<e.length;o++)if(e[o].y<=this.waterY){this.scheduleOnce(function(){t.isStart=!1,t.isGivePower=!0});break}if(this.isGivePower){for(var n=this.node.getComponent(l.default).lines,i=0;i<n.length;i++)n[i].node.getComponent(cc.RigidBody).gravityScale=-.3;var r=this.node.getComponent(l.default).lineWPosArr,a=r.length,c=0;for(o=0;o<a;o++)if(r[o].y>this.waterY&&++c>=a/2){this.scheduleOnce(function(){t.isGivePower=!1;for(var e=0;e<n.length;e++)n[e].node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),n[e].node.getComponent(cc.RigidBody).gravityScale=0});break}}for(i=0;i<this.roleRoot.children.length;i++){var d=this.roleRoot.children[i];this.roleRoot.convertToWorldSpaceAR(d.position).y>=this.waterY-45?(d.inWater&&(d.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation",!0),d.getComponent(cc.RigidBody).linearVelocity=cc.v2()),d.inWater=!1):(d.inWater||d.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation6",!0),d.inWater=!0)}}},e.prototype.onBeginContact_role=function(t,e,o){if(!this.isBoom){if(o.tag==v.BeeThornDogTag.bee&&!e.node.isFall){e.node.isFall=!0;var n=Number(e.node.name);this.thornAmount[n]+=1,this.roleSp=e.node.getChildByName("spine").getComponent(sp.Skeleton),console.log("001"),1==this.thornAmount[n]?this.roleSp.skeletonData.name.indexOf("nan_tou")>=0||this.roleSp.skeletonData.name.indexOf("nv_tou")>=0?this.roleSp.setAnimation(0,"animation4",!1):this.roleSp.setAnimation(0,"animation2",!1):2==this.thornAmount[n]&&(this.roleSp.skeletonData.name.indexOf("nan_tou")>=0||this.roleSp.skeletonData.name.indexOf("nv_tou")>=0?this.roleSp.setAnimation(0,"animation5",!1):this.roleSp.setAnimation(0,"animation3",!1),this.fail()),this.scheduleOnce(function(){e.node.isFall=!1},1)}if(o.tag!=v.BeeThornDogTag.magma&&o.tag!=v.BeeThornDogTag.stone||!e.node.children[0].active||e.node.isDie||(e.node.isDie=!0,e.node.getChildByName("spine").active=!1,this.scheduleOnce(function(){e.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static}),e.node.getChildByName("die").active=!0,this.fail()),o.tag==v.BeeThornDogTag.thorn&&!e.node.isDie){e.node.isDie=!0,e.node.getChildByName("spine").active=!1,this.scheduleOnce(function(){e.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static}),e.node.getChildByName("die").active=!0;var i=e.node.getChildByName("grey");this.scheduleOnce(function(){i?i.active=!0:(e.node.getChildByName("spine").active=!0,e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation7",!0))},.2),this.fail()}if(o.tag==v.BeeThornDogTag.laser&&!e.node.isDie){e.node.isDie=!0,e.node.getChildByName("spine").active=!1,e.node.getChildByName("die").active=!0;var r=e.node.getChildByName("grey");this.scheduleOnce(function(){r.active=!0},.2),this.fail()}o.tag==v.BeeThornDogTag.ciWei&&(e.node.isDie||(e.node.isDie=!0,e.node.getChildByName("spine").active=!1,e.node.getChildByName("die").active=!0,this.fail())),e.tag==v.BeeThornDogTag.role&&o.tag==v.BeeThornDogTag.role2&&(e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation2",!0),o.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation3",!0),this.touchLover=!0),e.tag==v.BeeThornDogTag.role2&&o.tag==v.BeeThornDogTag.role&&(e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation3",!0),o.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation2",!0),this.touchLover=!0),o.tag==v.BeeThornDogTag.bone&&(o.node.eat||(o.node.eat=!0,this.eatBone=!0,o.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(),this.scheduleOnce(function(){o.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,o.node.parent.convertToNodeSpaceAR(e.node.parent.convertToWorldSpaceAR(e.node.position)),o.node.active=!1,e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation7",!0)}))),o.tag==v.BeeThornDogTag.die&&this.fail(2)}},e.prototype.onBeginContact_balloon=function(t,e,o){this.isBoom||o.tag!=v.BeeThornDogTag.bee&&o.tag!=v.BeeThornDogTag.thorn||e.node.isBoom||(e.node.isBoom=!0,e.node.getComponent(cc.RopeJoint).destroy(),e.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),e.node.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(){e.node.active=!1}))},e.prototype.onTimeEndCallBack=function(){var t=this;switch(this.method){case s.normal:this.suc();break;case s.lover:this.thornAmount.forEach(function(e){e&&t.fail()}),this.touchLover?this.suc():this.fail();break;case s.water:for(var e=!1,o=0;o<this.roleRoot.childrenCount;o++){var n=this.roleRoot.children[o];n.inWater&&(n.children[0].getComponent(sp.Skeleton).setAnimation(0,"animation6",!0),e=!0,this.fail())}e||this.suc();break;case s.bone:this.eatBone?this.suc():this.fail()}},e.prototype.onFirstDrawEndCallBack=function(){var t=this;this.scheduleOnce(function(){t.isStart=!0;for(var e=0;e<t.roleRoot.childrenCount;e++)(o=t.roleRoot.children[e]).getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;if(t.node.getComponent(l.default).lineBody.bullet=!0,t.createBee(),t.ciWeiRoot)for(e=0;e<t.ciWeiRoot.childrenCount;e++)(o=t.ciWeiRoot.children[e]).getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,o.children[0].getComponent(sp.Skeleton).setAnimation(0,"animation2",!0);if(t.boneRoot)for(e=0;e<t.boneRoot.childrenCount;e++)(o=t.boneRoot.children[e]).getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;if(t.balloonRoot)for(e=0;e<t.balloonRoot.childrenCount;e++)(o=t.balloonRoot.children[e]).getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;if(t.balanceRoot)for(e=0;e<t.balanceRoot.childrenCount;e++)(o=t.balanceRoot.children[e]).getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;if(t.stoneRoot)for(e=0;e<t.stoneRoot.childrenCount;e++)(o=t.stoneRoot.children[e]).getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,o.children[1].active=!1;if(t.woodenBoxRoot)for(e=0;e<t.woodenBoxRoot.childrenCount;e++)(o=t.woodenBoxRoot.children[e]).getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;if(t.stoneRoot)for(e=0;e<t.stoneRoot.childrenCount;e++)(o=t.stoneRoot.children[e]).getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,o.children[1].active=!1;if(t.woodenBoxRoot)for(e=0;e<t.woodenBoxRoot.childrenCount;e++){var o;(o=t.woodenBoxRoot.children[e]).getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic}t.dict.stop&&(t.dict.stop.active=!1)},0)},e.prototype.createBee=function(){for(var t=this,e=Math.ceil(this.beeAmount/this.hiveRoot.childrenCount),o=function(o){for(var i=n.hiveRoot.children[o],r=function(r){var a=o;n.scheduleOnce(function(){var o,n=i.getChildByName("bee"),c=cc.instantiate(n);if(i.getChildByName("beeRoot").addChild(c),c.active=!0,o||(o=c.getComponent(g.default)),o||(o=c.getComponent(m.default)),o||(o=c.getComponent(y.default)),1==t.roleRoot.childrenCount)o.init(r,t.roleRoot.children[0],t.node);else if(2==t.roleRoot.childrenCount)(a*e+r)%2==0?o.init(r,t.roleRoot.children[0],t.node):o.init(r,t.roleRoot.children[1],t.node);else{var s=a*e+r;console.log(s%t.roleRoot.childrenCount),o.init(r,t.roleRoot.children[s%t.roleRoot.childrenCount],t.node)}r==e-1&&t.scheduleOnce(function(){i.getChildByName("other").active=!1},.5)},.3*r)},a=0;a<e;a++)r(a)},n=this,i=0;i<this.hiveRoot.childrenCount;i++)o(i)},e.prototype.suc=function(){this.isOver||(this.isOver=!0,this.node.getComponent(h.default).lblTime.node.active=!1,this.base.gameRight(1))},e.prototype.fail=function(t){if(void 0===t&&(t=1),!this.isOver){switch(this.method){case s.normal:break;case s.lover:for(var e=0;e<this.roleRoot.children.length;e++){var o=this.roleRoot.children[e];this.thornAmount[o.name]||(o.getComponent(cc.PhysicsPolygonCollider).tag==v.BeeThornDogTag.role?o.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation3",!0):o.getComponent(cc.PhysicsPolygonCollider).tag==v.BeeThornDogTag.role2&&o.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation2",!0))}}this.isOver=!0,this.node.getComponent(h.default).lblTime.node.active=!1,this.base.showWrong(null,t,!0)}},e.prototype.playClickAudio=function(){this.base.playClickSound()},e.prototype.playBoomAudio=function(){this.boomClip&&cc.audioEngine.playEffect(this.boomClip,!1)},e.prototype.die=function(t,e){t.getComponent(cc.Sprite).enabled=!1,cc.tween(t).call(function(){e&&e()}).start()},c([b({type:cc.AudioClip,tooltip:"\u7206\u70b8\u97f3\u6548"})],e.prototype,"boomClip",void 0),c([b({tooltip:"\u871c\u8702\u603b\u6570\u91cf"})],e.prototype,"beeAmount",void 0),c([P],e)}(f.default);r.default=T,cc._RF.pop()},{}],BeetleItem:[function(t,e,o){"use strict";cc._RF.push(e,"36236grayBMfJWrG+KzHfZw","BeetleItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineBody"),d=i("DrawPhysicsLineContact"),p=i("BeeThornDog"),h=i("BeeThornDogTag"),u=cc._decorator,f=u.ccclass,g=u.property;(function(t){t.standBy="animation",t.rush="animation2",t.crash="animation3"})(s||(s={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destination=cc.v2(),e.mgr=null,e.spine=null,e.isCrash=!1,e.isMoving=!1,e.standBy=!1,e}return a(e,t),e.prototype.onLoad=function(){this.mgr=this.node.parent.parent.parent.parent.getComponent(p.default),this.node.getComponent(d.default).onBeginContact=this.onBeginContact.bind(this),this.spine=this.node.getChildByName("spine").getComponent(sp.Skeleton),this.spine.setAnimation(0,s.standBy,!0)},e.prototype.onBeginContact=function(t,e,o){var n=this;this.mgr&&e.tag==h.BeeThornDogTag.beetleHorn&&!this.isCrash&&(o.tag==h.BeeThornDogTag.role?(this.isCrash=!0,this.crash(function(){o.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(o.node.getComponent(cc.RigidBody).linearVelocity.x,o.node.getComponent(cc.RigidBody).linearVelocity.y+2e3),n.standBy=!0})):o.tag==h.BeeThornDogTag.line&&(this.isCrash=!0,this.crash(function(){n.mgr.node.getComponent(l.default).lineBody.linearVelocity=cc.v2(n.mgr.node.getComponent(l.default).lineBody.linearVelocity.x,n.mgr.node.getComponent(l.default).lineBody.linearVelocity.y+500),n.standBy=!0})))},e.prototype.update=function(){if(this.mgr.isStart){if(this.standBy)return void(this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0));this.node.position.sub(this.destination).mag()<=15&&!this.destination.equals(cc.v2())?(this.playStandBy(),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),this.standBy=!0):this.isMoving||(this.spine.setAnimation(0,s.rush,!0),this.isMoving=!0),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.node.scaleX>0?100:-100,0)}},e.prototype.crash=function(t){var e=this;this.spine.setAnimation(0,s.crash,!1),this.spine.addAnimation(0,s.standBy,!0),this.scheduleOnce(function(){t&&t()},.15),this.scheduleOnce(function(){e.isCrash=!1},2)},e.prototype.playStandBy=function(){this.spine.addAnimation(0,s.standBy,!0)},c([g({displayName:"\u8d70\u5230\u67d0\u4e2a\u70b9\u505c\u4e0b"})],e.prototype,"destination",void 0),c([f],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],Bee:[function(t,e,o){"use strict";cc._RF.push(e,"e994abzmdlFWohXLDryEH01","Bee");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("PopupManager"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("close",this.close,this),this.addBtnOn("restart",this.restart,this),this.addBtnOn("define",this.define,this),this.addBtnOn("reduce0",this.reduce0,this),this.addBtnOn("reduce1",this.reduce1,this),this.addBtnOn("reduce2",this.reduce2,this),this.addBtnOn("add0",this.add0,this),this.addBtnOn("add1",this.add1,this),this.addBtnOn("add2",this.add2,this)},e.prototype.close=function(){l.Popup.hide()},e.prototype.restart=function(){},e.prototype.define=function(){},e.prototype.reduce0=function(){},e.prototype.reduce1=function(){},e.prototype.reduce2=function(){},e.prototype.add0=function(){},e.prototype.add1=function(){},e.prototype.add2=function(){},c([p],e)}(s.default));r.default=h,cc._RF.pop()},{}],BmsManager:[function(t,e,o){"use strict";cc._RF.push(e,"40a5e6y7ZtPq5+OZDi3Jdpj","BmsManager");var n=t,i=o,r=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.BMS=void 0;var c=n("Encrypt"),s=[99,111,109,104,101,105,115,107,47,110],l="";[8,0,1,2,2,1,9,8,0,3,4,0,7,8,5,6].forEach(function(t){l+=String.fromCharCode(s[t])});var d=function(){function t(){this.defaultData={TiLi:0,WuxianTiLi:0,BuchongTiLi:20,fullAdsType:0,fullScreenAd:"no",startWinFullScreenAd:5,spaceWinFullScreenAd:5,spaceWinFullScreenAdND:5,startLevelWinFullScreenAds:5,spaceLevelWinFullScreenAd:5,isAuditing:1,isAuditingLevelMap:1,AdIntervals:0,bannerAdIntervals:0,DownDT:[0,0],isbanner:0,banCloseChance:0,fullSettleChance:0,fullChance:0,fullClickNum:0,fullAdChance:0,fullCloseChance:0,videoEx:0,isCheck:1,natId:"",natId1:"",natId2:"",natId3:"",GM:1,ugc:0,ugcad:0,newmodead:0,evaluatebtndelay:0,evaluatelv:[12e5,25e5,5e6],evaluatestar:5,ys5x5:0,freekeylv:0,freekeychance:0,lvinys5x5lv:0,lvinys5x5chance:0,keyVideo:0,nativead:0,FriendHelp:1e4,configSuffix:"",openkp:0,timeTC:30,ip:0,openads:1,openvideo:1,nextAdChange:0,UnlockThemeMainLv:[0,0],UnlockThemeSubLv:[0,0],UnlockThemeList:[],AllThemeUnlock:0,splash:0,isfakeicon:0,levelspace:-1,homechance:0,appchance:0,mainModeID:0,changeStage:0,share:"no",isfeedbac:0},this.data={},this.shareList=[],this._isInit=!1,this.randomStr=null,this.encrXToken=null,this.encryptUtils=null,this.headers={}}return t.prototype.init=function(t,e,o,n){return r(this,void 0,Promise,function(){var i,r,s;return a(this,function(a){switch(a.label){case 0:return this._isInit?[2]:(this._isInit=!0,console.log("[bms] appname: "+t+" version:"+e),this.encryptUtils=new c.Encrypt,this.randomStr=this.randomString(32),i=(i=(i=this.encryptUtils.encrypt(this.randomStr)).replace(/\+/g,"_")).replace(/\//g,"-"),this.encrXToken=i,console.log("xToken",this.randomStr,i,this.encryptUtils.decrypt("eQ/D8jqCgufjKsoA0IGORmgLfHAnKj5A/TD/Kvuj8S4VFAFnBAh8BP1UzQ5ib7gsnjidwS226EUATBbmF8AxwnWvUWBYq9FlgFexWJsBQiw=")),r=cc.sys,s=r.platform,[4,this.getBmsConfig(t,e)]);case 1:return a.sent(),n&&0==this.data.isCheck?[4,this.getShieldIPConfig2(t,n,e)]:[3,3];case 2:a.sent(),a.label=3;case 3:return s!=r.IPHONE&&s!=r.IPAD?[3,4]:[3,6];case 4:return[4,this.getShareConfig(t)];case 5:a.sent(),a.label=6;case 6:return o&&o(),console.log("[bms] data:",JSON.stringify(this.data),this.data),[2]}})})},t.prototype.getShieldIPConfig=function(t){var e=this;return new Promise(function(o){return r(e,void 0,void 0,function(){var e,n;return a(this,function(i){switch(i.label){case 0:return[4,this.request("GET","common/is/is",{app_name:t})];case 1:if(e=i.sent())try{n=(n=JSON.parse(e)).data,this.data.isShieldIP=n.is_enable,o()}catch(c){o()}else o();return[2]}})})})},t.prototype.getIPAbroad=function(t,e,o){var n=this;return new Promise(function(i){return r(n,void 0,void 0,function(){var n,r;return a(this,function(a){switch(a.label){case 0:return[4,this.request("GET","common/is/v2/ml",{app_name:t,channel:e,version:o})];case 1:if(n=a.sent())try{r=(r=JSON.parse(n)).data,console.log("getIPAbroad",r.is_ml),this.data.is_ml=r.is_ml,0==r.is_ml&&jsb.reflection.callStaticMethod("AppController","gainCurrentIp"),i()}catch(l){i()}else i();return[2]}})})})},t.prototype.getShieldIPConfig2=function(){},t.prototype.getBmsConfig=function(){},t.prototype.setDefaultData=function(t){for(var e in t)this.data[e]=t[e]},t.prototype.jsonpCheck=function(t){var e=this;return new Promise(function(o){return r(e,void 0,void 0,function(){var e,n,i;return a(this,function(r){switch(r.label){case 0:return[4,this.request("GET",""+l,{token:t},!0)];case 1:if(e=r.sent(),console.log("[jsonpCheck] \u53c2\u6570",e),e)try{n=JSON.parse(e),console.log("info",n),0==n.code?(i=this.encryptUtils.decrypt(n.data.di),i=JSON.parse(i),console.log("res",i),console.log("x_token",i.x_token),console.log("randomStr",this.randomStr),i.x_token==this.randomStr?o():(console.log("Mismatch"),this.closeView())):(console.log("Mismatch"),this.closeView()),o()}catch(s){this.closeView(),o()}else o();return[2]}})})})},t.prototype.closeView=function(){cc.game.end(),window.close&&window.close(),window.wrongful=!0},t.prototype.randomString=function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyzoOLl9gqVvUuI12345678",o=e.length,n="",i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*o));return n},t.prototype.getShareConfig=function(t){var e=this;return new Promise(function(o){return r(e,void 0,void 0,function(){var e,n;return a(this,function(i){switch(i.label){case 0:return[4,this.request("GET","common/game/share_list",{app_name:t})];case 1:if(e=i.sent())try{n=(n=JSON.parse(e)).data,this.shareList=n.list,o()}catch(c){o()}else o();return[2]}})})})},t.prototype.getKey=function(t){return void 0!==this.data[t]?this.data[t]:this.defaultData[t]},t.prototype.checkKey=function(t){var e=void 0!==this.data[t]?this.data[t]:this.defaultData[t];return"number"==typeof e?1==e:"ip"==e?this.checkKey("isShieldIP"):"all"==e},t.prototype.getIsGS=function(){return 0==this.data.isShieldIP?(console.log("\u5e7f\u6df1\u5730\u533a"),!0):(console.log("\u975e\u5e7f\u6df1\u5730\u533a"),!1)},t.prototype.getIPISHome=function(){return 0==this.data.is_ml?(console.log("\u4e0d\u662f\u5927\u9646"),!1):(console.log("\u662f\u5927\u9646"),!0)},t.prototype.changeKey=function(t,e){this.data[t]=e},t.prototype.getShareList=function(){return this.shareList},t.prototype.get=function(){},t.prototype.post=function(){return new Promise(function(t){return t(1)})},t.prototype.request=function(t,e,o,n){switch(t){case"GET":return this.get(e,o,n);case"POST":return this.post(e,o)}},t.prototype.onTokenPostFail=function(){},t.prototype.onTokenRespondFail=function(){},t.prototype.post2=function(){},t.prototype.paramFormat2UrlStr=function(t){var e="";if("object"==(void 0===t?"undefined":typeof t))for(var o in Object.keys(t).length>0&&(e+="?"),t)"?"!=e&&(e+="&"),e+=o+"="+t[o];return e},t}();i.BMS=new d,cc._RF.pop()},{}],BoomItem:[function(t,e,o){"use strict";cc._RF.push(e,"e00a8t6jtVA05zePmCa+ttF","BoomItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineContact"),d=i("BeeThornDogTag"),p=cc._decorator,h=p.ccclass;p.property,function(t){t.normal="animation",t.boom="baozha"}(s||(s={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.spine=null,e.isInit=!1,e.isBoom=!1,e}return a(e,t),e.prototype.onLoad=function(){this.node.getComponent(l.default).onBeginContact=this.onBeginContact.bind(this),this.spine=this.node.getChildByName("spine").getComponent(sp.Skeleton),this.spine.setAnimation(0,s.normal,!0)},e.prototype.init=function(t){this.mgr=t,this.isInit=!0},e.prototype.onBeginContact=function(t,e,o){var n=this;this.isInit&&(this.isBoom||o.tag!=d.BeeThornDogTag.role&&o.tag!=d.BeeThornDogTag.magma||(this.mgr.isBoom=!0,this.isBoom=!0,this.scheduleOnce(function(){e.body.type=cc.RigidBodyType.Static,n.spine.node.scale=1.5,n.spine.setAnimation(0,s.boom,!1),n.mgr.roleRoot.children.forEach(function(t){t.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation5",!1)}),n.mgr.playBoomAudio(),n.mgr.fail(2)})))},e.prototype.boomEffect=function(t){var e=cc.instantiate(t);e.parent=this.mgr.node,e.position=this.convertPosition(t,e)},e.prototype.playSpineCallBack=function(t,e,o,n){void 0===o&&(o=!1);var i=t instanceof sp.Skeleton?t:t.getComponent(sp.Skeleton);i&&(i.setAnimation(0,e,o),i.setCompleteListener(function(t){t.animation.name==e&&n&&n()}))},e.prototype.convertPosition=function(t,e){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO))},c([h],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],Bore:[function(t,e,o){"use strict";cc._RF.push(e,"5b4a3Z+tCZGCq6Cu9o76iLJ","Bore");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("UserConst"),h=i("BmsManager"),u=i("EventManager"),f=i("PlatformManager"),g=i("PopupManager"),m=i("UserManager"),y=i("OPPOAndroidAdUtils"),v=i("OPPOMiniADUtils"),_=i("VIVOADUtils"),C=i("XMADUtils"),w=i("ShuShuConst"),P=cc._decorator,b=P.ccclass,T=(P.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("yesBtn",this.yesBtn,this),this.initView()},e.prototype.onEnable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?(C.XMAD.showLargeFeed(),C.XMAD.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.OPPO_ANDROID)?(y.OPPOAndroidAd.showLargeFeed(),y.OPPOAndroidAd.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.OPPO)?(v.OPPOMiniAD.showLargeFeed(),v.OPPOMiniAD.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.VIVO)?_.VIVOAD.showCustomAd_1(function(){_.VIVOAD.showCustomAd_2()}):f.Platform.showBanner()},e.prototype.onDisable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?(C.XMAD.removeLargePicFeed(),f.Platform.hideBanner()):f.Platform.is(d.EPlatform.OPPO_ANDROID)?(y.OPPOAndroidAd.removeLargePicFeed(),f.Platform.hideBanner()):f.Platform.hideBanner(),f.Platform.hideNativeAds(),f.Platform.hideCustomAd1(),f.Platform.hideCustomAd2(),f.Platform.hideCustomAd_1(),f.Platform.hideCustomAd_2()},e.prototype.noBtn=function(){g.Popup.hide()},e.prototype.yesBtn=function(){this.dict.boreShareIcon.active?cc.game.emit("bore_bore"):(console.log("\u6253\u5b54"),f.Platform.showRewardAds(function(t){0==t&&(u.Event.emit(l.default.boreBtn),cc.game.emit("gamelog_Thinking",w.ShuShuConst.reward_btn,{id:"009",lv:m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(p.TempData.CURRENT_MODE)}),g.Popup.hide())}))},e.prototype.initView=function(){var t=m.User.get(p.UserData.getBoreByShareTimes);m.User.get(p.UserData.getTipShareTimes),m.User.get(p.UserData.getResetByShareTimes),m.User.get(p.UserData.getDelayedByShareTimes),f.Platform.getConfig().hasShare&&"all"==h.BMS.getKey("share")&&(t?(this.dict.boreVideoIcon.getComponent(cc.Sprite).enabled=!1,this.dict.boreShareIcon.active=!0):(this.dict.boreVideoIcon.getComponent(cc.Sprite).enabled=!0,this.dict.boreShareIcon.active=!1))},c([b],e)}(s.default));r.default=T,cc._RF.pop()},{}],BottomBarTT:[function(t,e,o){"use strict";cc._RF.push(e,"432bdZwqStGqYYhyR1KOBdc","BottomBarTT");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PopupConst"),p=i("UserConst"),h=i("EventManager"),u=i("PlatformManager"),f=i("PopupManager"),g=i("UserManager"),m=cc._decorator,y=m.ccclass,v=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=null,e.isUnlockTip=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.level=this.dict.level,this.addBtnOn("keyBtn",this.clickKey,this),this.addBtnOn("tipBtn",this.clickTip,this),this.addBtnOn("skipBtn",this.clickSkip,this),this.initView()},e.prototype.onEnable=function(){h.Event.on(l.default.KEY_UPDATE,this.initView,this),h.Event.on(l.default.UPDATE_IS_UNLOCK_TIP,this.updateIsUnlockTip,this),cc.game.on("clickTip",this.clickTip_suc,this)},e.prototype.onDisable=function(){h.Event.off(l.default.KEY_UPDATE,this.initView,this),h.Event.off(l.default.UPDATE_IS_UNLOCK_TIP,this.updateIsUnlockTip,this),cc.game.off("clickTip",this.clickTip_suc,this)},e.prototype.updateIsUnlockTip=function(){this.isUnlockTip=!1,this.initTipView()},e.prototype.clickTip_suc=function(){this.isUnlockTip=!0,this.initTipView(),cc.game.emit("gamelog","page006"),f.Popup.show(d.PopupConst.TIP)},e.prototype.initView=function(){this.initTipView(),this.initSkipView()},e.prototype.initTipView=function(){this.isUnlockTip?(console.log("dsdfdsfds"),this.dict.tipVideo.active=!1,this.dict.tipEnough.active=!1):g.User.get(p.UserData.KEY)>=1?(this.dict.tipVideo.active=!1,this.dict.tipEnough.active=!0):(this.dict.tipVideo.active=!0,this.dict.tipEnough.active=!1)},e.prototype.initSkipView=function(){var t=g.User.get(p.UserData.KEY);this.dict.skipVideo.active=!(t>=2)},e.prototype.clickKey=function(){cc.game.emit("gamelog","btn016"),u.Platform.showRewardAds(function(t){if(0==t){cc.game.emit("gamelog","rewarde_btn002");var e=g.User.get(p.UserData.KEY);g.User.set(p.UserData.KEY,e+1),h.Event.emit(l.default.KEY_EFFECT)}})},e.prototype.clickTip=function(){var t=this;if(this.isUnlockTip)return f.Popup.show(d.PopupConst.TIP);if(this.dict.tipVideo.active)cc.game.emit("gamelog","btn017"),u.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog","rewarde_btn003"),t.isUnlockTip=!0,t.initTipView(),cc.game.emit("gamelog","page006"),f.Popup.show(d.PopupConst.TIP))});else{cc.game.emit("gamelog","btn018");var e=g.User.get(p.UserData.KEY)-1;e<=0&&(e=0),g.User.set(p.UserData.KEY,e),h.Event.emit(l.default.KEY_UPDATE),this.isUnlockTip=!0,this.initTipView(),cc.game.emit("gamelog","page005"),f.Popup.show(d.PopupConst.TIP)}},e.prototype.clickSkip=function(){cc.game.emit("gamelog","btn019"),this.dict.skipVideo.active?u.Platform.showRewardAds(function(t){if(0==t){var e=g.User.getTempData(p.TempData.CURRENT_LEVEL),o=g.User.getTempData(p.TempData.CURRENT_MODE);cc.game.emit("gamelog","Level_Skip_"+o+"_"+e),cc.game.emit("gamelog","rewarde_btn004"),cc.game.emit("game_success2")}}):f.Popup.show(d.PopupConst.SKIP)},c([y],e)}(s.default));r.default=v,cc._RF.pop()},{}],BottomBar:[function(t,e,o){"use strict";cc._RF.push(e,"8d22fgCyXVAw4gLn+PIMrz0","BottomBar");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("PopupConst"),h=i("UserConst"),u=i("BmsManager"),f=i("EventManager"),g=i("PlatformManager"),m=i("PopupManager"),y=i("TipManager"),v=i("UserManager"),_=i("ShuShuConst"),C=cc._decorator,w=C.ccclass,P=(C.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=null,e.isUnlockTip=!1,e.moderateBtnTime=30,e._16moderateBtnTime=30,e.isAnim=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.level=this.dict.level,this.addBtnOn("keyBtn",this.clickKey,this),this.addBtnOn("tipBtn",this.clickTip,this),this.addBtnOn("skipBtn",this.clickSkip,this),this.addBtnOn("move5Btn",this.move5Btn,this),this.addBtnOn("restartBtn2",this.restartBtn2,this),this.addBtnOn("chuiziBtn",this.chuiziBtn,this),this.addBtnOn("upsetBtn",this.upsetBtn,this),this.addBtnOn("boreBtn",this.boreBtn,this),this.addBtnOn("skipBtn2",this.clickSkip,this),this.addBtnOn("skipBtn3",this.clickSkip,this),this.addBtnOn("hideText",this.hideText,this),this.addBtnOn("tipBtn4",this.clickTip,this),this.addBtnOn("skipBtn4",this.clickSkip,this),this.addBtnOn("totalSkipBtn",this.clickSkip,this),this.addBtnOn("hammerBtn",this.hammerBtn,this),this.addBtnOn("shakeBtn",this.shakeBtn,this),this.addBtnOn("undoBtn",this.undoBtn,this),this.addBtnOn("wingBtn",this.wingBtn,this),this.addBtnOn("highlightBtn",this.highlightBtn,this),this.addBtnOn("4TipBtn",this._4TipBtn,this),this.addBtnOn("5TipBtn",this._5TipBtn,this),this.addBtnOn("5SkipBtn",this._5SkipBtn,this),this.addBtnOn("7TipBtn",this.clickTip.bind(this,"021"),this),this.addBtnOn("7SkipBtn",this.clickSkip.bind(this,"022"),this),this.addBtnOn("8TipBtn",this.clickTip.bind(this,"023"),this),this.addBtnOn("8SkipBtn",this.clickSkip.bind(this,"024"),this),this.addBtnOn("9TipBtn",this.clickTip.bind(this,"025"),this),this.addBtnOn("9SkipBtn",this.clickSkip.bind(this,"026"),this),this.addBtnOn("10TipBtn",this.clickTip.bind(this,"027"),this),this.addBtnOn("10SkipBtn",this.clickSkip.bind(this,"028"),this),this.addBtnOn("11TipBtn",this.clickTip.bind(this,"029"),this),this.addBtnOn("11SkipBtn",this.clickSkip.bind(this,"030"),this),this.addBtnOn("12TipBtn",this.clickTip.bind(this,"031"),this),this.addBtnOn("12SkipBtn",this.clickSkip.bind(this,"032"),this),this.addBtnOn("rotateBtn",this.rotateBtn,this),this.addBtnOn("13SkipBtn",this.clickSkip.bind(this,"034"),this),this.addBtnOn("moderateBtn",this.moderateBtn,this),this.addBtnOn("14SkipBtn",this.clickSkip.bind(this,"036"),this),this.addBtnOn("addStepBtn",this.addStepBtn,this),this.addBtnOn("15SkipBtn",this.clickSkip.bind(this,"038"),this),this.addBtnOn("16BackBtn",this._16BackBtn,this),this.addBtnOn("16ModerateBtn",this._16ModerateBtn,this),this.addBtnOn("16OverturnBtn",this._16OverturnBtn,this),this.addBtnOn("addScrewBtn",this.addScrewBtn,this),this.addBtnOn("17SkipBtn",this.clickSkip.bind(this,"044"),this),this.initView(),v.User.set_hammer(0),0==(v.User.get("Beginner_Tutorial")||0)&&(this.dict.chuiziBtnVideo.active=!1)},e.prototype.rotateBtn=function(){var t=this;g.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("rotateBtn"),t.videoReport("033"))})},e.prototype._16BackBtn=function(){var t=this;g.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("16BackBtn"),t.videoReport("039"))})},e.prototype._16OverturnBtn=function(){var t=this;g.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("16OverturnBtn"),t.videoReport("041"))})},e.prototype.addScrewBtn=function(){var t=this;g.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("addScrewBtn"),t.videoReport("043"))})},e.prototype.addStepBtn=function(){var t=this;g.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("addStepBtn"),t.videoReport("037"))})},e.prototype.moderateBtn=function(){var t=this;this.dict.moderateBtn.getChildByName("video").active&&g.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("moderateBtn"),t.dict.moderateBtn.getChildByName("video").active=!1,t.videoReport("035"),t.dict.moderateBtnText.getComponent(cc.Label).string=t.moderateBtnTime+"s",t.schedule(t.moderateBtn_,1))})},e.prototype.moderateBtn_=function(){if(this.moderateBtnTime-=1,this.moderateBtnTime<=0)return this.moderateBtnTime=0,this.unschedule(this.moderateBtn_),this.dict.moderateBtnText.getComponent(cc.Label).string="\u51cf\u901f",this.dict.moderateBtn.getChildByName("video").active=!0,void(this.moderateBtnTime=30);this.dict.moderateBtnText.getComponent(cc.Label).string=this.moderateBtnTime+"s"},e.prototype._16ModerateBtn=function(){var t=this;this.dict["16ModerateBtn"].getChildByName("video").active&&g.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("16ModerateBtn"),t.dict["16ModerateBtn"].getChildByName("video").active=!1,t.videoReport("040"),t.dict["16ModerateBtnText"].getComponent(cc.Label).string=t._16moderateBtnTime+"s",t.schedule(t._16moderateBtn_,1))})},e.prototype._16moderateBtn_=function(){if(this._16moderateBtnTime-=1,this._16moderateBtnTime<=0)return this._16moderateBtnTime=0,this.unschedule(this._16moderateBtn_),this.dict["16ModerateBtnText"].getComponent(cc.Label).string="\u51cf\u901f",this.dict["16ModerateBtn"].getChildByName("video").active=!0,void(this._16moderateBtnTime=30);this.dict["16ModerateBtnText"].getComponent(cc.Label).string=this._16moderateBtnTime+"s"},e.prototype._4TipBtn=function(){this.clickTip("014")},e.prototype._5TipBtn=function(){this.clickTip("016")},e.prototype._5SkipBtn=function(){this.clickSkip("017")},e.prototype.hammerBtn=function(){var t=this;this.dict.hammerBtn.getChildByName("video").active&&g.Platform.showRewardAds(function(e){0==e&&(console.log("hammerBtn"),cc.game.emit("hammerBtn"),t.dict.hammerBtn.getChildByName("video").active=!1,t.videoReport("013"))})},e.prototype.videoReport=function(t){cc.game.emit("gamelog_Thinking",_.ShuShuConst.reward_btn,{id:t,lv:v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(h.TempData.CURRENT_MODE)})},e.prototype.shakeBtn=function(){var t=this,e=v.User.get("shakeAmount");if(this.dict.shakeBtn.getChildByName("video").active)g.Platform.showRewardAds(function(o){if(0==o){t.videoReport("015");var n=e+3;v.User.set("shakeAmount",n),t.dict.shakeAmount.children[0].getComponent(cc.Label).string=String(n-1),n>1&&(t.dict.shakeBtn.getChildByName("video").active=!1,t.dict.shakeAmount.active=!0)}});else if(this.dict.shakeAmount.active){var o=e-1;v.User.set("shakeAmount",o),this.dict.shakeAmount.children[0].getComponent(cc.Label).string=String(o-1),o<=1&&(this.dict.shakeBtn.getChildByName("video").active=!0,this.dict.shakeAmount.active=!1),cc.game.emit("shakeBtn")}else cc.game.emit("shakeBtn")},e.prototype.undoBtn=function(){var t=this;g.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("undoBtn"),t.videoReport("018"))})},e.prototype.wingBtn=function(){var t=this;g.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("wingBtn"),t.videoReport("020"))})},e.prototype.highlightBtn=function(){var t=this;g.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("highlightBtn"),t.videoReport("019"))})},e.prototype.restartBtn2=function(){this.dict.restartShareIcon.active?(console.log("\u70b9\u51fb\u5206\u4eab"),v.User.setTempData("clickShare",!0),v.User.setTempData("shareReward","restart"),g.Platform.share()):g.Platform.showRewardAds(function(t){0==t&&(cc.game.emit("gamelog_Thinking",_.ShuShuConst.reward_btn,{id:"002",lv:v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(h.TempData.CURRENT_MODE)}),cc.game.emit("onRestartBtn"))})},e.prototype.chuiziBtn=function(){return 0==v.User.get("Beginner_Tutorial")?(v.User.set_hammer(1),this.dict.sz.position=cc.v2(this.dict.chuiziBtn.position.x+120,this.dict.chuiziBtn.position.y-50),void cc.game.emit("moveHand")):v.User.get_hammer("hammer")?(console.log("------\u5df2\u83b7\u5f97--------"),void y.Tip.show("\u8bf7\u70b9\u51fb\u4e00\u4e2a\u87ba\u4e1d")):(console.log("------\u672a\u83b7\u5f97--------"),void g.Platform.showRewardAds(function(t){0==t&&(v.User.set_hammer(1),y.Tip.show("\u8bf7\u70b9\u51fb\u4e00\u4e2a\u87ba\u4e1d"),cc.game.emit("chuiziBtn"))}))},e.prototype.upsetBtn=function(){g.Platform.showRewardAds(function(t){0==t&&(f.Event.emit(l.default.upset),cc.game.emit("gamelog_Thinking",_.ShuShuConst.reward_btn,{id:"006",lv:v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(h.TempData.CURRENT_MODE)}))})},e.prototype.boreBtn=function(){if(this.dict.boreShareIcon.active)return console.log("\u70b9\u51fb\u5206\u4eab"),v.User.setTempData("clickShare",!0),v.User.setTempData("shareReward","bore"),void g.Platform.share();console.log("\u6253\u5b54"),g.Platform.showRewardAds(function(t){0==t&&(f.Event.emit(l.default.boreBtn),cc.game.emit("gamelog_Thinking",_.ShuShuConst.reward_btn,{id:"008",lv:v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(h.TempData.CURRENT_MODE)}))})},e.prototype.boreBtn2=function(){m.Popup.show(p.PopupConst.Bore)},e.prototype.chuiziBtn2=function(){v.User.get_hammer("hammer")?this.dict.chuiziBtnVideo.active=!1:this.dict.chuiziBtnVideo.active=!0},e.prototype.onEnable=function(){f.Event.on(l.default.KEY_UPDATE,this.initView,this),f.Event.on(l.default.UPDATE_IS_UNLOCK_TIP,this.updateIsUnlockTip,this),f.Event.on(l.default.TIP_BTN_ANIM,this.tip_btn_anim,this),f.Event.on(l.default.switchMove5State,this.switchMove5State,this),f.Event.on(l.default.restartAnswer,this.restartAnswer,this),f.Event.on(l.default.restartAnswer2,this.restartAnswer2,this),cc.game.on("boreBtn",this.boreBtn2,this),cc.game.on("chuiziBtn",this.chuiziBtn2,this),cc.game.on("showHammerBtnVideo",this.showHammerBtnVideo,this),cc.game.on("shareSuc",this.shareSuc,this),cc.game.on("shareFail",this.shareFail,this),cc.game.on("timeEnd_answerBtn",this.timeEnd_answerBtn,this),cc.game.on("timeEnd_addTime",this.timeEnd_addTime,this),cc.game.on("bore_bore",this.bore_bore,this),cc.game.on("pause_answerBtn",this.pause_answerBtn,this)},e.prototype.onDisable=function(){f.Event.off(l.default.KEY_UPDATE,this.initView,this),f.Event.off(l.default.UPDATE_IS_UNLOCK_TIP,this.updateIsUnlockTip,this),f.Event.off(l.default.TIP_BTN_ANIM,this.tip_btn_anim,this),f.Event.off(l.default.switchMove5State,this.switchMove5State,this),f.Event.off(l.default.restartAnswer,this.restartAnswer,this),f.Event.off(l.default.restartAnswer2,this.restartAnswer2,this),cc.game.off("clickTip",this.clickTip_suc,this),cc.game.off("boreBtn",this.boreBtn2,this),cc.game.off("chuiziBtn",this.chuiziBtn2,this),cc.game.off("showHammerBtnVideo",this.showHammerBtnVideo,this),cc.game.off("shareSuc",this.shareSuc,this),cc.game.off("shareFail",this.shareFail,this),cc.game.off("timeEnd_answerBtn",this.timeEnd_answerBtn,this),cc.game.off("timeEnd_addTime",this.timeEnd_addTime,this),cc.game.off("bore_bore",this.bore_bore,this),cc.game.off("pause_answerBtn",this.pause_answerBtn,this)},e.prototype.shareSuc=function(){v.User.get(h.UserData.isFirstShared);var t=v.User.getTempData("clickShare");v.User.getTempData("shareReward"),t&&this.shareSucSub()},e.prototype.shareFail=function(){var t=v.User.get(h.UserData.isFirstShared),e=v.User.getTempData("clickShare");v.User.getTempData("shareReward"),!t&&e?this.shareSucSub():e&&(y.Tip.show("\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u5927\u4e8e10\u4eba\u7684\u7fa4\u91cc"),v.User.setTempData("clickShare",!1))},e.prototype.shareSucSub=function(){var t=v.User.getTempData("shareReward");v.User.set(h.UserData.isFirstShared,!0),v.User.setTempData("clickShare",!1),"restart"==t?(cc.game.emit("onRestartBtn"),v.User.set(h.UserData.getResetByShareTimes,0)):"tip"==t?(this.tipSuc(),v.User.set(h.UserData.getTipShareTimes,0)):"bore"==t?(f.Event.emit(l.default.boreBtn),v.User.set(h.UserData.getBoreByShareTimes,0)):"delayed"==t?v.User.set(h.UserData.getDelayedByShareTimes,0):"tip_timeEnd"==t?(f.Event.emit(l.default.restartAnswer),m.Popup.hide()):"addTime_timeEnd"==t?(f.Event.emit(l.default.extendTime),m.Popup.hide()):"bore_bore"==t?(f.Event.emit(l.default.boreBtn),m.Popup.hide()):"pause_answerBtn"==t&&(f.Event.emit(l.default.restartAnswer2),f.Event.emit(l.default.restoreTime),m.Popup.hide()),this.initShareView()},e.prototype.showHammerBtnVideo=function(){this.dict.hammerBtn.getChildByName("video").active=!0},e.prototype.switchMove5State=function(t){console.log("state",t),this.dict.move5Btn.active=t},e.prototype.restartAnswer=function(){var t=this;this.scheduleOnce(function(){cc.game.emit("onRestartBtn"),v.User.set(h.TempData.isUnlockTip,!0),t.isUnlockTip=!0,t.initTipView(),cc.game.emit("gamelog","page006"),m.Popup.show(p.PopupConst.TIP)},.3)},e.prototype.restartAnswer2=function(){var t=this;this.scheduleOnce(function(){v.User.set(h.TempData.isUnlockTip,!0),t.isUnlockTip=!0,t.initTipView(),cc.game.emit("gamelog","page006"),m.Popup.show(p.PopupConst.TIP)},.3)},e.prototype.tip_btn_anim=function(t){if(t[0]){if(this.isAnim)return;this.isAnim=!0,this.dict.tipBtn.stopAllActions(),this.dict.tipBtn.scale=1,cc.tween(this.dict.tipBtn).to(.25,{scale:1.15}).to(.25,{scale:1}).union().repeatForever().start()}else this.isAnim=!1,this.dict.tipBtn.stopAllActions()},e.prototype.updateIsUnlockTip=function(){this.dict.hammerBtn.getChildByName("video").active=!0,v.User.set(h.TempData.isUnlockTip,!1),this.isUnlockTip=!1,this.initTipView()},e.prototype.initView=function(){var t=this;this.initTipView(),this.initSkipView();var e=v.User.getTempData(h.TempData.CURRENT_MODE);this.node.children.forEach(function(e,o){o!=t.node.childrenCount-1&&(e.active=!1)}),0==e?this.dict.content.active=!0:1==e?this.dict.content1.active=!0:2==e?this.dict.content2.active=!0:3==e?this.dict.content3.active=!0:this.dict["content"+e].active=!0;var o=v.User.getTempData("cheats");g.Platform.is(d.EPlatform.WEB)||o?(this.dict.skipBtn.active=!1,this.dict.skipBtn2.active=!0,this.dict.hideText.active=!0,this.dict.skipBtn4.active=!0):(this.dict.skipBtn.active=!1,this.dict.skipBtn2.active=!1,this.dict.hideText.active=!0,this.dict.skipBtn4.active=!1),this.initShareView()},e.prototype.initShareView=function(){var t=v.User.get(h.UserData.getBoreByShareTimes),e=v.User.get(h.UserData.getTipShareTimes),o=v.User.get(h.UserData.getResetByShareTimes);v.User.get(h.UserData.getDelayedByShareTimes),g.Platform.getConfig().hasShare&&"all"==u.BMS.getKey("share")&&(o?(this.dict.restartVideoIcon.active=!1,this.dict.restartShareIcon.active=!0):(this.dict.restartVideoIcon.active=!0,this.dict.restartShareIcon.active=!1),e?(this.dict.tipVideoIcon.active=!1,this.dict.tipShareIcon.active=!0):(this.dict.tipVideoIcon.active=!0,this.dict.tipShareIcon.active=!1),t?(this.dict.boreVideoIcon.active=!1,this.dict.boreShareIcon.active=!0):(this.dict.boreVideoIcon.active=!0,this.dict.boreShareIcon.active=!1))},e.prototype.initTipView=function(){this.isUnlockTip?(console.log("dsdfdsfds"),this.dict.tipVideo.active=!1,this.dict.tipEnough.active=!1,this.node.children.forEach(function(t,e){if(t.name.includes("content")&&e>=4)for(var o=0;o<t.children.length;o++){var n=t.children[o];(n.name.includes("Tip")||n.name.includes("tipBtn"))&&(n.getChildByName("tipVideo").active=!1)}})):v.User.get(h.UserData.KEY)>=1?(this.dict.tipVideo.active=!1,this.dict.tipEnough.active=!0,this.node.children.forEach(function(t,e){if(t.name.includes("content")&&e>=4)for(var o=0;o<t.children.length;o++){var n=t.children[o];(n.name.includes("Tip")||n.name.includes("tipBtn"))&&(n.getChildByName("tipVideo").active=!1)}})):(this.dict.tipVideo.active=!0,this.dict.tipEnough.active=!1,this.node.children.forEach(function(t,e){if(t.name.includes("content")&&e>=4)for(var o=0;o<t.children.length;o++){var n=t.children[o];(n.name.includes("Tip")||n.name.includes("tipBtn"))&&(n.getChildByName("tipVideo").active=!0)}}))},e.prototype.initSkipView=function(){if(!v.User.getTempData(h.TempData.IS_WIN)){var t=v.User.get(h.UserData.KEY);this.dict.skipVideo.active=!(t>=2)}},e.prototype.clickKey=function(){v.User.getTempData(h.TempData.IS_WIN)||(cc.game.emit("gamelog","btn016"),g.Platform.showRewardAds(function(t){if(0==t){cc.game.emit("gamelog","rewarde_btn002");var e=v.User.get(h.UserData.KEY);v.User.set(h.UserData.KEY,e+1),f.Event.emit(l.default.KEY_EFFECT)}}))},e.prototype.timeEnd_answerBtn=function(){console.log("\u70b9\u51fb\u5206\u4eab"),v.User.setTempData("clickShare",!0),v.User.setTempData("shareReward","tip_timeEnd"),g.Platform.share()},e.prototype.timeEnd_addTime=function(){console.log("\u70b9\u51fb\u5206\u4eab"),v.User.setTempData("clickShare",!0),v.User.setTempData("shareReward","addTime_timeEnd"),g.Platform.share()},e.prototype.bore_bore=function(){console.log("\u70b9\u51fb\u5206\u4eab"),v.User.setTempData("clickShare",!0),v.User.setTempData("shareReward","bore_bore"),g.Platform.share()},e.prototype.pause_answerBtn=function(){console.log("\u70b9\u51fb\u5206\u4eab"),v.User.setTempData("clickShare",!0),v.User.setTempData("shareReward","pause_answerBtn"),g.Platform.share()},e.prototype.clickTip=function(t){var e=this;void 0===t&&(t="001");var o=v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),n=v.User.getTempData(h.TempData.CURRENT_MODE);if(cc.game.emit("gamelog_Thinking",_.ShuShuConst.Level_Tips,{lv:o,mode:n}),!v.User.getTempData(h.TempData.IS_WIN)){if(this.isUnlockTip)return m.Popup.show(p.PopupConst.TIP);if(this.dict.tipShareIcon.active)return console.log("\u70b9\u51fb\u5206\u4eab"),v.User.setTempData("clickShare",!0),v.User.setTempData("shareReward","tip"),void g.Platform.share();if(this.dict.tipVideo.active)cc.game.emit("gamelog","btn017"),g.Platform.showRewardAds(function(o){0==o&&(cc.game.emit("gamelog","rewarde_btn003"),e.tipSuc()),cc.game.emit("gamelog_Thinking",_.ShuShuConst.reward_btn,{id:t,lv:v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(h.TempData.CURRENT_MODE)})});else{cc.game.emit("gamelog","btn018");var i=v.User.get(h.UserData.KEY)-1;i<=0&&(i=0),v.User.set(h.UserData.KEY,i),f.Event.emit(l.default.KEY_UPDATE),this.isUnlockTip=!0,this.initTipView(),cc.game.emit("gamelog","page005"),m.Popup.show(p.PopupConst.TIP),v.User.set(h.UserData.hasUseKey,1)}}},e.prototype.tipSuc=function(){v.User.set(h.TempData.isUnlockTip,!0),this.isUnlockTip=!0,this.initTipView(),cc.game.emit("gamelog","page006"),m.Popup.show(p.PopupConst.TIP)},e.prototype.clickTip_suc=function(){v.User.set(h.TempData.isUnlockTip,!0),this.isUnlockTip=!0,this.initTipView(),cc.game.emit("gamelog","page006"),m.Popup.show(p.PopupConst.TIP)},e.prototype.clickSkip=function(t){void 0===t&&(t="007"),cc.game.emit("gamelog","btn019"),this.dict.skipVideo.active?g.Platform.showRewardAds(function(e){if(0==e){v.User.setTempData("isNeedInsert",!1);var o=v.User.getTempData(h.TempData.CURRENT_LEVEL),n=v.User.getTempData(h.TempData.CURRENT_MODE);cc.game.emit("gamelog","Level_Skip_"+n+"_"+o),cc.game.emit("gamelog","rewarde_btn004"),cc.game.emit("game_success2"),cc.game.emit("gamelog_Thinking",_.ShuShuConst.reward_btn,{id:t,lv:v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(h.TempData.CURRENT_MODE)})}}):m.Popup.show(p.PopupConst.SKIP)},e.prototype.hideText=function(){255==this.dict.hideText.opacity?(this.dict.hideText.opacity=0,this.dict.skipBtn.active=!1,this.dict.skipBtn2.active=!1):(this.dict.hideText.opacity=255,this.dict.skipBtn.active=!0,this.dict.skipBtn2.active=!0)},e.prototype.move5Btn=function(){g.Platform.showRewardAds(function(t){0==t&&(f.Event.emit(l.default.move5),cc.game.emit("gamelog_Thinking",_.ShuShuConst.reward_btn,{id:"003",lv:v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(h.TempData.CURRENT_MODE)}))})},c([w],e)}(s.default));r.default=P,cc._RF.pop()},{}],BrainLevelBase:[function(t,e,o){"use strict";cc._RF.push(e,"2b60cgbWiBDl7ZezLD1/izT","BrainLevelBase");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},s=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},l=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var d=i("LevelConstant"),p=cc._decorator,h=p.ccclass,u=p.property,f=p.executeInEditMode,g=p.executionOrder,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelID=-1,e.levelJSON=null,e.folder="",e.preloadAsset=!0,e.dict={},e.dgNode=null,e.cwNode=null,e.titleNode=null,e.isEnd=!1,e.loadAssetCount=0,e.loadAssetTotal=0,e.assetAssignmentType=1,e.assetCaches=[],e.audioCaches=[],e.assetLoadTimer=null,e}return a(e,t),e.prototype.onLoad=function(){this.onLevelInitial(),this.getDefaultNode(),this.setDefaultSpriteFrame(),this.setLevelAsset(),this.loadNodeTree(),this.onLevelLoad()},e.prototype.onEnable=function(){this.onLevelEnable()},e.prototype.start=function(){this.onLevelStart()},e.prototype.onDisable=function(){this.setPhysicsManager(!1,0),this.setCollisionManager(!1,!1),this.stopLevelAllSound(),this.clearDefaultSpriteFrame(),this.clearAssetCaches(),this.clearAudioCaches(),clearTimeout(this.assetLoadTimer),this.onLevelDisable()},e.prototype.onDestroy=function(){this.onLevelDestory()},e.prototype.lateUpdate=function(t){this.onLevelLateUpdate(t)},e.prototype.update=function(t){this.onLevelUpdate(t)},e.prototype.getDefaultNode=function(){this.cwNode=this.node.getChildByName("cw"),this.dgNode=this.node.getChildByName("dg"),this.titleNode=this.node.getChildByName("title")||this.node.getChildByName("lblTitle")},e.prototype.setDefaultSpriteFrame=function(){return s(this,void 0,Promise,function(){var t,e,o=this;return l(this,function(n){switch(n.label){case 0:return t=function(t,e){e&&(t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))},this.cwNode?cc.resources?(cc.resources.load("zqddn_zhb/level/cw",function(e,n){return s(o,void 0,void 0,function(){return l(this,function(o){switch(o.label){case 0:return e?[4,this.downloadSpriteFrame("texture/common/cw",".png")]:[3,2];case 1:n=o.sent(),o.label=2;case 2:return cc.isValid(this.cwNode)?(t(this.cwNode,n),[2]):[2]}})})}),[3,3]):[3,1]:[3,3];case 1:return[4,this.downloadSpriteFrame("texture/common/cw",".png")];case 2:e=n.sent(),t(this.cwNode,e),n.label=3;case 3:return this.dgNode?cc.resources?(cc.resources.load("zqddn_zhb/level/dg",function(e,n){return s(o,void 0,void 0,function(){return l(this,function(o){switch(o.label){case 0:return e?[4,this.downloadSpriteFrame("texture/common/dg",".png")]:[3,2];case 1:n=o.sent(),o.label=2;case 2:return cc.isValid(this.dgNode)?(t(this.dgNode,n),[2]):[2]}})})}),[3,6]):[3,4]:[3,6];case 4:return[4,this.downloadSpriteFrame("texture/common/dg",".png")];case 5:e=n.sent(),t(this.dgNode,e),n.label=6;case 6:return[2]}})})},e.prototype.clearDefaultSpriteFrame=function(){this.cwNode&&(this.cwNode.getComponent(cc.Sprite).spriteFrame=null),this.dgNode&&(this.dgNode.getComponent(cc.Sprite).spriteFrame=null)},e.prototype.clearAssetCaches=function(){this.assetCaches=[]},e.prototype.clearAudioCaches=function(){this.audioCaches=[]},e.prototype.setLevelAsset=function(){var t=this,e=function(e){t.loadAssetCount++,t.onLevelAssetsLoaded(e),t.loadAssetCount>=t.loadAssetTotal&&(t.assetLoadTimer=setTimeout(function(){t.onAssetLoadedAllFinishHandle(),t.onLevelAllAssetsLoaded(),t.onAssetAssignmentHandle(),t.onLevelReady()},0))};if(this.preloadAsset){var o=this.node.getChildByName("game");if(o){var n=function(o,n){return s(t,void 0,void 0,function(){var t,i,r,a,c,d,p=this;return l(this,function(h){switch(h.label){case 0:return t=function(t,o){return new Promise(function(i){return s(p,void 0,void 0,function(){var a,s,d,p,h;return l(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.downloadSpriteFrame(t,o)];case 1:return a=l.sent(),n&&cc.isValid(n.node)?(s=new cc.SpriteFrame(a),1!=(d=c).length&&(p=["insetLeft","insetRight","insetTop","insetBottom"],d.forEach(function(t,e){return s[p[e]]=Number(d[e+1])})),n instanceof cc.Mask&&n.node.setContentSize(a.width,a.height),1==this.assetAssignmentType?n.spriteFrame=s:2==this.assetAssignmentType&&this.assetCaches.push({t:1,c:n,a:s}),e(r),[2,i(!0)]):[2,i(!0)];case 2:return h=l.sent(),console.log(h),[2,i(!1)];case 3:return[2]}})})})},this.loadAssetTotal++,i=this.folder||""+this.levelID,r=o,2==(a=o.split(".")).length?(i="c"==a[0]?"common":a[0],r=a[1]):3==a.length&&("c"==a[0]&&(i="common/"+a[1]),r=a[2]),(c=r.split(",")).length>1&&(r=c[0]),0!=i.indexOf("common")&&(r=i+"_"+r),[4,t(d="texture/"+i+"/"+r,".png")];case 1:return h.sent()||t(d,".jpg"),[2]}})})},i=function(o,n){return s(t,void 0,void 0,function(){var t,i,r,a,c,s,d,p,h,u,f,g,m;return l(this,function(l){switch(l.label){case 0:this.loadAssetTotal++,t=this.folder||""+this.levelID,i=o,2==(r=o.split(".")).length?(t="c"==r[0]?"common":r[0],i=r[1]):3==r.length&&("c"==r[0]&&(t="common/"+r[1]),i=r[2]),a=i.split(","),c=null,s="default",2==a.length?(c=a[1],i=a[0]):3==a.length&&(s=a[2],c=a[1],i=a[0]),d="spine/"+t+"/"+i,p="spine/"+t+"/"+i,h="spine/"+t+"/"+i,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.downloadSpine(h,p,d)];case 2:return u=l.sent(),n&&cc.isValid(n.node)?(f=new sp.SkeletonData,u[0]?(f.skeletonJson=u[1],f.atlasText=u[0],f.textures=[u[2]],f.textureNames=[i+".png"]):f=u[1],1==this.assetAssignmentType?((m=new sp.SkeletonData).skeletonJson=u[1],m.atlasText=u[0],m.textures=[u[2]],m.textureNames=[i+".png"],m._uuid="txt",n.skeletonData=m,n.setSkin(s),n.defaultSkin=s,(c||f.getRuntimeData())&&(n.defaultAnimation=c||f.getRuntimeData().animations[0].name,n.setAnimation(0,c||f.getRuntimeData().animations[0].name,n.loop))):2==this.assetAssignmentType&&this.assetCaches.push({t:2,c:n,a:f,o:c,s:s}),e(i),[3,4]):[2];case 3:return g=l.sent(),console.log(g),[2];case 4:return[2]}})})};(function t(e){e.children.forEach(function(e){0!=e.children.length&&t(e);var o=e.getComponent(cc.Sprite);if(o&&o.enabled&&!o.spriteFrame)return n(e.name.split("=")[0],o);var r=e.getComponent(sp.Skeleton);if(r&&r.enabled&&!r.skeletonData)return i(e.name.split("=")[0],r);var a=e.getComponent(cc.Mask);return a&&a.enabled&&a.type==cc.Mask.Type.IMAGE_STENCIL&&!a.spriteFrame?n(e.name.split("=")[0],a):void 0})})(o),0==this.loadAssetTotal&&this.loadAssetCount==this.loadAssetTotal&&e("")}}else e(null)},e.prototype.downloadSpriteFrame=function(t,e){var o=this;return new Promise(function(n,i){d.ASSET_LOCAL_BUNDLE?cc.assetManager.loadBundle(d.ASSET_LOCAL_BUNDLE,function(e,o){if(e)return i(e);o.load(t,cc.Texture2D,function(t,e){if(t)return i(t);n(e)})}):(t+=e,t=""+o.getDomain()+t,cc.assetManager.loadRemote(t,function(t,e){if(t)return i(t);n(e)}))})},e.prototype.downloadSpine=function(t,e,o){var n=this;return new Promise(function(i,r){d.ASSET_LOCAL_BUNDLE?cc.assetManager.loadBundle(d.ASSET_LOCAL_BUNDLE,function(t,o){if(t)return r(t);o.load(e,sp.SkeletonData,function(t,e){if(t)return r(t);i([null,e,null])})}):(t=""+n.getDomain()+t+".atlas",e=""+n.getDomain()+e+".json",o=""+n.getDomain()+o+".png",cc.assetManager.loadAny([{url:t,ext:".txt"},{url:e,ext:".txt"}],function(t,e){if(t)return r(t);cc.assetManager.loadRemote(o,function(t,o){if(t)return r(t);i(e.concat([o]))})}))})},e.prototype.downloadAudio=function(t){var e=this;return new Promise(function(o,n){-1!=t.indexOf(d.domain)&&(t=t.substring(d.domain.length)),-1!=t.indexOf(d.domain_local)&&(t=t.substring(d.domain_local.length)),-1!=t.indexOf(".mp3")&&(t=t.substring(0,t.indexOf(".mp3"))),d.ASSET_LOCAL_BUNDLE?cc.assetManager.loadBundle(d.ASSET_LOCAL_BUNDLE,function(e,i){if(e)return n(e);i.load(t,cc.AudioClip,function(t,e){if(console.log("t---------\x3e:",t),t)return n(t);o(e)})}):(t=""+e.getDomain()+t+".mp3",console.log("t---------\x3e:",t),cc.assetManager.loadRemote(t,function(t,e){if(t)return n(t);o(e)}))})},e.prototype.loadNodeTree=function(){var t=this,e=this.node.getChildByName("game");if(e){this.dict[e.name]=e;var o=function e(o){o.children.forEach(function(o){if(0!=o.children.length&&e(o),-1==o.name.indexOf("copy")){var n=o.name.split("=");1!=n.length?(t.dict[n[1]]||(t.dict[n[1]]=o),o.name=n[1]):t.dict[o.name]||(t.dict[o.name]=o)}})};o(e);var n=this.node.getChildByName("temp");n&&(this.dict[n.name]=n,o(n))}},e.prototype.setPhysicsManager=function(t,e){void 0===e&&(e=0),(t||cc.director.getPhysicsManager().enabled&&!t)&&(cc.director.getPhysicsManager().enabled=t),(e||cc.director.getPhysicsManager().debugDrawFlags&&!e)&&(cc.director.getPhysicsManager().debugDrawFlags=e)},e.prototype.setCollisionManager=function(t,e){void 0===e&&(e=!1),(t||cc.director.getCollisionManager().enabled&&!t)&&(cc.director.getCollisionManager().enabled=t),(e||cc.director.getCollisionManager().enabledDebugDraw&&!e)&&(cc.director.getCollisionManager().enabledDebugDraw=e)},e.prototype.setAssetAssignmentType=function(t){void 0===t&&(t=1),this.assetAssignmentType=t},e.prototype.playRemoteSound=function(t,e,o){var n=this;return void 0===e&&(e=!1),void 0===o&&(o=1),new Promise(function(i){return s(n,void 0,void 0,function(){var n,r,a,c=this;return l(this,function(s){switch(s.label){case 0:console.log("t0000->>>>>>>:",t),this.audioCaches.push({url:t}),s.label=1;case 1:return console.log("t0001->>>>>>>:",t),s.trys.push([1,3,,4]),[4,this.downloadAudio(t)];case 2:return console.log("t0002->>>>>>>:",t),n=s.sent(),cc.isValid(this.node)?(r=this.audioCaches.find(function(e){return e.url==t&&!e.id}))?(a=cc.audioEngine.play(n,e,o),r.id=a,e||cc.audioEngine.setFinishCallback(a,function(){if(c.audioCaches){var t=c.audioCaches.findIndex(function(t){return t.id==a});-1!=t&&c.audioCaches.splice(t,1)}}),[2,i(a)]):[2,i(-1)]:[2];case 3:return console.log("t0003->>>>>>>:",t),s.sent(),i(-1),[3,4];case 4:return console.log("t0004->>>>>>>:",t),[2]}})})})},e.prototype.playLevelSound=function(t,e,o){void 0===e&&(e=!1),void 0===o&&(o=1);var n=this.folder||""+this.levelID,i="audio/"+n+"/"+n+"_"+t;return this.playRemoteSound(i,e,o)},e.prototype.stopLevelSound=function(t){var e=this.folder||""+this.levelID,o="audio/"+e+"/"+e+"_"+t,n=this.audioCaches.findIndex(function(t){return t.url==o});if(-1!=n){var i=this.audioCaches.splice(n,1)[0];i&&i.id&&cc.audioEngine.stop(i.id)}},e.prototype.stopLevelAllSound=function(){this.audioCaches.length&&(console.log(this.audioCaches),this.audioCaches.forEach(function(t){cc.audioEngine.stop(t.id)}),this.audioCaches=[])},e.prototype.playClickSound=function(){return this.playRemoteSound(d.AUDIO_URL.CLICK)},e.prototype.playErrorOnce=function(t,e){if(void 0===e&&(e=1),t){var o=cc.v2(),n=cc.v2();t instanceof cc.Event.EventTouch?(o=t.getLocation(),n=this.cwNode.parent.convertToNodeSpaceAR(o)):t instanceof cc.Node?(o=cc.v2(t.parent.convertToWorldSpaceAR(t.position)),n=this.cwNode.parent.convertToNodeSpaceAR(o)):t instanceof cc.Event.EventTouch&&(n=cc.v2(t)),this.cwNode.setPosition(n)}this.cwNode.active=!0,this.cwNode.scale=0,this.cwNode.stopAllActions(),this.playRemoteSound(d.AUDIO_URL.ERROR),cc.tween(this.cwNode).to(.3,{scale:1}).delay(e).to(.3,{scale:0}).start()},e.prototype.playError=function(t,e){var o=this;if(void 0===e&&(e=1),!this.isEnd){if(this.isEnd=!0,t){var n=cc.v2(),i=cc.v2();t instanceof cc.Event.EventTouch?(n=t.getLocation(),i=this.cwNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Node?(n=cc.v2(t.parent.convertToWorldSpaceAR(t.position)),i=this.cwNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Vec2&&(i=this.cwNode.parent.convertToNodeSpaceAR(t)),this.cwNode.setPosition(i)}this.cwNode.active=!0,this.cwNode.scale=0,this.cwNode.stopAllActions(),this.playRemoteSound(d.AUDIO_URL.ERROR),cc.tween(this.cwNode).to(.3,{scale:1}).delay(e).to(.3,{scale:0}).call(function(){o.gameError()}).start()}},e.prototype.playRightOnce=function(t,e){var o=this;if(void 0===e&&(e=1),t){var n=cc.v2(),i=cc.v2();t instanceof cc.Event.EventTouch?(n=t.getLocation(),i=this.dgNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Node?(n=cc.v2(t.parent.convertToWorldSpaceAR(t.position)),i=this.dgNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Event.EventTouch&&(i=cc.v2(t)),this.dgNode.setPosition(i)}this.dgNode.active=!0,this.dgNode.scale=0,this.dgNode.stopAllActions(),cc.tween(this.dgNode).delay(.3).call(function(){o.playRemoteSound(d.AUDIO_URL.RIGHT)}).to(.3,{scale:1},{easing:cc.easing.expoOut}).delay(e).to(.3,{scale:0}).start()},e.prototype.playRight=function(t,e){var o=this;if(void 0===e&&(e=1),!this.isEnd){if(this.isEnd=!0,t){var n=cc.v2(),i=cc.v2();t instanceof cc.Event.EventTouch?(n=t.getLocation(),i=this.dgNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Node?(n=cc.v2(t.parent.convertToWorldSpaceAR(t.position)),i=this.dgNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Event.EventTouch&&(i=cc.v2(t)),this.dgNode.setPosition(i)}this.dgNode.active=!0,this.dgNode.scale=0,this.dgNode.stopAllActions(),cc.tween(this.dgNode).delay(.3).call(function(){o.playRemoteSound(d.AUDIO_URL.RIGHT)}).to(.3,{scale:1},{easing:cc.easing.expoOut}).delay(e).call(function(){o.gameRight()}).start()}},e.prototype.gameError=function(){cc.game.emit("onRestartBtn")},e.prototype.gameRight=function(){cc.game.emit("game_success1"),console.log("\u8fd9\u91cc\u5417\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f01"),cc.game.emit("game_success2")},e.prototype.getDomain=function(){return d.domain},e.prototype.onAssetAssignmentHandle=function(){2==this.assetAssignmentType&&this.assetCaches.length&&cc.isValid(this.node,!0)&&this.assetCaches.forEach(function(t){cc.isValid(t.c.node)&&(1==t.t?t.c.spriteFrame=t.a:2==t.t&&(t.c.skeletonData=t.a,t.c.setSkin(t.s),(t.o||t.a.getRuntimeData())&&(t.c.defaultAnimation=t.o||t.a.getRuntimeData().animations[0].name,t.c.setAnimation(0,t.o||t.a.getRuntimeData().animations[0].name,t.c.loop))))})},e.prototype.onLevelInitial=function(){},e.prototype.onLevelUpdate=function(){},e.prototype.onLevelLateUpdate=function(){},e.prototype.onLevelLoad=function(){},e.prototype.onLevelEnable=function(){},e.prototype.onLevelStart=function(){},e.prototype.onLevelReady=function(){},e.prototype.onLevelDisable=function(){},e.prototype.onLevelDestory=function(){},e.prototype.onLevelAssetsLoaded=function(){},e.prototype.onLevelAllAssetsLoaded=function(){},e.prototype.onAssetLoadedAllFinishHandle=function(){},c([u({tooltip:"\u5173\u5361ID"})],e.prototype,"levelID",void 0),c([u({type:cc.JsonAsset,tooltip:"\u5173\u5361JSON"})],e.prototype,"levelJSON",void 0),c([u({tooltip:"\u8d44\u6e90\u8fdc\u7a0b\u6587\u4ef6\u5939\u540d\u5b57(\u82e5\u65e0\u5219\u4e3a\u5173\u5361ID)"})],e.prototype,"folder",void 0),c([u({displayName:"\u662f\u5426\u52a0\u8f7d\u8fdc\u7a0b\u8d44\u6e90"})],e.prototype,"preloadAsset",void 0),c([h,f,g(-1)],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],BrainLevelTips:[function(t,e,o){"use strict";cc._RF.push(e,"dccdej6X9tPY4wPiS7pHujm","BrainLevelTips");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},s=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},l=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var d=i("LevelConstant"),p=cc._decorator,h=p.ccclass,u=p.property,f=p.executeInEditMode,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.folder="",e.tipsSize=cc.v2(650,650),e.assetName=null,e}return a(e,t),e.prototype.onLoad=function(){var t=this.node.getChildByName("node")||this.node.children[0],e=this.tipsSize.x/t.width,o=this.tipsSize.y/t.height;t.scale=Math.min(o,e),this.autoSetAssetName(),this.setLevelAsset()},e.prototype.onDestroy=function(){},e.prototype.autoSetAssetName=function(){var t=this.assetName||this.node.assetName;if(t){switch(!0){case Number(t)<-2e4:this.folder="cf20000"}this.node.children[0].name=""+t}},e.prototype.setLevelAsset=function(){var t=this,e=this.node;if(e){var o=function(e,o){return s(t,void 0,void 0,function(){var t,n,i,r,a=this;return l(this,function(c){switch(c.label){case 0:return t=function(t,e){return new Promise(function(n){return s(a,void 0,void 0,function(){var i,r,a,c,s;return l(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.downloadSpriteFrame(t,e)];case 1:return i=l.sent(),o&&cc.isValid(o.node)?(o.spriteFrame=new cc.SpriteFrame(i),this.tipsSize.equals(cc.v2())?(r=this.node.getChildByName("node")||this.node.children[0])&&(a=r.width/o.node.width,c=r.height/o.node.height,o.node.scale=Math.min(c,a)):(a=this.tipsSize.x/o.node.width,c=this.tipsSize.y/o.node.height,o.node.scale=Math.min(c,a)),[2,n(!0)]):[2,n(!0)];case 2:return s=l.sent(),console.log(s),[2,n(!1)];case 3:return[2]}})})})},n=this.folder,(i=e.split(".")).length>1&&(n="c"==i[0]?"common":i[0]),[4,t(r="tips/"+n+"/"+e,".png")];case 1:return c.sent()||t(r,".jpg"),[2]}})})};(function t(e){e.children.forEach(function(e){0!=e.children.length&&t(e);var n=e.getComponent(cc.Sprite);if(n&&n.enabled&&!n.spriteFrame)return o(e.name.split("=")[0],n)})})(e)}},e.prototype.downloadSpriteFrame=function(t,e){var o=this;return new Promise(function(n,i){d.ASSET_LOCAL_BUNDLE?cc.assetManager.loadBundle(d.ASSET_LOCAL_BUNDLE,function(e,o){if(e)return i(e);o.load(t,cc.Texture2D,function(t,e){if(t)return i(t);n(e)})}):(t+=e,t=""+o.getDomain()+t,cc.assetManager.loadRemote(t,{maxRetryCount:1,retryInterval:100},function(t,e){if(t)return i(t);n(e)}))})},e.prototype.getDomain=function(){return d.domain},c([u({tooltip:"\u8d44\u6e90\u8fdc\u7a0b\u6587\u4ef6\u5939\u540d\u5b57(\u82e5\u65e0\u5219\u4e3a\u5173\u5361ID)"})],e.prototype,"folder",void 0),c([h,f],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],BrokenStoneItem:[function(t,e,o){"use strict";cc._RF.push(e,"55a8bveoexIXKO/MPG44OlC","BrokenStoneItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l,d=i("DrawPhysicsLineContact"),p=i("BeeThornDogTag"),h=cc._decorator,u=h.ccclass,f=h.property;(function(t){t.normal="animation",t.broken="animation2",t.shake="animation3",t.broken2="animation4"})(s||(s={})),function(t){t[t.stone1=0]="stone1",t[t.stone2=1]="stone2"}(l||(l={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currType=l.stone1,e.spine=null,e.isBroken=!1,e}return a(e,t),e.prototype.onLoad=function(){this.node.getComponent(d.default).onBeginContact=this.onBeginContact.bind(this),this.spine=this.node.getChildByName("spine").getComponent(sp.Skeleton);var t=this.node.getChildByName("spine");this.playSpineCallBack(t,"animation2",!1,function(){})},e.prototype.onBeginContact=function(t,e,o){if(o.tag==p.BeeThornDogTag.role||o.tag==p.BeeThornDogTag.line||o.tag==p.BeeThornDogTag.bee){if(this.isBroken)return;this.isBroken=!0,this.startBroken()}},e.prototype.playSpineCallBack=function(t,e,o,n){void 0===o&&(o=!1);var i=t instanceof sp.Skeleton?t:t.getComponent(sp.Skeleton);i&&(i.setAnimation(0,e,o),i.setCompleteListener(function(t){t.animation.name==e&&n&&n()}))},e.prototype.startBroken=function(){var t=this,e=this.node.getChildByName("spine");switch(this.currType){case l.stone1:this.playSpineCallBack(e,"animation2",!1,function(){t.playSpineCallBack(e,"animation3",!1,function(){t.playSpineCallBack(e,"animation3",!1,function(){t.playSpineCallBack(e,"animation3",!1,function(){t.playSpineCallBack(e,"animation3",!1,function(){t.playSpineCallBack(e,"animation3",!1,function(){t.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,t.removePhysics(t.node),t.playSpineCallBack(e,"animation4",!1,function(){t.node.active=!1})})})})})})});break;case l.stone2:this.playSpineCallBack(e,"animation2",!1,function(){t.playSpineCallBack(e,"animation3",!1,function(){t.playSpineCallBack(e,"animation3",!1,function(){t.playSpineCallBack(e,"animation3",!1,function(){t.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,t.removePhysics(t.node),t.playSpineCallBack(e,"animation4",!1,function(){t.node.active=!1})})})})})}},e.prototype.removePhysics=function(t){this.scheduleOnce(function(){t.removeComponent(cc.PhysicsCollider),t.removeComponent(cc.RigidBody)})},c([f({type:cc.Enum(l),tooltip:"\u7c7b\u578b"})],e.prototype,"currType",void 0),c([u],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],BubbleItem:[function(t,e,o){"use strict";cc._RF.push(e,"a75a4SZ8FJGjaNHwDx8Tuzv","BubbleItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineContact"),d=i("BeeThornDogTag"),p=cc._decorator,h=p.ccclass;p.property,function(t){t.idle="animation",t.break="animation2"}(s||(s={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.spine=null,e.isInit=!1,e.isBreak=!1,e}return a(e,t),e.prototype.onLoad=function(){this.node.getComponent(l.default).onBeginContact=this.onBeginContact.bind(this),this.spine=this.node.getChildByName("spine").getComponent(sp.Skeleton),this.spine.setAnimation(0,s.idle,!0)},e.prototype.onBeginContact=function(t,e,o){var n=this;this.isBreak||o.tag!=d.BeeThornDogTag.bee&&o.tag!=d.BeeThornDogTag.magma||(cc.log("[bubbleitem",o.tag),this.isBreak=!0,this.removePhysics(e.node),this.playSpineCallBack(this.spine,s.break,!1,function(){n.node.active=!1}))},e.prototype.boomEffect=function(t){var e=cc.instantiate(t);e.parent=this.mgr.node,e.position=this.convertPosition(t,e)},e.prototype.playSpineCallBack=function(t,e,o,n){void 0===o&&(o=!1);var i=t instanceof sp.Skeleton?t:t.getComponent(sp.Skeleton);i&&(i.setAnimation(0,e,o),i.setCompleteListener(function(t){t.animation.name==e&&n&&n()}))},e.prototype.convertPosition=function(t,e){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO))},e.prototype.removePhysics=function(t){this.scheduleOnce(function(){t.removeComponent(cc.PhysicsCollider),t.removeComponent(cc.RigidBody)})},c([h],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],ChallengeHttp:[function(t,e,o){"use strict";cc._RF.push(e,"e05fcG+euBPNZPaWNAB54S2","ChallengeHttp");var n=t,i=o,r=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.challengeHttp=void 0;var c=n("PlatformManager"),s=n("MD5Type"),l=function(){function t(){}return t.prototype.getCountry=function(){var t=this;return new Promise(function(e){return r(t,void 0,void 0,function(){var t,o,n,i;return a(this,function(r){switch(r.label){case 0:return[4,this.get("common/is/v2/is",{app_name:c.Platform.getConfig().flag,channel:"tt",version:c.Platform.getConfig().version})];case 1:t=r.sent();try{o=JSON.parse(t),e((null===(i=null===(n=o.data)||void 0===n?void 0:n.info)||void 0===i?void 0:i.province)||"UNKNOW")}catch(l){e("UNKNOW")}return[2]}})})})},t.prototype.getRank=function(t,e){var o=this;return void 0===e&&(e="1"),new Promise(function(n){return r(o,void 0,void 0,function(){var o,i,r;return a(this,function(a){switch(a.label){case 0:return(o={app_name:c.Platform.getConfig().flag,rank_name:t,page_size:"40",page:e,timestamp:Math.floor((new Date).getTime()/1e3),nonce:this.randomString(32)}).sign=this.getSign(o),[4,this.post("common/rank/list",o)];case 1:i=a.sent();try{r=JSON.parse(i),n(r.data)}catch(s){n({list:[],total:0})}return[2]}})})})},t.prototype.setRank=function(t,e,o){var n=this;return new Promise(function(i){return r(n,void 0,void 0,function(){var n,r,s;return a(this,function(a){switch(a.label){case 0:return(n={app_name:c.Platform.getConfig().flag,rank_name:t,key:e,score:o,timestamp:Math.floor((new Date).getTime()/1e3),nonce:this.randomString(32)}).sign=this.getSign(n),[4,this.post("/common/rank/set-score",n)];case 1:r=a.sent();try{s=JSON.parse(r),i(s.data)}catch(l){i({list:[],total:0})}return[2]}})})})},t.prototype.incrRank=function(){return""},t.prototype.getServerTime=function(){},t.prototype.randomString=function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyzoOLl9gqVvUuI12345678_",o=e.length,n="",i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*o));return n},t.prototype.getSign=function(t){var e=[];for(var o in t)e.push(o);e=e.sort();var n="";return e.forEach(function(o,i){n+=o+"="+t[o]+(i==e.length-1?"":"&")}),n+="VuFFap7NHJA70M9xWb9fSQcdVtivPY4E",(new s.Md5).md5(n)},t.prototype.formatPostData=function(t){var e=[];for(var o in t)e.push(o);e=e.sort();var n="";return e.forEach(function(o,i){n+=o+"="+t[o]+(i==e.length-1?"":"&")}),n},t.prototype.get=function(t,e){return new Promise(function(o){for(var n in t+="?",e)t+=n+"="+e[n]+"&";var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&(i.status>=200&&i.status<400?o(i.response):o(null))},i.open("GET",t),i.send(),i.onerror=function(){o(null)},i.ontimeout=function(){o(null)}})},t.prototype.post=function(){},t.prototype.request=function(t,e,o){switch(t){case"GET":return this.get(e,o);case"POST":return this.post(e,o)}},t}();i.challengeHttp=new l,cc._RF.pop()},{}],Cheats:[function(t,e,o){"use strict";cc._RF.push(e,"fe517Pb0PZMkrsK875Sm2BT","Cheats");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},s=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},l=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var d=i("BaseUI"),p=i("PlatformManager"),h=i("PopupManager"),u=i("TipManager"),f=i("UserManager"),g=cc._decorator,m=g.ccclass,y=(g.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noAdBtn",this.clickNoAd,this),this.addBtnOn("unlockBtn",this.clickUnlock,this),this.addBtnOn("close",this.clickClose,this),this.addBtnOn("gmBtn",this.gmBtn,this),this.addBtnOn("clear",this.clear,this),f.User.setTempData("cheats",!0)},e.prototype.clickUnlock=function(){return s(this,void 0,void 0,function(){return l(this,function(){return[2]})})},e.prototype.clickNoAd=function(){p.Platform.setNoAd(!0),u.Tip.show("\u6210\u529f\u53bb\u5e7f\u544a\uff01")},e.prototype.clickClose=function(){h.Popup.hide()},e.prototype.gmBtn=function(){u.Tip.show("\u6253\u5f00debug"),p.Platform.showAdDebugger(),this.clickClose()},e.prototype.clear=function(){u.Tip.show("\u6e05\u9664\u6570\u636e"),cc.sys.localStorage.clear()},c([m],e)}(d.default));r.default=y,cc._RF.pop()},{}],ClickLock:[function(t,e,o){"use strict";cc._RF.push(e,"a0431cdSDZLC4S1xZSweMQ3","ClickLock");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.ClickLock=void 0,n.ClickLock=function(t){return void 0===t&&(t=.2),function(e,o,n){var i=n.value,r=!1;n.value=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(!r)return r=!0,setTimeout(function(){r=!1},1e3*t),i.apply(this,e),n;console.log("isLocking")}}},cc._RF.pop()},{}],Coin:[function(t,e,o){"use strict";cc._RF.push(e,"7016b+e7PJOu54morQmQ51Y","Coin");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("EventConst"),l=i("EffectManager"),d=i("EventManager"),p=i("UserManager"),h=cc._decorator,u=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.amount=null,e}return a(e,t),e.prototype.onEnable=function(){this.initEvent(),this.initView()},e.prototype.onDisable=function(){this.clearEvent()},e.prototype.initView=function(){var t=p.User.get("coin")||0;p.User.set("coin",t),this.amount.string=""+t},e.prototype.initEvent=function(){d.Event.on(s.default.COIN_UPDATE,this.changeKey,this),d.Event.on(s.default.COIN_EFFECT,this.keyEffect,this),d.Event.on(s.default.COIN_EFFECT_S,this.keyEffect_s,this),d.Event.on(s.default.COIN_EFFECT_M,this.keyEffect_k,this)},e.prototype.clearEvent=function(){d.Event.off(s.default.COIN_UPDATE,this.changeKey,this),d.Event.off(s.default.COIN_EFFECT,this.keyEffect,this),d.Event.off(s.default.COIN_EFFECT_S,this.keyEffect_s,this),d.Event.off(s.default.COIN_EFFECT_M,this.keyEffect_k,this)},e.prototype.changeKey=function(){var t=p.User.get("coin")||0;this.amount.string=""+t},e.prototype.keyEffect=function(){l.Effect.showEffect(10,this.icon,2,1)},e.prototype.keyEffect_s=function(){l.Effect.showEffect(8,this.icon,2,2)},e.prototype.keyEffect_k=function(){l.Effect.showEffect(10,this.icon,2,3)},e.prototype.clickSelf=function(){},c([f(cc.Node)],e.prototype,"icon",void 0),c([f(cc.Label)],e.prototype,"amount",void 0),c([u],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],Collision:[function(t,e,o){"use strict";cc._RF.push(e,"e4499wSYcBNuLBL8Krzrson","Collision");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.onCollisionEnter=function(){},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],Comment:[function(t,e,o){"use strict";cc._RF.push(e,"6bb816Q0RlAo6D++7loEDgC","Comment");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("PlatformConst"),d=i("UserConst"),p=i("BmsManager"),h=i("PlatformManager"),u=i("PopupManager"),f=i("TipManager"),g=i("UserManager"),m=i("Stars"),y=i("XMADUtils"),v=i("LanguageManager"),_=cc._decorator,C=_.ccclass,w=_.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stars=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("define",this.clickDefine,this),this.initView()},e.prototype.onEnable=function(){h.Platform.is(l.EPlatform.XIAOMI_ANDROID)?y.XMAD.showBannerFeed():h.Platform.showBanner()},e.prototype.onDisable=function(){h.Platform.hideBanner()},e.prototype.initView=function(){},e.prototype.clickGiveUp=function(){u.Popup.hide()},e.prototype.clickDefine=function(){if(this.stars.isTouch){var t=this.stars.starNum;this.stars.setCanMark(!1);var e=p.BMS.getKey("evaluatestar");console.log("starNum",t),console.log("showNum",e),t>=e&&h.Platform.gameComment(),g.User.set(d.UserData.IS_COMMENT,1),f.Tip.show(v.default.formatStr("\u8bc4\u5206\u6210\u529f\u3002")),u.Popup.hide()}else f.Tip.show(v.default.formatStr("\u8bf7\u5148\u8bc4\u5206!"))},c([w(m.default)],e.prototype,"stars",void 0),c([C],e)}(s.default);r.default=P,cc._RF.pop()},{}],ConfigConst:[function(t,e,o){"use strict";cc._RF.push(e,"21aab4okM9JYa0gpJYLoGLX","ConfigConst");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigConst=void 0,function(t){t.THEME="config/theme",t.TIP="config/tips",t.RESULT="config/result",t.LANGUAGE="config/language",t.Rank="config/rank",t.Skin0="config/skin0",t.Task="config/task"}(n.ConfigConst||(n.ConfigConst={})),cc._RF.pop()},{}],ConfigManager:[function(t,e,o){"use strict";cc._RF.push(e,"a32dfXmG0xMFaP2TzV79ZHA","ConfigManager");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.Config=void 0;var i=function(){function t(){this.list={}}return t.prototype.preload=function(t){this.list[t]||cc.resources.preload(t)},t.prototype.get=function(t){var e=this;return new Promise(function(o){if(console.log("path==",t),e.list[t])return o(e.list[t]);cc.resources.load(t,function(n,i){return n?console.warn(n):(e.list[t]=e.parseData(i.json),o(e.list[t]))})})},t.prototype.parseData=function(t){for(var e={},o=0;o<t.values.length;o++)e[""+t.values[o][0]]=t.values[o];var n=t.values.length,i=[];for(o=0;o<n;o++){for(var r=e[""+(o+1)],a={},c=0;c<r.length;c++)a[""+t.keys[c]]=r[c];i.push(a)}return i},t}();n.Config=new i,cc._RF.pop()},{}],ConfigUtils:[function(t,e,o){"use strict";cc._RF.push(e,"5dc93HYMAZK8Zcci5ZC94AJ","ConfigUtils");var n=t,i=o,r=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.ConfigUtils=void 0;var c=n("ConfigConst"),s=n("UserConst"),l=n("ConfigManager"),d=n("PlatformManager"),p=n("UserManager"),h=function(){function t(){}return t.getLevelIDByIndex=function(t,e,o){var n=String(t);0==t&&(n=t+d.Platform.getConfig().configSuffix,console.log("path",n)),l.Config.get(c.ConfigConst.THEME+n).then(function(t){for(var n=0;n<t.length;n++)t[n].id==e&&o(t[n].stageID)})},t.getLevelIDByDevelop=function(t,e){var o=this,n=[];l.Config.get(c.ConfigConst.THEME).then(function(i){if(i.forEach(function(t){n.push(""+t.theme)}),0==o.allLevel.length)o.loadSubs(n,function(){for(var n=0;n<o.allLevel.length;n++)o.allLevel[n].stage1ID==t?e(o.allLevel[n],1):o.allLevel[n].stage2ID==t&&e(o.allLevel[n],2)},function(){});else for(var r=0;r<o.allLevel.length;r++)o.allLevel[r].stage1ID==t?e(o.allLevel[r],1):o.allLevel[r].stage2ID==t&&e(o.allLevel[r],2)})},t.loadSubs=function(t,e,o){return r(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:n.trys.push([0,4,,5]),n.label=1;case 1:return t.length?[4,this.loadSub(t.shift())]:[3,3];case 2:return n.sent(),[3,1];case 3:return e&&e(),[3,5];case 4:return n.sent(),o?[2]:[3,5];case 5:return[2]}})})},t.loadSub=function(t){var e=this;return new Promise(function(o){l.Config.get(c.ConfigConst.THEME+t).then(function(n){console.log("\u52a0\u8f7d\u5b8c\u6210",t),n.mode=t;for(var i=0;i<n.length;i++)n[i].mode=t;console.log("res",n),e.allLevel=e.allLevel.concat(n),o(null)})})},t.getDataByID=function(t,e){l.Config.get(c.ConfigConst.THEME).then(function(o){for(var n,i=0;i<o.length;i++)o[i].theme==t&&(n=o[i]);var r=String(t);0==t&&(r=t+d.Platform.getConfig().configSuffix,console.log("path",r)),l.Config.get(c.ConfigConst.THEME+r).then(function(t){for(var o=0,i=0;i<t.length;i++)o+=1;n.amount=o,e(n)})})},t.setNextModeID=function(){for(var t=p.User.getTempData(s.TempData.CURRENT_MODE),e=p.User.getTempData(s.TempData.CURRENT_ALL_MODE),o=0;o<e.length;o++)if(e[o].theme==t)return void(o+1>=e.length?(p.User.setTempData(s.TempData.NEXT_MODE_ID,t),console.log("\u4e0b\u4e00\u4e2a\u6a21\u5f0f",e[o])):(p.User.setTempData(s.TempData.NEXT_MODE_ID,e[o+1].theme),console.log("\u4e0b\u4e00\u4e2a\u6a21\u5f0f",e[o+1])))},t.allLevel=[],t}();i.ConfigUtils=h,cc._RF.pop()},{}],CopyRightDialog:[function(t,e,o){"use strict";cc._RF.push(e,"41235LESE1J6oauE1d5FoIs","CopyRightDialog");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("myXxtea"),a=cc.Node.EventType,c=function(){function t(){this._root=null,this._textNode=null,this._lblText=null,this.group=null}return t.prototype.init=function(t){void 0===t&&(t="default"),this._root||(t&&(this.group=t),this._initRoot(),this._initTouchNode(),this._initTextNode())},t.prototype._initRoot=function(){var t=cc.director.getScene(),e=new cc.Node("CR");this._root=e,e.parent=t,e.zIndex=cc.macro.MAX_ZINDEX,e.setContentSize(cc.winSize),e.setPosition(cc.winSize.width>>1,cc.winSize.height>>1),cc.game.addPersistRootNode(e),this.group&&(e.group=this.group)},t.prototype._initTouchNode=function(){var t=this,e=new cc.Node("touchNode");e.parent=this._root,e.setContentSize(200,150),e.anchorY=1,e.setPosition(0,cc.winSize.height>>1);var o=null,n=[],i=[1,1,0,2,2,0];e.on(a.TOUCH_START,function(t){o=t.getLocation()},this);var r=function(e){var r=e.getLocation().sub(o);r.mag()>10?r.x<0?n.push(1):n.push(2):n.push(0);var a=n.length-1;n[a]!=i[a]?n=[]:n.length==i.length&&(t.showText(t.copyrightDecrypt()),n=[]),cc.log(n)};e.on(a.TOUCH_END,r,this),e.on(a.TOUCH_CANCEL,r,this),e._touchListener.setSwallowTouches(!1)},t.prototype._initTextNode=function(){var t=new cc.Node("text");this._textNode=t,t.parent=this._root,t.setPosition(cc.v2());var e=new cc.Node("graphics").addComponent(cc.Graphics);e.node.parent=t;var o=new cc.Node("text").addComponent(cc.Label),n=o.node;this._lblText=o,o.overflow=cc.Label.Overflow.RESIZE_HEIGHT,o.node.parent=t,o.horizontalAlign=cc.Label.HorizontalAlign.CENTER,o.verticalAlign=cc.Label.VerticalAlign.CENTER,n.width=500,o.node.on(cc.Node.EventType.SIZE_CHANGED,function(){e.fillColor=cc.color(0,0,0,191),e.clear();var t=cc.size(n.width+30,n.height+30);e.roundRect(-t.width>>1,-t.height>>1,t.width,t.height,20),e.fill()},this)},t.prototype.showText=function(t){var e=this;this._textNode.setPosition(cc.v2()),this._textNode.stopAllActions(),this._textNode.opacity=255,cc.tween(this._textNode).by(.5,{y:200}).delay(1.3).call(function(){e._textNode.opacity=0}).start(),this._lblText.string=t,cc.game.emit("gesture")},t.prototype.copyrightDecrypt=function(){return(new r.myXxtea).xxtea_decrypt("b3ba6f3fdf954d34325b29de64289ba6e08c3b8f73517d56e115b3585508ce86dc4106f199d57538d3e865e0e02eda4c0f51cd7e31e5626f65202f7b","sjcoejdhsffstedg")},t}();i.default=c,cc._RF.pop()},{}],CrocodileItem:[function(t,e,o){"use strict";cc._RF.push(e,"ac5a0EBHBBE2rrx3Jd37Occ","CrocodileItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("DrawPhysicsLineContact"),d=i("BeeThornDog"),p=i("BeeThornDogTag"),h=i("BeeThornDogWater"),u=cc._decorator,f=u.ccclass,g=u.property;(function(t){t.ludi_daiji="ludi_daiji",t.ludi_yao="ludi_yao",t.ludi_yidong="ludi_yidong",t.shuili_daiji="shuili_daiji",t.shuili_yao="shuili_yao",t.shuili_yaodaiji="shuili_yaodaiji"})(s||(s={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destination=cc.v2(),e.velocityY=0,e.mgr=null,e.mgrWater=null,e.spine=null,e.isInit=!1,e.isMoving=!1,e.standBy=!1,e.inWater=!1,e.upOrDown=0,e}return a(e,t),e.prototype.onLoad=function(){this.mgr=this.node.parent.parent.parent.parent.getComponent(d.default),this.mgrWater=this.node.parent.parent.parent.parent.getComponent(h.default),this.node.getComponent(l.default).onBeginContact=this.onBeginContact.bind(this),this.spine=this.node.getChildByName("spine").getComponent(sp.Skeleton),this.destination.y>this.node.y?this.upOrDown=1:this.destination.y<this.node.y&&(this.upOrDown=-1),this.mgrWater&&this.node.parent.convertToWorldSpaceAR(this.node.position).y<=this.mgrWater.waterY&&(this.inWater=!0),this.playStandBy()},e.prototype.onBeginContact=function(t,e,o){var n=this;this.mgr&&o.tag==p.BeeThornDogTag.role&&e.tag==p.BeeThornDogTag.crocodileMouth&&(o.node.isDie||(o.node.isDie=!0,this.scheduleOnce(function(){e.body.type=cc.RigidBodyType.Static,n.playYao(function(){o.node.getChildByName("spine").active=!1,o.node.getChildByName("die").active=!0,n.mgr.fail(2)}),n.playStandBy(!0)})))},e.prototype.update=function(){if(this.mgr.isStart){if(this.standBy||this.destination.equals(cc.v2()))return void(this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0));this.node.position.sub(this.destination).mag()<=15?(this.playStandBy(),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),this.standBy=!0):(this.isMoving||(this.inWater||this.spine.setAnimation(0,s.ludi_yidong,!0),this.isMoving=!0),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.node.scaleX>0?-100:100,this.velocityY?this.velocityY:0))}},e.prototype.playStandBy=function(t){void 0===t&&(t=!1),this.inWater?t?this.spine.addAnimation(0,s.shuili_daiji,!0):this.spine.setAnimation(0,s.shuili_daiji,!0):t?this.spine.addAnimation(0,s.ludi_daiji,!0):this.spine.setAnimation(0,s.ludi_daiji,!0)},e.prototype.playYao=function(t){var e=this;this.inWater?(this.spine.setAnimation(0,s.shuili_yao,!1),this.scheduleOnce(function(){e.spine.setCompleteListener(null),t&&t()},.2)):(this.spine.setAnimation(0,s.ludi_yao,!1),this.scheduleOnce(function(){e.spine.setCompleteListener(null),t&&t()},.2))},c([g({displayName:"\u8d70\u5230\u67d0\u4e2a\u70b9\u505c\u4e0b"})],e.prototype,"destination",void 0),c([g({displayName:"Y\u8f74\u7ebf\u6027\u901f\u5ea6"})],e.prototype,"velocityY",void 0),c([f],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],CryHelp:[function(t,e,o){"use strict";cc._RF.push(e,"16de9VuAvdDnYSAeAtHcVEF","CryHelp");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("PlatformManager"),d=i("PopupManager"),p=cc._decorator,h=p.ccclass,u=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("defineBtn",this.clickDefine,this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this)},e.prototype.onEnable=function(){cc.game.on("shareSuc",this.shareSuc,this)},e.prototype.onDisable=function(){cc.game.off("shareSuc",this.shareSuc,this)},e.prototype.clickDefine=function(){l.Platform.share(),d.Popup.hide(),setTimeout(function(){cc.game.emit("clickTip")},2e3)},e.prototype.clickGiveUp=function(){d.Popup.hide()},e.prototype.shareSuc=function(){},c([h],e)}(s.default));r.default=u,cc._RF.pop()},{}],DealUnlock:[function(t,e,o){"use strict";cc._RF.push(e,"76c682prTdFB6Ss/ZGIm92E","DealUnlock");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("PlatformConst"),d=i("UserConst"),p=i("BmsManager"),h=i("PlatformManager"),u=i("PopupManager"),f=i("UserManager"),g=i("OPPOAndroidAdUtils"),m=i("OPPOMiniADUtils"),y=i("VIVOADUtils"),v=i("XMADUtils"),_=i("ShuShuConst"),C=cc._decorator,w=C.ccclass,P=(C.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("yesBtn",this.yesBtn,this)},e.prototype.onEnable=function(){h.Platform.is(l.EPlatform.XIAOMI_ANDROID)?(v.XMAD.showLargeFeed(),v.XMAD.showInterstitialFeed_result()):h.Platform.is(l.EPlatform.OPPO_ANDROID)?(g.OPPOAndroidAd.showLargeFeed(),g.OPPOAndroidAd.showInterstitialFeed_result()):h.Platform.is(l.EPlatform.OPPO)?(m.OPPOMiniAD.showLargeFeed(),m.OPPOMiniAD.showInterstitialFeed_result()):h.Platform.is(l.EPlatform.VIVO)?y.VIVOAD.showCustomAd_1(function(){y.VIVOAD.showCustomAd_2()}):h.Platform.showBanner()},e.prototype.onDisable=function(){h.Platform.is(l.EPlatform.XIAOMI_ANDROID)?(v.XMAD.removeLargePicFeed(),h.Platform.hideBanner()):h.Platform.is(l.EPlatform.OPPO_ANDROID)?(g.OPPOAndroidAd.removeLargePicFeed(),h.Platform.hideBanner()):h.Platform.hideBanner(),h.Platform.hideNativeAds(),h.Platform.hideCustomAd1(),h.Platform.hideCustomAd2(),h.Platform.hideCustomAd_1(),h.Platform.hideCustomAd_2()},e.prototype.noBtn=function(){u.Popup.hide()},e.prototype.yesBtn=function(){this.dict.boreShareIcon.active?cc.game.emit("bore_bore"):(console.log("\u589e\u52a0\u87ba\u4e1d"),h.Platform.showRewardAds(function(t){0==t&&(cc.game.emit("addScrewBtn"),cc.game.emit("gamelog_Thinking",_.ShuShuConst.reward_btn,{id:"043",lv:f.User.getTempData(d.TempData.CURRENT_LEVEL_ID),mode:f.User.getTempData(d.TempData.CURRENT_MODE)}),u.Popup.hide())}))},e.prototype.initView=function(){var t=f.User.get(d.UserData.getBoreByShareTimes);f.User.get(d.UserData.getTipShareTimes),f.User.get(d.UserData.getResetByShareTimes),f.User.get(d.UserData.getDelayedByShareTimes),h.Platform.getConfig().hasShare&&"all"==p.BMS.getKey("share")&&(t?(this.dict.boreVideoIcon.getComponent(cc.Sprite).enabled=!1,this.dict.boreShareIcon.active=!0):(this.dict.boreVideoIcon.getComponent(cc.Sprite).enabled=!0,this.dict.boreShareIcon.active=!1))},c([w],e)}(s.default));r.default=P,cc._RF.pop()},{}],DrawPhysicsLineBody:[function(t,e,o){"use strict";cc._RF.push(e,"f5facMuwPdIVq8z99lQJexV","DrawPhysicsLineBody");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("ClickLock"),l=cc._decorator,d=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bodyType=cc.RigidBodyType.Static,e.drawPen=null,e.lineBodyLayer=null,e.bullet=!1,e.friction=.2,e.density=1,e.restitution=0,e.gravityScale=1,e.linearVelocity=cc.v2(),e.fixedRotation=!1,e.phyMgr=null,e.isPhyEnable=!1,e.drawDebugFlags=0,e.maxLength=240,e.drawPenOldLine=null,e.touchNode=null,e.drawPoints=[],e.lines=[],e.lineLocalPoints=[],e.canDraw=!0,e.banAreaNodes=[],e.lastIsBan=!1,e.lineBody=null,e.cameraZoomRatio=1,e.camera=null,e.isNeedUpdate=!0,e.isDrawMove=!1,e.bodyGraphics=null,e.lineShape=null,e.lineWPosArr=[],e}var o;return a(e,t),o=e,e.prototype.onDrawStartCallBack=function(){},e.prototype.onDrawStartCallBack2=function(){},e.prototype.onDrawMoveCallBack=function(){},e.prototype.onDrawEndCallBack=function(){},e.prototype.onDrawFailCallBack=function(){},e.prototype.onDrawEndPointsCheck=function(){return!0},e.prototype.setMaxLen=function(t){this.maxLength=t},e.prototype.setDebug=function(t){this.phyMgr.debugDrawFlags=t},e.prototype.setCanDraw=function(t){this.canDraw=t},e.prototype.cleanAllLine=function(){this.drawPoints=[],this.lineLocalPoints=[];for(var t=0;t<this.lines.length;++t)this.lines[t].destroy();this.lines=[],this.bodyGraphics&&this.bodyGraphics.clear()},e.prototype.onLoad=function(){var t=this;this.initPhysics(),this.initTouchEvent(),this.initDrawPen(),cc.game.on("game_success1",function(){t.touchNode.targetOff(t),t.phyMgr.enabled=t.isPhyEnable,t.phyMgr.debugDrawFlags=t.drawDebugFlags,console.log("%c[DrawPhysicsLineBody] ** \u6062\u590d\u7269\u7406\u7cfb\u7edf\u72b6\u6001(enable: "+t.phyMgr.enabled+") **","color:#C41A16")},this)},e.prototype.update=function(t){this.isNeedUpdate&&this.updateLine(),t>.1&&console.error("[DrawPhysicsLineBody] --\x3e \u5e27\u7387\u8fc7\u4f4e\uff0c\u6e05\u9664\u6240\u6709\u7ebf\u6761")},e.prototype.initPhysics=function(){this.phyMgr=cc.director.getPhysicsManager(),this.isPhyEnable=this.phyMgr.enabled,this.drawDebugFlags=this.phyMgr.debugDrawFlags,this.phyMgr.enabled=!0,this.phyMgr.debugDrawFlags=this.drawDebugFlags,console.log("%c[DrawPhysicsLineBody] ** \u5f00\u542f\u7269\u7406\u7cfb\u7edf **","color:#C41A16")},e.prototype.initTouchEvent=function(){this.touchNode=this.node,this.touchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.initDrawPen=function(){this.drawPenOldLine=(new cc.Node).addComponent(cc.Graphics),this.drawPenOldLine.node.parent=this.drawPen.node,this.drawPenOldLine.lineWidth=this.drawPen.lineWidth,this.drawPenOldLine.strokeColor=this.drawPen.strokeColor,this.drawPenOldLine.lineCap=this.drawPen.lineCap,this.drawPenOldLine.lineJoin=this.drawPen.lineJoin,this.lineBodyLayer.setPosition(this.lineBodyLayer.parent.convertToNodeSpaceAR(cc.v2(cc.winSize.width/2,cc.winSize.height/2)))},e.prototype.setBanAreaNodes=function(t){this.banAreaNodes=t},e.prototype.onDestroy=function(){cc.game.targetOff(this)},e.prototype.onTouchStart=function(t){if(this.canDraw){this.drawPoints=[];var e=t.getLocation();this.isDrawMove=!1,this.camera&&(e=cc.v2(this.camera.getScreenToWorldPoint(e,cc.v2(0,0)))),this.getTouchPointIsBan(e)||(this.drawPoints.push(e),this.onDrawStartCallBack(t)),this.onDrawStartCallBack2(t)}},e.prototype.onTouchMove=function(t){if(this.canDraw){this.isDrawMove=!0;var e=t.getLocation(),o=this.drawPoints[this.drawPoints.length-1];this.camera&&(e=cc.v2(this.camera.getScreenToWorldPoint(e,cc.v2(0,0))));var n=this.getTouchPointIsBan(e);if(!o||0!=o.sub(e).mag())if(n)this.lastIsBan=!0;else{if(0==this.drawPoints.length)return void this.drawPoints.push(e);if(this.lastIsBan){if(e.sub(o).mag()>20)return;this.drawPoints.push(e),this.onDrawMoveCallBack(t),this.drawLine(o,e)}else{if(this.drawLine(o,e),e.sub(o).mag()<20)return;this.drawPoints.push(e),this.onDrawMoveCallBack(t)}this.lastIsBan=!1}}},e.prototype.onTouchEnd=function(t){var e=this;if(this.canDraw&&this.isDrawMove){this.drawPen.clear();var o=this.drawPoints.length,n=this.onDrawEndPointsCheck(this.drawPoints);if(cc.log("pointsIsRight",n),!(o<=1)){if(!n||o>this.maxLength&&!window.h5_daren)return cc.log("error",n),this.drawPoints=[],this.onDrawFailCallBack(t),void console.error("[DrawPhysicsLineBody] --\x3e \u7ed8\u5236\u7ebf\u6bb5\u5931\u8d25, \u7ed8\u5236\u7ebf\u6bb5\u957f\u5ea6("+o+") \u8d85\u8fc7\u9608\u503c("+this.maxLength+")");var i=this.genLineBody(this.drawPoints);this.lines.push(i);for(var r=[],a=0;a<this.drawPoints.length;++a){var c=i.node.convertToNodeSpaceAR(this.drawPoints[a]);r.push(c)}this.lineLocalPoints.push(r);var s=this.node.children[0].getChildByName("element");if(!s){var l=this.node.getChildByName("game");l&&(s=l.getChildByName("element"))}var d="";if(s){this.drawPoints.forEach(function(t,o){var n=s.convertToNodeSpaceAR(t);d=(d=d.concat(Math.round(n.x)+",")).concat(""+Math.round(n.y)),o<e.drawPoints.length-1&&(d=d.concat(","))});var p=window.brain_level&&window.brain_level._levelID;cc.log('"'+p+'":"'+d+'",')}this.onDrawEndCallBack(t)}}},e.prototype.drawLine=function(t,e){var o=this.drawPen.node.convertToNodeSpaceAR(t),n=this.drawPen.node.convertToNodeSpaceAR(e);this.drawPen.moveTo(o.x,o.y),this.drawPen.lineTo(n.x,n.y),this.drawPen.stroke()},e.prototype.genLineBody=function(t){var e=(new cc.Node).addComponent(cc.RigidBody);e.gravityScale=2,e.node.parent=this.lineBodyLayer,e.node.zIndex=this.drawPen.node.zIndex,e.type=this.bodyType,e.gravityScale=this.gravityScale,e.fixedRotation=this.fixedRotation,e.linearVelocity=this.linearVelocity,e.bullet=this.bullet;var n=e.addComponent(u);n.lineWidth=this.drawPen.lineWidth-3,n.points=t,n.friction=this.friction,n.density=this.density,n.restitution=this.restitution,n.apply();var i=e.node.addComponent(cc.Graphics);this.bodyGraphics=i,i.lineWidth=this.drawPen.lineWidth-3;var r=this.node.getComponent(o).drawPen;i.lineJoin=cc.Graphics.LineJoin.ROUND,i.lineCap=cc.Graphics.LineCap.ROUND,i.miterLimit=r.miterLimit,i.strokeColor=r.strokeColor;for(var a=0;a<t.length;a++){var c=t[a],s=i.node.convertToNodeSpaceAR(c);0==a?i.moveTo(s.x,s.y):i.lineTo(s.x,s.y),a>=t.length-1&&i.stroke()}return this.lineBody=e,this.lineShape=n,n},e.prototype.updateLine=function(){if(this.drawPenOldLine){this.drawPenOldLine.clear(),this.lineWPosArr=[];for(var t=0;t<this.lines.length;++t){var e=this.lines[t].node;if(e&&cc.isValid(e))for(var o=this.lineLocalPoints[t],n=0;n<o.length-1;++n){var i=e.convertToWorldSpaceAR(o[n]);this.lineWPosArr.push(i)}}}},e.prototype.getTouchPointIsBan=function(t){var e=this,o=!1;return this.banAreaNodes.length>0&&this.banAreaNodes.forEach(function(n){var i=!1,r=n.convertToNodeSpaceAR(t);if(n.getComponent(cc.PhysicsPolygonCollider)){var a=(d=n.getComponent(cc.PhysicsPolygonCollider)).offset,c=r.sub(a);i=e.pointInPhysicsPolygon(c,n)}else if(n.getComponent(cc.PhysicsCircleCollider)){a=(d=n.getComponent(cc.PhysicsCircleCollider)).offset;var s=d.radius*d.node.scale,l=n.position.add(a);i=(r=n.parent.convertToNodeSpaceAR(t)).sub(l).mag()<=s}else if(n.getComponent(cc.PhysicsBoxCollider)){var d,p=(d=n.getComponent(cc.PhysicsBoxCollider)).size;p.width*=d.node.scale,p.height*=d.node.scale,a=d.offset,l=n.position.add(a);var h=new cc.Rect(l.x-p.width/2,l.y-p.height/2,p.width,p.height);r=n.parent.convertToNodeSpaceAR(t),i=h.contains(r)}i&&(o=!0)}),o},e.prototype.getTouchPointIsInCollider=function(t){var e=this,o=!1;return this.banAreaNodes.length>0&&this.banAreaNodes.forEach(function(n){var i=!1,r=n.convertToNodeSpaceAR(t);if(n.getComponent(cc.PhysicsPolygonCollider)){var a=(d=n.getComponent(cc.PhysicsPolygonCollider)).offset,c=r.sub(a);i=e.pointInPhysicsPolygon(c,n)}else if(n.getComponent(cc.PhysicsCircleCollider)){a=(d=n.getComponent(cc.PhysicsCircleCollider)).offset;var s=d.radius*d.node.scale,l=n.position.add(a);i=(r=n.parent.convertToNodeSpaceAR(t)).sub(l).mag()<=s}else if(n.getComponent(cc.PhysicsBoxCollider)){var d,p=(d=n.getComponent(cc.PhysicsBoxCollider)).size;p.width*=d.node.scale,p.height*=d.node.scale,a=d.offset,l=n.position.add(a);var h=new cc.Rect(l.x-p.width/2,l.y-p.height/2,p.width,p.height);r=n.parent.convertToNodeSpaceAR(t),i=h.contains(r)}i&&(o=!0)}),!o},e.prototype.pointInPhysicsPolygon=function(t,e){var o=e.getComponents(cc.PhysicsPolygonCollider),n=t,i=!1;return o.forEach(function(t){var e,o=t.points,r=o.length-1,a=!1;for(e=0;e<o.length;++e)(o[e].y<n.y&&o[r].y>=n.y||o[r].y<n.y&&o[e].y>=n.y)&&(o[e].x<=n.x||o[r].x<=n.x)&&(a=a!==o[e].x+(n.y-o[e].y)/(o[r].y-o[e].y)*(o[r].x-o[e].x)<n.x),r=e;a&&(i=!0)}),i},c([p({type:cc.RigidBodyType,tooltip:"\u753b\u51fa\u6765\u7684\u521a\u4f53\u7c7b\u578b"})],e.prototype,"bodyType",void 0),c([p({type:cc.Graphics,tooltip:"\u753b\u7b14"})],e.prototype,"drawPen",void 0),c([p({type:cc.Node,tooltip:"\u753b\u51fa\u6765\u7684\u521a\u4f53\u7236\u8282\u70b9"})],e.prototype,"lineBodyLayer",void 0),c([p({tooltip:"\u7981\u6b62\u7a7f\u8fc7\u5176\u4ed6\u5feb\u901f\u79fb\u52a8\u7684\u521a\u4f53"})],e.prototype,"bullet",void 0),c([p({type:cc.Float,tooltip:"\u5212\u7ebf\u521a\u4f53\u6469\u64e6\u529b"})],e.prototype,"friction",void 0),c([p({type:cc.Float,tooltip:"\u5212\u7ebf\u521a\u4f53\u7684\u5bc6\u5ea6"})],e.prototype,"density",void 0),c([p({type:cc.Float,tooltip:"\u5212\u7ebf\u521a\u4f53\u7684\u5f39\u529b"})],e.prototype,"restitution",void 0),c([p({type:cc.Float,tooltip:"\u5212\u7ebf\u521a\u4f53\u7684\u91cd\u529b"})],e.prototype,"gravityScale",void 0),c([p({tooltip:"\u5212\u7ebf\u521a\u4f53\u7684\u7ebf\u901f\u5ea6"})],e.prototype,"linearVelocity",void 0),c([p({tooltip:"\u662f\u5426\u7981\u6b62\u521a\u4f53\u65cb\u8f6c"})],e.prototype,"fixedRotation",void 0),c([s.ClickLock(.2)],e.prototype,"onTouchEnd",null),o=c([d],e)}(cc.Component);r.default=h;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lineWidth=0,e.points=[],e}return a(e,t),e.prototype._createShape=function(){for(var t=[],e=this.points,o=cc.PhysicsManager.PTM_RATIO,n=0;n<e.length-1;n++){var i=e[n],r=e[n+1],a=r.sub(i),c=a.mag(),s=Math.atan2(a.y,a.x)-.5*Math.PI,l=r.add(i).mul(.5),d=new window.b2.PolygonShape;d&&(d.SetAsBox(.5*this.lineWidth/o,Math.ceil(.5*c)/o,new window.b2.Vec2((l.x-.5*cc.winSize.width)/o,(l.y-.5*cc.winSize.height)/o),s),t.push(d))}return t},e}(cc.PhysicsCollider);cc._RF.pop()},{}],DrawPhysicsLineContact:[function(t,e,o){"use strict";cc._RF.push(e,"ea648vRy0ZNMLKG6XDaqJNR","DrawPhysicsLineContact");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.node.getComponent(cc.RigidBody)&&(this.node.getComponent(cc.RigidBody).enabledContactListener=!0)},e.prototype.onBeginContact=function(){},e.prototype.onEndContact=function(){},e.prototype.onPreSolve=function(){},e.prototype.onPostSolve=function(){},a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],DrawPhysicsLineCowGame:[function(t,e,o){"use strict";cc._RF.push(e,"64ac0opqcVElbCEafQS4ooy","DrawPhysicsLineCowGame");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("DrawPhysicsLineGame2"),l=cc._decorator,d=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drawLineGame=null,e.actors=[],e.bombSound1=null,e.helpNode=null,e}return a(e,t),e.prototype.onTimeEndCallBack=function(){},e.prototype.onFirstDrawEndCallBack=function(){},e.prototype.onContactBegin=function(){},e.prototype.onContactBeginNoCondition=function(){},e.prototype.onLoad=function(){this.drawLineGame.onTimeEnd=this.onTimeEnd.bind(this),this.drawLineGame.onBreakObjBeginContactCallBack=this.onBreakObjBeginContactCallBack.bind(this),this.drawLineGame.onBreakObjBeginContactNoConditionCallBack=this.onBreakObjBeginContactNoConditionCallBack.bind(this),this.drawLineGame.onDrawEnd=this.onDrawEndCallBack.bind(this),this.drawLineGame.onFirstDrawEnd=this.onFirstDrawEnd.bind(this)},e.prototype.onDrawEndCallBack=function(){this.helpNode&&(this.helpNode.active=!1)},e.prototype.onFirstDrawEnd=function(t){this.onFirstDrawEndCallBack(t)},e.prototype.onTimeEnd=function(){this.onTimeEndCallBack(),this.actors[0]&&this.actors[0].setAnimation(0,"happy",!0),this.helpNode&&(this.helpNode.active=!1)},e.prototype.onBreakObjBeginContactCallBack=function(t,e,o){this.drawLineGame.isGame&&(1==e.tag&&2!=o.tag&&(this.actors[0]&&(e.enabled=!1),this.actors[0]&&this.actors[0].setAnimation(0,"die",!1),this.drawLineGame.isGame=!1,1==e.tag&&3==o.tag?(this.scheduleOnce(function(){o.body.type=cc.RigidBodyType.Static}),o.getComponent(sp.Skeleton)&&o.getComponent(sp.Skeleton).setAnimation(0,"baozha",!1),cc.audioEngine.playEffect(this.bombSound1,!1),this.helpNode&&(this.helpNode.active=!1)):this.playBombSound()),cc.log("\u91cd\u65b0\u5f00\u59cb"),this.scheduleOnce(function(){cc.game.emit("onRestartBtn")},1.3),this.onContactBegin(t,e,o))},e.prototype.onBreakObjBeginContactNoConditionCallBack=function(t,e,o){this.onContactBeginNoCondition(t,e,o)},e.prototype.playBombSound=function(){this.drawLineGame.playBombSound()},c([p(s.default)],e.prototype,"drawLineGame",void 0),c([p([sp.Skeleton])],e.prototype,"actors",void 0),c([p({type:cc.AudioClip})],e.prototype,"bombSound1",void 0),c([p(cc.Node)],e.prototype,"helpNode",void 0),c([d],e)}(cc.Component);r.default=h,cc._RF.pop()},{}],DrawPhysicsLineGame2:[function(t,e,o){"use strict";cc._RF.push(e,"42515z8YIZDcJho9/4hXven","DrawPhysicsLineGame2");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("DrawPhysicsLineBody"),l=i("DrawPhysicsLineContact"),d=cc._decorator,p=d.ccclass,h=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drawLineCom=null,e.lineBreakObjs=[],e.dynamicObjs=[],e.bombEff=null,e.bombSound=null,e.lblTime=null,e.resultTime=0,e.polyNodes=[],e.polyNodeParent=[],e.lineBreakTagFilter=[],e._isGame=!0,e.isFirstDraw=!0,e.polyNodesMap=new Map,e}return a(e,t),Object.defineProperty(e.prototype,"isGame",{get:function(){return this._isGame},set:function(t){this._isGame=t,this.drawLineCom.setCanDraw(this._isGame)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;if(this.lineBreakObjs.forEach(function(e){e.onBeginContact=t.onBreakObjBeginContact.bind(t),e.onEndContact=t.onBreakObjEndContact.bind(t),e.getComponent(cc.RigidBody).enabledContactListener=!0}),this.dynamicObjs.forEach(function(t){t.type=cc.RigidBodyType.Static}),this.lblTime.node.opacity=0,this.lblTime.string=this.resultTime+"",this.polyNodes.forEach(function(e){t.polyNodesMap.get(e.uuid)||t.polyNodesMap.set(e.uuid,!0)}),this.polyNodeParent&&this.polyNodeParent.length>0)for(var e=0;e<this.polyNodeParent.length;e++)if(this.polyNodeParent[e]){var o=this.polyNodeParent[e].children;if(o)for(var n=0;n<o.length;n++){var i=o[n];i.active&&!this.polyNodesMap.get(i.uuid)&&(this.polyNodes.push(i),this.polyNodesMap.set(i.uuid,!0))}}this.drawLineCom.setBanAreaNodes(this.polyNodes),this.drawLineCom.onDrawEndCallBack=this.onDrawEndCallBack.bind(this)},e.prototype.onDrawEndCallBack=function(t){this.isFirstDraw&&(this.dynamicObjs.forEach(function(t){t.type=cc.RigidBodyType.Dynamic}),this.onFirstDrawEnd(t),this.isFirstDraw=!1,this.initCountDown(),this.drawLineCom.canDraw=!1),this.onDrawEnd()},e.prototype.onDrawEnd=function(){},e.prototype.onFirstDrawEnd=function(){},e.prototype.initCountDown=function(){var t=this;this.resultTime>0&&(this.lblTime.node.opacity=255,this.schedule(function(){t.isGame&&(t.resultTime--,t.resultTime>0?t.lblTime.string=t.resultTime+"":(t.lblTime.node.opacity=0,t.onTimeEnd(),t.isGame=!1))},1))},e.prototype.onBreakObjBeginContact=function(t,e,o){-1==this.lineBreakTagFilter.indexOf(o.tag)&&this.onBreakObjBeginContactCallBack(t,e,o),this.onBreakObjBeginContactNoConditionCallBack(t,e,o)},e.prototype.onBreakObjBeginContactCallBack=function(){},e.prototype.onBreakObjBeginContactNoConditionCallBack=function(){},e.prototype.onBreakObjEndContact=function(){},e.prototype.onTimeEnd=function(){},e.prototype.playBombEff=function(t){var e=this;if(this.bombEff){var o=t.parent.convertToWorldSpaceAR(t.position),n=cc.instantiate(this.bombEff);n.opacity=255,n.parent=t.parent,t.active=!1;var i=n.parent.convertToNodeSpaceAR(o);n.setPosition(i);var r=n.getComponent(cc.Animation);r.on(cc.Animation.EventType.FINISHED,function(){r.targetOff(e),n.destroy()},this),r.play(),this.playBombSound()}},e.prototype.playBombSound=function(){cc.audioEngine.playEffect(this.bombSound,!1)},e.prototype.stopAllDynamicObj=function(){this.dynamicObjs.forEach(function(t){t.type=cc.RigidBodyType.Static}),this.lineBreakObjs.forEach(function(t){t.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static})},c([h(s.default)],e.prototype,"drawLineCom",void 0),c([h({type:[l.default],tooltip:"\u7ebf\u6761\u78b0\u5230\u4f1a\u7206\u70b8\u7684\u521a\u4f53\u7ec4"})],e.prototype,"lineBreakObjs",void 0),c([h({type:[cc.RigidBody],tooltip:"\u5212\u7ebf\u7ed3\u675f\u540e\u624d\u5f00\u59cb\u8fd0\u52a8\u7684\u52a8\u6001\u521a\u4f53\u7ec4"})],e.prototype,"dynamicObjs",void 0),c([h({type:cc.Prefab,tooltip:"\u7206\u70b8\u7279\u6548\u52a8\u753b\u9884\u5236"})],e.prototype,"bombEff",void 0),c([h({type:cc.AudioClip,tooltip:"\u7206\u70b8\u97f3\u6548"})],e.prototype,"bombSound",void 0),c([h({type:cc.Label,tooltip:"\u5012\u8ba1\u65f6label"})],e.prototype,"lblTime",void 0),c([h({type:cc.Float,tooltip:"\u7ed3\u675f\u65f6\u95f4"})],e.prototype,"resultTime",void 0),c([h({type:[cc.Node],tooltip:"\u7981\u6b62\u5212\u7ebf\u533a\u57df\u6570\u7ec4, \u8282\u70b9\u5fc5\u987b\u5305\u542bcc.PhysicsPolygonCollider\u7ec4\u4ef6"})],e.prototype,"polyNodes",void 0),c([h({type:[cc.Node],tooltip:"\u7981\u6b62\u5212\u7ebf\u533a\u57df\u7236\u8282\u70b9\u6570\u7ec4, \u5b50\u8282\u70b9\u5fc5\u987b\u5305\u542b\u7269\u7406\u78b0\u649e\u7ec4\u4ef6,\u5b50\u8282\u70b9\u6570\u7ec4\u7b49\u4ef7\u4e3apolyNodes"})],e.prototype,"polyNodeParent",void 0),c([h([cc.Integer])],e.prototype,"lineBreakTagFilter",void 0),c([p],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],DrawPhysicsLineTagFilter:[function(t,e,o){"use strict";cc._RF.push(e,"ed0fblq7tVL5YPOSYaZuPcS","DrawPhysicsLineTagFilter");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreTags=[],e}return r(e,t),e.prototype.onLoad=function(){var t=this.getComponent(cc.RigidBody);t&&(t.enabledContactListener=!0)},e.prototype.onPostSolve=function(){},e.prototype.onBeginContact=function(t,e,o){this.ignoreTags.indexOf(o.tag)>=0&&(t.disabled=!0)},a([l({type:[cc.Integer],tooltip:"\u5f53\u524d\u8282\u70b9\u7269\u7406\u78b0\u649e\u9700\u8981\u5ffd\u7565\u7684tag"})],e.prototype,"ignoreTags",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],DrawPhysicsTipsDataPlus:[function(t,e,o){"use strict";cc._RF.push(e,"776d28pDsZDpY0zG3m8rfh+","DrawPhysicsTipsDataPlus");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=c.executeInEditMode,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipsData="",e.gameNode=null,e}return r(e,t),e.prototype.onLoad=function(){this.gameNode=this.node.parent;var t=this.node.parent.parent.getComponent(cc.Widget);t&&(t.enabled=!1,t.node.setPosition(0,0))},e.prototype.start=function(){this.draw()},e.prototype.draw=function(){var t=this.node.getComponent(cc.Graphics);this.gameNode&&(t.node.x=0,t.node.y=0,t.node.scale=1);var e=this.tipsData;if(e){for(var o=[],n=e.split(":")[1].replace('"',"").replace('",',"").replace('"',"").split(","),i=0;i<n.length;i++){var r=n[i];i%2==0&&o.push(cc.v2(parseInt(r),parseInt(n[i+1])))}if(t&&o.length>0){var a=this.node.parent.getChildByName("element");if(!a)return;var c=t.node.position.sub(a.position);t.clear(),o.forEach(function(e,o){var n=e.sub(c);0===o?t.moveTo(n.x,n.y):(t.lineTo(n.x,n.y),t.moveTo(n.x,n.y))}),t.stroke()}else cc.error("[DrawPhysicsTipsData] \u6ca1\u6709\u753b\u7b14")}},e.prototype.lateUpdate=function(){},a([l({displayName:"\u753b\u7ebf\u8def\u5f84",tooltip:"\u65b0\u7248\u753b\u7ebf\u8def\u5f84\uff08\u5b57\u7b26\u4e32\u7c7b\u578b\uff09\uff0c\u65e7\u7248\u4e0d\u80fd\u7528\u8fd9\u4e2a\u811a\u672c"})],e.prototype,"tipsData",void 0),a([s,d],e)}(cc.Component);i.default=p,cc._RF.pop()},{}],DrawPhysicsTipsData_f6999:[function(t,e,o){"use strict";cc._RF.push(e,"bc57dD5DxVAq7oW1ShJtIPa","DrawPhysicsTipsData_f6999");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("DrawPhysicsTipsData"),a=cc._decorator,c=(a.ccclass,a.property,a.executeInEditMode,void r.default);i.default=c,cc._RF.pop()},{}],DrawPhysicsTipsData_f8000:[function(t,e,o){"use strict";cc._RF.push(e,"bfd38/AWTpGibxvW2FYLbKe","DrawPhysicsTipsData_f8000");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("DrawPhysicsTipsData"),a=cc._decorator,c=(a.ccclass,a.property,a.executeInEditMode,void r.default);i.default=c,cc._RF.pop()},{}],DrawPhysicsTipsData_f8983:[function(t,e,o){"use strict";cc._RF.push(e,"e1e044J5EpG5bsZz0v8K7Wf","DrawPhysicsTipsData_f8983");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("DrawPhysicsTipsData"),a=cc._decorator,c=(a.ccclass,a.property,a.executeInEditMode,void r.default);i.default=c,cc._RF.pop()},{}],DrawPhysicsTipsData:[function(t,e,o){"use strict";cc._RF.push(e,"299addK7m9CvJfuTcgITP+r","DrawPhysicsTipsData");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=(i.ccclass,i.property,i.executeInEditMode,void cc.Component);n.default=r,cc._RF.pop()},{}],EffectManager:[function(t,e,o){"use strict";cc._RF.push(e,"154211B1+lFQZeUdqaGVt05","EffectManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.Effect=void 0;var r,a=n("EventConst"),c=n("EventManager"),s=function(){function t(){this.poolMap={}}return t.prototype.showEffect=function(t,e,o,n){var i=this;void 0===t&&(t=50),void 0===o&&(o=0),t=t>50?50:t;var s="prefab/item/Power",l=r.power;1==o?(s="prefab/item/Key",l=r.key):2==o&&(s="prefab/item/Coin",l=r.coin);for(var d=0;d<t;++d)this.getNode(l,s).then(function(t){var r=e;if(r&&cc.isValid(r)){var s=cc.find("Canvas");t.parent=s;var d,p=cc.find("Canvas").getChildByName("Main Camera"),h=s.convertToNodeSpaceAR(p.parent.convertToWorldSpaceAR(p.position)),u=s.convertToNodeSpaceAR(r.parent.convertToWorldSpaceAR(r.position));switch(n){case 1:d=cc.v3(200*Math.random()-100+h.x,200*Math.random()-100+h.y,0);break;case 2:d=cc.v3(200*Math.random()-100+h.x,200*Math.random()+100+h.y,0);break;case 3:d=cc.v3(200*Math.random()-240+h.x,200*Math.random()-530+h.y,0)}t.position=d,t.stopAllActions(),t.opacity=0,t.zIndex=cc.macro.MAX_ZINDEX,setTimeout(function(){if(r&&cc.isValid(r)){var n=cc.moveTo(1,cc.v2(u.x,u.y));t.runAction(cc.sequence(cc.spawn(cc.fadeIn(.1),cc.moveBy(.1,0,15).easing(cc.easeBackIn())),cc.delayTime(.05),n.easing(cc.easeBackIn()),cc.callFunc(function(){var n=e;n&&cc.isValid(n)?(i.putNode(l,t),n.stopAllActions(),n.scale=.7,c.Event.emit(a.default.POWER_UPDATE),1==o?c.Event.emit(a.default.KEY_UPDATE):2==o&&c.Event.emit(a.default.COIN_UPDATE),cc.tween(n).to(.3,{scale:1},{easing:cc.easing.backOut}).start()):i.putNode(l,t)})))}},800*Math.random())}})},t.prototype.getNode=function(t,e){var o=this;return new Promise(function(n){var i=null,r=o.poolMap[t];r&&r.size()?((i=r.get()).active=!0,console.log("\u6570\u91cf\u5145\u8db3,\u4ece\u5bf9\u8c61\u6c60\u83b7\u53d6<"+i.name+">"),n(i)):cc.resources.load(""+e,function(t,o){if(t)return cc.error(t);cc.log("\u52a0\u8f7d\u9884\u5236\u6210\u529f",""+e),(i=cc.instantiate(o)).active=!0,console.log("\u6570\u91cf\u4e0d\u8db3,\u521b\u5efa<"+i.name+">"),n(i)})})},t.prototype.putNode=function(t,e){e.active=!1;var o=this.poolMap[t];if(o)o.put(e);else{var n=new cc.NodePool;this.poolMap[t]=n,n.put(e)}},t.prototype.clear=function(t){this.poolMap[t].clear(),delete this.poolMap[t]},t}();(function(t){t.power="power",t.key="key",t.coin="coin"})(r||(r={})),i.Effect=new s,cc._RF.pop()},{}],Encrypt:[function(t,e,o){"use strict";cc._RF.push(e,"055b3rPwb9JkbapXeyhaQ+e","Encrypt");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.Encrypt=void 0;var r=n("crypto-js"),a=function(){function t(){this.AesKey="NO8tU0nT0iLQzHzO",this.CBCIV="wt2y0aEzGcu0wTDE",this.CBCOptions={iv:r.enc.Utf8.parse(this.CBCIV),mode:r.mode.CBC,padding:r.pad.Pkcs7}}return t.prototype.encrypt=function(t){var e=r.enc.Utf8.parse(this.AesKey),o=r.enc.Utf8.parse(t);return r.AES.encrypt(o,e,this.CBCOptions).toString()},t.prototype.decrypt=function(t){var e=r.enc.Utf8.parse(this.AesKey),o=r.AES.decrypt(t,e,this.CBCOptions);return r.enc.Utf8.stringify(o).toString()},t}();i.Encrypt=a,cc._RF.pop()},{}],EventConst:[function(t,e,o){"use strict";cc._RF.push(e,"4441fcnv+1C6KZ6/1u1hjUu","EventConst");var n,i=o;Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.START_RECORD=0]="START_RECORD",t[t.STOP_RECORD=1]="STOP_RECORD",t[t.UPDATE_RECORD_TIME=2]="UPDATE_RECORD_TIME",t[t.SET_MUSIC_MUTE=3]="SET_MUSIC_MUTE",t[t.SET_EFFECT_MUTE=4]="SET_EFFECT_MUTE",t[t.ENTER_MAIN=5]="ENTER_MAIN",t[t.CLICK_BACK=6]="CLICK_BACK",t[t.POWER_UPDATE=7]="POWER_UPDATE",t[t.POWER_EFFECT=8]="POWER_EFFECT",t[t.KEY_UPDATE=9]="KEY_UPDATE",t[t.KEY_EFFECT=10]="KEY_EFFECT",t[t.COIN_UPDATE=11]="COIN_UPDATE",t[t.COIN_EFFECT=12]="COIN_EFFECT",t[t.CLICK_NEXT=13]="CLICK_NEXT",t[t.UPDATE_INFINITE_POWER=14]="UPDATE_INFINITE_POWER",t[t.UPDATE_IS_UNLOCK_TIP=15]="UPDATE_IS_UNLOCK_TIP",t[t.ENTER_ID=16]="ENTER_ID",t[t.TIP_BTN_ANIM=17]="TIP_BTN_ANIM",t[t.destroyInsert=18]="destroyInsert",t[t.enterNewMode=19]="enterNewMode",t[t.updateUnlockAllMode=20]="updateUnlockAllMode",t[t.extendTime=21]="extendTime",t[t.move5=22]="move5",t[t.upset=23]="upset",t[t.switchMove5State=24]="switchMove5State",t[t.boreBtn=25]="boreBtn",t[t.restartAnswer=26]="restartAnswer",t[t.restartAnswer2=27]="restartAnswer2",t[t.StopTimer=28]="StopTimer",t[t.restoreTime=29]="restoreTime",t[t.update_use_skin=30]="update_use_skin",t[t.hideWelfareBtn=31]="hideWelfareBtn",t[t.hideLimitWelfareBtn=32]="hideLimitWelfareBtn",t[t.EnterSidebar=33]="EnterSidebar",t[t.extendTime2=34]="extendTime2",t[t.COIN_EFFECT_S=35]="COIN_EFFECT",t[t.COIN_EFFECT_M=36]="COIN_EFFECT"}(n||(n={})),i.default=n,cc._RF.pop()},{}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"8a5540f/tdEw7JcMTMEOk+g","EventManager");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.Event=void 0;var i=function(){function t(){this.prefix="event_"}return t.prototype.on=function(t,e,o){var n=""+this.prefix+t;cc.game.on(n,e,o)},t.prototype.off=function(t,e,o){var n=""+this.prefix+t;cc.game.off(n,e,o)},t.prototype.emit=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=""+this.prefix+t;cc.game.emit(n,e)},t}();n.Event=new i,cc._RF.pop()},{}],Feedback:[function(t,e,o){"use strict";cc._RF.push(e,"7cf05LyDeJCv7OqJVt1d7bu","Feedback");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("PlatformConst"),d=i("PlatformManager"),p=i("PopupManager"),h=i("TipManager"),u=i("OPPOAndroidAdUtils"),f=i("OPPOMiniADUtils"),g=i("XMADUtils"),m=cc._decorator,y=m.ccclass,v=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("yesBtn",this.yesBtn,this)},e.prototype.onEnable=function(){d.Platform.is(l.EPlatform.XIAOMI_ANDROID)?g.XMAD.showBannerFeed():d.Platform.is(l.EPlatform.OPPO_ANDROID)?u.OPPOAndroidAd.showLargeFeed():d.Platform.is(l.EPlatform.OPPO)?f.OPPOMiniAD.showLargeFeed():d.Platform.showBanner()},e.prototype.onDisable=function(){d.Platform.is(l.EPlatform.OPPO_ANDROID)&&u.OPPOAndroidAd.removeLargePicFeed(),d.Platform.hideBanner(),d.Platform.hideNativeAds(),d.Platform.hideCustomAd1(),d.Platform.hideCustomAd2(),d.Platform.hideCustomAd_1(),d.Platform.hideCustomAd_2()},e.prototype.yesBtn=function(){""==this.dict.EditBox.getComponent(cc.EditBox).string?h.Tip.show("\u60a8\u597d\uff0c\u8bf7\u8be6\u7ec6\u63cf\u8ff0\u60a8\u7684\u95ee\u9898\uff0c\u8ba9\u6211\u4eec\u66f4\u597d\u5730\u89e3\u51b3\u60a8\u7684\u95ee\u9898\uff0c\u8c22\u8c22\u3002"):(h.Tip.show("\u611f\u8c22\u60a8\u7684\u5efa\u8bae\uff0c\u6211\u4eec\u5c06\u6301\u7eed\u4f18\u5316\uff0c\u7ed9\u60a8\u5e26\u6765\u66f4\u597d\u7684\u4f53\u9a8c\u3002"),p.Popup.hide())},e.prototype.noBtn=function(){p.Popup.hide()},c([y],e)}(s.default));r.default=v,cc._RF.pop()},{}],First:[function(t,e,o){"use strict";cc._RF.push(e,"9da12/D7xhGfokru9pCHdN4","First");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},c=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},s=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=cc._decorator,d=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.encrXToken=null,e}return r(e,t),e.prototype.onLoad=function(){console.log("\u9996\u573a\u666f"),this.loadSubpackage()},e.prototype.loadSubpackage=function(){var t=cc.sys,e=t.platform;if(e==t.IPHONE||e==t.IPAD){var o=cc.sys.localStorage.getItem("isCheckIP");if(null==o||null==o||""==o){var n=jsb.reflection.callStaticMethod("AppController","gainIOSBMSVersion");console.log("\u83b7\u5f97\u7248\u672c\u53f7",n),console.time("test time"),this.getIPAbroad("wdggios","ios",n).then(function(t){console.log(t),console.timeEnd("test time"),cc.director.loadScene("App")})}else 0==Number(o)?(this.en(),window.haiwai=!0):(this.zh(),window.haiwai=!1),cc.director.loadScene("App")}else cc.sys.platform,this.loadSubs(["framework","gameScript","script"],function(){cc.director.loadScene("App")},function(){})},e.prototype.getIPAbroad=function(){},e.prototype.en=function(){cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppController","gainCurrentIp:","en")},e.prototype.zh=function(){cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppController","gainCurrentIp:","zh")},e.prototype.request=function(t,e,o,n){switch(t){case"GET":return this.get(e,o,n)}},e.prototype.get=function(t,e,o){var n=this;return new Promise(function(i){for(var r in t+="?",e)t+=r+"="+e[r]+"&";var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&(a.status>=200&&a.status<400?i(a.response):(n.zh(),i(null)))},a.open("GET",t),o&&a.setRequestHeader("x-token",n.encrXToken),a.send(),a.onerror=function(){n.zh(),i(null)},a.ontimeout=function(){n.zh(),i(null),o&&console.log("\u8d85\u65f6\u5931\u8d25")}})},e.prototype.loadSub=function(t){return new Promise(function(e,o){cc.assetManager.loadBundle(t,function(n){if(null!==n)return console.log("[ResMgr]:Load AssetsBundle Error: "+t),o();console.log("[ResMgr]:Load AssetsBundle Success: "+t),console.log("\u52a0\u8f7d\u5b8c\u6210",t),e(null)})})},e.prototype.loadSubs=function(t,e,o){return c(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:n.trys.push([0,4,,5]),n.label=1;case 1:return t.length?[4,this.loadSub(t.shift())]:[3,3];case 2:return n.sent(),[3,1];case 3:return e&&e(),[3,5];case 4:return n.sent(),o?[2]:[3,5];case 5:return[2]}})})},a([d],e)}(cc.Component));i.default=p,cc._RF.pop()},{}],FloatEffect:[function(t,e,o){"use strict";cc._RF.push(e,"d6e2bJXWv5DHp7jUsP1s/tS","FloatEffect");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.floatRange=4,e.duration=1.5,e.delayRand=2,e.originPos=null,e.isStop=!1,e}return r(e,t),e.prototype.start=function(){var t=this;this.originPos=this.node.position;var e=1;this.isStop=!1;var o=function o(){if(!t.isStop){var n=-t.floatRange+t.originPos.x+2*t.floatRange*Math.random(),i=-t.floatRange+t.originPos.y+2*t.floatRange*Math.random()*e;e*=-1,cc.tween(t.node).to(t.duration,{position:cc.v2(n,i)},{easing:cc.easing.smooth}).call(function(){o()}).start()}};this.scheduleOnce(function(){o()},Math.random()*this.delayRand)},e.prototype.stop=function(){this.isStop=!0,this.node.stopAllActions(),cc.tween(this.node).to(.2,{position:this.originPos}).start()},a([l({type:cc.Integer,tooltip:"\u6bcf\u6b21\u6d6e\u52a8\u7684\u8303\u56f4"})],e.prototype,"floatRange",void 0),a([l({type:cc.Float,tooltip:"\u6bcf\u6b21\u6d6e\u52a8\u7684\u6301\u7eed\u65f6\u95f4"})],e.prototype,"duration",void 0),a([l({type:cc.Float,tooltip:"\u5ef6\u8fdf\u6d6e\u52a8"})],e.prototype,"delayRand",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],FrameAnim:[function(t,e,o){"use strict";cc._RF.push(e,"d2f97XvGNVFcKUdMCwblmzG","FrameAnim");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteFrames=[],e.duration=.1,e.loop=!1,e.playOnload=!1,e}return r(e,t),e.prototype.onLoad=function(){var t=this.node.getComponent(cc.Sprite);t||(t=this.node.addComponent(cc.Sprite)),this.sprite=t,this.isPlaying=!1,this.playTime=0,this.isLoop=!1,this.endFunc=null,this.spriteFrames.length>0&&(this.sprite.spriteFrame=this.spriteFrames[0]),this.playOnload&&(this.loop?this.playLoop():this.playOnce(null))},e.prototype.playOnce=function(t){this.playTime=0,this.isPlaying=!0,this.isLoop=!1,this.endFunc=t},e.prototype.playLoop=function(){this.playTime=0,this.isPlaying=!0,this.isLoop=!0},e.prototype.stopAnim=function(){this.playTime=0,this.isPlaying=!1,this.isLoop=!1},e.prototype.resetFrame=function(){this.spriteFrames.length>0&&(this.sprite.spriteFrame=this.spriteFrames[0])},e.prototype.update=function(t){if(!1!==this.isPlaying){this.playTime+=t;var e=Math.floor(this.playTime/this.duration);if(!1===this.isLoop){if(e>=this.spriteFrames.length)return this.sprite.spriteFrame=this.spriteFrames[this.spriteFrames.length-1],this.isPlaying=!1,this.playTime=0,void(this.endFunc&&this.endFunc());this.sprite.spriteFrame=this.spriteFrames[e]}else{for(;e>=this.spriteFrames.length;)e-=this.spriteFrames.length,this.playTime-=this.duration*this.spriteFrames.length;this.sprite.spriteFrame=this.spriteFrames[e]}}},a([l([cc.SpriteFrame])],e.prototype,"spriteFrames",void 0),a([l],e.prototype,"duration",void 0),a([l],e.prototype,"loop",void 0),a([l],e.prototype,"playOnload",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"f72228mH5pHwL/ctyeXoyfH","Game");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("AudioConst"),d=i("EventConst"),p=i("PlatformConst"),h=i("PopupConst"),u=i("SceneConst"),f=i("UserConst"),g=i("AudioManager"),m=i("BmsManager"),y=i("EventManager"),v=i("PlatformManager"),_=i("PopupManager"),C=i("ResManager"),w=i("SceneManager"),P=i("UserManager"),b=(i("Utils"),i("ConfigUtils")),T=i("XMADUtils"),S=i("LanguageManager"),A=i("ScreenshotUtils"),N=i("TipManager"),B=i("ConfigManager"),O=i("ConfigConst"),R=i("OPPOAndroidAdUtils"),D=(i("OPPOMiniADUtils"),i("ShuShuConst")),L=i("TaskManager"),I=cc._decorator,E=I.ccclass,k=I.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coloringSpinePrefab=null,e._data=null,e.level=null,e.levelID=null,e.bms=null,e.flag=null,e.clickAmountNode=null,e.isUnlockTip=!1,e.currentLevel=1,e.currentMode=1,e.currentTopLevel=1,e.fullAdCounter=0,e.clickAmount=0,e.currentPrefabAsset=[],e.time=0,e.isHandle=!1,e.modeLevelTime=[180,180,180,180,180,180,300,180,180,180],e.restartTimes=0,e.node_hammer=null,e.developID=-1,e.isTimeEnd=!1,e.currentLevelProgress=1,e.currentLevelTotalTime=180,e.currentLevelTime=0,e.isLoadingScene=!1,e.isBack=!1,e}return a(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.modeLevelTime=new Array(30).fill(180),this.modeLevelTime[6]=300,window.coloringSpinePrefab=this.coloringSpinePrefab,this.level=this.dict.level,this.levelID=this.dict.levelID,this.flag=this.dict.flag,this.bms=this.dict.bms,this.clickAmountNode=this.dict.clickAmountNode,this.addBtnOn("homeBtn",this.clickHome,this),this.addBtnOn("backBtn",this.clickBack,this),this.addBtnOn("restartBtn",this.clickRestart2,this),this.addBtnOn("developBtn",this.developBtn,this),this.addBtnOn("orderBtn",this.orderBtn,this),this.addBtnOn("screenshotBtn",this.screenshotBtn,this),this.addBtnOn("downloadBtn",this.downloadBtn,this),this.clickAmountNode.on(cc.Node.EventType.TOUCH_START,function(){},this),this.clickAmountNode._touchListener&&this.clickAmountNode._touchListener.setSwallowTouches(!1),P.User.setTempData("isNeedInsert",!0),this.initView(),this.currentLeveljk=1,this.schedule(function(){e.fullAdCounter++},1),this.listenHandle(),g.Audio.playMusic(l.AudioConst.BGM_GAME),v.Platform.is(p.EPlatform.WX)&&console.log("\u8c03\u7528\u5e7f\u544a"),v.Platform.is(p.EPlatform.WEB)&&(this.dict.hideUIBtn.active=!1),L.default.init();var o=P.User.getTempData("cheats");v.Platform.is(p.EPlatform.WEB)||o?this.dict.restartBtn.active=!0:this.dict.restartBtn.active=!1},e.prototype.hideUIBtn=function(){this.dict.backBtn.opacity?(this.dict.backBtn.opacity=0,this.dict.bottomBar0.opacity=0,this.dict.hideUIBtn.opacity=0):(this.dict.backBtn.opacity=255,this.dict.bottomBar0.opacity=255,this.dict.hideUIBtn.opacity=255)},e.prototype.onDestroy=function(){v.Platform.stopRecordCap(),v.Platform.hideCustomAd1(),v.Platform.hideCustomAd2();var t=P.User.getTempData("levelTime"),e=((new Date).getTime()-t)/1e3;cc.game.emit("gamelog_Thinking",D.ShuShuConst.Level_End,{EndType:2,Duration:e,lv:P.User.getTempData(f.TempData.CURRENT_LEVEL_ID),mode:P.User.getTempData(f.TempData.CURRENT_MODE)})},e.prototype.listenHandle=function(){y.Event.emit(d.default.TIP_BTN_ANIM,!1),this.unschedule(this.handleEvent.bind(this)),this.scheduleOnce(this.handleEvent.bind(this),10)},e.prototype.handleEvent=function(){y.Event.emit(d.default.TIP_BTN_ANIM,!0)},e.prototype.clickRestart2=function(t){var e=P.User.getTempData(f.TempData.CURRENT_LEVEL),o=P.User.getTempData(f.TempData.CURRENT_MODE);cc.game.emit("gamelog","Level_Lose_"+o+"_"+e),this.restartTimes+=1,console.log("\u91cd\u7f6e\u6b21\u6570",this.restartTimes);var n=m.BMS.getKey("FriendHelp"),i=P.User.getTempData(f.TempData.cryHelpList)||[],r=P.User.get(f.UserData.cryHelpTimes)||0;console.log("\u68c0\u6d4b",this.restartTimes,n),console.log("\u68c0\u6d4b2",r),console.log("\u68c0\u6d4b3",i,e),this.restartTimes>=n&&r<2&&-1==i.indexOf(this.currentLevel)?(i.push(this.currentLevel),P.User.setTempData(f.TempData.cryHelpList,i),P.User.set(f.UserData.cryHelpTimes,r+1),_.Popup.show(h.PopupConst.CRY_HELP)):this.restartTimes>=n&&v.Platform.showInsert(),this.restartTimes>=3&&(y.Event.emit(d.default.TIP_BTN_ANIM,!0),this.restartTimes=0),this.clickRestart(t)},e.prototype.onRestartReset=function(){this.currentLevelProgress=1,this.clickRestart2()},e.prototype.onEnable=function(){v.Platform.is(p.EPlatform.OPPO_ANDROID)?R.OPPOAndroidAd.showBannerFeed():v.Platform.is(p.EPlatform.OPPO),this.initEvent()},e.prototype.onDisable=function(){v.Platform.is(p.EPlatform.OPPO_ANDROID)?(v.Platform.hideBanner(),v.Platform.hideNativeAds()):v.Platform.is(p.EPlatform.OPPO),this.clearEvent()},e.prototype.initEvent=function(){cc.game.on("game_success1",this.startSuc,this),cc.game.on("game_success2",this.suc,this),cc.game.on("onRestartBtn",this.clickRestart2,this),cc.game.on("onRestartReset",this.onRestartReset,this),cc.game.on("isTimeEnd",this.isTimeEndFun,this),y.Event.on(d.default.CLICK_NEXT,this.clickNext,this),y.Event.on(d.default.destroyInsert,this.destroyInsert,this),y.Event.on(d.default.enterNewMode,this.enterNewMode,this),y.Event.on(d.default.extendTime,this.extendTime,this),y.Event.on(d.default.extendTime2,this.extendTime2,this),y.Event.on(d.default.move5,this.move5,this),y.Event.on(d.default.upset,this.upset,this),y.Event.on(d.default.boreBtn,this.boreBtn,this),y.Event.on(d.default.StopTimer,this.stopTimer,this),y.Event.on(d.default.restoreTime,this.restoreTime,this),cc.game.on("adsVideoFail",this.adsVideoFail,this),cc.game.on("insetVideoSuccess",this.insetVideoSuccess,this),cc.game.on("insetVideoAsk",this.insetVideoAsk,this),cc.game.on("adSkipped",this.adSkipped,this),cc.game.on("hammerBtn",this.hammerBtn,this),cc.game.on("shakeBtn",this.shakeBtn,this),cc.game.on("undoBtn",this.undoBtn,this),cc.game.on("wingBtn",this.wingBtn,this),cc.game.on("highlightBtn",this.highlightBtn,this),cc.game.on("addStepBtn",this.addStepBtn,this),cc.game.on("moderateBtn",this.moderateBtn,this),cc.game.on("rotateBtn",this.rotateBtn,this),cc.game.on("16BackBtn",this._16BackBtn,this),cc.game.on("16ModerateBtn",this._16ModerateBtn,this),cc.game.on("16OverturnBtn",this._16OverturnBtn,this),cc.game.on("Revive",this.Revive,this),cc.game.on("addScrewBtn",this.addScrewBtn,this),cc.game.on("moveHand",this.moveHand,this),cc.game.on("destroyHand",this.destroyHand,this),cc.game.on("dealUnlock",this.dealUnlock,this)},e.prototype.clearEvent=function(){cc.game.off("game_success1",this.startSuc,this),cc.game.off("game_success2",this.suc,this),cc.game.off("onRestartBtn",this.clickRestart2,this),cc.game.off("onRestartReset",this.onRestartReset,this),cc.game.off("isTimeEnd",this.isTimeEndFun,this),y.Event.off(d.default.CLICK_NEXT,this.clickNext,this),y.Event.off(d.default.destroyInsert,this.destroyInsert,this),y.Event.off(d.default.enterNewMode,this.enterNewMode,this),y.Event.off(d.default.extendTime,this.extendTime,this),y.Event.off(d.default.extendTime2,this.extendTime2,this),y.Event.off(d.default.move5,this.move5,this),y.Event.off(d.default.upset,this.upset,this),y.Event.off(d.default.boreBtn,this.boreBtn,this),y.Event.off(d.default.StopTimer,this.stopTimer,this),y.Event.off(d.default.restoreTime,this.restoreTime,this),cc.game.off("adsVideoFail",this.adsVideoFail,this),cc.game.off("insetVideoSuccess",this.insetVideoSuccess,this),cc.game.off("insetVideoAsk",this.insetVideoAsk,this),cc.game.off("adSkipped",this.adSkipped,this),cc.game.off("hammerBtn",this.hammerBtn,this),cc.game.off("shakeBtn",this.shakeBtn,this),cc.game.off("undoBtn",this.undoBtn,this),cc.game.off("wingBtn",this.wingBtn,this),cc.game.off("highlightBtn",this.highlightBtn,this),cc.game.off("addStepBtn",this.addStepBtn,this),cc.game.off("moderateBtn",this.moderateBtn,this),cc.game.off("rotateBtn",this.rotateBtn,this),cc.game.off("16BackBtn",this._16BackBtn,this),cc.game.off("16ModerateBtn",this._16ModerateBtn,this),cc.game.off("16OverturnBtn",this._16OverturnBtn,this),cc.game.off("Revive",this.Revive,this),cc.game.off("addScrewBtn",this.addScrewBtn,this),cc.game.off("moveHand",this.moveHand,this),cc.game.off("destroyHand",this.destroyHand,this),cc.game.off("dealUnlock",this.dealUnlock,this)},e.prototype.move5=function(){this.level.children[0]._components[0].addAutoMoveNumber()},e.prototype.upset=function(){this.level.children[0]._components[0].shuffle&&this.level.children[0]._components[0].shuffle()},e.prototype.boreBtn=function(){this.dict.boreBtn.active=!1,this.level.children[0]._components[0].checkAdLock&&this.level.children[0]._components[0].checkAdLock()},e.prototype.hammerBtn=function(){var t=this.level.children[0]._components[0];t.isCanUseHammer=!0,t.node_hammer.getChildByName("img").position=cc.v3(),t.node_hammer.active=!0;var e=t.node_hammer.getChildByName("img");cc.tween(e).repeatForever(cc.tween().to(.2,{scale:1.2}).to(.1,{scale:1})).start()},e.prototype.getIsOpen=function(){return 1},e.prototype._initOutLine=function(){},e.prototype.shakeBtn=function(){this.level.children[0]._components[0].shakeAnimation&&this.level.children[0]._components[0].shakeAnimation(0)},e.prototype.undoBtn=function(){this.level.children[0]._components[0].func_withdraw&&this.level.children[0]._components[0].func_withdraw()},e.prototype.wingBtn=function(){this.level.children[0]._components[0].func_fly&&this.level.children[0]._components[0].func_fly()},e.prototype.highlightBtn=function(){this.level.children[0]._components[0].func_highlight&&this.level.children[0]._components[0].func_highlight()},e.prototype.addStepBtn=function(){this.level.children[0]._components[0].func_addStep&&this.level.children[0]._components[0].func_addStep()},e.prototype.moderateBtn=function(){this.level.children[0]._components[0].setLeftScrollSpeed&&this.level.children[0]._components[0].setLeftScrollSpeed(30)},e.prototype.rotateBtn=function(){this.level.children[0]._components[1].turn&&this.level.children[0]._components[1].turn()},e.prototype._16BackBtn=function(){this.level.children[0]._components[0].func_withdraw&&this.level.children[0]._components[0].func_withdraw()},e.prototype._16ModerateBtn=function(){this.level.children[0]._components[0].func_slowDown&&this.level.children[0]._components[0].func_slowDown()},e.prototype._16OverturnBtn=function(){this.level.children[0]._components[0].func_reverse&&this.level.children[0]._components[0].func_reverse()},e.prototype.Revive=function(){this.level.children[0]._components[0].func_revive&&this.level.children[0]._components[0].func_revive()},e.prototype.addScrewBtn=function(){this.dict.addScrewBtn.active=!1,this.level.children[0]._components[0].dealUnlock&&this.level.children[0]._components[0].dealUnlock()},e.prototype.moveHand=function(){this.dict.maskbg.position=cc.v2(this.dict.chuiziBtn.position.x+90,this.dict.chuiziBtn.position.y-30)},e.prototype.destroyHand=function(){this.dict.sz.active=!1,this.dict.maskbg.active=!1},e.prototype.dealUnlock=function(){_.Popup.show(h.PopupConst.DealUnlock)},e.prototype.extendTime=function(){this.currentLevelTime=60,this.dict.time2.active=!0,this.dict.time2.getComponent(cc.Label).string=""+this.secondFormat(this.currentLevelTime),this.schedule(this.timerFun,1)},e.prototype.extendTime2=function(){this.currentLevelTime+=60,this.dict.time2.active=!0,this.dict.time2.getComponent(cc.Label).string=""+this.secondFormat(this.currentLevelTime),this.schedule(this.timerFun,1)},e.prototype.stopTimer=function(t){void 0===t&&(t=!1),this.dict.time2.active&&(console.log("\u6682\u505c\u65f6\u95f4"),this.unschedule(this.timerFun))},e.prototype.restoreTime=function(){this.dict.time2.active&&(this.unschedule(this.timerFun),this.schedule(this.timerFun,1))},e.prototype.adsVideoFail=function(){cc.game.emit("gamelog","level_interfail_"+this.currentMode+"_"+this.currentLevel)},e.prototype.adSkipped=function(){},e.prototype.insetVideoSuccess=function(){cc.game.emit("gamelog","level_interplay_"+this.currentMode+"_"+this.currentLevel)},e.prototype.insetVideoAsk=function(){cc.game.emit("gamelog","level_inter_"+this.currentMode+"_"+this.currentLevel)},e.prototype.destroyInsert=function(){v.Platform.destroyInsert()},e.prototype.clickNext=function(){console.log("\u70b9\u51fb\u4e0b\u4e00\u5173");var t=this;P.User.getTempData(f.TempData.NEXT_MODE_ID),b.ConfigUtils.getDataByID(this.currentMode,function(e){t.currentTopLevel=e.amount,console.log("t.currentTopLevel---------\x3e:",t.currentTopLevel),t.currentLevel+1>t.currentTopLevel?(console.log("\u6700\u540e\u4e00\u5173"),t.initLevelOrder()):t.currentLeveljk<2?(P.User.setTempData(f.TempData.CURRENT_LEVEL,t.currentLevel),t.currentLevelProgress=2,t.currentLeveljk=2,y.Event.emit(d.default.UPDATE_IS_UNLOCK_TIP),t.initView()):(P.User.setTempData(f.TempData.CURRENT_LEVEL,t.currentLevel+1),t.currentLevelProgress=1,t.currentLeveljk=1,y.Event.emit(d.default.UPDATE_IS_UNLOCK_TIP),t.initView())})},e.prototype.initLevelOrder=function(){var t=this;if(v.Platform.is(p.EPlatform.WEB))this.updateCurrentModeLevel();else{P.User.get(f.UserData.mode0LevelList_stage1ID),P.User.get(f.UserData.mode0LevelList_stage2ID),P.User.get(f.UserData.mode1LevelList_stage1ID),P.User.get(f.UserData.mode1LevelList_stage2ID);var e=[],o=[],n=[],i=[],r=[],a=[];0==this.currentMode?B.Config.get(O.ConfigConst.THEME+0).then(function(n){for(var i=0;i<n.length;i++){var r=n[i];e.push(r.stage1ID),o.push(r.stage2ID)}e.sort(function(){return.5-Math.random()}),o.sort(function(){return.5-Math.random()}),P.User.set(f.UserData.mode0LevelList_stage1ID,e),P.User.set(f.UserData.mode0LevelList_stage2ID,o),console.log("\u6253\u87ba\u4e1d",e,o),t.updateCurrentModeLevel()}):1==this.currentMode?B.Config.get(O.ConfigConst.THEME+1).then(function(e){for(var o=0;o<e.length;o++){var r=e[o];n.push(r.stage1ID),i.push(r.stage2ID)}n.sort(function(){return.5-Math.random()}),i.sort(function(){return.5-Math.random()}),P.User.set(f.UserData.mode1LevelList_stage1ID,n),P.User.set(f.UserData.mode1LevelList_stage2ID,i),console.log("\u6e05\u7406",n,i),t.updateCurrentModeLevel()}):2==this.currentMode?B.Config.get(O.ConfigConst.THEME+2).then(function(e){for(var o=0;o<e.length;o++){var n=e[o];r.push(n.stage1ID),a.push(n.stage2ID)}r.sort(function(){return.5-Math.random()}),a.sort(function(){return.5-Math.random()}),P.User.set(f.UserData.mode2LevelList_stage1ID,r),P.User.set(f.UserData.mode2LevelList_stage2ID,a),console.log("\u6d88\u9664\u7bad\u5934",r,a),t.updateCurrentModeLevel()}):this.handleModeByID(this.currentMode)}},e.prototype.handleModeByID=function(t){var e=this,o=[],n=[];B.Config.get(O.ConfigConst.THEME+t).then(function(i){for(var r=0;r<i.length;r++){var a=i[r];o.push(a.stage1ID),n.push(a.stage2ID)}o.sort(function(){return.5-Math.random()}),n.sort(function(){return.5-Math.random()}),P.User.set(f.UserData["mode"+t+"LevelList_stage1ID"],o),P.User.set(f.UserData["mode"+t+"LevelList_stage2ID"],n),console.log("\u6a21\u5f0f",t,o,n),e.updateCurrentModeLevel()})},e.prototype.updateCurrentModeLevel=function(){var t=P.User.get(f.UserData.LEVEL_LIST)||{};t[this.currentMode]=1,P.User.setTempData(f.TempData.CURRENT_MODE,this.currentMode),P.User.setTempData(f.TempData.CURRENT_LEVEL,1),P.User.set(f.UserData.LEVEL_LIST,t),y.Event.emit(d.default.UPDATE_IS_UNLOCK_TIP),this.initView()},e.prototype.enterNewMode=function(){y.Event.emit(d.default.UPDATE_IS_UNLOCK_TIP),this.initView()},e.prototype.startSuc=function(){},e.prototype.screenshot=function(){},e.prototype.restartNodeShot=function(){},e.prototype.suc=function(){var t;v.Platform.stopRecordCap(),this.dict.time2.active=!1,this.unschedule(this.timerFun);P.User.getTempData("levelTime");(new Date).getTime(),t=P.User.getTempData(f.TempData.CURRENT_LEVEL_ID),cc.game.emit("gamelog_Thinking",D.ShuShuConst.Level_Win,{lv:t,mode:this.currentMode}),this.sucFunc();var e={u:P.User.get("uuid"),l:P.User.getTempData(f.TempData.CURRENT_LEVEL)+"_"+this.currentLevelProgress};this.post("https://wes.ououvip.com/we/api/track/",e),this.currentLevelProgress=1},e.prototype.sucFunc=function(){var t;if(t=1==this.currentLeveljk?this.currentLevel:this.currentLevel+1,e=P.User.get(f.UserData.LEVEL_LIST),console.log("nextLevel",t,"list",e),t>e[this.currentMode]&&(e[this.currentMode]=t,P.User.set(f.UserData.LEVEL_LIST,e)),cc.game.emit("TaskFinish"),-1!=v.Platform.getConfig().flag.indexOf("tt")){var o=this.currentMode,n=P.User.get(f.UserData.ALREADY_PLAY);-1==n[o].indexOf(this.currentLevel)&&n[o].push(this.currentLevel),P.User.set(f.UserData.ALREADY_PLAY,n);var i=P.User.get(f.UserData.ALREADY_UNLOCK);-1==i[o].indexOf(t)&&i[o].push(t),P.User.set(f.UserData.ALREADY_UNLOCK,i)}g.Audio.playEffect(l.AudioConst.GAME_WIN),_.Popup.hideAll(),_.Popup.show(h.PopupConst.WIN);var r=P.User.get(f.UserData.IS_COMMENT)||0,a=m.BMS.getKey("evaluatelv");0!=this.currentMode||r||-1==a.indexOf(this.currentLevel)||this.scheduleOnce(function(){_.Popup.show(h.PopupConst.COMMENT)},.4),P.User.setTempData(f.TempData.IS_WIN,!1)},e.prototype.post=function(t,e){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<400?console.log("\u63d0\u4ea4\u6210\u529f"):console.log("\u63d0\u4ea4\u5931\u8d25"))},o.open("POST","https://wes.ououvip.com/we/api/track",!0),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e))},e.prototype.initView=function(t,e){var o=this;if(void 0===t&&(t=!1),this.currentPrefabAsset.length>=5){for(var n=0;n<this.currentPrefabAsset.length;n++)cc.assetManager.releaseAsset(this.currentPrefabAsset[n]);this.currentPrefabAsset=[],console.log("\u91ca\u653e\u9884\u5236")}if(null!=this.level){this.level.destroyAllChildren(),this.currentMode=P.User.getTempData(f.TempData.CURRENT_MODE),this.currentLevel=P.User.getTempData(f.TempData.CURRENT_LEVEL),console.log("== \u4e3b\u9898: "+this.currentMode+" \u5173\u5361: "+this.currentLevel+" ==");var i,r=m.BMS.getKey("levelspace"),a=m.BMS.getKey("isCheck");console.log("[levelspace-isCheck]",a),0==a&&(-1==r?this.dict.downloadBtn.active=!1:this.currentLevel%(r+1)==1?(this.dict.downloadBtn.y=514.778,this.dict.downloadBtn.active=!0):this.dict.downloadBtn.active=!1);var c=P.User.get(f.UserData.mode0LevelList_stage1ID),s=P.User.get(f.UserData.mode0LevelList_stage2ID),l=P.User.get(f.UserData.mode1LevelList_stage1ID),d=P.User.get(f.UserData.mode1LevelList_stage2ID),u=P.User.get(f.UserData.mode2LevelList_stage1ID),g=P.User.get(f.UserData.mode2LevelList_stage2ID),y=P.User.get(f.UserData.mode3LevelList_stage1ID),w=P.User.get(f.UserData.mode3LevelList_stage2ID);if(0==this.currentMode)console.log("\u6a21\u5f0f0"),console.log("s:",c),console.log("d:",s),console.log("s[this.currentLevel - 1]:",c[this.currentLevel-1]),i=c[this.currentLevel-1],console.log("r--------:",i),2==this.currentLevelProgress&&(i=s[this.currentLevel-1]);else if(1==this.currentMode)console.log("\u6a21\u5f0f1"),i=l[this.currentLevel-1],2==this.currentLevelProgress?(i=d[this.currentLevel-1],console.log("state\u6e05\u7406\u91cd\u53e0",111),this.dict.move5Btn.active=!0):(console.log("state\u6e05\u7406\u91cd\u53e0",333),this.dict.move5Btn.active=!1),[-19057,-19058,-19059,-19060,-19061].includes(i)&&(this.dict.move5Btn.active=!1),t||(cc.game.emit("gamelog_Thinking",D.ShuShuConst.Level_Page,{lv:i,mode:this.currentMode}),cc.game.emit("gamelog_Thinking",D.ShuShuConst.page,{id:"003"}));else if(2==this.currentMode)console.log("\u6a21\u5f0f2"),i=u[this.currentLevel-1],2==this.currentLevelProgress&&(i=g[this.currentLevel-1]),t||(cc.game.emit("gamelog_Thinking",D.ShuShuConst.Level_Page,{lv:i,mode:this.currentMode}),cc.game.emit("gamelog_Thinking",D.ShuShuConst.page,{id:"006"}));else if(3==this.currentMode)console.log("\u6a21\u5f0f3"),i=y[this.currentLevel-1],2==this.currentLevelProgress&&(i=w[this.currentLevel-1]),t||(cc.game.emit("gamelog_Thinking",D.ShuShuConst.Level_Page,{lv:i,mode:this.currentMode}),cc.game.emit("gamelog_Thinking",D.ShuShuConst.page,{id:"006"}));else{console.log("\u5176\u4ed6\u6a21\u5f0f");var b=P.User.get("mode"+this.currentMode+"LevelList_stage1ID"),T=P.User.get("mode"+this.currentMode+"LevelList_stage2ID");i=b[this.currentLevel-1],2==this.currentLevelProgress&&(i=T[this.currentLevel-1]),t||(cc.game.emit("gamelog_Thinking",D.ShuShuConst.Level_Page,{lv:i,mode:this.currentMode}),cc.game.emit("gamelog_Thinking",D.ShuShuConst.page,{id:"00"+this.currentMode}))}if(4==this.currentMode){console.log("\u6a21\u5f0f4");var A=P.User.get("shakeAmount");A>1&&(this.dict.shakeAmount.active=!0,this.dict.shakeAmount.children[0].getComponent(cc.Label).string=String(A-1),this.dict.shakeBtn.getChildByName("video").active=!1)}console.log("[\u5f53\u524d\u987a\u5e8fid]:"+this.currentLevel),console.log("[\u5f53\u524d\u7b2c\u51e0\u5c0f\u5173]:"+this.currentLevelProgress),console.log("[\u5f53\u524d\u5173\u5361id]:"+i),1==this.currentLevel&&2==this.currentLevelProgress?(this.dict.sz.active=!0,this.dict.maskbg.active=!0,P.User.set("Beginner_Tutorial",0)):(this.dict.sz.active=!1,this.dict.maskbg.active=!1),1==this.currentLevel&&1==this.currentLevelProgress?this.dict.chuiziBtn.active=!1:this.dict.chuiziBtn.active=!0,this.currentLevel>=4&&(1==this.currentLevelProgress?(this.dict.boreBtn.active=!1,P.User.setTempData("totalLevelTime",(new Date).getTime()),this.dict.moderateBtn.active=!1,this.dict.rotateBtn.active=!1,this.dict.addScrewBtn.active=!1):(this.dict.boreBtn.active=!0,this.dict.moderateBtn.active=!1,this.dict.rotateBtn.active=!1,this.dict.addScrewBtn.active=!1)),1==this.currentLevelProgress&&P.User.setTempData("totalLevelTime",(new Date).getTime());var N="zqddn_zhb/prefab/level/zqddn_zhb_level"+i;if(P.User.setTempData(f.TempData.CURRENT_LEVEL_ID,i),C.Res.load(N).then(function(t){var n=cc.instantiate(t);8==o.currentMode&&n._components[0].gameError&&(console.log("[\u5f39\u7403\u6a21\u5f0f] \u4fee\u6539"),n._components[0].gameError=function(){cc.game.emit("onRestartBtn",!0)}),n._components[0]._lbTime&&(n._components[0]._lbTime.string=""),n._components[1]&&n._components[1].initBrain&&(n._components[1].initBrain=function(){}),2==o.currentLevelProgress&&(n.getChildByName("title")&&(n.getChildByName("title").active=!1),n.getChildByName("lblTitle")&&(n.getChildByName("lblTitle").active=!1)),1!=o.currentLevel&&n.getChildByName("lblTitle")&&(n.getChildByName("lblTitle").active=!1,console.log("\u5173\u95ed\u4e86\uff1fthis.currentLevelProgress\uff1a",o.currentLevel)),n._components[0].getIsOpen&&(n._components[0].getIsOpen=o.getIsOpen.bind(o),n._components[0].getAdResult=function(){},o.scheduleOnce(function(){n._components[0].node_hammer.active=!1,n._components[0].node_hammer.children[1].active=!1})),n._components[0].func_highlight&&(n.getChildByName("game").getChildByName("zhandan").opacity=0,n.getChildByName("game").getChildByName("zhandan").y=1e7,n._components[0].initCountDown=function(){}),16==o.currentMode&&n._components[0].func_highlight&&(n._components[0].initCountDown=function(){},n._components[0].fail=function(){_.Popup.show(h.PopupConst.Revive)}),n.x=0,o.currentPrefabAsset.push(t),o.level.addChild(n),o.scheduleOnce(function(){o.screenshot(),v.Platform.startRecordCap()},0),cc.game.emit("gamelog","Level_page_"+o.currentMode+"_"+o.currentLevel),P.User.setTempData("levelTime",(new Date).getTime()),e||(console.log("this.modeLevelTime[this.currentMode]",o.modeLevelTime,o.currentMode),o.currentLevelTime=o.modeLevelTime[o.currentMode],o.dict.time2.active=!0,o.dict.time2.getComponent(cc.Label).string=""+o.secondFormat(o.currentLevelTime),o.unschedule(o.timerFun),o.schedule(o.timerFun,1))}).catch(function(t){console.log("\u6d4b\u8bd5\u554a",JSON.stringify(t))}),P.User.getTempData("cheats")&&(this.dict.cheats.active=!0,this.levelID.getComponent(cc.Label).string="["+i+"]",this.bms.getComponent(cc.Label).string="[bms: "+v.Platform.getConfig().version+"]",this.flag.getComponent(cc.Label).string="[flag: "+v.Platform.getConfig().flag+"]"),this.dict.number.getComponent(cc.Label).string=S.default.formatStr("%d-",this.currentLevelProgress+"",this.currentLevel),this.dict.numbers.getComponent(cc.Label).string=S.default.formatStr("Levle:%d",this.currentLevel),this.initPlatformUI(),!t){var B=m.BMS.getKey("TiLi");console.log("bmsPowerhjw005"),console.log("bmsPower",B),B&&this.isInfinitePower(),v.Platform.is(p.EPlatform.WX),this.restartTimes=0}}},e.prototype.isTimeEndFun=function(){console.log("\u6d4b\u8bd5isTimeEndFun"),this.isTimeEnd=!1},e.prototype.timerFun=function(){if(this.currentLevelTime-=1,this.dict.time2.getComponent(cc.Label).string=""+this.secondFormat(this.currentLevelTime),0==this.currentLevelTime){this.dict.time2.active=!1,this.unschedule(this.timerFun),this.isTimeEnd=!0,g.Audio.playEffect(l.AudioConst.GAME_FAIL),_.Popup.show(h.PopupConst.TimeEnd);var t=P.User.getTempData(f.TempData.CURRENT_LEVEL_ID);P.User.getTempData(f.TempData.CURRENT_MODE),cc.game.emit("gamelog_Thinking",D.ShuShuConst.Level_Lose,{lv:t,mode:this.currentMode})}},e.prototype.secondFormat=function(t,e,o){void 0===e&&(e=2),void 0===o&&(o=!1);var n=t/3600,i=(t%=3600)/60,r=t%=60,a=(n=Math.floor(n))>=10?n+"":"0"+n,c=(i=Math.floor(i))>=10?i+"":"0"+i,s=(r=Math.floor(r))>=10?r+"":"0"+r;o&&(r=100*r/60,s=(r=Math.floor(r))>=10?r+"":"0"+r);var l=a+":"+c+":"+s;switch(e){case 2:l=c+":"+s}return l},e.prototype.developBtn=function(){var t=this,e=this.dict.developID.getComponent(cc.EditBox).string;console.log("\u5f00\u53d1id",e),this.isIntNum(e)&&(console.log("\u662f\u6570\u5b57"),b.ConfigUtils.getLevelIDByDevelop(Number(e),function(e,o){console.log("22222",e),P.User.setTempData(f.TempData.CURRENT_LEVEL_ID,e["stage"+o+"ID"]),P.User.setTempData(f.TempData.CURRENT_MODE,e.mode);var n=P.User.get("mode"+e.mode+"LevelList_stage"+o+"ID").findIndex(function(t){return t==e["stage"+o+"ID"]});-1!=n&&P.User.setTempData(f.TempData.CURRENT_LEVEL,n+1),console.log("\u8df3\u7684\u987a\u5e8fid",n+1),t.currentLevelProgress=o,t.initView()}))},e.prototype.orderBtn=function(){var t=this.dict.orderID.getComponent(cc.EditBox).string;console.log("\u987a\u5e8fid",t),this.isIntNum(t)&&(console.log("\u662f\u6570\u5b57"),P.User.setTempData(f.TempData.CURRENT_LEVEL,Number(t)),this.initView())},e.prototype.screenshotBtn=function(){var t=this,e=this.dict.screenshot.getComponent(cc.EditBox).string.split("-"),o=e[0],n=e[1];console.log("str",o,n),this.isIntNum(o)&&this.isIntNum(n)?(this.dict.cheats.active=!1,P.User.setTempData(f.TempData.CURRENT_LEVEL,Number(o)),this.initView(!0),A.Screenshot.init(this.node),this.schedule(function e(){A.Screenshot.btn_image_knife(String(t.currentLevel)),console.log("\u622a\u56fe\u7b2c"+t.currentLevel+"\u5173");var o=t.currentLevel+1;o<=Number(n)?(P.User.setTempData(f.TempData.CURRENT_LEVEL,o),t.initView(!0)):(console.log("\u7ed3\u675f\u622a\u56fe"),t.unschedule(e))},2)):N.Tip.show("\u8f93\u5165\u683c\u5f0f\u5e94\u8be5\u4e3a: 1-100")},e.prototype.downloadBtn=function(){T.XMAD.downloadBtn()},e.prototype.isIntNum=function(t){return!isNaN(parseFloat(t))},e.prototype.getIsMistakeByChance=function(t){var e=100*Math.random(),o=!1;return console.log("\u968f\u673a\u6570",e),console.log("\u5f53\u524d\u914d\u7f6e\u6982\u7387:"+t),0==t?o:(t>=e&&(o=!0),o)},e.prototype.isInfinitePower=function(){console.log("bmsPowerhjw006");var t=!1;if(m.BMS.getKey("WuxianTiLi")){var e=P.User.get(f.UserData.INF_POWER_START_TIME),o=(new Date).getTime();e&&((o-e)/1e3>=86400||(t=!0))}return console.log("\u662f\u5426\u662f\u65e0\u9650\u4f53\u529b",t),t},e.prototype.initPlatformUI=function(){if(v.Platform.getConfig().fitUIType==p.FitUIType.TT&&(this.dict.topLeftBar.getComponent(cc.Widget).top=55,this.dict.topLeftBar.getComponent(cc.Widget).updateAlignment(),this.dict.topRightBar.getComponent(cc.Widget).top=75,this.dict.topRightBar.getComponent(cc.Widget).updateAlignment(),this.dict.addPowerBtn.getComponent(cc.Widget).top=90,this.dict.addPowerBtn.getComponent(cc.Widget).updateAlignment()),v.Platform.getConfig().fitUIType==p.FitUIType.KS){var t=cc.view.getFrameSize().width/cc.view.getFrameSize().height;console.log("\u957f\u9ad8\u6bd4",t),t<.5?(this.dict.topLeftBar.getComponent(cc.Widget).top=120,this.dict.topLeftBar.getComponent(cc.Widget).left=140,this.dict.topLeftBar.getComponent(cc.Widget).updateAlignment()):(this.dict.topLeftBar.getComponent(cc.Widget).top=55,this.dict.topLeftBar.getComponent(cc.Widget).left=140,this.dict.topLeftBar.getComponent(cc.Widget).updateAlignment()),this.dict.topRightBar.getComponent(cc.Widget).top=75,this.dict.topRightBar.getComponent(cc.Widget).updateAlignment(),this.dict.addPowerBtn.getComponent(cc.Widget).top=90,this.dict.addPowerBtn.getComponent(cc.Widget).updateAlignment()}v.Platform.getConfig().hasHomeBtn?this.dict.homeBtn.active=!0:this.dict.homeBtn.active=!1},e.prototype.clickHome=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn015"),w.Scene.loadScene(u.SceneConst.MAIN))},e.prototype.clickBack=function(){cc.game.emit("gamelog_Thinking",D.ShuShuConst.Level_Pause,{lv:P.User.getTempData(f.TempData.CURRENT_LEVEL_ID),mode:P.User.getTempData(f.TempData.CURRENT_MODE)}),this.stopTimer(),_.Popup.show(h.PopupConst.Pause)},e.prototype.clickRestart=function(t){cc.game.emit("gamelog","btn014"),this.initView(!0,t)},e.prototype.checkFullAd=function(){var t=this,e=m.BMS.getKey("AdIntervals");if(console.log("== \u63d2\u5c4f\u68c0\u6d4b cd\u95f4\u9694\u4e0d\u5c55\u793a\u63d2\u5c4f\uff0ccd\u8ba1\u65f6: "+this.fullAdCounter+"\uff0ccd\u95f4\u9694"+e),this.fullAdCounter<e)return console.log("== \u63d2\u5c4fcd\u4e2d\uff0c\u65e0\u6cd5\u89e6\u53d1");var o=P.User.getTempData(f.TempData.CURRENT_LEVEL),n=m.BMS.getKey("startWinFullScreenAd"),i=m.BMS.getKey("fullScreenAd"),r=m.BMS.checkKey("fullScreenAd"),a=m.BMS.getKey("startLevelWinFullScreenAds"),c=m.BMS.getKey("spaceLevelWinFullScreenAd"),s=m.BMS.getKey("spaceWinFullScreenAd"),l=m.BMS.getKey("spaceWinFullScreenAdND");if(o>=n&&("number"==typeof i&&i||"string"==typeof i&&r)){var d=(new Date).getDate(),p=P.User.get(f.UserData.FIRST_DAY_DATE);o>=a?o%c==0&&(console.log("\u63d2\u5c4f1"),setTimeout(function(){v.Platform.showInsert(),t.fullAdCounter=0},500)):Math.abs(d-p)>0?o%l==0&&(console.log("\u63d2\u5c4f2"),setTimeout(function(){v.Platform.showInsert(),t.fullAdCounter=0},500)):o%s==0&&(console.log("\u63d2\u5c4f3"),setTimeout(function(){v.Platform.showInsert(),t.fullAdCounter=0},500))}},c([k(cc.Prefab)],e.prototype,"coloringSpinePrefab",void 0),c([E],e)}(s.default);r.default=M,cc._RF.pop()},{}],Gear2:[function(t,e,o){"use strict";cc._RF.push(e,"0729f1J+otEC7FIb3UgZxTz","Gear2");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drivingGearNode=null,e.drivenGearNode=null,e.containerRootNode=null,e.gearRootNode=null,e.drivingGearDir=0,e.clickSound=null,e.matchSound=null,e.errorRange=12,e.gameState=0,e.pairNode=[],e.gearStartPos=[],e}return r(e,t),e.prototype.onLoad=function(){this.pairNode.push(this.drivingGearNode);for(var t=0;t<this.containerRootNode.children.length;t++)this.pairNode.push(null);for(this.pairNode.push(this.drivenGearNode),this.drivenGearNode.dir=-1,this.drivingGearNode.dir=-1,t=0;t<this.gearRootNode.children.length;t++)this.gearStartPos.push(this.gearRootNode.children[t].position),this.gearRootNode.children[t].on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.gearRootNode.children[t].on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.gearRootNode.children[t].on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.gearRootNode.children[t].dir=-1;this.whirlGear(this.drivingGearNode,this.drivingGearDir)},e.prototype.start=function(){},e.prototype.touchStart=function(t){if(!(t.getTouches().length>1)&&1!=this.gameState&&2!=this.gameState){cc.audioEngine.playEffect(this.clickSound,!1);var e=t.target,o=this.pairNode.indexOf(e);-1!=o&&(console.log("target as any).dir",e.dir),-1!=e.dir&&(console.log("\u62ff\u6389\u7684\u662f\u52a8\u8f6e"),this.checkIsStopGear(o)),e.dir=-1,e.stopAllActions(),this.pairNode[o]=null)}},e.prototype.checkIsStopGear=function(t){for(var e=this.pairNode[t],o=0;o<this.pairNode.length;o++){var n=this.pairNode[o];null!=n&&this.getInstance(e,n)<=e.width/2+n.width/2&&-1!=n.dir&&o>t&&(this.isContactFrontGear(n,e,t)||(n.dir=-1,n.stopAllActions(),this.checkIsStopGear(o)))}},e.prototype.isContactFrontGear=function(t,e,o){for(var n=0;n<this.pairNode.length;n++){var i=this.pairNode[n];if(null!=i&&e!=i&&this.getInstance(i,t)<=i.width/2+t.width/2&&o>n&&1!=i.dir)return!0}},e.prototype.stopNextGear=function(t){var e=this.pairNode[t];null!=e&&1!=e.dir&&(e.dir=-1,e.stopAllActions(),this.stopNextGear(t+1))},e.prototype.touchMove=function(t){if(!(t.getTouches().length>1)&&1!=this.gameState&&2!=this.gameState){var e=t.target;e.setSiblingIndex(100),e.position=e.position.add(t.getDelta())}},e.prototype.touchEnd=function(t){var e=this;if(!(t.getTouches().length>1)&&0===this.gameState){for(var o=t.target,n=!1,i=0;i<this.containerRootNode.children.length;i++){var r=this.containerRootNode.children[i];if(this.isIntersects(o,r)&&(console.log("\u5bb9\u5668\u70b9",r.name),this.isCanPlace(o,r))){this.pairNode[r.name[0]]=o,n=!0,cc.audioEngine.playEffect(this.matchSound,!1),cc.tween(o).to(.2,{position:r.position}).call(function(){o.setSiblingIndex(0),e.judgeDrive(o)}).start();break}}n||cc.tween(o).to(.3,{position:this.gearStartPos[Number(o.name[0])]},{easing:cc.easing.expoOu}).start()}},e.prototype.isCanPlace=function(t,e){for(var o=0;o<this.pairNode.length;o++){var n=this.pairNode[o];if(n&&console.log("\u540d\u5b57",n.name,this.getInstance(e,n),t.width/2+n.width/2-8),null!=n&&this.getInstance(e,n)<t.width/2+n.width/2-this.errorRange)return!1}return!0},e.prototype.judgeDrive=function(t){for(var e=0;e<this.pairNode.length;e++){var o=this.pairNode[e];if(null!=o&&t!=o&&-1!=o.dir&&this.getInstance(t,o)<=t.width/2+o.width/2){var n=0==o.dir?1:0;this.whirlGear(t,n);break}}},e.prototype.getInstance=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position),n=e.parent.convertToWorldSpaceAR(e.position);return o.sub(n).mag()},e.prototype.isIntersects=function(t,e){return null!=t&&null!=e&&t.getBoundingBoxToWorld().intersects(e.getBoundingBoxToWorld())},e.prototype.whirlGear=function(t,e){var o=this;void 0===e&&(e=0);var n=0==e?-360:360;t.dir=e,cc.tween(t).by(1.5,{angle:n}).repeatForever().start();for(var i=0;i<this.pairNode.length;i++){var r=this.pairNode[i];null!=r&&r!=t&&this.getInstance(r,t)<r.width/2+t.width/2&&-1==r.dir&&this.judgeDrive(r)}t==this.drivenGearNode&&(this.gameState=1,cc.tween(this.gearRootNode).to(1,{opacity:0}).call(function(){o.gameRight()}).start(),cc.tween(this.drivenGearNode).to(1,{opacity:0}).start(),cc.tween(this.drivingGearNode).to(1,{opacity:0}).start())},e.prototype.gameRight=function(){console.log("\u6210\u529f")},a([l(cc.Node)],e.prototype,"drivingGearNode",void 0),a([l(cc.Node)],e.prototype,"drivenGearNode",void 0),a([l(cc.Node)],e.prototype,"containerRootNode",void 0),a([l(cc.Node)],e.prototype,"gearRootNode",void 0),a([l],e.prototype,"drivingGearDir",void 0),a([l({type:cc.AudioClip})],e.prototype,"clickSound",void 0),a([l({type:cc.AudioClip})],e.prototype,"matchSound",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],GetSkin:[function(t,e,o){"use strict";cc._RF.push(e,"872b9pYKFRNlIfklUb3Ni+S","GetSkin");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("ConfigConst"),d=i("EventConst"),p=i("UserConst"),h=i("ConfigManager"),u=i("EventManager"),f=i("PopupManager"),g=i("UserManager"),m=i("ShuShuConst"),y=cc._decorator,v=y.ccclass,_=(y.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("noBtn2",this.noBtn,this),this.updateView()},e.prototype.noBtn=function(){f.Popup.hide()},e.prototype.onEnable=function(){u.Event.on(d.default.update_use_skin,this.updateView,this)},e.prototype.onDisable=function(){u.Event.off(d.default.update_use_skin,this.updateView,this)},e.prototype.updateView=function(){var t=this,e=g.User.getTempData("chooseSkinPage")||0,o=g.User.getTempData("chooseSkin")||0,n=this.dict.spine.getComponent(sp.Skeleton),i=g.User.get(p.UserData.getLockSkinList),r=g.User.get(p.UserData.skinList),a=g.User.get(p.UserData.useSkinIDList);if(this.dict.content.active=!1,0==e){var c="pifu"+o;c="pifu2"==c?"pifu8":c,n.setSkin(c),n.defaultSkin=c,cc.game.emit("gamelog_Thinking",m.ShuShuConst.Skin_get,{mode:0,id:o-1});var s=i[0].indexOf(o-1);i[0].splice(s,1),console.log("getLockSkinList",i[0]),g.User.set(p.UserData.getLockSkinList,i),r[0].push(o-1),g.User.set(p.UserData.skinList,r),a[0]=o-1,g.User.set(p.UserData.useSkinIDList,a),u.Event.emit(d.default.update_use_skin),o=11==(o=10==o?8:o)?9:o,h.Config.get(l.ConfigConst.Skin0).then(function(e){t.dict.name.getComponent(cc.Label).string=e.find(function(t){return t.id==o}).skinName})}else n.node.active=!1,this.dict.name.getComponent(cc.Label).string=[null,"\u5e95\u677f","\u87ba\u4e1d"][e],cc.game.emit("gamelog_Thinking",m.ShuShuConst.Skin_get,{mode:e,id:o-1}),cc.resources.load("texture/skin/"+[null,"diban_","luosi_"][e]+o,function(e,o){if(e)return console.log(e);t.dict.otherSkin.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),t.dict.pifukuang.active=!0,t.dict.otherSkin.active=!0}),r[e].push(o-1),g.User.set(p.UserData.skinList,r),a[e]=o-1,g.User.set(p.UserData.useSkinIDList,a),u.Event.emit(d.default.update_use_skin);cc.game.emit("skinHint");var f=cc.moveTo(.8,cc.v2(15,cc.winSize.height/2-130)).easing(cc.easeElasticOut(.6));console.log("cc.winSize.height:",cc.winSize.height/2);var y=cc.sequence(f,cc.callFunc(function(){this.dict.content.active=!0},this));this.dict.bg_biaoti2.getComponent(cc.Sprite).node.runAction(y)},c([v],e)}(s.default));r.default=_,cc._RF.pop()},{}],GuessPicture:[function(t,e,o){"use strict";cc._RF.push(e,"a39a783FttGc5KY4/aCZ9vI","GuessPicture");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("zqddn_level_base"),l=cc._decorator,d=l.ccclass,p=l.property,h={1391:{id:1,optionName:["\u4f1e","\u80f8\u90e8","\u4e66","\u86cb\u7cd5"],answer:"2"},1392:{id:2,optionName:["\u6253\u706b\u673a","\u6c7d\u6cb9","\u8721\u70db","\u706b\u67f4"],answer:"2"},1393:{id:3,optionName:["\u53f0\u706f","\u6247\u5b50","\u5973\u4eba","\u624b\u7535\u7b52"],answer:"0"},1394:{id:4,optionName:["\u67e0\u6aac","\u6a58\u5b50","\u67da\u5b50","\u9999\u74dc"],answer:"0"},1395:{id:5,optionName:["\u4e66","\u540a\u706f","\u5973\u4eba","\u676f\u5b50"],answer:"3"},1396:{id:6,optionName:["\u98ce\u6247","\u73e0\u5b9d","\u5b54\u96c0","\u68d5\u6988\u6811"],answer:"2"},1397:{id:7,optionName:["\u81c0\u90e8","\u6d77\u5e26","\u56f4\u88d9","\u80cc\u5305"],answer:"3"},1398:{id:8,optionName:["\u9cc4\u9c7c","\u8725\u8734","\u6cb3\u9a6c","\u86c7"],answer:"0"},1399:{id:9,optionName:["\u773c\u775b","\u80f8\u90e8","\u821e\u8e48","\u6253\u67b6"],answer:"2"},1400:{id:10,optionName:["\u8001\u9f20","\u4ed3\u9f20","\u677e\u9f20","\u5154\u5b50"],answer:"2"},1401:{id:11,optionName:["\u714e\u997c","\u9762\u5305","\u6c49\u5821","\u997c\u5e72"],answer:"2"},1402:{id:12,optionName:["\u9762\u5305","\u5496\u5561","\u6728\u5934","\u9999\u8549"],answer:"0"},1403:{id:13,optionName:["\u53ef\u4e50","\u5496\u5561","\u86cb\u7cd5","\u5976\u8336"],answer:"1"},1404:{id:14,optionName:["\u68a8\u5b50","\u8461\u8404","\u67e0\u6aac","\u82f9\u679c"],answer:"0"},1405:{id:15,optionName:["\u65d7\u5b50","T\u6064","\u96e8\u4f1e","\u98ce\u7b5d"],answer:"3"},1406:{id:16,optionName:["\u7ea2\u8c46","\u5de7\u514b\u529b","\u5496\u5561\u8c46","\u8c4c\u8c46"],answer:"2"},1407:{id:17,optionName:["\u82b1","\u9e1f","\u6247\u5b50","\u7a97\u5e18"],answer:"1"},1408:{id:18,optionName:["\u54c8\u5229\u6ce2\u7279","\u7ef4\u7eb3\u65af","\u8499\u5a1c\u4e3d\u838e","\u9ea6\u5f53\u5a1c"],answer:"2"},1409:{id:19,optionName:["\u523a\u732c","\u5730\u6bef","\u62d6\u628a","\u8c6a\u732a"],answer:"0"},1410:{id:20,optionName:["\u5851\u6599","\u91d1\u9c7c","\u82b1","\u88d9\u5b50"],answer:"1"}},u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.btns=null,e.gameBase=null,e.curId=0,e.picture=null,e.speed=800,e.isTween=!1,e.isEnd=!1,e.gameWin=function(){},e.curData=null,e}return a(e,t),e.prototype.init=function(t){this.curId=t,this.picture=this.mask.node.children[0],this.curData=h[this.curId.toString()],cc.log(this.curData),this.gameBase=this.node.getComponent(s.default),this.initButton(),this.node.getChildByName("content"),this.node.getChildByName("title").getComponent(cc.Label).string="\u731c\u731c\u8fd9\u662f\u5565\uff1f"},e.prototype.initButton=function(){var t=this;this.btns.children.forEach(function(e,o){var n=t.curData.optionName[o];e.children[0].getComponent(cc.Label).string=n;var i=e.addComponent(cc.Button);i.transition=cc.Button.Transition.SCALE,i.zoomScale=1.1,t.clickEvent(e,function(){o.toString()===t.curData.answer?t.pictureReset():t.gameBase.showWrong(e)})})},e.prototype.pictureReset=function(){var t=this;this.isEnd=!0,this.isTween=!0;var e=this.picture.position.sub(cc.v2()).mag();cc.tween(this.picture).to(e/this.speed,{position:cc.v2(),scale:1}).call(function(){t.isTween=!1;var e=t.btns.children[parseInt(t.curData.answer)],o=new cc.Node;o.parent=t.node;var n=e.parent.convertToWorldSpaceAR(e.position),i=t.node.convertToNodeSpaceAR(n),r=e.width;o.setPosition(i.x+.7*r,i.y),t.scheduleOnce(function(){t.gameBase.gameRight(0,o)})}).start()},e.prototype.clickEvent=function(t,e){var o=this;t.on(cc.Node.EventType.TOUCH_END,function(t){o.gameBase.onClickSound(),t.stopPropagation(),o.isEnd||o.isTween||e&&e()},this)},c([p(cc.Mask)],e.prototype,"mask",void 0),c([p(cc.Node)],e.prototype,"btns",void 0),c([d],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],GuessSentenceConfig:[function(t,e,o){"use strict";cc._RF.push(e,"ea79a3iAW1DKIKS3kQ+07Hn","GuessSentenceConfig");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.GuessSentenceConfig=void 0,n.GuessSentenceConfig={},cc._RF.pop()},{}],Hide:[function(t,e,o){"use strict";cc._RF.push(e,"ad60amMOi5HOr1zdtf8EqBs","Hide");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.hide=function(t){window.tt&&window.wxapi.onHide(t)},t}();n.default=new i,cc._RF.pop()},{}],HintSystem:[function(t,e,o){"use strict";cc._RF.push(e,"13d71cqb7NL4oEA4oack7yj","HintSystem");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=new(function(){function t(){this.hints=[]}return t.prototype.init=function(){},t.prototype.addHint=function(t){this.hints.push(t)},t.prototype.showHint=function(t){t>=0&&t<this.hints.length&&this.hints[t].show()},t.prototype.hideHint=function(t){t>=0&&t<this.hints.length&&this.hints[t].hide()},t.prototype.clearHints=function(){for(var t=0;t<this.hints.length;t++)this.hints[t].hide()},t}());n.default=i,cc._RF.pop()},{}],Hint:[function(t,e,o){"use strict";cc._RF.push(e,"09f8c6tS5RMJJok1qE+Wivd","Hint");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e,o){this.node=null,this.node=new cc.Node("Hint"),this.node.setPosition(e),this.node.setScale(o),this.node.scale=0,this.node.opacity=0}return t.prototype.show=function(){this.node.scale=1,this.node.opacity=1},t.prototype.hide=function(){this.node.scale=0,this.node.opacity=0},t}();n.default=i,cc._RF.pop()},{}],HitNut_GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"8515f+LIitLKandnn3fvjgd","HitNut_GameMgr");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.itemType=void 0;var s,l,d=i("NutItem1"),p=i("NutItem2"),h=cc._decorator,u=h.ccclass,f=h.property;(function(t){t[t.banli=0]="banli",t[t.hetao=1]="hetao",t[t.xiaweiyiguo=2]="xiaweiyiguo"})(s=r.itemType||(r.itemType={})),function(t){t.item1="item1",t.item2="item2"}(l||(l={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickSound=null,e.hitClip=null,e.unhitClip=null,e.stoneBrokenClip=null,e.nutLayer=null,e.brokenLayer=null,e.dropLayer=null,e.guidanceLayer=null,e.colliderArea=null,e.stoneBrokenPrefab=null,e.nutBrokenPrefab=null,e.nutPrefab=null,e.walnutPrefab=null,e.walnutRigidBodyPrefab=[],e.handSp=null,e.stone=null,e.checkNode=null,e.shadowHand=null,e.g1=null,e.g2=null,e.isStart=!1,e.labCurItem=null,e.curItemNum=0,e.labTotalItem=null,e.totalItemNum=30,e.sf=null,e.hand=null,e.floatRange=10,e.floatSpeed=15,e.handSpeed=200,e.floatDir=1,e.startAngle=0,e.firstPos=cc.v2(),e.secondPos=cc.v2(0,-520),e.thirdPos=cc.v2(800,-520),e.colliderRange=cc.v2(420,550),e.isEnd=!1,e.nodeTweenMap=new Map,e.isClick=!1,e.curIdx=0,e.dropSpeed=520,e.moveTime=1.5,e.itemScale=.55,e.curItemType=s.xiaweiyiguo,e.queue=[1,.8,.8,.8,1,1,1,.6,.6,.6,1,1],e.goal=30,e.guidanceNode=null,e._poolMap=new Map,e._prefabMap=new Map,e}return a(e,t),e.prototype.onLoad=function(){var t=this;cc.director.getPhysicsManager().enabled=!0,this.preloadNode(l.item1,this.nutPrefab,10),this.preloadNode(l.item2,this.walnutPrefab,5),this.clickEvent(this.node,function(){t.isClick||t.isEnd||(t.isClick=!0,t.handTween())})},e.prototype.init=function(t,e,o){this.curItemType=t,this.totalItemNum=e||this.goal,this.queue=o,this.updateLabel(),this.setScale(),this.startAngle=this.hand.angle;var n=this.colliderArea.parent.convertToWorldSpaceAR(this.colliderArea.position),i=this.nutLayer.convertToNodeSpaceAR(n);this.colliderRange.x=i.x,this.colliderRange.y=i.x+this.colliderArea.width,this.guidance()},e.prototype.setScale=function(){this.totalItemNum>=30?this.itemScale=.35:this.totalItemNum<30&&this.totalItemNum>=20?this.itemScale=.4:this.totalItemNum<20&&this.totalItemNum>10?this.itemScale=.5:this.itemScale=.55},e.prototype.loop=function(){var t=this;if(!this.isEnd){this.curIdx>this.queue.length-1&&(this.curIdx=0);var e=this.queue[this.curIdx];this.curIdx+=1,this.scheduleOnce(function(){t.create(),t.loop()},e)}},e.prototype.create=function(){var t=this.getNode(l.item1);t.getComponent(d.default).init(this.curItemType),t.getComponent(d.default).isShadow(!1),t.stopAllActions(),t.angle=0,t.parent=this.nutLayer,t.setPosition(this.firstPos),t.active=!0,this.move(t)},e.prototype.guidance=function(){this.isStart=!1;var t=this.getNode(l.item1);t.getComponent(d.default).init(this.curItemType),t.getComponent(d.default).isShadow(!0),t.stopAllActions(),t.angle=0,t.parent=this.g1,t.setPosition(0,0),t.active=!0;var e=this.getNode(l.item1);e.getComponent(d.default).init(this.curItemType),e.getComponent(d.default).isShadow(!1),e.stopAllActions(),e.angle=0,e.parent=this.nutLayer,e.setPosition(this.g2.position),e.active=!0,this.guidanceNode=e},e.prototype.handTween=function(){var t=this,e=!1,o=(0-this.hand.angle)/this.handSpeed;cc.tween(this.hand).to(o,{angle:0},{easing:cc.easing.cubicIn}).call(function(){if(t.isStart){for(var o=0;o<t.nutLayer.childrenCount;++o){var n=t.nutLayer.children[o];if(n.x>=t.colliderRange.x&&n.x<=t.colliderRange.y){e=!0,cc.log("\u88ab\u6572\u51fb\u4e2d\u4e86"),n.removeFromParent(),t.putNode(l.item1,n);break}}if(e){e=!1,cc.audioEngine.playEffect(t.hitClip,!1),(a=cc.instantiate(t.nutBrokenPrefab)).parent=t.brokenLayer,a.setPosition(0,0),a.active=!0;var i=a.getComponent(sp.Skeleton);i.setAnimation(0,t.getSpineName(),!1),i.setCompleteListener(function(){i.node.removeFromParent(!0)}),t.walNutTween(),cc.tween(t.hand).to(0/t.handSpeed,{angle:-25},{easing:cc.easing.smooth}).call(function(){t.isClick=!1}).start()}else{cc.audioEngine.playEffect(t.unhitClip,!1),cc.audioEngine.playEffect(t.stoneBrokenClip,!1),t.shadowHand.active=!1,t.handSp.spriteFrame=t.sf,(a=cc.instantiate(t.stoneBrokenPrefab)).parent=t.brokenLayer,a.setPosition(0,0),a.active=!0;var r=a.getComponent(sp.Skeleton);r.setAnimation(0,"shitou",!1),r.setCompleteListener(function(){r.node.removeFromParent(!0),t.gameFail()}),t.unscheduleAllCallbacks(),t.nodeTweenMap.forEach(function(t){t.stop()}),t.isEnd=!0}}else{var a;t.isStart=!0,cc.audioEngine.playEffect(t.hitClip,!1),(a=cc.instantiate(t.nutBrokenPrefab)).parent=t.brokenLayer,a.setPosition(0,0),a.active=!0;var c=a.getComponent(sp.Skeleton);c.setAnimation(0,t.getSpineName(),!1),c.setCompleteListener(function(){c.node.removeFromParent(!0)}),t.g1.removeFromParent(!0),t.walNutTween(),cc.tween(t.hand).to(0/t.handSpeed,{angle:-25},{easing:cc.easing.smooth}).call(function(){t.loop(),t.guidanceNode&&t.move(t.guidanceNode),t.isClick=!1}).start()}}).start()},e.prototype.move=function(t){var e=this,o=t.y+520,n=cc.tween(t).to(o/this.dropSpeed,{y:-520}).call(function(){t.runAction(cc.sequence(cc.jumpBy(.2,cc.v2(100,0),50,1),cc.callFunc(function(){t.getComponent(d.default).isShadow(!0);var o=t.getChildByName("sp");cc.tween(o).by(e.moveTime,{angle:-360}).call(function(){cc.log("\u8d85\u51fa\u8303\u56f4\u6d88\u5931"),t.removeFromParent(),e.putNode(l.item1,t)}).start(),cc.tween(t).to(e.moveTime,{x:800}).start()})))}).start();this.nodeTweenMap.set(t.uuid,n)},e.prototype.walNutTween=function(){var t=this,e=this.getNode(l.item2);e.getComponent(p.default).init(this.curItemType),e.getChildByName("sp").active=!0,e.scale=1,e.parent=this.node,e.setPosition(this.checkNode.position);var o=this.transformPosition(this.dropLayer,e),n=cc.v2(o).sub(e.position).mul(.5),i=n.rotate(Math.PI/180*90).normalize(),r=e.position.add(n).add(i.mul(500)),a=cc.bezierTo(.7,[e.position,r,o]);e.stopAllActions(),e.runAction(cc.sequence(a,cc.callFunc(function(){e.getChildByName("sp").active=!1,t.scheduleOnce(function(){e.removeFromParent(),t.putNode(l.item2,e)},.05);var o=cc.instantiate(t.walnutRigidBodyPrefab[t.curItemType]);o.scale=t.itemScale,o.parent=t.dropLayer,o.setPosition(0,0),o.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,t.scheduleOnce(function(){t.curItemNum+=1,t.updateLabel(),t.check()},.2)})))},e.prototype.check=function(){this.curItemNum>=this.totalItemNum&&(this.isEnd=!0,this.unscheduleAllCallbacks(),this.nodeTweenMap.forEach(function(t){t.stop()}),this.gameWin())},e.prototype.gameWin=function(){},e.prototype.gameFail=function(){},e.prototype.getSpineName=function(){var t="";switch(this.curItemType){case s.banli:t="banli";break;case s.hetao:t="hetao";break;case s.xiaweiyiguo:t="xiaweiyiguo"}return t},e.prototype.transformPosition=function(t,e){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO))},e.prototype.clickEvent=function(t,e){var o=this;t.on(cc.Node.EventType.TOUCH_END,function(t){t.stopPropagation(),o.isEnd||e&&e()},this)},e.prototype.updateLabel=function(){this.curItemNum=this.curItemNum>this.totalItemNum?this.totalItemNum:this.curItemNum,this.labCurItem.string=this.curItemNum.toString(),this.labTotalItem.string=this.totalItemNum.toString()},e.prototype.update=function(t){if(!this.isEnd&&!this.isClick){var e=this.floatRange+this.startAngle,o=-this.floatRange+this.startAngle;this.hand.angle+=this.floatSpeed*t*this.floatDir,this.hand.angle>=e&&(this.hand.angle=e,this.floatDir*=-1),this.hand.angle<=o&&(this.hand.angle=o,this.floatDir*=-1)}},Object.defineProperty(e.prototype,"poolMap",{get:function(){return this._poolMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prefabMap",{get:function(){return this._prefabMap},enumerable:!1,configurable:!0}),e.prototype.preloadNode=function(t,e,o){if(t&&e){this._prefabMap.set(t,e),this._poolMap.get(t)||this._poolMap.set(t,new cc.NodePool),o-=this._poolMap.get(t).size();for(var n=0;n<o;++n){var i=cc.instantiate(e);this._poolMap.get(t).put(i)}}},e.prototype.getNode=function(t){var e=this._poolMap.get(t),o=null;if(e&&e.size())o=e.get();else{var n=this._prefabMap.get(t);o=cc.instantiate(n)}return o.active=!0,o},e.prototype.putNode=function(t,e){e.active=!1;var o=this._poolMap.get(t);if(o)o.put(e);else{var n=new cc.NodePool;this._poolMap.set(t,n),n.put(e)}},c([f({type:cc.AudioClip})],e.prototype,"clickSound",void 0),c([f({type:cc.AudioClip})],e.prototype,"hitClip",void 0),c([f({type:cc.AudioClip})],e.prototype,"unhitClip",void 0),c([f({type:cc.AudioClip})],e.prototype,"stoneBrokenClip",void 0),c([f(cc.Node)],e.prototype,"nutLayer",void 0),c([f(cc.Node)],e.prototype,"brokenLayer",void 0),c([f(cc.Node)],e.prototype,"dropLayer",void 0),c([f(cc.Node)],e.prototype,"guidanceLayer",void 0),c([f(cc.Node)],e.prototype,"colliderArea",void 0),c([f(cc.Node)],e.prototype,"stoneBrokenPrefab",void 0),c([f(cc.Node)],e.prototype,"nutBrokenPrefab",void 0),c([f(cc.Prefab)],e.prototype,"nutPrefab",void 0),c([f(cc.Prefab)],e.prototype,"walnutPrefab",void 0),c([f([cc.Prefab])],e.prototype,"walnutRigidBodyPrefab",void 0),c([f(cc.Sprite)],e.prototype,"handSp",void 0),c([f(cc.Node)],e.prototype,"stone",void 0),c([f(cc.Node)],e.prototype,"checkNode",void 0),c([f(cc.Node)],e.prototype,"shadowHand",void 0),c([f(cc.Node)],e.prototype,"g1",void 0),c([f(cc.Node)],e.prototype,"g2",void 0),c([f(cc.Label)],e.prototype,"labCurItem",void 0),c([f(cc.Label)],e.prototype,"labTotalItem",void 0),c([f(cc.SpriteFrame)],e.prototype,"sf",void 0),c([f(cc.Node)],e.prototype,"hand",void 0),c([f({type:cc.Integer,tooltip:"\u60ac\u6d6e\u8303\u56f4"})],e.prototype,"floatRange",void 0),c([u],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],HomeItem:[function(t,e,o){"use strict";cc._RF.push(e,"fbe47kuOa1Ip7UlVTWQIEmp","HomeItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("Utils"),d=cc._decorator,p=d.ccclass,h=d.property;(function(t){t[t.Normal=0]="Normal",t[t.Finish=1]="Finish",t[t.Lock=2]="Lock"})(s||(s={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ranking=null,e.score=null,e.province=null,e.roleRoot=null,e.shadowRoot=null,e.bgSpriteFrame=[],e.param=null,e.state=null,e.starAmount=0,e.skinNameArr=[],e}return a(e,t),e.prototype.onLoad=function(){var t=this;this.skinNameArr=new Array(15).fill("pifu").map(function(t,e){return t+(e+1)}),this.roleRoot.children.forEach(function(e,o){t.shadowRoot.children[o].name=e.name})},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){var t=this,e=this.param.index+1;this.ranking.string="\u7b2c"+e+"\u540d",this.score.string=""+this.param.score,this.province.string=this.param.province,this.param.province.includes("UNKNOW")&&(this.province.string="\u5176\u4ed6\u961f"),this.roleRoot.children.forEach(function(e){e.active=!1,t.shadowRoot.getChildByName(e.name).active=!1;var o=e.children[0].getComponent(sp.Skeleton);if(Number(e.name)+1<=t.param.score){e.active=!0,t.shadowRoot.getChildByName(e.name).active=!0;var n=t.skinNameArr[l.Utils.randomNum(0,14)];o.setSkin(n),o.defaultSkin=n,o.setAnimation(0,"idle",!0)}}),this.param.index>2?this.node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[3]:this.node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[this.param.index]},e.state=s,c([h(cc.Label)],e.prototype,"ranking",void 0),c([h(cc.Label)],e.prototype,"score",void 0),c([h(cc.Label)],e.prototype,"province",void 0),c([h(cc.Node)],e.prototype,"roleRoot",void 0),c([h(cc.Node)],e.prototype,"shadowRoot",void 0),c([h([cc.SpriteFrame])],e.prototype,"bgSpriteFrame",void 0),c([p],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],Home:[function(t,e,o){"use strict";cc._RF.push(e,"b5839ZLSZhGeL0ByHlxxbWw","Home");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},s=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},l=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var d=i("BaseUI"),p=i("RecycleScroll"),h=i("AudioConst"),u=i("ConfigConst"),f=i("EventConst"),g=i("PlatformConst"),m=i("PopupConst"),y=i("SceneConst"),v=i("UserConst"),_=i("AudioManager"),C=i("BmsManager"),w=i("ConfigManager"),P=i("EventManager"),b=i("PlatformManager"),T=i("PopupManager"),S=i("SceneManager"),A=i("TipManager"),N=i("UserManager"),B=i("ChallengeHttp"),O=i("ConfigUtils"),R=i("OPPOAndroidAdUtils"),D=i("Utils"),L=i("VIVOADUtils"),I=i("XMADUtils"),E=i("ShuShuConst"),k=i("HomeItem"),M=cc._decorator,U=M.ccclass,F=M.property,x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e.clickTimes=0,e.ageSpriteFrame=[],e.btnIconSpriteFrame=[],e.secondModeData=null,e.thirdModesData=[],e.darenModesData=[],e.scrollType=0,e.rankList=[],e.myRank=1,e.isLoadingScene=!1,e.isLoadPrivacy=!1,e.isEnterUgc=!1,e.isAnim=!1,e.isShow=!1,e}return a(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.addBtnOn("setBtn",this.clickSet,this),this.addBtnOn("startBtn",this.clickStart,this),this.addBtnOn("infinitePowerBtn",this.clickInfinitePower,this),this.addBtnOn("hotModeBtn",this.clickHotMode,this),this.addBtnOn("moreModeBtn",this.clickMoreMode,this),this.addBtnOn("ageBtn",this.clickAge,this),this.addBtnOn("privacyBtn",this.clickPrivacy,this),this.addBtnOn("appointBtn",this.clickAppoint,this),this.addBtnOn("moreGameBtn",this.clickMoreGame,this),this.addBtnOn("levelSelectBtn",this.clickLevelSelect,this),this.addBtnOn("createBtn",this.clickCreateBtn,this),this.addBtnOn("ageBtn",this.clickAgeBtn,this),this.addBtnOn("followBtn",this.clickFollowBtn,this),this.addBtnOn("secondBtn",this.clickSecondMode,this),this.addBtnOn("3Btn",this.click3Mode,this),this.addBtnOn("thirdBtn",this.clickThirdMode,this),this.addBtnOn("beeBtn",this.clickBeeBtn,this),this.addBtnOn("modeJumpBtn",this.modeJumpBtn,this),this.addBtnOn("closeDaren",this.closeDaren,this),this.addBtnOn("darenJump",this.darenJump,this),this.addBtnOn("unlockAllModeBtn",this.unlockAllModeBtn,this),this.addBtnOn("orderBtn",this.orderBtn,this),this.addBtnOn("topBtn",this.topBtn,this),this.addBtnOn("rankBtn",this.rankBtn,this),this.addBtnOn("skinBtn",this.skinBtn,this),this.addBtnOn("playBtn",this.playBtn,this),this.addBtnOn("signInBtn",this.signInBtn,this),this.addBtnOn("positionBtn",this.positionBtn,this),this.addBtnOn("limitWelfareBtn",this.limitWelfareBtn,this),this.addBtnOn("feedbackBtn",this.feedbackBtn,this),this.dict.cheats.on(cc.Node.EventType.TOUCH_START,this.clickCheats,this),this.dict.clickBg.on(cc.Node.EventType.TOUCH_START,function(){e.isShow&&e.clickThirdMode()},this),this.dict.clickBg._touchListener&&this.dict.clickBg._touchListener.setSwallowTouches(!1),this.initView()},e.prototype.limitWelfareBtn=function(){console.log("limitWelfareBtn"),cc.game.emit("gamelog_Thinking",E.ShuShuConst.btn,{id:"009"}),T.Popup.show(m.PopupConst.LimitWelfare)},e.prototype.feedbackBtn=function(){T.Popup.show(m.PopupConst.Feedback)},e.prototype.hideLimitWelfareBtn=function(){this.dict.limitWelfareBtn.active=!1},e.prototype.onEnable=function(){P.Event.on(f.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this),P.Event.on(f.default.updateUnlockAllMode,this.updateUnlockAllMode,this),P.Event.on(f.default.ENTER_ID,this.sucEnterByMode,this),P.Event.on(f.default.hideLimitWelfareBtn,this.hideLimitWelfareBtn,this),cc.game.on("signInHint",this.signInHint,this),cc.game.on("skinHint",this.skinHint,this),b.Platform.is(g.EPlatform.XIAOMI_ANDROID)?I.XMAD.showBannerFeed():b.Platform.is(g.EPlatform.OPPO_ANDROID)?R.OPPOAndroidAd.showBannerFeed():b.Platform.is(g.EPlatform.VIVO)&&L.VIVOAD.showCustomAd_1()},e.prototype.onDisable=function(){P.Event.off(f.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this),P.Event.off(f.default.updateUnlockAllMode,this.updateUnlockAllMode,this),P.Event.off(f.default.ENTER_ID,this.sucEnterByMode,this),P.Event.off(f.default.hideLimitWelfareBtn,this.hideLimitWelfareBtn,this),cc.game.off("signInHint",this.signInHint,this),cc.game.off("skinHint",this.skinHint,this),b.Platform.hideBanner(),b.Platform.hideCustomAd_1(),b.Platform.hideCustomAd_2()},e.prototype.updateInfinitePower=function(t){this.dict.infinitePowerBtn.active=!t},e.prototype.updateUnlockAllMode=function(){this.dict.unlockAllModeBtn.active=!1},e.prototype.getDeviceId=function(){var t=cc.sys.localStorage.getItem("deviceId");return t||(t=this.generateUUID(),cc.sys.localStorage.setItem("deviceId",t)),t},e.prototype.generateUUID=function(){var t=(new Date).getTime(),e=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var n=16*Math.random();return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(e+n)%16|0,e=Math.floor(e/16)),("x"===o?n:3&n|8).toString(16)})},e.prototype.initView=function(){return s(this,void 0,void 0,function(){var t,e,o,n,i,r,a,c,s,d,p,f,y,P,S,A,B,O,R,D,L,I,E,k,M,U;return l(this,function(l){switch(l.label){case 0:return t=N.User.get(v.UserData.LEVEL_LIST)||{},[4,w.Config.get(u.ConfigConst.THEME)];case 1:for(e=l.sent(),N.User.setTempData(v.TempData.CURRENT_ALL_MODE,e),A=0;A<e.length;A++)i=e[A].theme,t[i]||(t[i]=1),2==e[A].id?this.secondModeData=e[A]:e[A].id>=3&&this.thirdModesData.push(e[A]),this.darenModesData.push(e[A]);for(N.User.set(v.UserData.LEVEL_LIST,t),o=N.User.get(v.UserData.ALREADY_PLAY)||{},A=0;A<e.length;A++)i=e[A].theme,o[i]||(o[i]=[]);for(N.User.set(v.UserData.ALREADY_PLAY,o),n=N.User.get(v.UserData.ALREADY_UNLOCK)||{},A=0;A<e.length;A++)i=e[A].theme,n[i]||(n[i]=[1]);if(N.User.set(v.UserData.ALREADY_UNLOCK,n),this.updateModeView(),r=N.User.get(v.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES)||0,a=N.User.get(v.UserData.UNLOCK_MODE_LIST)||[],(2==r||a.length>=e.length)&&(this.dict.unlockAllModeBtn.active=!1),N.User.setTempData(v.TempData.POWER_TYPE,1),N.User.get(v.UserData.FIRST_DAY_DATE)){if(console.log("\u8001\u7528\u6237",b.Platform.getConfig().flag.indexOf("tt")),-1!=b.Platform.getConfig().flag.indexOf("tt")&&(d=N.User.get(v.UserData.IS_COMPATIBLE_233)||0,console.log("\u662f\u5426\u5df2\u7ecf\u517c\u5bb9",d),!d)){for(P in p=N.User.get(v.UserData.LEVEL_LIST),console.log("levelList",JSON.stringify(p)),f={},y={},p){for(S=p[P],f[P]=[],y[P]=[],A=1;A<=S-1&&!(f[P].length>=580);A++)f[P].push(A);for(A=1;A<=S&&!(f[P].length>=580);A++)y[P].push(A)}console.log("\u901a\u5173\u5217\u8868",JSON.stringify(f)),console.log("\u89e3\u9501\u5217\u8868",JSON.stringify(y)),N.User.set(v.UserData.IS_COMPATIBLE_233,1),N.User.set(v.UserData.ALREADY_PLAY,f),N.User.set(v.UserData.ALREADY_UNLOCK,y)}}else{for(P in N.User.set(v.UserData.FIRST_DAY_DATE,(new Date).getDate()),c=N.User.get(v.UserData.LEVEL_LIST),s={},y={},c)s[P]=[],y[P]=[1];N.User.set(v.UserData.IS_COMPATIBLE_233,1),N.User.set(v.UserData.ALREADY_PLAY,s),N.User.set(v.UserData.ALREADY_UNLOCK,y)}return B=C.BMS.getKey("GM"),this.dict.cheats.active=!!B,O=C.BMS.getKey("ugc"),this.dict.createBtn.active=!!O,R=C.BMS.getKey("AllThemeUnlock"),this.dict.unlockAllModeBtn.active=!!R,D=C.BMS.getKey("WuxianTiLi"),this.dict.infinitePowerBtn.active=0!=D,N.User.get(v.UserData.INF_POWER_VIDEO_TIMES)>=3&&this.updateInfinitePower(!0),_.Audio.playMusic(h.AudioConst.BGM_MAIN),cc.game.emit("gamelog","page001"),this.dict.version.getComponent(cc.Label).string=b.Platform.getConfig().version,b.Platform.is(g.EPlatform.WEB),this.dict.orderID.active=!1,this.dict.orderBtn.active=!1,this.dict.modeJumpBtn.active=!1,window.wrongful&&T.Popup.show(m.PopupConst.STOP),this.judgeMainMode(),this.getRank(),this.updateSkin(),L=N.User.get(v.UserData.signInDays)||0,console.log("\u6d4b\u8bd5\u7b7e\u5230",L),this.dict.signInBtn.active=!(L>=7),I=N.User.get("shakeAmount")||4,N.User.set("shakeAmount",I),E=N.User.getTempData(v.TempData.isFirstBack),k=N.User.get(v.UserData.todaySignIn)||0,E?(console.log("\u5f39\u51fa\u7b7e\u5230\u754c\u9762"),N.User.setTempData(v.TempData.isFirstBack,!1),N.User.setTempData(v.TempData.isFirst,!1),T.Popup.show(m.PopupConst.SignIn),this.dict.signInHint.active=!0):N.User.getTempData(v.TempData.isFirst)||k||(this.dict.signInHint.active=!0),k&&(this.dict.signInHint.active=!1),M=N.User.get(v.UserData.loginDaysTimes)||1,U=N.User.getTempData("backByGame"),N.User.getTempData("needCheckSignIn")&&1!=M&&0==k&&(U&&!N.User.get("todayOpenSignIn")&&(T.Popup.show(m.PopupConst.SignIn),N.User.set("todayOpenSignIn",!0)),this.dict.signInHint.active=!0),this.skinHint(),[2]}})})},e.prototype.signInHint=function(){this.dict.signInHint.active=!1},e.prototype.skinHint=function(){N.User.get(v.UserData.getLockSkinList)[0].length?this.dict.skinHint.active=!0:this.dict.skinHint.active=!1},e.prototype.updateSkin=function(){var t=N.User.get(v.UserData.skinList)||{0:[0],1:[0],2:[0],3:[0],4:[0],5:[0]};N.User.set(v.UserData.skinList,t);var e=N.User.get(v.UserData.useSkinIDList)||{0:0,1:0,2:0,3:0,4:0,5:0};N.User.set(v.UserData.useSkinIDList,e);var o=N.User.get(v.UserData.getLockSkinList)||{0:[],1:[],2:[],3:[],4:[],5:[]};N.User.set(v.UserData.getLockSkinList,o)},e.prototype.topBtn=function(){this.scroll.node.getComponent(cc.ScrollView).scrollToPercentVertical(1,1)},e.prototype.rankBtn=function(){cc.game.emit("gamelog_Thinking",E.ShuShuConst.btn,{id:"005"}),T.Popup.show(m.PopupConst.Rank)},e.prototype.positionBtn=function(){if(this.scrollType)this.scroll.node.getComponent(cc.ScrollView).scrollToPercentVertical(1,1);else{var t=1*(this.rankList.length-this.myRank)/(this.rankList.length-1);console.log(this.myRank,t),this.scroll.node.getComponent(cc.ScrollView).scrollToPercentVertical(t,1)}},e.prototype.playBtn=function(){cc.game.emit("gamelog_Thinking",E.ShuShuConst.btn,{id:"007"}),T.Popup.show(m.PopupConst.Play)},e.prototype.signInBtn=function(){cc.game.emit("gamelog_Thinking",E.ShuShuConst.btn,{id:"006"}),T.Popup.show(m.PopupConst.SignIn)},e.prototype.skinBtn=function(){cc.game.emit("gamelog_Thinking",E.ShuShuConst.btn,{id:"004"}),T.Popup.show(m.PopupConst.Skin)},e.prototype.getRank=function(){var t=this,e=new Date,o="province_"+this.showTime(e.getMonth()+1)+this.showTime(e.getDate())+"_"+b.Platform.getConfig().rank;B.challengeHttp.getRank(o,"1").then(function(e){if(console.log("\u6392\u884c\u699c\u6570\u636e",e),e.total){var o=[],n=0;for(var i in e.list)n+=1,o.push({id:n,province:i,score:e.list[i].score});t.rankList=o,t.sucGetRank()}else w.Config.get(u.ConfigConst.Rank).then(function(e){console.log("\u5047\u6570\u636e",e);for(var o=0;o<e.length;o++)e[o];t.rankList=e,t.rankList.sort(function(t,e){return e.score-t.score}),t.sucGetRank()})})},e.prototype.sucGetRank=function(){var t=this,e=1;this.scroll.onItemRender=this.onItemRender.bind(this),this.scroll.onItemClicked=this.onItemClicked.bind(this),this.scroll.numItems=this.rankList.length,this.rankList.forEach(function(t){t.score}),this.myRank=this.rankList.findIndex(function(t){return t.province==N.User.get("province")})+1,this.dict.myRank.getComponent(cc.Label).string="\u6211\u7684\u5730\u533a\u6392\u540d\uff1a\u7b2c"+this.myRank+"\u540d",cc.tween(this.dict.todayAmount).delay(2).to(2,{x:-750}).call(function(){t.dict.todayAmount.x=750,1==e?(t.dict.todayAmount.getComponent(cc.Label).string="\u4eca\u5929\u4e00\u5171\u6709"+(1782+D.Utils.randomNum(10,20))+"\u4eba\u6253\u87ba\u4e1d",e=2):(t.dict.todayAmount.getComponent(cc.Label).string="\u5171\u670999\u4eba\u901a\u5173",e=1)}).to(2,{x:0}).union().repeatForever().start();var o=new Date,n="people_"+this.showTime(o.getMonth()+1)+this.showTime(o.getDate())+b.Platform.getConfig().rank;B.challengeHttp.getRank(n,"1").then(function(o){if(console.log("\u4eba\u6570\u6392\u884c\u699c\u6570\u636e",o),o.total){var n=0;for(var i in o.list)n+=o.list[i].score;t.dict.todayAmount.getComponent(cc.Label).string="\u4eca\u5929"+(18*n+D.Utils.randomNum(10,20))+"\u4eba\u6253\u87ba\u4e1d\uff0c\u5171\u6709\uff0c"+n+"\u4eba\u901a\u5173"}else 1==e?(t.dict.todayAmount.getComponent(cc.Label).string="\u4eca\u5929\u4e00\u5171\u6709"+(1782+D.Utils.randomNum(10,20))+"\u4eba\u6253\u87ba\u4e1d",e=2):(t.dict.todayAmount.getComponent(cc.Label).string="\u5171\u670999\u4eba\u901a\u5173",e=1)})},e.prototype.showTime=function(t){return t>10?t:"0"+t},e.prototype.onItemRender=function(t,e){var o=e.getComponent(k.default),n=(k.default.state.Normal,{index:t,province:this.rankList[t].province,score:this.rankList[t].score});o.setData(n)},e.prototype.onItemClicked=function(){},e.prototype.judgeMainMode=function(){var t,e=N.User.get(v.UserData.mode0LevelList_stage1ID)||[],o=N.User.get(v.UserData.mode0LevelList_stage2ID)||[],n=N.User.get(v.UserData.mode1LevelList_stage1ID)||[],i=N.User.get(v.UserData.mode1LevelList_stage2ID)||[],r=(N.User.get(v.UserData.mode2LevelList_stage1ID),N.User.get(v.UserData.mode2LevelList_stage2ID),[]),a=[],c=[],s=[];w.Config.get(u.ConfigConst.THEME+0).then(function(n){if(b.Platform.is(g.EPlatform.WEB)||b.Platform.is(g.EPlatform.ANDROID)){for(var i=0;i<n.length;i++){var c=n[i];r.push(c.stage1ID),a.push(c.stage2ID)}N.User.set(v.UserData.mode0LevelList_stage1ID,r),N.User.set(v.UserData.mode0LevelList_stage2ID,a)}else if(n.length>e.length&&0!=e.length){for(i=0;i<n.length;i++)c=n[i],i>e.length-1&&(r.push(c.stage1ID),a.push(c.stage2ID));r.sort(function(){return.5-Math.random()}),a.sort(function(){return.5-Math.random()}),r=e.concat(r),a=o.concat(a),console.log("\u6709\u65b0\u589e\u5173\u5361"),N.User.set(v.UserData.mode0LevelList_stage1ID,r),N.User.set(v.UserData.mode0LevelList_stage2ID,a)}else if(0==e.length){var s=[],l=[],d=[],p=[],h=[],u=[];for(i=0;i<n.length;i++)c=n[i],0==i&&(t=c.stage1ID),i<5?(s.push(c.stage1ID),l.push(c.stage2ID)):i<10?(d.push(c.stage1ID),p.push(c.stage2ID)):(h.push(c.stage1ID),u.push(c.stage2ID));s.sort(function(){return.5-Math.random()}),l.sort(function(){return.5-Math.random()}),d.sort(function(){return.5-Math.random()}),p.sort(function(){return.5-Math.random()}),h.sort(function(){return.5-Math.random()}),u.sort(function(){return.5-Math.random()}),r=s.concat(d).concat(h),a=l.concat(p).concat(u);var f=r.indexOf(t),m=r[0];r[0]=t,r[f]=m,console.log("\u6ca1\u6709\u65b0\u589e\u5173\u5361\u4e14\u662f\u65b0\u7528\u6237"),N.User.set(v.UserData.mode0LevelList_stage1ID,r),N.User.set(v.UserData.mode0LevelList_stage2ID,a)}else console.log("\u8001\u7528\u6237");console.log("\u6253\u87ba\u4e1d",r,a)}),w.Config.get(u.ConfigConst.THEME+1).then(function(t){if(b.Platform.is(g.EPlatform.WEB)){for(var e=0;e<t.length;e++){var o=t[e];c.push(o.stage1ID),s.push(o.stage2ID)}N.User.set(v.UserData.mode1LevelList_stage1ID,c),N.User.set(v.UserData.mode1LevelList_stage2ID,s)}else if(t.length>n.length&&0!=n.length){for(e=0;e<t.length;e++)o=t[e],e>n.length-1&&(c.push(o.stage1ID),s.push(o.stage2ID));c.sort(function(){return.5-Math.random()}),s.sort(function(){return.5-Math.random()}),c=n.concat(c),s=i.concat(s),N.User.set(v.UserData.mode1LevelList_stage1ID,c),N.User.set(v.UserData.mode1LevelList_stage2ID,s)}else if(0==n.length){var r=[],a=[],l=[],d=[];for(e=0;e<t.length;e++)o=t[e],e<5?(r.push(o.stage1ID),a.push(o.stage2ID)):(l.push(o.stage1ID),d.push(o.stage2ID));r.sort(function(){return.5-Math.random()}),a.sort(function(){return.5-Math.random()}),l.sort(function(){return.5-Math.random()}),d.sort(function(){return.5-Math.random()}),c=r.concat(l),s=a.concat(d),N.User.set(v.UserData.mode1LevelList_stage1ID,c),N.User.set(v.UserData.mode1LevelList_stage2ID,s)}else console.log("\u8001\u7528\u6237");console.log("\u6e05\u7406",c,s)});var l=N.User.get("mode13LevelList_stage1ID")||[],d=N.User.get("mode13LevelList_stage2ID")||[],p=[],h=[];w.Config.get(u.ConfigConst.THEME+13).then(function(t){if(b.Platform.is(g.EPlatform.WEB)){for(var e=0;e<t.length;e++){var o=t[e];p.push(o.stage1ID),h.push(o.stage2ID)}N.User.set("mode13LevelList_stage1ID",p),N.User.set("mode13LevelList_stage2ID",h)}else if(t.length>l.length&&0!=l.length){for(e=0;e<t.length;e++)o=t[e],e>l.length-1&&(p.push(o.stage1ID),h.push(o.stage2ID));p.sort(function(){return.5-Math.random()}),h.sort(function(){return.5-Math.random()}),p=l.concat(p),h=d.concat(h),N.User.set("mode13LevelList_stage1ID",p),N.User.set("mode13LevelList_stage2ID",h)}else if(0==l.length){var n=[],i=[],r=[],a=[];for(e=0;e<t.length;e++)o=t[e],e<5?(n.push(o.stage1ID),i.push(o.stage2ID)):(r.push(o.stage1ID),a.push(o.stage2ID));n.sort(function(){return.5-Math.random()}),i.sort(function(){return.5-Math.random()}),r.sort(function(){return.5-Math.random()}),a.sort(function(){return.5-Math.random()}),p=n.concat(r),h=i.concat(a),N.User.set("mode13LevelList_stage1ID",p),N.User.set("mode13LevelList_stage2ID",h)}else console.log("\u8001\u7528\u6237");console.log("\u6e05\u7406",p,h)}),w.Config.get(u.ConfigConst.THEME).then(function(t){t.forEach(function(){})})},e.prototype.handleModeByID=function(t){var e=[],o=[],n=N.User.get("mode"+t+"LevelList_stage1ID")||[],i=N.User.get("mode"+t+"LevelList_stage2ID")||[];w.Config.get(u.ConfigConst.THEME+t).then(function(r){if(b.Platform.is(g.EPlatform.WEB)){for(var a=0;a<r.length;a++){var c=r[a];e.push(c.stage1ID),o.push(c.stage2ID)}N.User.set("mode"+t+"LevelList_stage1ID",e),N.User.set("mode"+t+"LevelList_stage2ID",o)}else if(r.length>n.length&&0!=n.length){for(a=0;a<r.length;a++)c=r[a],a>n.length-1&&(e.push(c.stage1ID),o.push(c.stage2ID));e.sort(function(){return.5-Math.random()}),o.sort(function(){return.5-Math.random()}),e=n.concat(e),o=i.concat(o),N.User.set("mode"+t+"LevelList_stage1ID",e),N.User.set("mode"+t+"LevelList_stage2ID",o)}else if(0==n.length){for(a=0;a<r.length;a++)c=r[a],e.push(c.stage1ID),o.push(c.stage2ID);e.sort(function(){return.5-Math.random()}),o.sort(function(){return.5-Math.random()}),N.User.set("mode"+t+"LevelList_stage1ID",e),N.User.set("mode"+t+"LevelList_stage2ID",o)}else console.log("\u8001\u7528\u6237");console.log("\u5173\u5361\u6a21\u5f0f",t,e,o)})},e.prototype.updateModeView=function(){var t=this;console.log("darenModesData",this.darenModesData);for(var e=function(e){var n=o.dict.darenModes.children[1].children[e].children[0];n.name=o.darenModesData[e].theme+"",n.getComponent(cc.Label).string=o.darenModesData[e].themeName,n.parent.getComponent(cc.Button)||n.parent.addComponent(cc.Button);var i=n.parent.getComponent(cc.Button);i.transition=cc.Button.Transition.SCALE,i.duration=.1,i.zoomScale=1.2,n.parent.on(cc.Node.EventType.TOUCH_END,function(){var o=t.darenModesData[e].theme;t.enterByMode2(o)},o)},o=this,n=0;n<this.darenModesData.length;n++)e(n)},e.prototype.initPlatformUI=function(){var t=b.Platform.getConfig();if(t.fitUIType!=g.FitUIType.TT&&t.fitUIType!=g.FitUIType.KS||(this.dict.topBar.getComponent(cc.Widget).top=70,this.dict.topBar.getComponent(cc.Widget).updateAlignment()),t.hasAgeTip){var e=b.Platform.getConfig().ageTipType;e==g.AgeTipType.AGE_12&&(this.dict.ageBtn.getComponent(cc.Sprite).spriteFrame=this.ageSpriteFrame[e])}if(this.dict.privacyBtn.active=!1,t.privacyPolicyType!=g.PrivacyPolicyType.NO&&(this.dict.privacyBtn.active=!0),this.dict.moreGameBtn.active=!1,t.hasMoreGame&&(this.dict.moreGameBtn.active=!0),this.dict.customerService.active=!1,t.hasCustomerService&&(this.dict.customerService.active=!0),b.Platform.is(g.EPlatform.OHAYOO_ANDROID)&&(this.dict.privacyBtn.children[0].getComponent(cc.Label).string="\u9690\u79c1\n\u8bbe\u7f6e"),b.Platform.is(g.EPlatform.QQ)&&(this.dict.appointBtn.active=!0),b.Platform.is(g.EPlatform.HW)&&(this.dict.privacyBtn.x-=100),b.Platform.is(g.EPlatform.WX)){var o=C.BMS.getKey("ys5x5");if(console.log("ys5x5",o),o){var n=window.wx.getSystemInfoSync().windowHeight/2-250;console.log("\u6d4b\u8bd5showBlockAds"),b.Platform.showBlockAds({top:n,left:0,id:"",hideCb:function(){b.Platform.hideBlockAds(),setTimeout(function(){},300)}},function(t){0==t||(b.Platform.hideBlockAds(),setTimeout(function(){},300))})}}if(this.dict.followBtn.active=!1,-1!=t.flag.indexOf("tt")&&this.isDOUYIN()){if(!window.tt.checkFollowAwemeState||!window.tt.openAwemeUserProfile)return console.log("\u4e0d\u652f\u6301\u5173\u6ce8\u6296\u97f3\u529f\u80fd");this.dict.followBtn.active=!0,N.User.get(v.UserData.isFollow)}},e.prototype.isDOUYIN=function(){var t=window.tt&&window.tt.getSystemInfoSync();if(!t)return!1;switch(t.appName){case"Douyin":return!0;default:return!1}},e.prototype.clickSet=function(){cc.game.emit("gamelog","btn004"),T.Popup.show(m.PopupConst.SET)},e.prototype.clickStart=function(){if(!this.isLoadingScene){this.isLoadingScene=!0,cc.game.emit("gamelog_Thinking",E.ShuShuConst.btn,{id:"001"}),cc.game.emit("gamelog","btn001"),N.User.setTempData(v.TempData.CURRENT_MODE,0);var t=N.User.get(v.UserData.LEVEL_LIST);O.ConfigUtils.setNextModeID();var e=1;O.ConfigUtils.getDataByID(0,function(o){console.log("res - ",o),e=o.amount,t[0]>e?N.User.setTempData(v.TempData.CURRENT_LEVEL,1):N.User.setTempData(v.TempData.CURRENT_LEVEL,t[0]),S.Scene.loadScene(y.SceneConst.GAME)})}},e.prototype.clickInfinitePower=function(){cc.game.emit("gamelog","btn007"),cc.game.emit("gamelog","page011"),T.Popup.show(m.PopupConst.INFINITE_POWER)},e.prototype.clickHotMode=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn002"),S.Scene.loadScene(y.SceneConst.MODE_SELECT,1))},e.prototype.clickMoreMode=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn003"),S.Scene.loadScene(y.SceneConst.MODE_SELECT,2))},e.prototype.clickCheats=function(){this.clickTimes+=1,console.log("["+this.clickTimes+"]"),this.clickTimes>=8&&(T.Popup.show(m.PopupConst.CHEATS),this.clickTimes=0)},e.prototype.clickAge=function(){T.Popup.show(m.PopupConst.AGE_TIP)},e.prototype.clickPrivacy=function(){var t=this,e=b.Platform.getConfig();if(e.privacyPolicyType==g.PrivacyPolicyType.MINI_GAME||e.privacyPolicyType==g.PrivacyPolicyType.MINI_GAME_VIVO||e.privacyPolicyType==g.PrivacyPolicyType.MINI_GAME_XM){if(this.isLoadPrivacy)return;this.isLoadPrivacy=!0,cc.resources.load("prefab/popup/PrivacyPolicy",function(e,o){if(t.isLoadPrivacy=!1,e)console.error(e);else{var n=cc.instantiate(o);t.node.addChild(n),n.getComponent("PrivacyPolicy").open()}})}else e.privacyPolicyType==g.PrivacyPolicyType.NATIVE&&b.Platform.showPrivacyPolicy()},e.prototype.clickAppoint=function(){var t=this;this.isLoadPrivacy||(this.isLoadPrivacy=!0,cc.resources.load("prefab/popup/PrivacyPolicy",function(e,o){if(t.isLoadPrivacy=!1,e)console.error(e);else{var n=cc.instantiate(o);t.node.addChild(n),n.getComponent("PrivacyPolicy").openUserPanelHandle()}}))},e.prototype.clickMoreGame=function(){b.Platform.showMoreGame()},e.prototype.clickLevelSelect=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","page002"),N.User.setTempData(v.TempData.CURRENT_MODE,0),S.Scene.loadScene(y.SceneConst.LEVEL_SELECT))},e.prototype.clickCreateBtn=function(){cc.game.emit("gamelog","btn027"),!C.BMS.getKey("ugcad")||N.User.get(v.UserData.isUnlockUgc)?this.isEnterUgc||(this.isEnterUgc=!0,S.Scene.loadScene(y.SceneConst.UGC)):T.Popup.show(m.PopupConst.UNLOCK_UGC)},e.prototype.clickAgeBtn=function(){T.Popup.show(m.PopupConst.AGE_TIP)},e.prototype.clickFollowBtn=function(){cc.game.emit("gamelog_Thinking",E.ShuShuConst.btn,{id:"008"}),b.Platform.follow(function(t){0!=t||(console.log("\u5173\u6ce8\u6210\u529f"),N.User.get(v.UserData.isFollow))})},e.prototype.clickLoveDog=function(){cc.game.emit("gamelog","btn028"),this.enterByMode(1)},e.prototype.clickDogStone=function(){cc.game.emit("gamelog","btn029"),this.enterByMode(2)},e.prototype.clickSecondMode=function(){cc.game.emit("gamelog_Thinking",E.ShuShuConst.btn,{id:"001"}),cc.game.emit("gamelog","modebtn_0"),this.enterByMode(0)},e.prototype.click3Mode=function(){cc.game.emit("gamelog_Thinking",E.ShuShuConst.btn,{id:"003"}),cc.game.emit("gamelog","modebtn_2"),this.enterByMode(2)},e.prototype.clickThirdMode=function(){var t=this;this.isAnim||(this.isAnim=!0,cc.game.emit("gamelog","btn032"),this.dict.moreModeBg.active=!this.dict.moreModeBg.active,this.isShow?(this.dict.moreModeBg.active=!0,this.dict.moreModeBg.opacity=255,cc.tween(this.dict.moreModeBg).to(.3,{opacity:0}).call(function(){t.dict.moreModeBg.active=!1,t.isAnim=!1,t.isShow=!1}).start()):(this.dict.moreModeBg.opacity=0,this.dict.moreModeBg.active=!0,console.log("\u6d4b\u8bd5"),cc.tween(this.dict.moreModeBg).to(.3,{opacity:255}).call(function(){t.isAnim=!1,t.isShow=!0}).start()),0==this.dict.arrow.angle?this.dict.arrow.angle=180:this.dict.arrow.angle=0)},e.prototype.clickBeeBtn=function(){T.Popup.show(m.PopupConst.BEE)},e.prototype.unlockAllModeBtn=function(){T.Popup.show(m.PopupConst.UNLOCK_ALL_MODE)},e.prototype.orderBtn=function(){var t=this.dict.orderID.getComponent(cc.EditBox).string;if(console.log("\u987a\u5e8fid",t),this.isIntNum(t)){if(console.log("\u662f\u6570\u5b57"),N.User.setTempData(v.TempData.CURRENT_MODE,0),N.User.setTempData(v.TempData.CURRENT_LEVEL,Number(t)),this.isLoadingScene)return;this.isLoadingScene=!0,S.Scene.loadScene(y.SceneConst.GAME)}},e.prototype.modeJumpBtn=function(){this.dict.darenModes.active=!0,this.dict.darenModes.children[1].active=!0,this.dict.EditBox.active=!1,this.dict.darenJump.active=!1},e.prototype.closeDaren=function(){this.dict.darenModes.active=!1},e.prototype.enterByMode=function(t){if(C.BMS.getKey("newmodead")&&-1==(N.User.get(v.UserData.UNLOCK_MODE_LIST)||[]).indexOf(t))return N.User.setTempData(v.TempData.CURRENT_MODE_UNLOCK_ID,t),void T.Popup.show(m.PopupConst.MODE_UNLOCK);this.sucEnterByMode(t)},e.prototype.enterByMode2=function(t){window.modeID=t,this.dict.darenModes.children[1].active=!1,this.dict.EditBox.active=!0,this.dict.darenJump.active=!0},e.prototype.darenJump=function(){var t=this.dict.EditBox.getComponent(cc.EditBox).string;if(this.isIntNum(t)){console.log("\u662f\u6570\u5b57");var e=Number(window.modeID);w.Config.get(u.ConfigConst.THEME+e).then(function(e){if(e.length<Number(t))return A.Tip.show("\u6ca1\u6709\u8be5\u5173\u5361");N.User.setTempData(v.TempData.CURRENT_MODE,Number(window.modeID)),N.User.setTempData(v.TempData.CURRENT_LEVEL,Number(t)),S.Scene.loadScene(y.SceneConst.GAME)})}},e.prototype.isIntNum=function(t){return!isNaN(parseFloat(t))},e.prototype.sucEnterByMode=function(t){if(!this.isLoadingScene){this.isLoadingScene=!0,N.User.setTempData(v.TempData.CURRENT_MODE,t);var e=N.User.get(v.UserData.LEVEL_LIST);O.ConfigUtils.setNextModeID();var o=1;O.ConfigUtils.getDataByID(t,function(n){o=n.amount,e[t]>o?N.User.setTempData(v.TempData.CURRENT_LEVEL,1):N.User.setTempData(v.TempData.CURRENT_LEVEL,e[t]),S.Scene.loadScene(y.SceneConst.GAME)})}},c([F(p.default)],e.prototype,"scroll",void 0),c([F([cc.SpriteFrame])],e.prototype,"ageSpriteFrame",void 0),c([F([cc.SpriteFrame])],e.prototype,"btnIconSpriteFrame",void 0),c([U],e)}(d.default);r.default=x,cc._RF.pop()},{}],IGame:[function(t,e){"use strict";cc._RF.push(e,"a3a0ezl9iJBl5hZOH33hitQ","IGame"),cc._RF.pop()},{}],IOS:[function(t,e,o){"use strict";cc._RF.push(e,"66c87hmZMxCmJ2vIRywICYR","IOS");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0}),r.IOS=void 0;var c=i("BasePlatform"),s=i("UserConst"),l=i("AudioManager"),d=i("LanguageManager"),p=i("TipManager"),h=i("UserManager"),u=window.jsb&&jsb.reflection?jsb.reflection.callStaticMethod:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},f=function(t){function e(){var e=t.call(this)||this;return e._rewardAdsCb=null,e._isMute=null,console.log("ios"),e.bindEvents(),e}return a(e,t),e.prototype.getInstance=function(){return this},e.prototype.gainIOSBMSVersion=function(){var t=jsb.reflection.callStaticMethod("AppController","gainIOSBMSVersion");console.log("\u83b7\u5f97\u7248\u672c\u53f7",t),cc.game.emit("version-update",t)},e.prototype.showRewardAds=function(t){console.log("[platform] [IosPlatform] showRewardAds"),this._rewardAdsCb=null,this._rewardAdsCb=t,jsb.reflection.callStaticMethod("AppController","showAds")},e.prototype.showBanner=function(){console.log("[platform] [IosPlatform] showBanner"),jsb.reflection.callStaticMethod("AppController","showBannerAds1")},e.prototype.hideBanner=function(){console.log("[platform] [IosPlatform] hideBanner"),jsb.reflection.callStaticMethod("AppController","hiddenBanner")},e.prototype.showInsert=function(){console.log("[platform] [IosPlatform] showInsert"),cc.game.emit("gamelog","Level_Inter_"+h.User.getTempData(s.TempData.CURRENT_MODE)+"_"+h.User.getTempData(s.TempData.CURRENT_LEVEL)),jsb.reflection.callStaticMethod("AppController","fullscreenAds")},e.prototype.showOpenAd=function(){jsb.reflection.callStaticMethod("AppController","showOpenAd")},e.prototype.bindEvents=function(){var t=this;window.iOSSendMsg=function(e){return"playAds"==e&&(l.Audio.setMusicMute(1),cc.director.pause(),cc.game.pause()),"playAdsEnd"!=e&&"rewardPlayEnd"!=e&&"rewardPlayNotEnd"!=e||(cc.director.resume(),cc.game.resume(),l.Audio.setMusicMute(0),"rewardPlayEnd"==e&&t._rewardAdsCb&&t._rewardAdsCb(0),"rewardPlayNotEnd"==e&&t._rewardAdsCb&&t._rewardAdsCb(1)),"rewardad_fail"==e&&p.Tip.show(d.default.formatStr("\u6682\u65e0\u5e7f\u544a")),"interad_fail"==e&&cc.game.emit("gamelog","Level_Inter_Fail_"+h.User.getTempData(s.TempData.CURRENT_MODE)+"_"+h.User.getTempData(s.TempData.CURRENT_LEVEL)),"interad_suc"==e&&cc.game.emit("gamelog","Level_Inter_Play_"+h.User.getTempData(s.TempData.CURRENT_MODE)+"_"+h.User.getTempData(s.TempData.CURRENT_LEVEL)),"iosApplicationDidBecomeActive"==e&&cc.game.emit("iosApplicationDidBecomeActive"),"abcd"},cc.game.on(cc.game.EVENT_SHOW,function(){cc.director.resume(),cc.game.resume(),l.Audio.setMusicMute(0)})},e.prototype.report=function(t,e){u("AppController","customTrackerWithName:andDictString:",t,e)},e.prototype.gameComment=function(){u("AppController","onCommentBtn")},e.prototype.showAdDebugger=function(){u("AppController","showMediationDebugger")},e}(c.BasePlatform);r.IOS=f,cc._RF.pop()},{}],IUser:[function(t,e){"use strict";cc._RF.push(e,"83e09xSiOBGMbL068+XYscm","IUser"),cc._RF.pop()},{}],InfinitePower:[function(t,e,o){"use strict";cc._RF.push(e,"1d878N573BFAJiSPfmLakDK","InfinitePower");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("PopupConst"),h=i("UserConst"),u=i("EventManager"),f=i("LanguageManager"),g=i("PlatformManager"),m=i("PopupManager"),y=i("TipManager"),v=i("UserManager"),_=i("OPPOAndroidAdUtils"),C=i("OPPOMiniADUtils"),w=i("XMADUtils"),P=cc._decorator,b=P.ccclass,T=(P.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){g.Platform.is(d.EPlatform.XIAOMI_ANDROID)?w.XMAD.showBannerFeed():g.Platform.is(d.EPlatform.OPPO_ANDROID)?_.OPPOAndroidAd.showLargeFeed():g.Platform.is(d.EPlatform.OPPO)?C.OPPOMiniAD.showLargeFeed():g.Platform.showBanner()},e.prototype.onDisable=function(){g.Platform.is(d.EPlatform.OPPO_ANDROID)&&_.OPPOAndroidAd.removeLargePicFeed(),g.Platform.hideBanner(),g.Platform.hideNativeAds()},e.prototype.initView=function(){var t=v.User.get(h.UserData.INF_POWER_VIDEO_TIMES)||0;v.User.set(h.UserData.INF_POWER_VIDEO_TIMES,t),this.dict.amount.getComponent(cc.Label).string="\u4e0b\u4e00\u7b49\u7ea7\uff1aV"+(t+1),this.dict.range.getComponent(cc.Sprite).fillRange=t/3},e.prototype.clickGiveUp=function(){m.Popup.hide(),v.User.getTempData(h.TempData.POWER_TYPE)||(cc.game.emit("gamelog","page009"),setTimeout(function(){cc.game.emit("gamelog","Level_NoPower_"+v.User.getTempData(h.TempData.CURRENT_MODE)+"_"+v.User.getTempData(h.TempData.CURRENT_LEVEL)),m.Popup.show(p.PopupConst.POWER_SHORTAGE)},300))},e.prototype.clickVideo=function(){var t=this;cc.game.emit("gamelog","btn026"),g.Platform.showRewardAds(function(e){if(0==e){console.log("\u6210\u529f"),cc.game.emit("gamelog","rewarde_btn007");var o=v.User.get(h.UserData.INF_POWER_VIDEO_TIMES)+1;if(v.User.set(h.UserData.INF_POWER_VIDEO_TIMES,o),t.initView(),3-o>0){var n=v.User.get(h.UserData.POWER),i=10*o;v.User.set(h.UserData.POWER,n+i),y.Tip.show(f.default.formatStr("\u4f53\u529b+%d",10*o)),u.Event.emit(l.default.POWER_EFFECT,!0)}else y.Tip.show(f.default.formatStr("\u5df2\u5f00\u542f\u65e0\u9650\u4f53\u529b\u6a21\u5f0f")),v.User.setTempData(h.TempData.IS_INFINITE_POWER,!0),u.Event.emit(l.default.UPDATE_INFINITE_POWER,!0),v.User.set(h.UserData.INF_POWER_START_TIME,(new Date).getTime()),m.Popup.hide()}})},c([b],e)}(s.default));r.default=T,cc._RF.pop()},{}],KS:[function(t,e,o){"use strict";cc._RF.push(e,"b7ef7rVHM1Jc6IDUlu1tXqI","KS");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0}),r.KS=void 0;var c=function(t){function e(){var e=t.call(this)||this;return e.sdk=window.kwaigame,e._rewardAds=null,e._rewardAdsCb=null,e._insert=null,e._recorder=null,e._recordStatus=-1,e._recordID=null,e._recordTime=0,console.log("\u5feb\u624b"),e}return a(e,t),e.prototype.showRewardAds=function(t){var e=this;return this.sdk.createRewardedVideoAd?this._config.rewardID?(this._rewardAdsCb=t,this._rewardAds||(this._rewardAds=this.sdk.createRewardedVideoAd({adUnitId:this._config.rewardID}),this._rewardAds.onClose(function(){e._rewardAdsCb(1)}),this._rewardAds.onReward(function(){e._rewardAdsCb(0)})),void this._rewardAds.show({success:function(){},fail:function(){}})):t(-3):t(-2)},e.prototype.showInsert=function(){var t=this;this.sdk.createInterstitialAd&&this._config.insertID&&(this._insert||(this._insert=this.sdk.createInterstitialAd({adUnitId:this._config.insertID}),this._insert.show().then(function(){}).catch(function(t){console.log("[platform] [KSPlatform] showInsert",t)}),this._insert.onClose(function(){t._insert&&(t._insert.destroy(),t._insert=null)}),this._insert.onError(function(e){console.log("[platform] [KSPlatform] showInsert",e),e&&1003==e.errCode&&t._insert&&(t._insert.destroy(),t._insert=null)})))},e.prototype.shareRecordCap=function(t){var e=this;return this._recorder?-1==this._recordStatus?t(-1):this._recordID?void this._recorder.publishVideo({video:this._recordID,callback:function(o){o?(e._recordStatus=1,t(1)):t(0)}}):t(-3):t(-2)},e.prototype.startRecordCap=function(){var t=this;this.sdk.createMediaRecorder&&(this._recorder||(this._recorder=this.sdk.createMediaRecorder(),this._recorder.onStop(function(e){t._recordID=e.videoID}),this._recorder.onError(function(){t._recordStatus=-1})),this._recordID=null,this._recorder.start(),this._recordStatus=1,this._recordTime=Math.floor((new Date).getTime()/1e3))},e.prototype.stopRecordCap=function(){this._recorder&&1==this._recordStatus&&(this._recorder.stop(),this._recordStatus=Math.floor((new Date).getTime()/1e3)-this._recordTime<5?-1:0)},e.prototype.getShareStatus=function(){return this._recordStatus},e}(i("BasePlatform").BasePlatform);r.KS=c,cc._RF.pop()},{}],Key:[function(t,e,o){"use strict";cc._RF.push(e,"f6791YXWW5E3pPeHQqr/KlK","Key");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("EventConst"),l=i("PopupConst"),d=i("SceneConst"),p=i("UserConst"),h=i("EffectManager"),u=i("EventManager"),f=i("PopupManager"),g=i("SceneManager"),m=i("UserManager"),y=cc._decorator,v=y.ccclass,_=y.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.key=null,e}return a(e,t),e.prototype.onEnable=function(){this.initEvent(),this.initView()},e.prototype.onDisable=function(){this.clearEvent()},e.prototype.initView=function(){var t=cc.sys.localStorage.getItem("walkFast_key");null!=t&&null!=t&&""!=t||(t=0),t<=0&&(t=0),m.User.set(p.UserData.KEY,Number(t)),this.key.string=""+t},e.prototype.initEvent=function(){u.Event.on(s.default.KEY_UPDATE,this.changeKey,this),u.Event.on(s.default.KEY_EFFECT,this.keyEffect,this)},e.prototype.clearEvent=function(){u.Event.off(s.default.KEY_UPDATE,this.changeKey,this),u.Event.off(s.default.KEY_EFFECT,this.keyEffect,this)},e.prototype.changeKey=function(){var t=m.User.get(p.UserData.KEY);this.key.string=""+t},e.prototype.keyEffect=function(){h.Effect.showEffect(1,this.icon,1)},e.prototype.clickSelf=function(){m.User.setTempData(p.TempData.current_key_type,0),cc.game.emit("playClickAudio"),g.Scene.getCurrentScene()==d.SceneConst.MAIN?cc.game.emit("gamelog","btn005"):g.Scene.getCurrentScene()==d.SceneConst.GAME&&cc.game.emit("gamelog","btn020"),f.Popup.show(l.PopupConst.SHOP)},c([_(cc.Node)],e.prototype,"icon",void 0),c([_(cc.Label)],e.prototype,"key",void 0),c([v],e)}(cc.Component);r.default=C,cc._RF.pop()},{}],LanguageManager:[function(t,e,o){"use strict";cc._RF.push(e,"60780wKnnVNdoUhMLV0Hntp","LanguageManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("ConfigConst"),a=n("ConfigManager"),c=["logo"];window.GameLanguage={},window.LanguageLabel={};var s=function(){function t(){this.lastLan="zh",this._lan="zh",this._font=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lan",{get:function(){return this._lan},set:function(t){this.lastLan=this._lan,this._lan=t,this.updateLan()},enumerable:!1,configurable:!0}),t.prototype.setFont=function(t){this._font=t},t.prototype.init=function(){var e=this;try{window.haiwai?this.lan="en":this.lan="zh",console.log("[Language] --\x3e \u521d\u59cb\u5316\u8bed\u8a00:  lan: "+this.lan),cc.game.emit("language-init",this.lan)}catch(i){}Object.defineProperty(cc.Label.prototype,"string",{get:function(){return this._string},set:function(t){var e=this._string,o=t;window.GameLanguage&&window.GameLanguage[t]&&(o=window.GameLanguage[t]||""),o&&"number"!=typeof o&&(o=o.replace("<br/>","\n")),this._string=""+o,this.string!==e&&this.setVertsDirty(),this._checkStringEmpty()}}),cc.Label.prototype.onLoad=function(){this._batchAsBitmap&&this.cacheMode===cc.Label.CacheMode.NONE&&(this.cacheMode=cc.Label.CacheMode.BITMAP,this._batchAsBitmap=!1),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&(this.cacheMode=cc.Label.CacheMode.NONE),e._font&&this.font!=e._font&&(this.font||(this.font=e._font),this.lineHeight==this.fontSize&&(this.lineHeight+=2)),this.string=this.string},cc.RichText.prototype.start=function(){e._font&&(this.font=e._font),this._onTTFLoaded()},cc.Sprite.prototype.onLoad=function(){var e=this;if(this.spriteFrame){var o=this.spriteFrame.name;if(-1==c.indexOf(o))return;if(o){var n="texture/language/"+t.instance.lan+"/"+o,i=this.node.opacity;this.node.opacity=0,this.spPath=n,cc.loader.loadRes(n,cc.SpriteFrame,function(t,o){e.node.opacity=i,t||e.spPath==n&&(e.spriteFrame=o)})}}}},t.prototype.updateLan=function(){var t=this;a.Config.get(r.ConfigConst.LANGUAGE).then(function(e){for(var o in e){var n=e[o];window.GameLanguage[n.zh]=n[t.lan]}})},t.formatStr=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=arguments[0],i=window.GameLanguage;i&&i[n]&&(n=i[n]);var r=/(%d)|(%s)/,a=/%s/,c=arguments.length;if(0===c)return"";if(1===c)return""+n;var s="string"==typeof n&&r.test(n);if(s)for(var l=1;l<c;++l){var d=arguments[l],p="number"==typeof d?r:a;if(p.test(n)){var h=d,u=window.GameLanguage;if(u&&u[h]){var f=u[h];f&&(h=f)}n=n.replace(p,h)}else n+=""+d}else for(l=1;l<c;++l)n+=" "+arguments[l];return n},t._instance=null,t}();i.default=s,cc._RF.pop()},{}],"Level-19072":[function(t,e,o){"use strict";cc._RF.push(e,"473a4ETSudPXYUi/WYU6heq","Level-19072");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.state=void 0;var s,l=i("BrainLevelBase"),d=i("LevelConstant"),p=i("zqddn_zhb_level-15528_item"),h=cc._decorator,u=h.ccclass,f=h.property;(function(t){t[t.init=0]="init",t[t.waitTouch=1]="waitTouch",t[t.checkWin=2]="checkWin",t[t.win=3]="win",t[t.lose=4]="lose"})(s=r.state||(r.state={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.map=null,e.shiningParticle=null,e.guideHand=null,e._state=s.init,e._moved=Symbol("_moved"),e}return a(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.guideHand&&this.showGuideAnimAction()},e.prototype.start=function(){this.state=s.waitTouch},e.prototype.onTouchStart=function(t){if(this.state==s.waitTouch){this.playClickSound(),this.guideHand&&this.stopGuideAnimAction();for(var e=this.map.children.length-1;e>=0;e--){var o=this.map.children[e],n=o.getComponent(p.default);if(!n.moved&&cc.Intersection.pointInPolygon(t.getLocation(),this.getPolygonColliderPoints(o)))return void(n.canMove()?(o.setSiblingIndex(999),n.doMove(),this.checkWin()):n.shake())}}},e.prototype.checkWin=function(){for(var t=0;t<this.map.children.length;t++)if(!this.map.children[t].getComponent(p.default).moved)return;this.win()},e.prototype.win=function(t){this.state!=s.lose&&this.state!=s.win&&(this.state=s.win,this.playRemoteSound(d.AUDIO_URL.HANDCLAP),this.shiningParticle&&(this.shiningParticle.node.active=!0,this.shiningParticle.resetSystem()),this.playRight(t,2))},e.prototype.lose=function(t,e){if(void 0===e&&(e=!0),this.state!=s.lose&&this.state!=s.win)if(e&&(this.state=s.lose),t)if(t instanceof cc.Node){var o=cc.instantiate(t);o.x+=70,o.y-=70,o.parent=t.parent,o.active=!1,this.playError(null,2),e?this.playError(o,2):this.playErrorOnce(o,2),o.destroy()}else e?this.playError(t,2):this.playErrorOnce(t,2);else e?this.playError(null,2):this.playErrorOnce(null,2)},e.prototype.showGuideAnimAction=function(){var t=this;this.guideHand.active=!0,this.guideHand.stopAllActions();var e=cc.v2(250,250);cc.tween(this.guideHand).repeatForever(cc.tween().call(function(){t.guideHand.position=cc.v2(-160,250)}).delay(.3).to(1,{position:e}).delay(1)).start()},e.prototype.stopGuideAnimAction=function(){this.guideHand.stopAllActions(),this.guideHand.active=!1},e.prototype.getPolygonColliderPoints=function(t){var e=[];return t.getComponent(cc.PolygonCollider).points.forEach(function(o){var n=t.convertToWorldSpaceAR(o);e.push(n)}),e},c([f(cc.Node)],e.prototype,"map",void 0),c([f(cc.ParticleSystem)],e.prototype,"shiningParticle",void 0),c([f(cc.Node)],e.prototype,"guideHand",void 0),c([u],e)}(l.default);r.default=g,cc._RF.pop()},{}],"Level-19207":[function(t,e,o){"use strict";cc._RF.push(e,"cfa469PFbtBC582wWyu+KFq","Level-19207");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BrainLevelBase"),l=i("LevelUtils"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._container=null,e._circles=[],e._trussUpCircles=[],e._trussUpFixs=[],e._alltrussUp=[],e._saves=[],e._lastAngle=0,e._lastDiff=0,e._wait=!1,e}return a(e,t),e.prototype.onLevelLoad=function(){var t=this;this._container=cc.find("game",this.node),this._container.children.forEach(function(e){"circle"==e.name&&(t.initCircleEvent(e),t.initCircleData(e)),"fix"==e.name&&t.initFixData(e),"save"==e.name&&t.initSaveData(e)}),this._circles.forEach(function(e){t.initCircleTrussUpData(e)})},e.prototype.initCircleEvent=function(t){t.on(cc.Node.EventType.TOUCH_START,this.circleStart,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.circleMove,this),t.on(cc.Node.EventType.TOUCH_END,this.circleEnd,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.circleEnd,this)},e.prototype.initCircleData=function(t){t.getChildByName("trussup")&&this._trussUpCircles.push(t),this._circles.push(t),t.startAngle=t.angle;var e=t.children.filter(function(t){return"trussup"==t.name});this._alltrussUp=this._alltrussUp.concat(e)},e.prototype.initFixData=function(t){t.getChildByName("trussup")&&this._trussUpFixs.push(t);var e=t.children.filter(function(t){return"trussup"==t.name});this._alltrussUp=this._alltrussUp.concat(e)},e.prototype.initSaveData=function(t){this._saves.push(t)},e.prototype.initCircleTrussUpData=function(t){this._trussUpCircles.concat(this._trussUpFixs).forEach(function(e){if(e.uuid!=t.uuid){var o=e.children.filter(function(t){return"trussup"==t.name}).sort(function(e,o){return cc.v2(t.position).sub(t.parent.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))).len()-cc.v2(t.position).sub(t.parent.convertToNodeSpaceAR(o.parent.convertToWorldSpaceAR(o.position))).len()}).find(function(e){return t.position.fuzzyEquals(t.parent.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),100)});o&&(t.trussup||(t.trussup=[]),t.trussup.push(o),o.flag=!0)}})},e.prototype.circleStart=function(t){if(!(this._wait||t.target.opacity<=0)){var e=t.target;this.dict.line.position=e.position,this.dict.line.angle=90-l.default.getAngleByTwoPoint(e.position,e.parent.convertToNodeSpaceAR(t.getLocation())),this._lastAngle=this.dict.line.angle+180,this._lastDiff=null}},e.prototype.circleMove=function(t){if(!(this._wait||t.target.opacity<=0)){var e=t.target;if(!t.target.parent.convertToNodeSpaceAR(t.getLocation()).fuzzyEquals(t.target.position,25)){if(!this.checkCircleCanMove(e))return this.circleShake(e);this.dict.line.position=e.position,this.dict.line.angle=90-l.default.getAngleByTwoPoint(e.position,e.parent.convertToNodeSpaceAR(t.getLocation()));var o=this.dict.line.angle+180;if(this._lastAngle){if(this._lastAngle!=o){var n=this._lastAngle-o;this._lastDiff&&Math.abs(n)>3&&Math.abs(n-this._lastDiff)>3&&(n=this._lastDiff,this._lastDiff=null),t.target.lastAngle=t.target.angle,t.target.angle+=-n,this._lastAngle=o,this._lastDiff=n}}else this._lastAngle=this.dict.line.angle}}},e.prototype.circleEnd=function(t){var e=this;if(!(this._wait||t.target.opacity<=0)){var o=t.target;if(this.checkCircleCanMove(o)){var n=function(){e.checkWin()?e.playRight(null,1.5):e._wait=!1};switch(this.checkCircleMoveStatus(o)){case 0:break;case 1:this._wait=!0,this.circleOut(o,function(){var t=e.checkTrussUpStatus();return 1==t.status?e.circleOut(t.node,n):n()});break;case 2:var i=this.checkTrussUpStatus();if(1==i.status)return this._wait=!0,this.circleOut(i.node,n)}}}},e.prototype.circleOut=function(t,e){var o=this,n=t.getPosition();cc.tween(t).parallel(cc.tween().to(.5,{position:t.position.mul(3)}),cc.tween().to(.5,{opacity:0})).call(function(){t.active=!1;var i=o._saves.find(function(t){return t.getPosition().fuzzyEquals(n,5)});i&&(i.children[0].getComponent(sp.Skeleton).setAnimation(0,"happy",!0),cc.tween(i).delay(1.3).to(.5,{opacity:0}).start()),e()}).start()},e.prototype.circleShake=function(t){t.running||(t.running=!0,t.stopAllActions(),cc.tween(t).by(.1,{angle:-5}).by(.1,{angle:5}).by(.1,{angle:5}).by(.1,{angle:-5}).call(function(){t.running=!1,t.lastAngle&&(t.angle=t.lastAngle,t.lastAngle=null)}).start())},e.prototype.checkCircleCanMove=function(t){var e=this;if(!this._trussUpCircles.find(function(e){return e.uuid==t.uuid})&&!t.getChildByName("d"))return!0;if(t.getChildByName("d")){var o=t.children.filter(function(t){return"d"==t.name}),n=this._trussUpCircles.some(function(e){return e.getChildByName("trussup")&&o.some(function(o){return e.getChildByName("trussup").position.fuzzyEquals(e.convertToNodeSpaceAR(t.convertToWorldSpaceAR(o.position)),30)})});if(console.log(n),n)return!1}return!t.children.some(function(t){return t.flag})&&!t.children.some(function(o){return-1!=o.name.indexOf("trussup")&&(e._circles.some(function(e){return e.uuid!=t.uuid&&e.opacity>200&&e.position.fuzzyEquals(e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(o.position)),e.width/2+20)})||e._alltrussUp.some(function(t){return t.uuid!=o.uuid&&t.parent.opacity>200&&t.convertToWorldSpaceAR(cc.Vec2.ZERO).fuzzyEquals(o.convertToWorldSpaceAR(cc.Vec2.ZERO),t.width/2+20)}))})},e.prototype.checkCircleMoveStatus=function(t){var e=t.getChildByName("e");if(t.trussup){var o=e.parent.convertToWorldSpaceAR(e.position),n=t.trussup.find(function(t){return t.parent.active&&t.parent.convertToNodeSpaceAR(o).fuzzyEquals(t.position,20)});if(t.trussup.forEach(function(t){t.parent.active&&(t.flag=!0)}),n&&(n.flag=!1),t.trussup.every(function(t){return!t.flag||!t.parent.active}))return 1;if(n)return 2}return 0},e.prototype.checkTrussUpStatus=function(){var t=this,e=this._trussUpCircles.filter(function(t){return t.active&&t.children.every(function(t){return!t.flag})});if(e.length>0){var o=e.find(function(e){return!e.trussup||1==t.checkCircleMoveStatus(e)});if(o)return{status:1,node:o}}var n=this._trussUpFixs.find(function(t){return t.active&&t.children.every(function(t){return!t.flag})});return n?{status:1,node:n}:{status:0}},e.prototype.checkWin=function(){return this._circles.every(function(t){return!t.active})},c([p],e)}(s.default));r.default=h,cc._RF.pop()},{}],"Level-20161":[function(t,e,o){"use strict";cc._RF.push(e,"52317y4SyZIuKu6B/6FVGHv","Level-20161");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BrainLevelBase"),l=i("LevelUtils"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._container=null,e._circles=[],e._fixs=[],e._saves=[],e._lastAngle=0,e._lastDiff=0,e._wait=!1,e.clickedDict={},e}return a(e,t),e.prototype.onLevelLoad=function(){var t=this;this._container=cc.find("game",this.node),this._container.children.forEach(function(e){"circle"==e.name&&(t.initCircleEvent(e),t.initCircleData(e)),"fix"==e.name&&t.initFixData(e),"save"==e.name&&t.initSaveData(e)}),this.setCollisionManager(!0,!1)},e.prototype.initCircleEvent=function(t){t.on(cc.Node.EventType.TOUCH_START,this.circleStart,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.circleMove,this),t.on(cc.Node.EventType.TOUCH_END,this.circleEnd,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.circleEnd,this)},e.prototype.initCircleData=function(t){this._circles.push(t),t.startAngle=t.angle},e.prototype.initFixData=function(t){this._fixs.push(t)},e.prototype.initSaveData=function(t){this._saves.push(t)},e.prototype.circleStart=function(t){if(!this._wait&&!(t.target.opacity<=0||t.target.running)){for(var e in this.clickedDict)if(1==this.clickedDict[e])return;var o=t.target;cc.Intersection.pointInPolygon(t.getLocation(),this.getTargetPoints(o.children[0]))?this.clickedDict[o.uuid]=!0:t.target._touchListener.setSwallowTouches(!1);var n=t.target;this.dict.line.position=n.getChildByName("p")?n.parent.convertToNodeSpaceAR(n.convertToWorldSpaceAR(n.getChildByName("p").position)):n.position,this.dict.line.angle=90-l.default.getAngleByTwoPoint(this.dict.line.position,this.dict.line.parent.convertToNodeSpaceAR(t.getLocation())),this._lastAngle=this.dict.line.angle+180,this._lastDiff=null}},e.prototype.circleMove=function(t){if(!this._wait&&!(t.target.opacity<=0||t.target.running)){var e=t.target;if(this.clickedDict[e.uuid]){var o=t.target;if(!t.target.parent.convertToNodeSpaceAR(t.getLocation()).fuzzyEquals(t.target.position,25)){if(!this.checkCircleCanMove(o))return this.circleShake(o);this.dict.line.position=o.getChildByName("p")?o.parent.convertToNodeSpaceAR(o.convertToWorldSpaceAR(o.getChildByName("p").position)):o.position,this.dict.line.angle=90-l.default.getAngleByTwoPoint(this.dict.line.position,this.dict.line.parent.convertToNodeSpaceAR(t.getLocation()));var n=this.dict.line.angle+180;if(this._lastAngle){if(this._lastAngle!=n){var i=this._lastAngle-n;this._lastDiff&&Math.abs(i)>3&&Math.abs(i-this._lastDiff)>3&&(i=this._lastDiff,this._lastDiff=null),t.target.lastAngle=t.target.angle,t.target.angle+=-i,this._lastAngle=n,this._lastDiff=i}}else this._lastAngle=this.dict.line.angle}}}},e.prototype.circleEnd=function(t){var e=this;if(!(this._wait||t.target.opacity<=0)){var o=t.target;if(this.clickedDict[o.uuid]){this.clickedDict[o.uuid]=!1,this._lastAngle=null;var n=t.target;this.checkCircleCanMove(n)&&function t(o){if(e.checkWin()?(e.playRight(null,1.5),0):(e._wait=!1,1)){if(o&&e.checkTargetCanOut(o))return e.circleOut(o,function(){return t()});var n=e.checkFixCanOut();if(n)return e.circleOut(n,function(){return t()});var i=e.checkCircleCanOut();if(i)return e.circleOut(i,function(){return t()});e._wait=!1}}(n)}}},e.prototype.circleShake=function(t){t.running||(t.running=!0,t.stopAllActions(),cc.tween(t).by(.1,{angle:-5}).by(.1,{angle:5}).by(.1,{angle:5}).by(.1,{angle:-5}).call(function(){t.lastAngle&&(t.angle=t.lastAngle,t.lastAngle=null),t.running=!1}).start())},e.prototype.circleOut=function(t,e){var o=this,n=t.getPosition();cc.tween(t).parallel(cc.tween().to(.5,{position:t.position.mul(3)}),cc.tween().to(.5,{opacity:0})).call(function(){t.active=!1;var i=o._saves.find(function(t){return t.getPosition().fuzzyEquals(n,5)});i&&(i.children[0].getComponent(sp.Skeleton).setAnimation(0,"happy",!0),cc.tween(i).delay(1.3).to(.5,{opacity:0}).start());var r=o._circles.findIndex(function(e){return e.uuid==t.uuid});return-1!=r?(o._circles.splice(r,1),e()):(-1!=(r=o._fixs.findIndex(function(e){return e.uuid==t.uuid}))&&o._fixs.splice(r,1),e())}).start()},e.prototype.checkCircleCanMove=function(t){var e=this;return!this._circles.concat(this._fixs).some(function(o){if(o.uuid==t.uuid)return!1;var n=!1;return"fix"==o.name?n=o.children.some(function(o){return"trussup"==o.name&&t.children.some(function(t){return"trussup"==t.name&&cc.Intersection.polygonPolygon(e.getTargetPoints(o),e.getTargetPoints(t))||"d"==t.name&&cc.Intersection.polygonPolygon(e.getTargetPoints(o),e.getTargetPoints(t))})}):(n||(n=cc.Intersection.polygonPolygon(e.getTargetPoints(o.children[0]),e.getTargetPoints(t.children[0]))),n||(n=t.children.some(function(t){return"trussup"==t.name&&cc.Intersection.polygonPolygon(e.getTargetPoints(o.children[0]),e.getTargetPoints(t))})),n||(n=o.children.some(function(o){return"trussup"==o.name&&t.children.some(function(t){return"d"==t.name&&cc.Intersection.polygonPolygon(e.getTargetPoints(o),e.getTargetPoints(t))})})),n)})},e.prototype.checkTargetCanOut=function(t){var e=this,o=t.children.filter(function(t){return"trussup"==t.name}),n=[];this._circles.concat(this._fixs).forEach(function(e){e.uuid!=t.uuid&&(n=n.concat(e.children.filter(function(t){return"trussup"==t.name})))});var i=!1;return o.length>0&&(i=o.some(function(o){return e._circles.some(function(n){return n.uuid!=t.uuid&&cc.Intersection.polygonPolygon(e.getTargetPoints(o),e.getTargetPoints(n.children[0]))&&!cc.Intersection.polygonPolygon(e.getTargetPoints(o.getChildByName("check")),e.getTargetPoints(n.getChildByName("e")))})})),i||(i=n.some(function(o){return cc.Intersection.polygonPolygon(e.getTargetPoints(o),e.getTargetPoints(t.children[0]))&&!cc.Intersection.polygonPolygon(e.getTargetPoints(o.getChildByName("check")),e.getTargetPoints(t.getChildByName("e")))})),!i},e.prototype.checkFixCanOut=function(){var t=this;return this._fixs.find(function(e){return!t._circles.some(function(o){return cc.Intersection.polygonPolygon(t.getTargetPoints(e.children[0]),t.getTargetPoints(o.children[0]))&&!cc.Intersection.polygonPolygon(t.getTargetPoints(e.children[0].getChildByName("check")),t.getTargetPoints(o.getChildByName("e")))||cc.Intersection.polygonPolygon(t.getTargetPoints(e.children[1]),t.getTargetPoints(o.children[0]))&&!cc.Intersection.polygonPolygon(t.getTargetPoints(e.children[1].getChildByName("check")),t.getTargetPoints(o.getChildByName("e")))})})},e.prototype.checkCircleCanOut=function(){var t=this;return this._circles.find(function(e){return t.checkTargetCanOut(e)})},e.prototype.getTargetPoints=function(t){return t.getComponent(cc.PolygonCollider).points.map(function(e){return t.convertToWorldSpaceAR(e.rotate(Math.PI/180*t.angle),cc.v2(0,0))})},e.prototype.checkWin=function(){return this._circles.every(function(t){return!t.active})&&this._fixs.every(function(t){return!t.active})},c([p],e)}(s.default));r.default=h,cc._RF.pop()},{}],"Level-20269_sheep":[function(t,e,o){"use strict";cc._RF.push(e,"3b1b29zQExJWaabYnycAkp/","Level-20269_sheep");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.ParingItemType=void 0;var c,s=cc._decorator,l=s.ccclass,d=s.property;(function(t){t[t.top=0]="top",t[t.right=1]="right",t[t.bottom=2]="bottom",t[t.left=3]="left"})(c=i.ParingItemType||(i.ParingItemType={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chessType=c.top,e.leftX=0,e.leftY=0,e.lengthX=0,e.lengthY=0,e.max=0,e.targetPos=0,e.targetPosOther="",e.followSheep=null,e.state=0,e}var o;return r(e,t),o=e,e.prototype.init=function(t){this.node.x=this.leftX*t,this.node.y=-this.leftY*t,this.node.width=t*this.lengthX,this.node.height=t*this.lengthY},a([d({type:cc.Enum(c),tooltip:"\u68cb\u5b50\u671d\u5411"})],e.prototype,"chessType",void 0),a([d],e.prototype,"leftX",void 0),a([d],e.prototype,"leftY",void 0),a([d],e.prototype,"lengthX",void 0),a([d],e.prototype,"lengthY",void 0),a([d({tooltip:"\u6700\u5927\u8ddd\u79bb"})],e.prototype,"max",void 0),a([d({tooltip:"\u76ee\u6807\u4f4d\u7f6e"})],e.prototype,"targetPos",void 0),a([d({tooltip:"\u5176\u4ed6\u76ee\u6807\u4f4d\u7f6e"})],e.prototype,"targetPosOther",void 0),a([d(o)],e.prototype,"followSheep",void 0),a([l],e)}(cc.Component);i.default=p,cc._RF.pop()},{}],"Level-20269":[function(t,e,o){"use strict";cc._RF.push(e,"c6bc4adb8dOMbSeiuokCUaN","Level-20269");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("BrainLevelBase"),a=(n("Level-20269_sheep"),cc._decorator),c=(a.ccclass,a.property,void r.default);i.default=c,cc._RF.pop()},{}],"Level-20714":[function(t,e,o){"use strict";cc._RF.push(e,"7609aF8xUZOtKRpx5+qfpaO","Level-20714");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.levelData=r.state=void 0;var s,l=i("zqddn_level_base"),d=cc._decorator,p=d.ccclass,h=d.property;(function(t){t[t.init=0]="init",t[t.waitTouch=1]="waitTouch",t[t.checkWin=2]="checkWin",t[t.win=3]="win",t[t.lose=4]="lose",t[t.moving=5]="moving",t[t.touching=6]="touching"})(s=r.state||(r.state={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.level=0,e.mapNode=null,e.graphics=null,e.shiningParticle=null,e.guideHand=null,e._state=s.init,e._dataIndex=Symbol("index"),e._dataMapIndex=Symbol("mapIndex"),e._mapData=[],e._curTouchNode=null,e._playingError=!1,e._rightNum=0,e._color=[cc.color().fromHEX("#dcdcdc"),cc.color().fromHEX("#3c95f9"),cc.color().fromHEX("#fc3d3f")],e}return a(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._config=r.levelData[this.level],this.mapNode.getComponent(cc.Layout).enabled=!1;for(var t=0;t<this.mapNode.children.length;t++){var e=this.mapNode.children[t],o=this._config.map[t];e.getChildByName("img").active=!1,e.getChildByName("spine").active=!1,o<0?e.active=!1:(0==o?e.color=this._color[o]:1==o?(e.getComponent(cc.Sprite).enabled=!1,e.getChildByName("img").active=!0):e.color=this._color[2],o>=1&&(e.children[1].getComponent(cc.Label).string=o),e[this._dataIndex]=t,e[this._dataMapIndex]=o,1==o&&this._mapData.push(e),this._rightNum++)}this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.guideHand&&this.showGuideAnimAction(),this.state=s.waitTouch},e.prototype.onTouchStart=function(t){if(this.state==s.waitTouch){this.guideHand&&this.stopGuideAnimAction();for(var e=0;e<this.mapNode.children.length;e++){var o=this.mapNode.children[e];if(o.active&&cc.Intersection.pointInPolygon(t.getLocation(),this.getWPosByPolygon(o.getComponent(cc.PolygonCollider)))&&this._mapData.indexOf(o)>=0)return this.resetNode(o),this._curTouchNode=o,void(this.state=s.touching)}}},e.prototype.onTouchMove=function(t){var e=this;if(this.state==s.touching)for(var o=0;o<this.mapNode.children.length;o++){var n=this.mapNode.children[o];n.active&&cc.Intersection.pointInPolygon(t.getLocation(),this.getWPosByPolygon(n.getComponent(cc.PolygonCollider)))&&this.checkNeighbour(o,this._curTouchNode[this._dataIndex])&&(this._config.map[o]>1&&this._mapData.indexOf(n)<0?this._curTouchNode[this._dataMapIndex]+1==this._config.map[o]?this.linkNode(n):this._playingError||(this._playingError=!0,cc.audioEngine.playEffect(this.gameBase.wrongSound,!1),cc.tween(n).to(.08,{angle:10}).to(.08,{angle:-10}).to(.08,{angle:10}).to(.08,{angle:-10}).to(.08,{angle:10}).to(.08,{angle:-10}).to(.08,{angle:0}).call(function(){e._playingError=!1}).start()):0==n[this._dataMapIndex]?this.linkNode(n):(this.resetNode(n),this._curTouchNode=n))}},e.prototype.linkNode=function(t){var e=this;t.getComponent(cc.Sprite).enabled=!1,t.getChildByName("img").active=!0,t.getChildByName("spine").active=!0,t.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(){t.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(null),t.getChildByName("spine").active=!1}),this.gameBase.playXiuSound(),t[this._dataMapIndex]=this._curTouchNode[this._dataMapIndex]+1,t.children[1].getComponent(cc.Label).string=t[this._dataMapIndex],this._curTouchNode=t,this._mapData.push(t),this.scheduleOnce(function(){e.checkWin()})},e.prototype.onTouchEnd=function(){this.state==s.touching&&(this.state=s.waitTouch)},e.prototype.checkWin=function(){this._mapData.length>=this._rightNum&&this.win()},e.prototype.resetNode=function(t){this.gameBase.playXiuSound();for(var e=this._mapData.length-1;e>=0;e--){var o=this._mapData[e];if(o[this._dataMapIndex]>t[this._dataMapIndex]){var n=this._config.map[o[this._dataIndex]];n<=1?(o.color=this._color[n],o.getComponent(cc.Sprite).enabled=!1,o.getChildByName("img").active=!0):(o.color=this._color[2],o.getComponent(cc.Sprite).enabled=!0,o.getChildByName("img").active=!1),n>=1?o.children[1].getComponent(cc.Label).string=n:(o.children[1].getComponent(cc.Label).string="",o.getComponent(cc.Sprite).enabled=!0,o.getChildByName("img").active=!1),o[this._dataMapIndex]=n,this._mapData.splice(e,1)}}},e.prototype.draw=function(){if(this.graphics.clear(),this.graphics.strokeColor=this._color[1],this.graphics.lineWidth=this.mapNode.children[0].width,!(this._mapData.length<=1))for(var t=0;t<this._mapData.length;t++){var e=this._mapData[t],o=this._mapData[t+1];o&&(this.graphics.moveTo(e.x,e.y),this.graphics.lineTo(o.x,o.y),this.graphics.stroke())}},e.prototype.checkNeighbour=function(t,e){var o=e-this._config.col,n=e+this._config.col,i=e-1,r=e+1;return o==t||n==t||i==t&&Math.floor(i/this._config.col)==Math.floor(e/this._config.col)||r==t&&Math.floor(r/this._config.col)==Math.floor(e/this._config.col)},e.prototype.win=function(){this.state!=s.lose&&this.state!=s.win&&(this.state=s.win,this.gameBase.playRightStarSound(),this.shiningParticle&&(this.shiningParticle.node.active=!0,this.shiningParticle.resetSystem()),this.gameBase.gameRight(0))},e.prototype.lose=function(t,e){if(void 0===e&&(e=!0),this.state!=s.lose&&this.state!=s.win)if(e&&(this.state=s.lose),t)if(t instanceof cc.Node){var o=cc.instantiate(t);o.x+=70,o.y-=70,o.parent=t.parent,o.active=!1,this.gameBase.showWrong(o,1,e),o.destroy()}else this.gameBase.showWrong(t,1,e);else this.gameBase.showWrong(null,1,e)},e.prototype.showGuideAnimAction=function(){var t=this;this.guideHand.active=!0,this.guideHand.stopAllActions();var e=cc.v2(250,250);cc.tween(this.guideHand).repeatForever(cc.tween().call(function(){t.guideHand.position=cc.v2(-160,250)}).delay(.3).to(1,{position:e}).delay(1)).start()},e.prototype.stopGuideAnimAction=function(){this.guideHand.stopAllActions(),this.guideHand.active=!1},e.prototype.getWPosByPolygon=function(t){for(var e=t.points,o=[],n=0;n<e.length;n++){var i=cc.v2(e[n].x+t.offset.x,e[n].y+t.offset.y),r=t.node.convertToWorldSpaceAR(i);o.push(r)}return o},c([h(l.default)],e.prototype,"gameBase",void 0),c([h(cc.Integer)],e.prototype,"level",void 0),c([h(cc.Node)],e.prototype,"mapNode",void 0),c([h(cc.Graphics)],e.prototype,"graphics",void 0),c([h(cc.ParticleSystem)],e.prototype,"shiningParticle",void 0),c([h(cc.Node)],e.prototype,"guideHand",void 0),c([p],e)}(cc.Component);r.default=u,r.levelData={7850:{col:3,map:[1,4,0,0,0,0]},7851:{col:4,map:[0,0,0,16,0,0,0,0,0,0,1,0,0,0,8,0]},7852:{col:5,map:[1,0,0,0,0,0,0,0,15,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0]},7853:{col:5,map:[1,0,0,0,0,-1,0,0,9,0,0,0,-1,0,-1,0,17,-1,0,0,0,0,0,0,0]},7854:{col:6,map:[0,0,0,0,0,0,0,-1,0,22,-1,0,0,1,0,0,0,0,0,-1,13,0,-1,0,0,0,0,0,0,0]},20704:{col:5,map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,13,0,21,0,0,0,0,0,0,0,0]},20705:{col:5,map:[1,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,17,0,0]},20706:{col:5,map:[1,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,17,0,0,0,0,0,0,0,0]},20707:{col:5,map:[0,0,0,0,0,0,0,18,1,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0]},20708:{col:5,map:[0,0,0,0,0,0,0,20,0,0,0,0,1,0,0,0,0,8,0,0,0,0,0,0,0]},20709:{col:5,map:[0,0,0,0,0,0,1,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0]},20710:{col:5,map:[0,0,0,0,0,0,0,0,0,0,0,20,0,0,0,0,0,6,0,0,0,0,1,0,0]},20711:{col:6,map:[1,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,0,0,0,0,0,0,0,0]},20712:{col:6,map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},20713:{col:6,map:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,30,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0]},20994:{col:5,map:[1,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,14,0,0,0]},20995:{col:5,map:[0,0,0,22,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0]},20996:{col:5,map:[0,0,0,0,0,0,0,16,0,0,0,0,1,0,0,0,0,0,0,0,0,0,7,0,0]},20997:{col:5,map:[0,0,0,0,0,0,0,0,1,0,0,18,9,0,0,0,0,0,0,0,0,0,0,0,0]},20998:{col:5,map:[11,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,18,0,0,0,0,0,0,0]},20999:{col:5,map:[0,0,13,0,0,0,0,0,1,0,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0]},21e3:{col:5,map:[0,0,0,0,0,0,1,0,0,0,0,0,9,0,0,0,0,20,0,0,0,0,0,0,0]},21001:{col:5,map:[0,0,0,0,1,18,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0]},21002:{col:5,map:[0,0,1,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,18,0,0,0,0,0]},21003:{col:5,map:[0,0,0,0,1,0,0,0,0,0,0,0,0,10,0,0,0,22,0,0,0,0,0,0,0]},21613:{col:4,map:[1,0,0,0,0,7,0,0,0,0,0,0,0,0,10,0,0,0,0,0]},21614:{col:4,map:[1,0,0,0,0,0,0,0,15,0,0,8,0,0,0,0,0,0,0,0]},21615:{col:4,map:[0,0,7,0,0,0,0,0,0,0,0,0,0,1,0,0,0,14,0,0]},21616:{col:4,map:[0,1,6,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0]},21617:{col:4,map:[0,7,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,15]},21618:{col:5,map:[0,0,0,0,0,0,0,0,1,0,0,6,0,0,0,0,19,0,0,0,0,0,0,0,0]},21619:{col:5,map:[0,0,9,0,17,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},21620:{col:5,map:[0,0,9,0,0,0,1,0,0,0,0,0,0,0,15,0,0,0,0,0,0,0,0,0,0]},21621:{col:5,map:[0,0,19,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,7,0,0]},21622:{col:5,map:[1,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0]},21982:{col:5,map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,18,0,0,0,0,0,0,0]},21983:{col:5,map:[0,0,0,0,0,0,0,0,1,0,19,0,9,0,0,0,0,0,0,0,0,0,0,0,0]},21984:{col:5,map:[0,0,0,8,0,0,0,0,0,0,19,0,1,0,0,0,0,0,0,0,0,0,0,0,0]},21985:{col:5,map:[0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,1,0,7,0,0,0,0,0,0]},21986:{col:5,map:[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,16,0]},21987:{col:5,map:[1,0,0,0,0,0,0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0,7,0,0]},21988:{col:5,map:[0,0,0,0,0,0,0,20,0,0,0,0,1,0,0,0,0,8,0,0,0,0,0,0,0]},21989:{col:5,map:[0,16,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,9,0,0]},21990:{col:5,map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,0,10,0,0,0,0,0,0,0]},21991:{col:5,map:[0,0,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,1,0,0,0,0,10,0]},22044:{col:5,map:[0,0,0,0,0,0,1,0,0,20,0,0,-1,0,0,0,11,-1,0,0,0,0,0,0,0]},22045:{col:5,map:[0,0,0,0,0,0,0,-1,-1,0,8,0,-1,1,18,0,0,0,0,0,0,0,0,0,0]},22046:{col:5,map:[0,0,0,0,0,0,0,-1,-1,0,0,0,-1,16,0,0,1,-1,0,0,0,8,0,-1,0,0,0,0,0,0]},22047:{col:5,map:[0,0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0,0,0,0,0,1,10,0,0,0,0,0,0,0]},22048:{col:5,map:[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,0,0,0,0,0,0,0,0,10,0,0]},22049:{col:5,map:[0,0,0,0,0,0,0,10,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,0]},22050:{col:5,map:[0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0]},22051:{col:5,map:[0,0,0,0,0,0,0,0,0,0,0,23,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0]},22052:{col:5,map:[0,0,0,1,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,0,0,0,0,0,0]},22053:{col:5,map:[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,23,0,0,10,0,0,0,0,0,0,0,0,0,0,0]}},cc._RF.pop()},{}],"Level-20836_saveSunWuKong":[function(t,e){"use strict";cc._RF.push(e,"4eb40S/3m9HfLWg9wbLkelY","Level-20836_saveSunWuKong"),cc._RF.pop()},{}],"Level-20841_RotateRopeSaveGear":[function(t,e){"use strict";cc._RF.push(e,"fc36bQ52AhLEorvFc8kZF1F","Level-20841_RotateRopeSaveGear"),cc._RF.pop()},{}],"Level-21150_item":[function(t,e,o){"use strict";cc._RF.push(e,"694b9y4Bt9Bu53L/fzE5lLk","Level-21150_item");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.topName=[],e.exit=cc.v2(),e.bottom=[],e.moveUp=!0,e.moved=!1,e._originX=0,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){this._originX=this.node.x},e.prototype.canMove=function(){for(var t=0;t<this.topName.length;t++)if(!this.node.parent.getChildByName(this.topName[t]).getComponent(o).moved)return!1;return!0},e.prototype.doMove=function(t){var e=this;this.moved=!0;var o=cc.v2();o.x=t.x*this.getRandomValueInArray([-1,1])*2,o.y=t.y*this.getRandomValueInArray([-1,1])*2;var n=this.node.position.sub(o).mag()/2e3;this.moveUp?cc.tween(this.node).to(.3,{y:this.node.y+50}).to(n,{position:o}).call(function(){e.node.active=!1}).start():cc.tween(this.node).to(n,{position:o}).call(function(){e.node.active=!1}).start(),this.bottomMove()},e.prototype.shake=function(){this.node.stopAllActions(),this.node.x=this._originX;for(var t=0,e=function(e){var i=n.node.children[e];if("wrong"==i.name){var r=n.node.parent.getChildByName(n.topName[t]).getComponent(o);t++,r.moved||(i.stopAllActions(),i.active=!0,cc.tween(i).delay(.2).to(.1,{opacity:0}).call(function(){i.active=!1,i.opacity=255}).start())}},n=this,i=0;i<this.node.children.length;i++)e(i);cc.tween(this.node).to(.05,{x:this.node.x-5}).to(.05,{x:this.node.x+5}).to(.05,{x:this.node.x-5}).to(.05,{x:this.node.x+5}).to(.05,{x:this.node.x}).start()},e.prototype.bottomMove=function(){this.bottom.forEach(function(t){t.getComponent(cc.Sprite).enabled=!1,t.getChildByName("spine")&&(t.getChildByName("spine").active=!1),t.children[0].active=!0,cc.tween(t).to(1,{x:t.scaleX>0?600:-600}).call(function(){t.active=!1}).start(),cc.tween(t.children[0]).to(.1,{angle:-5}).to(.1,{angle:5}).union().repeatForever().start()})},e.prototype.getRandomValueInArray=function(t){return t[Math.floor(Math.random()*t.length)]},a([l([cc.String])],e.prototype,"topName",void 0),a([l(cc.Vec2)],e.prototype,"exit",void 0),a([l([cc.Node])],e.prototype,"bottom",void 0),a([l({displayName:"\u662f\u5426\u5347\u8d77",tooltip:"\u70b9\u51fb\u4e4b\u540e\u662f\u5426\u5148\u5347\u8d77\u518d\u79fb\u8d70"})],e.prototype,"moveUp",void 0),o=a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],"Level-21150":[function(t,e,o){"use strict";cc._RF.push(e,"117f9UnC5xLLr+Zpxd8oHra","Level-21150");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.state=void 0;var s,l=i("BrainLevelBase"),d=i("LevelConstant"),p=i("doubleFingerScaleCtl"),h=i("Level-21150_item"),u=cc._decorator,f=u.ccclass,g=u.executeInEditMode,m=u.property;(function(t){t[t.init=0]="init",t[t.waitTouch=1]="waitTouch",t[t.checkWin=2]="checkWin",t[t.win=3]="win",t[t.lose=4]="lose",t[t.moveMap=5]="moveMap",t[t.autoMoving=6]="autoMoving"})(s=r.state||(r.state={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.edge=cc.v2(1e3,500),e.map=null,e.shiningParticle=null,e.guideHand=null,e._state=s.init,e._moved=Symbol("_moved"),e._doubleFingerScaleCtl=null,e._autoMoveNumber=0,e}return a(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);for(var e=0;e<this.map.children.length;e++){var o=this.map.children[e];o.getChildByName("index")&&o.getChildByName("index").removeFromParent()}},e.prototype.onLevelAllAssetsLoaded=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.guideHand&&this.showGuideAnimAction(),this.action()},e.prototype.action=function(){var t=this;this._doubleFingerScaleCtl=this.dict.game.getComponent(p.doubleFingerScaleCtl),cc.tween(this._doubleFingerScaleCtl.map).delay(.3).to(1,{scale:.35}).to(1,{scale:.8}).call(function(){t.state=s.waitTouch}).start()},e.prototype.onTouchStart=function(t){if(this.state==s.waitTouch){this.playClickSound(),this.guideHand&&this.stopGuideAnimAction();for(var e=this.map.children.length-1;e>=0;e--){var o=this.map.children[e],n=o.getComponent(h.default);if(!n.moved&&cc.Intersection.pointInPolygon(t.getLocation(),this.getPolygonColliderPoints(o)))return void(n.canMove()?(o.setSiblingIndex(999),n.doMove(this.edge),this.checkWin()):n.shake())}this.state=s.moveMap}},e.prototype.onTouchMove=function(t){this.state==s.moveMap&&(this.map.x=cc.misc.clampf(this.map.x+t.getDeltaX()/this._doubleFingerScaleCtl.map.scaleX,-this.edge.x,this.edge.x),this.map.y=cc.misc.clampf(this.map.y+t.getDeltaY()/this._doubleFingerScaleCtl.map.scaleY,-this.edge.y,this.edge.y))},e.prototype.onTouchEnd=function(){this.state==s.moveMap&&(this.state=s.waitTouch)},e.prototype.addAutoMoveNumber=function(){this._autoMoveNumber=5,this.autoMove()},e.prototype.autoMove=function(){if(this.state=s.autoMoving,this._autoMoveNumber){this._autoMoveNumber--;for(var t=this.map.children.length-1;t>=0;t--){var e=this.map.children[t],o=e.getComponent(h.default);if(!o.moved&&o.canMove()){this.lookAt(e);break}}}else this.state=s.waitTouch},e.prototype.lookAt=function(t){var e=this;cc.tween(this.map).to(1,{position:t.position.mul(-1)}).call(function(){t.getComponent(h.default).doMove(e.edge)}).delay(.5).call(function(){e.autoMove()}).start()},e.prototype.checkWin=function(){for(var t=0;t<this.map.children.length;t++)if(!this.map.children[t].getComponent(h.default).moved)return;this.win()},e.prototype.win=function(t){this.state!=s.lose&&this.state!=s.win&&(this.state=s.win,this.playRemoteSound(d.AUDIO_URL.HANDCLAP),this.shiningParticle&&(this.shiningParticle.node.active=!0,this.shiningParticle.resetSystem()),this.playRight(t,2))},e.prototype.lose=function(t,e){if(void 0===e&&(e=!0),this.state!=s.lose&&this.state!=s.win)if(e&&(this.state=s.lose),t)if(t instanceof cc.Node){var o=cc.instantiate(t);o.x+=70,o.y-=70,o.parent=t.parent,o.active=!1,this.playError(null,2),e?this.playError(o,2):this.playErrorOnce(o,2),o.destroy()}else e?this.playError(t,2):this.playErrorOnce(t,2);else e?this.playError(null,2):this.playErrorOnce(null,2)},e.prototype.showGuideAnimAction=function(){var t=this;this.guideHand.active=!0,this.guideHand.stopAllActions();var e=cc.v2(250,250);cc.tween(this.guideHand).repeatForever(cc.tween().call(function(){t.guideHand.position=cc.v2(-160,250)}).delay(.3).to(1,{position:e}).delay(1)).start()},e.prototype.stopGuideAnimAction=function(){this.guideHand.stopAllActions(),this.guideHand.active=!1},e.prototype.getPolygonColliderPoints=function(t){var e=[];return t.getComponent(cc.PolygonCollider).points.forEach(function(o){var n=t.convertToWorldSpaceAR(o);e.push(n)}),e},e.prototype.transformPosition=function(t,e){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO))},c([m(cc.Vec2)],e.prototype,"edge",void 0),c([m(cc.Node)],e.prototype,"map",void 0),c([m(cc.ParticleSystem)],e.prototype,"shiningParticle",void 0),c([m(cc.Node)],e.prototype,"guideHand",void 0),c([f,g],e)}(l.default);r.default=y,cc._RF.pop()},{}],"Level-21298_saveSunWuKong":[function(t,e){"use strict";cc._RF.push(e,"68c242g/6ZO6aqWfTusMJRj","Level-21298_saveSunWuKong"),cc._RF.pop()},{}],"Level-21478":[function(t,e,o){"use strict";cc._RF.push(e,"ecbb2Cy34RNsanyqRRmFqBM","Level-21478");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.state=void 0;var s,l=i("BrainLevelBase"),d=i("LevelConstant"),p=i("doubleFingerScaleCtl"),h=cc._decorator,u=h.ccclass,f=h.executeInEditMode,g=h.property;(function(t){t[t.init=0]="init",t[t.waitTouch=1]="waitTouch",t[t.checkWin=2]="checkWin",t[t.win=3]="win",t[t.lose=4]="lose",t[t.moveMap=5]="moveMap",t[t.autoMoving=6]="autoMoving"})(s=r.state||(r.state={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.edge=cc.v2(1e3,500),e.gridMap=null,e.map=null,e.model=null,e.shiningParticle=null,e._state=s.init,e._doubleFingerScaleCtl=null,e._autoMoveNumber=0,e._dataList=[],e._gridList=[],e._imageList=[],e._mapIndex=Symbol("_mapIndex"),e._moved=Symbol("_moved"),e._naoDongList=[],e}return a(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.gridMap.angle=-35,this.map.angle=-35,this._config=this.levelJSON.json[this.levelID],this._dataList=this._config.list,this.createMap(),this.clearExtraGrid(),this.action()},e.prototype.onLevelAllAssetsLoaded=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.createMap=function(){var t=this._config.col,e=this._config.row,o=this.model.children[0].width,n=this.model.children[0].height;this.gridMap.width=this.model.children[0].width*t,this.gridMap.height=this.model.children[0].height*e,this.edge.x=this.gridMap.width,this.edge.y=this.gridMap.height;for(var i=0,r=0;r<t;r++)for(var a=0;a<e;a++)(d=new cc.Node).width=o,d.height=n,d.parent=this.gridMap,d[this._mapIndex]=i,this._gridList.push(d),i++;for(this.gridMap.getComponent(cc.Layout).updateLayout(),this.gridMap.getComponent(cc.Layout).enabled=!1,r=0;r<this._dataList.length;r++){var c=this._dataList[r],l=new cc.Node;for(l.parent=this.map,a=0;a<c.list.length;a++){var d,p=c.list[a],h=c.list[a+1],u=c.list[a-1],f=void 0,g=0,m=p-h,y=u-p;if((0==a||a==c.list.length-1)&&(f=this.getModel("h",c.colorIndex),1==m?g=180:-1==m?g=0:m==-t?g=-90:m==t&&(g=90),null!=c.connect&&this.recordNaoDong(c.index)))switch(this.dataByIndex(c.connect).list[this.dataByIndex(c.connect).list.length-1]-p){case t:f=this.getModel("b",c.colorIndex),g=90;break;case-t:f=this.getModel("b",c.colorIndex),g=-90;break;case 1:f=this.getModel("b",c.colorIndex),g=180;break;case-1:f=this.getModel("b",c.colorIndex),g=0}if(null!=h&&(1==m?f||(Math.abs(y)==t?(f=this.getModel("c",c.colorIndex),g=u<p?-90:0):(f=this.haveCross(c,p,!1)?this.getModel("n",c.colorIndex):this.getModel("b",c.colorIndex),g=180)):-1==m?f||(Math.abs(y)==t?(f=this.getModel("c",c.colorIndex),g=u<p?180:90):(f=this.haveCross(c,p,!1)?this.getModel("n",c.colorIndex):this.getModel("b",c.colorIndex),g=0)):m==-t?f||(1==Math.abs(y)?(f=this.getModel("c",c.colorIndex),g=u<p?0:90):(f=this.haveCross(c,p,!1)?this.getModel("n",c.colorIndex):this.getModel("b",c.colorIndex),g=90)):m==t&&(f||(1==Math.abs(y)?(f=this.getModel("c",c.colorIndex),g=u<p?-90:180):(f=this.haveCross(c,p,!1)?this.getModel("n",c.colorIndex):this.getModel("b",c.colorIndex),g=-90)))),a==c.list.length-1&&(1==y?g=0:-1==y?g=180:y==t?g=-90:y==-t&&(g=90),null!=c.connect&&!this.recordNaoDong(c.index))){var v=this.dataByIndex(c.connect);switch(this._naoDongList.push([c.index,c.connect]),v.list[0]-p){case t:g=u<p?0:-90,f=this.getModel("c",c.colorIndex);break;case-t:g=u<p?90:180,f=this.getModel("c",c.colorIndex);break;case 1:u-p==-t?(f=this.getModel("c",c.colorIndex),g=180):u-p==t?(f=this.getModel("c",c.colorIndex),g=90):(f=this.getModel("b",c.colorIndex),g=0);break;case-1:u-p==-t?(f=this.getModel("c",c.colorIndex),g=-90):u-p==t?(f=this.getModel("c",c.colorIndex),g=0):(f=this.getModel("b",c.colorIndex),g=180)}}(d=cc.instantiate(f)).position=this.gridMap.children[p].position,d[this._mapIndex]=p,d.angle=g,d.parent=l}this._imageList[c.index]=l}this.updateCount(),this.state=s.waitTouch},e.prototype.clearExtraGrid=function(){var t=this;this.gridMap.children.forEach(function(e,o){t.getClickNodeData(o)||e.destroy()})},e.prototype.recordNaoDong=function(t){for(var e=0;e<this._naoDongList.length;e++)if(-1!=this._naoDongList[e].indexOf(t))return!0;return!1},e.prototype.getNaoDong=function(t){for(var e=0;e<this._naoDongList.length;e++){var o=this._naoDongList[e];if(-1!=o.indexOf(t)){var n=[].concat(o);return n.splice(o.indexOf(t),1),n[0]}}return-1},e.prototype.moveNaoDong=function(){if(this._naoDongList.length){var t=this._naoDongList.splice(this._naoDongList.length-1,1)[0],e=cc.v2();e.x=this.edge.x*this.getRandomValueInArray([-1,1])*2,e.y=this.edge.y*this.getRandomValueInArray([-1,1])*2;for(var o=0;o<t.length;o++){var n=t[o];this.doMove(n,e)}}},e.prototype.dataByIndex=function(t){for(var e in this._dataList){var o=this._dataList[e];if(o.index==t)return o}},e.prototype.getModel=function(t,e){return this.model.getChildByName(t+e)},e.prototype.haveCross=function(t,e,o){void 0===o&&(o=!0);for(var n=0;n<this._dataList.length;n++){var i=this._dataList[n];if(i.index!=t.index&&-1!=i.list.indexOf(e))return o?i.order>t.order:i.order<t.order}return!1},e.prototype.action=function(){var t=this;this._doubleFingerScaleCtl=this.dict.game.getComponent(p.doubleFingerScaleCtl),cc.tween(this._doubleFingerScaleCtl.map).delay(.3).to(1,{scale:.1}).to(1,{scale:.3}).call(function(){t.state=s.waitTouch}).start()},e.prototype.getClickNodeData=function(t){for(var e,o=0;o<this._dataList.length;o++){var n=this._dataList[o];this._imageList[n.index][this._moved]||-1==n.list.indexOf(t)||(!e||n.order>e.order)&&(e=n)}return e},e.prototype.haveCrossByClickNode=function(t,e,o){void 0===o&&(o=!0);for(var n=0;n<this._dataList.length;n++){var i=this._dataList[n];if(i.index!=t.index&&-1!=i.list.indexOf(e)&&!this._imageList[i.index][this._moved])return o?i.order>t.order:i.order<t.order}return!1},e.prototype.shake=function(t,e){var o=this,n=this._imageList[t];n.children.forEach(function(t){-1!=e.indexOf(t[o._mapIndex])&&"shadow"!=t.name&&(t.children[0].getComponents(cc.RenderComponent)[0].getMaterial(0).setProperty("opacity",1),o.scheduleOnce(function(){t.children[0].getComponents(cc.RenderComponent)[0].getMaterial(0).setProperty("opacity",0)},.3))}),cc.tween(n).to(.05,{x:-5}).to(.05,{x:5}).to(.05,{x:-5}).to(.05,{x:5}).to(.05,{x:0}).start()},e.prototype.doMove=function(t,e){var o=this,n=this._imageList[t];n[this._moved]=!0,n.setSiblingIndex(999),this.updateCount();var i=cc.v2();i.x=this.edge.x*this.getRandomValueInArray([-1,1])*2,i.y=this.edge.y*this.getRandomValueInArray([-1,1])*2,e&&(i=e);var r=n.position.sub(i).mag()/4e3;cc.tween(n).to(.3,{y:n.y+50}).to(r,{position:i}).call(function(){n.active=!1,o.checkWin()}).start()},e.prototype.onTouchStart=function(t){var e=this;if(this.state==s.waitTouch){this.playClickSound();for(var o=function(o){var i=n.gridMap.children[o];if(i.getBoundingBoxToWorld().contains(t.getLocation())){var r=i[n._mapIndex],a=n.getClickNodeData(r);if(a){var c=[];a.list.forEach(function(t){e.haveCrossByClickNode(a,t)&&c.push(t)});var s=n.recordNaoDong(a.index);if(s){var l=n.getNaoDong(a.index),d=n.dataByIndex(l);d.list.forEach(function(t){e.haveCrossByClickNode(d,t)&&c.push(t)})}return c.length?(s&&n.shake(n.getNaoDong(a.index),c),n.shake(a.index,c)):n.doMove(a.index),"break"}}},n=this,i=0;i<this.gridMap.children.length&&"break"!==o(i);i++);this.state=s.moveMap}},e.prototype.onTouchMove=function(t){this.state==s.moveMap&&(this.gridMap.x=cc.misc.clampf(this.map.x+t.getDeltaX()/this._doubleFingerScaleCtl.map.scaleX,-this.edge.x,this.edge.x),this.gridMap.y=cc.misc.clampf(this.map.y+t.getDeltaY()/this._doubleFingerScaleCtl.map.scaleY,-this.edge.y,this.edge.y),this.map.x=cc.misc.clampf(this.map.x+t.getDeltaX()/this._doubleFingerScaleCtl.map.scaleX,-this.edge.x,this.edge.x),this.map.y=cc.misc.clampf(this.map.y+t.getDeltaY()/this._doubleFingerScaleCtl.map.scaleY,-this.edge.y,this.edge.y))},e.prototype.onTouchEnd=function(){this.state==s.moveMap&&(this.state=s.waitTouch)},e.prototype.addAutoMoveNumber=function(){this._autoMoveNumber+=5,this.state!=s.autoMoving&&this.autoMove()},e.prototype.autoMove=function(){if(this.state=s.autoMoving,this._autoMoveNumber){this._autoMoveNumber--;for(var t=this._imageList.length-1;t>=0;t--){var e=this._imageList[t];if(e&&!e[this._moved]){this.lookAt(e,t,e.children[e.childrenCount-1][this._mapIndex]);break}}}else this.state=s.waitTouch},e.prototype.lookAt=function(t,e,o){var n=this,i=this.transformPosition(this._gridList[o],this.map).scale(cc.v2(this.map.scaleX,this.map.scaleY)).mul(-1);cc.tween(this.gridMap).to(1,{position:i}).start(),cc.tween(this.map).to(1,{position:i}).call(function(){n.doMove(e)}).delay(.3).call(function(){n.autoMove()}).start()},e.prototype.checkWin=function(){for(var t in this._imageList){var e=this._imageList[t];if(!e[this._moved]||e.active)return}this.win()},e.prototype.updateCount=function(){var t=0;for(var e in this._imageList)this._imageList[e][this._moved]||t++;t-=this._naoDongList.length,this.node.getChildByName("count").getComponent(cc.Label).string="\u5269\u4f59:"+t},e.prototype.win=function(t){this.state!=s.lose&&this.state!=s.win&&(this.state=s.win,this.playRemoteSound(d.AUDIO_URL.HANDCLAP),this.shiningParticle&&(this.shiningParticle.node.active=!0,this.shiningParticle.resetSystem()),this.playRight(t,2))},e.prototype.lose=function(t,e){if(void 0===e&&(e=!0),this.state!=s.lose&&this.state!=s.win)if(e&&(this.state=s.lose),t)if(t instanceof cc.Node){var o=cc.instantiate(t);o.x+=70,o.y-=70,o.parent=t.parent,o.active=!1,this.playError(null,2),e?this.playError(o,2):this.playErrorOnce(o,2),o.destroy()}else e?this.playError(t,2):this.playErrorOnce(t,2);else e?this.playError(null,2):this.playErrorOnce(null,2)},e.prototype.getPolygonColliderPoints=function(t){var e=[];return t.getComponent(cc.PolygonCollider).points.forEach(function(o){var n=t.convertToWorldSpaceAR(o);e.push(n)}),e},e.prototype.transformPosition=function(t,e){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO))},e.prototype.getRandomValueInArray=function(t){return t[Math.floor(Math.random()*t.length)]},c([g(cc.Vec2)],e.prototype,"edge",void 0),c([g(cc.Node)],e.prototype,"gridMap",void 0),c([g(cc.Node)],e.prototype,"map",void 0),c([g(cc.Node)],e.prototype,"model",void 0),c([g(cc.ParticleSystem)],e.prototype,"shiningParticle",void 0),c([u,f],e)}(l.default);r.default=m,cc._RF.pop()},{}],"Level-21705":[function(t,e,o){"use strict";cc._RF.push(e,"0f941uN3jlOgp3dCGl3xT+m","Level-21705");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},s=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],a=0,c=r.length;a<c;a++,i++)n[i]=r[a];return n};Object.defineProperty(r,"__esModule",{value:!0});var l,d,p=i("BrainLevelBase"),h=i("LevelUtil"),u=cc._decorator,f=u.ccclass;u.property,function(t){t[t.none=0]="none",t[t.init=1]="init",t[t.waitTouch=2]="waitTouch",t[t.checkWin=3]="checkWin",t[t.over=4]="over"}(l||(l={})),function(t){t[t["\u4e0a"]=0]="\u4e0a",t[t["\u4e0b"]=1]="\u4e0b",t[t["\u53f3"]=2]="\u53f3",t[t["\u5de6"]=3]="\u5de6"}(d||(d={}));var g=Symbol(),m=Symbol(),y=Symbol(),v=Symbol(),_=Symbol(),C=Symbol(),w=[{id:15,gridOffset:cc.v2(0,-5),cubeSize:54},{id:13,gridOffset:cc.v2(0,0),cubeSize:54}],P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isBrainLevel=!0,e._state=l.init,e.row=17,e.column=17,e.itemLayer=null,e.pres=null,e.gridLayer=null,e.effectLayer=null,e.toast=null,e.resultTime=180,e.lblTime=null,e.itemList=[],e.config={map:[]},e.isDebug=!1,e.speed=1200,e.dirs=[d.\u4e0a,d.\u4e0b,d.\u5de6,d.\u53f3],e}return a(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.itemLayer=this.dict.itemLayer,this.effectLayer=this.dict.effectLayer,this.pres=this.dict.pres,this.gridLayer=this.dict.gridLayer,this.toast=this.dict.toast,this.toast.active=!1,this.toast.position=cc.v2(0,-1e3),this.toast[C]=this.toast.position,this.gridLayer.active=this.isDebug,this.pres.children.forEach(function(t){t.active=!1}),this.lblTime=this.dict.lblTime.getComponent(cc.Label),this.lblTime.string=this.resultTime.toString()},e.prototype.onLevelReady=function(){this.init()},e.prototype.init=function(){this.initConfig(),this.initGridLayer(this.config.map),this.initMap(),this.initEvent(),this.isDeadend()&&this.overturn(!1),this.state=l.waitTouch},e.prototype.shuffle=function(){for(var t=function(t){var o=e.itemLayer.children[t];if(o.active){var n=o[v],i=[];e.dirs.forEach(function(t){t!=n&&i.push(t)});var r=h.default.getRandomValueInArray(i);o[v]=r,e.setOffset(o),e.setAngle(o)}},e=this,o=0;o<this.itemLayer.children.length;o++)t(o)},e.prototype.initConfig=function(){var t=this;this.config=h.default.deepCopy(this.levelJSON.json[this.levelID]),this.row=this.config.map.length,this.column=this.config.map[0].length,w.forEach(function(e){e.id==t.column&&(t.gridLayer.position=e.gridOffset,t.gridLayer.children[0].width=e.cubeSize,t.gridLayer.children[0].height=e.cubeSize)})},e.prototype.initGridLayer=function(t){var e=t.length*t[0].length-this.gridLayer.childrenCount;if(e>0)for(var o=0;o<e;o++)cc.instantiate(this.gridLayer.children[0]).parent=this.gridLayer;else{var n=this.gridLayer.childrenCount+e+1;this.gridLayer.children.splice(n,Math.abs(e))}this.gridLayer.active=!0,this.gridLayer.getComponent(cc.Layout).updateLayout()},e.prototype.initMap=function(){for(var t=this.config.map,e=0;e<t.length;e++)for(var o=0;o<t[e].length;o++){var n=t[e][o],i=cc.v2(e,o),r=this.ijToIndex(i),a=this.gridLayer.children[r];a[m]=i;var c=cc.v2();if(0!=n){var s=this.pres.getChildByName(n.toString()),l=cc.instantiate(s);if(l.active=!0,l.parent=this.itemLayer,c=h.default.convertPosition(a,l),l.position=c,l[g]=n,l[m]=i,l[y]=r,l[C]=l.position,this.setRandomDir(l),this.isDebug){var d=new cc.Node,p=d.addComponent(cc.Label);d.name="labDebug",p.string=i+"\n\n"+l[y],d.parent=l,d.position=cc.v2(),d.color=cc.Color.BLACK,p.fontSize=15}this.itemList.push(l)}}this.updatePosMap()},e.prototype.updatePosMap=function(){this.isDebug&&this.itemList.forEach(function(t){t.getChildByName("labDebug").getComponent(cc.Label).string="("+t[m].x+","+t[m].y+")-"+t[y]})},e.prototype.initEvent=function(){var t=this,e=null;h.default.touchEvent(this.gridLayer,{sFunc:function(o){if(t.state==l.waitTouch&&(t.playClickSound(),e=t.getTouchItem(o.getLocation()))){var n=t.getMovePath(e);n.length?(t.state=l.checkWin,t.move(e,n,0)):t.shake(e)}},mFunc:function(){t.state,l.waitTouch},eFunc:function(){t.state,l.waitTouch}})},e.prototype.isOnTheEdge=function(t){var e=t[m];return 0==e.x||e.x==this.row-1||0==e.y||e.y==this.column-1},e.prototype.getTouchItem=function(t){for(var e=0;e<this.itemLayer.children.length;e++){var o=this.itemLayer.children[e];if(o.getBoundingBoxToWorld().contains(t))return o}return null},e.prototype.setRandomDir=function(t){var e=h.default.getRandomValueInArray(this.dirs);t[v]=e,this.setOffset(t),this.setAngle(t)},e.prototype.setOffset=function(t){var e=t[v],o=cc.v2();switch(e){case d.\u4e0a:o=cc.v2(-1,0);break;case d.\u4e0b:o=cc.v2(1,0);break;case d.\u5de6:o=cc.v2(0,-1);break;case d.\u53f3:o=cc.v2(0,1)}t[_]=o},e.prototype.setAngle=function(t){switch(t[v]){case d.\u4e0a:t.angle=0;break;case d.\u4e0b:t.angle=180;break;case d.\u5de6:t.angle=90;break;case d.\u53f3:t.angle=270}},e.prototype.getItemByIJ=function(t,e){for(var o=0;o<this.itemList.length;o++){var n=this.itemList[o];if(n[m].x==t&&n[m].y==e&&n.active)return n}return null},e.prototype.isOut=function(t){return t.x<0||t.x>this.column-1||t.y<0||t.y>this.row-1},e.prototype.getMovePath=function(t){for(var e=t[_],o=!0,n=t[m].add(e),i=[];o;)this.isInRange(n)&&0==this.config.map[n.x][n.y]?(i.push(n),n=n.add(e)):o=!1;return i},e.prototype.isInRange=function(t){return t.x>=0&&t.x<this.row&&t.y>=0&&t.y<this.column},e.prototype.getGameOffset=function(t){var e=cc.v2();switch(t[v]){case d.\u4e0a:e=cc.v2(0,1);break;case d.\u4e0b:e=cc.v2(0,-1);break;case d.\u5de6:e=cc.v2(-1,0);break;case d.\u53f3:e=cc.v2(1,0)}return e},e.prototype.goOut=function(t){var e=this,o=t[m];this.config.map[o.x][o.y]=0;var n=this.getGameOffset(t).mul(500),i=n.mag()/this.speed;cc.tween(t).by(i,{position:n}).call(function(){t.active=!1,e.checkIsWin()}).start()},e.prototype.shake=function(t){t.stopAllActions();var e=this.getGameOffset(t).mul(5);t.position=t[C],cc.tween(t).to(.05,{position:t.position.sub(e)}).to(.05,{position:t.position.add(e)}).to(.05,{position:t.position.sub(e)}).to(.05,{position:t.position.add(e)}).to(.05,{position:t[C]}).start()},e.prototype.isDeadend=function(){for(var t=0;t<this.itemLayer.children.length;t++){var e=this.itemLayer.children[t];if(e.active&&this.getMovePath(e).length)return!1}return!0},e.prototype.overturn=function(t){var e=this;void 0===t&&(t=!0),cc.log("\u6240\u6709\u7ffb\u8f6c");var o=function(){for(var t=0;t<e.itemLayer.children.length;t++){var o=e.itemLayer.children[t];if(o.active){var n=o[v];switch(n){case d.\u4e0a:n=d.\u4e0b;break;case d.\u4e0b:n=d.\u4e0a;break;case d.\u5de6:n=d.\u53f3;break;case d.\u53f3:n=d.\u5de6}o[v]=n,e.setAngle(o),e.setOffset(o)}}};if(!t)return o(),void(this.state=l.waitTouch);this.toast.active=!0,this.toast.position=this.toast[C],cc.tween(this.toast).to(.4,{y:0}).delay(1).to(1,{y:1e3}).delay(.3).call(function(){o(),e.state=l.waitTouch}).start()},e.prototype.move=function(t,e,o){var n=this;if(o>=e.length)this.isOnTheEdge(t)?this.goOut(t):this.isDeadend()?this.overturn():this.state=l.waitTouch;else{var i=e[o],r=this.ijToIndex(i),a=this.gridLayer.children[r],c=h.default.convertPosition(a,t),s=c.sub(t.position).mag()/this.speed;cc.tween(t).to(s,{position:c}).call(function(){var r=t[m];n.config.map[r.x][r.y]=0,t[m]=i,n.config.map[i.x][i.y]=t[g],t[C]=t.position,o+=1,n.move(t,e,o)}).start()}},e.prototype.checkIsWin=function(){if(this.state!=l.over){for(var t=!0,e=0;e<this.itemLayer.children.length;e++)if(this.itemLayer.children[e].active){t=!1;break}t?(this.state=l.checkWin,this.suc()):this.isDeadend()?this.overturn():this.state=l.waitTouch}},e.prototype.initCountDown=function(){var t=this;if(this.resultTime>0){this.lblTime.node.active=!0,this.lblTime.node.opacity=255;var e=!1;this.schedule(function(){t.state!=l.over&&(t.resultTime--,t.resultTime<=10&&!e&&(e=!0,t.lblTime.getComponent(cc.Animation).play()),t.resultTime>0?t.lblTime.string=t.resultTime+"":(t.lblTime.node.opacity=0,t.fail(1)))},1)}},e.prototype.ijToIndex=function(t){return t.x*this.column+t.y},e.prototype.getIdByIJ=function(t){for(var e=0;e<this.itemLayer.children.length;e++){var o=this.itemLayer.children[e];if(t.equals(o[m]))return e}return-1},e.prototype.suc=function(t){void 0===t&&(t=1),this.playRight(null,t),this.unscheduleAllCallbacks(),h.default.clearObj()},e.prototype.fail=function(t){var e=this;void 0===t&&(t=0),this.state!=l.over&&(this.state=l.over,cc.log("fail"),this.scheduleOnce(function(){e.playError(null,1)},t))},e.prototype.onDisable=function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1,cc.director.getPhysicsManager().enabled=!1,cc.director.getPhysicsManager().debugDrawFlags=0,this.unscheduleAllCallbacks(),h.default.clearObj()},e.prototype.copy=function(t){return t.map(function(t){return s(t)})},c([f],e)}(p.default);r.default=P,cc._RF.pop()},{}],"Level-22166":[function(t,e,o){"use strict";cc._RF.push(e,"d88d28My6RN7rY7hlrGRZr/","Level-22166");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BrainLevelBase"),l=i("LevelConstant"),d=cc._decorator,p=d.ccclass,h=d.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onCollisionEnter=function(){},e.prototype.onCollisionExit=function(){},e}(cc.Component),f=function(){function t(){this.node=null,this.count=5,this.index=0}return c([h(cc.Node)],t.prototype,"node",void 0),c([h(cc.Float)],t.prototype,"count",void 0),c([h(cc.Float)],t.prototype,"index",void 0),c([p("BtnData22166")],t)}(),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btns=[],e.pres=[],e.icons=null,e.creatPos=null,e.node_glass_outLine=null,e.node_glass_bg=null,e.creatLayer=null,e.touchLayer=null,e.node_finger=null,e._isEnd=!1,e._isStop=!1,e._isGame=!1,e._curInCount=0,e._totalCount=0,e._curTouchTime=0,e._doubleTimer=1,e._touchCount=0,e._isCanShake=!0,e._curTouchLayerId=-1,e._curTouchBtn=null,e._curTouchBtnId=-1,e.isCanTouch=!0,e._createCount=0,e.isOpenHarmmer=!1,e.isCanUseHammer=!1,e.node_hammer=null,e._delRadius=100,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._initPhyscis(),this.creatPos=this.dict.creatPos,this.node_glass_outLine=this.dict.node_glass_outLine,this.node_glass_bg=this.dict.node_glass_bg,this.node_glass_outLine.startPos=this.node_glass_outLine.position,this.node_glass_bg.startPos=this.node_glass_bg.position,this.creatLayer=this.dict.createLayer,this.touchLayer=this.dict.touchLayer,this.node_finger=this.dict.node_finger,this.icons=this.dict.icons,this._initHammer(),this.node_glass_outLine.getComponent(cc.RigidBody).type=cc.RigidBodyType.Animated},e.prototype.onAssetLoadedAllFinishHandle=function(){t.prototype.onAssetLoadedAllFinishHandle.call(this),this._initBtns(),this._initTouchLayer(),this._initFinger(),this._initOutLine()},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1,cc.director.getPhysicsManager().enabled=!1,cc.director.getPhysicsManager().debugDrawFlags=0,this.unscheduleAllCallbacks()},e.prototype._initPhyscis=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!1,cc.director.getPhysicsManager().enabled=!0},e.prototype._initFinger=function(){this.node_finger&&(this.node_finger.setScale(1),cc.tween(this.node_finger).repeatForever(cc.tween().to(.3,{scale:1.3}).to(.3,{scale:1})).start())},e.prototype.stopFingerAnimation=function(){this.node_finger&&(this.node_finger.stopAllActions(),this.node_finger.active=!1)},e.prototype._initTouchLayer=function(){var t=this;this.touchLayer.on(cc.Node.EventType.TOUCH_START,function(e){t._isEnd||-1==t._curTouchLayerId&&(t._curTouchLayerId=e.getID(),t._curTouchTime=(new Date).getTime())}),this.touchLayer.on(cc.Node.EventType.TOUCH_END,function(e){t._isEnd||e.getID()==t._curTouchLayerId&&(t._curTouchLayerId=-1,(new Date).getTime()-t._curTouchTime<1e3*t._doubleTimer&&(t._touchCount++,t.unschedule(t.checkDouble),t.schedule(t.checkDouble,t._doubleTimer),t._touchCount))}),this.touchLayer.on(cc.Node.EventType.TOUCH_CANCEL,function(){t._isEnd||t._curTouchLayerId==t._curTouchLayerId&&(t._curTouchLayerId=-1,t.schedule(t.checkDouble,t._doubleTimer))})},e.prototype.checkDouble=function(){this._touchCount=0},e.prototype.shakeAnimation=function(){var t=this;this._isStop||this._isCanShake&&(this._isCanShake=!1,this.node_glass_outLine.stopAllActions(),this.node_glass_outLine.setPosition(this.node_glass_outLine.startPos),this.node_glass_outLine.angle=0,cc.tween(this.node_glass_outLine).by(.1,{position:cc.v3(0,30)}).repeat(2,cc.tween().to(.05,{angle:-5}).to(.05,{angle:0}).to(.05,{angle:5}).to(.05,{angle:0})).by(.1,{position:cc.v3(0,-30)}).call(function(){t.node_glass_outLine.angle=0,t.node_glass_outLine.setPosition(t.node_glass_outLine.startPos),t._isCanShake=!0}).start(),this.node_glass_bg.stopAllActions(),this.node_glass_bg.setPosition(this.node_glass_bg.startPos),this.node_glass_bg.angle=0,cc.tween(this.node_glass_bg).by(.1,{position:cc.v3(0,30)}).repeat(2,cc.tween().to(.05,{angle:-5}).to(.05,{angle:0}).to(.05,{angle:5}).to(.05,{angle:0})).by(.1,{position:cc.v3(0,-30)}).call(function(){t.node_glass_bg.angle=0,t.node_glass_bg.setPosition(t.node_glass_bg.startPos)}).start())},e.prototype._initBtns=function(){var t=this;this.btns.forEach(function(e){var o=e.node,n=e.count,i=e.index;o.creatId=i,o.getChildByName("img").getComponent(cc.Sprite).spriteFrame=t.icons.children[i].getComponent(cc.Sprite).spriteFrame,o.curCount=n,t._totalCount+=n,t._updateBtnLbl(o),o.on(cc.Node.EventType.TOUCH_START,function(e){t._isEnd||-1==t._curTouchBtnId&&t.isCanTouch&&(t._curTouchBtnId=e.getID(),t._curTouchBtn=o,t.playClickSound(),t._touchBtn(),t._isGame||(t._isGame=!0,t.stopFingerAnimation()),o.stopAllActions(),o.setScale(1),cc.tween(o).to(.15,{scale:1.2}).to(.1,{scale:1}).start())}),o.on(cc.Node.EventType.TOUCH_END,function(e){t._isEnd||e.getID()==t._curTouchBtnId&&(t._curTouchBtnId=-1,t._curTouchBtn=null,t.unschedule(t.scheduleCreat))}),o.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t._isEnd||e.getID()==t._curTouchBtnId&&(t._curTouchBtnId=-1,t._curTouchBtn=null,t.unschedule(t.scheduleCreat))})})},e.prototype._updateBtnLbl=function(t){t.getChildByName("lbl").getComponent(cc.Label).string=t.curCount},e.prototype._touchBtn=function(){this._curTouchBtn&&(this._curTouchBtn.curCount<=0||(this.scheduleCreat(),this.schedule(this.scheduleCreat,.5)))},e.prototype.scheduleCreat=function(){this._isEnd||!this._curTouchBtn||this._curTouchBtn.curCount<=0?this.unschedule(this.scheduleCreat):(this._curTouchBtn.curCount--,this._createObj(this._curTouchBtn.creatId),this._updateBtnLbl(this._curTouchBtn))},e.prototype._createObj=function(t){var e=this;this.isCanTouch=!1,this.scheduleOnce(function(){e.isCanTouch=!0},.3),this._createCount++,this._createCount>=this._totalCount&&this.scheduleOnce(function(){e.checkIsFail()},2);var o=cc.instantiate(this.pres[t%this.pres.length]);o.active=!1,o.getComponent(cc.RigidBody).bullet=!0,o.getComponent(cc.PhysicsCircleCollider).friction=.1,o.getComponent(cc.Sprite).spriteFrame=this.icons.children[t].getComponent(cc.Sprite).spriteFrame,o.setParent(this.creatLayer);var n=this.creatPos.parent.convertToWorldSpaceAR(this.creatPos.position),i=this.creatLayer.convertToNodeSpaceAR(n),r=i.x+Math.floor(10*Math.random()-5);o.setPosition(cc.v2(r,i.y)),o.active=!0;var a=o.addComponent(u);a.onCollisionEnter=function(t,o){e._isEnd||(5!=t.tag||o.node._isEnd||(o.node._isEnd=!0,e._curInCount++,e.checkIsWin()),10==t.tag&&e.fail())},a.onCollisionExit=function(t,o){e._isEnd||5==t.tag&&1==o.node._isEnd&&(o.node._isEnd=!1,e._curInCount--)}},e.prototype.checkIsWin=function(){var t=this;this._curInCount>=this._totalCount&&(this._isStop=!0,this.scheduleOnce(function(){t._isEnd||t.suc()},3))},e.prototype.checkIsFail=function(){this._isStop||this._isEnd||this.fail()},e.prototype.suc=function(){this._isEnd||(this._isEnd=!0,this.playRight(null,1))},e.prototype.fail=function(){this._isEnd||(this._isEnd=!0,this.playError(null,1))},e.prototype.getIsOpen=function(){return 0},e.prototype.getAdResult=function(t){t&&t(0)},e.prototype._initHammer=function(){var t=this;this.node_hammer=this.dict.node_hammer,0==this.getIsOpen()?this.isOpenHarmmer=!1:this.isOpenHarmmer=!0,this.node_hammer&&(this.node_hammer.active=this.isOpenHarmmer,this.node_hammer.on(cc.Node.EventType.TOUCH_START,function(){t._isEnd||t.getAdResult(t.adReturnCallbacks.bind(t))}))},e.prototype.adReturnCallbacks=function(t){if(0==t){if(!this.node_hammer)return;this.isCanUseHammer=!0;var e=this.node_hammer.getChildByName("img");cc.tween(e).repeatForever(cc.tween().to(.2,{scale:1.2}).to(.1,{scale:1})).start()}},e.prototype._initOutLine=function(){var t=this;this.isOpenHarmmer&&this.node.on(cc.Node.EventType.TOUCH_START,function(e){if(!t._isEnd&&t.isCanUseHammer){var o=e.getLocation(),n=t.node_glass_outLine.getComponent(cc.PolygonCollider).points;if(n=n.map(function(e){return t.node_glass_outLine.convertToWorldSpaceAR(e)}),cc.Intersection.pointInPolygon(o,n)){t.isCanUseHammer=!1,t.node_hammer.getChildByName("lbl").active=!1,t.node_hammer.getChildByName("img_adIcon").active=!1;var i=t.node_hammer.getChildByName("img");i.stopAllActions(),i.setScale(1);var r=i.parent.convertToNodeSpaceAR(o);cc.tween(i).to(.5,{position:cc.v3(r)}).to(.2,{angle:-30}).to(.1,{angle:20}).call(function(){t.playRemoteSound(l.AUDIO_URL.BOBO,!1),t.node_hammer.active=!1,cc.game.emit("showHammerBtnVideo"),t.creatLayer.children.forEach(function(e){e.parent.convertToWorldSpaceAR(e.position).sub(cc.v3(o)).mag()<t._delRadius&&(e.destroy(),t.scheduleOnce(function(){t._curInCount++},0))})}).start()}}})},c([h([f])],e.prototype,"btns",void 0),c([h([cc.Node])],e.prototype,"pres",void 0),c([p],e)}(s.default);r.default=g,cc._RF.pop()},{}],"Level-22176":[function(t,e,o){"use strict";cc._RF.push(e,"e453ccVNEZDAYIMdVgrESfa","Level-22176");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l,d=i("BrainLevelBase"),p=i("Collision"),h=i("DrawPhysicsLineContact");(function(t){t[t.init=1]="init",t[t.waitTouch=2]="waitTouch",t[t.find=3]="find",t[t.checkWin=4]="checkWin",t[t.win=5]="win",t[t.lose=6]="lose",t[t.move=7]="move"})(s||(s={})),function(t){t[t.wall=1]="wall",t[t.door=2]="door",t[t.win=3]="win"}(l||(l={}));var u=cc._decorator,f=u.ccclass,g=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._state=s.init,e._ballNode=null,e._lineNode=null,e._lbNumber=null,e._doorNode=null,e._ballRigidBody=null,e._lineMaxLength=200,e._ballSpeed=1e3,e._curNum=2,e._showBallEndAniFlag=!1,e._levelData={"-22176":{num:2},"-22177":{num:12},"-22178":{num:2},"-22179":{num:12},"-22180":{num:2},"-22181":{num:12},"-22182":{num:2},"-22183":{num:12},"-22184":{num:2},"-22185":{num:12}},e._touchId=-1,e}return a(e,t),e.prototype.onLoad=function(){this.node.getChildByName("game").opacity=0,this.setState(s.init),t.prototype.onLoad.call(this),cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),cc.director.getPhysicsManager().enabled=!1,cc.director.getCollisionManager().enabled=!1,cc.director.getPhysicsManager().debugDrawFlags=0},e.prototype.onLevelAllAssetsLoaded=function(){this.node.getChildByName("game").opacity=255,this.init(),this.initTouchEvent(),this.setState(s.waitTouch)},e.prototype.setState=function(t){this._state=t},e.prototype.init=function(){this._ballNode=this.dict.ballNode,this._lineNode=this.dict.lineNode,this._lbNumber=this.dict.lbNumber.getComponent(cc.Label),this._doorNode=this.dict.doorNode,this._lineNode.opacity=0,this._ballRigidBody=this._ballNode.getComponent(cc.RigidBody);var t=this._ballNode.getComponent(cc.PhysicsCircleCollider);t.radius=10,t.apply(),this._ballNode.getComponent(h.default).onBeginContact=this.onBeginContact.bind(this),this._ballNode.getComponent(p.default).onCollisionEnter=this.onCollisionEnter.bind(this);var e=this._levelData[this.levelID];this._curNum=e.num,this._lbNumber.string=this._curNum.toString()},e.prototype.initTouchEvent=function(){var t=this.node;t.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.getJsonLength=function(t){var e=0;for(var o in t)e++;return e},e.prototype.onTouchStart=function(t){if(this._state==s.waitTouch&&-1==this._touchId){this._touchId=t.getID(),t.target;var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e);this._lineNode.opacity=255,this.setLine(e,o)}},e.prototype.setLine=function(t,e){var o=e.sub(cc.v2(this._ballNode.x,this._ballNode.y)),n=o.mag(),i=Math.atan2(o.y,o.x),r=cc.misc.radiansToDegrees(i);n>=this._lineMaxLength&&(n=this._lineMaxLength),this._lineNode.width=n,this._lineNode.angle=r,this._lineNode.position=this._ballNode.position,this._ballNode.angle=r;for(var a=this._ballNode.parent.convertToWorldSpaceAR(this._ballNode.position),c=cc.director.getPhysicsManager().rayCast(cc.v2(a.x,a.y),t,cc.RayCastType.All),s=0;s<c.length;s++){var d=c[s],p=d.collider;if(p.tag==l.door||p.tag==l.wall){var h=d.point,u=this.dict.positionNode,f=u.parent.convertToNodeSpaceAR(h);u.position=cc.v3(f);var g=u.position.sub(this._lineNode.position).mag();g>=this._lineMaxLength&&(g=this._lineMaxLength),this._lineNode.width=g;break}}},e.prototype.onTouchMove=function(t){if(this._state==s.waitTouch&&(-1==this._touchId||this._touchId==t.getID())){var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e);this.setLine(e,o),console.log("## \u7403\u89d2\u5ea6\uff1a",this._ballNode.angle)}},e.prototype.onTouchEnd=function(t){if(this._state==s.waitTouch&&(-1==this._touchId||this._touchId==t.getID())){t.target,t.getTouches();var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e).sub(cc.v2(this._ballNode.x,this._ballNode.y)),n=(o.mag(),Math.atan2(o.y,o.x));cc.misc.radiansToDegrees(n),this._ballRigidBody.linearVelocity=cc.v2(o.normalize().mul(this._ballSpeed)),this._lineNode.opacity=0,this._touchId=-1,this.setState(s.move),console.log("## \u7403\u53d1\u5c04\u89d2\u5ea6\uff1a",this._ballNode.angle)}},e.prototype.checkWin=function(){this.setState(s.checkWin),this.setState(s.waitTouch)},e.prototype.onBeginContact=function(t,e,o){var n=this;if(this.playClickSound(),this._curNum-=1,this._state==s.move)o.tag!=l.door?(0==this._curNum?this._doorNode.active=!1:this._curNum<0&&(this._doorNode.active=!0,this.setState(s.lose),this.scheduleOnce(function(){n.playError()},1.2)),this._lbNumber.string=this._curNum.toString()):(this.setState(s.lose),this.scheduleOnce(function(){n.playError()},1.2),this._ballRigidBody.linearVelocity=cc.v2(0,0),this._showBallEndAniFlag||(i=.15,cc.tween(this._ballNode).to(i,{opacity:0}).to(i,{opacity:255}).to(i,{opacity:0}).to(i,{opacity:255}).to(i,{opacity:0}).to(i,{opacity:255}).start()),this._showBallEndAniFlag=!0);else if(o.tag==l.door){if(this._ballRigidBody.linearVelocity=cc.v2(0,0),!this._showBallEndAniFlag){var i=.15;cc.tween(this._ballNode).to(i,{opacity:0}).to(i,{opacity:255}).to(i,{opacity:0}).to(i,{opacity:255}).to(i,{opacity:0}).to(i,{opacity:255}).start()}this._showBallEndAniFlag=!0}},e.prototype.onCollisionEnter=function(){this.setState(s.win),this.playRight()},c([f],e)}(d.default));r.default=g,cc._RF.pop()},{}],"Level-22217_Item":[function(t,e,o){"use strict";cc._RF.push(e,"0f23edFp3RE/qTRREN3K85D","Level-22217_Item");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMoving=!1,e.index=0,e.isFinish=!1,e.wPoints=[],e.endWpos=cc.v2(),e.startWpos=cc.v2(),e.dirVec=cc.v2(),e.targetNode=null,e.vec1=cc.v2(),e.vec2=cc.v2(),e.overLen=0,e.speed=400,e.isLoop=!0,e.anglePlus=0,e.isStop=!1,e}return r(e,t),e.prototype.init=function(t,e,o){this.wPoints.length=0,this.wPoints=t,this.index=e,o&&(this.speed=o),this.setConfig()},e.prototype.setConfig=function(){this.wPoints[this.index]&&this.startMove(!1)},e.prototype.startMove=function(t){var e=this.node.convertToWorldSpaceAR(cc.v2()),o=this.wPoints[this.index];if(this.isMoving){if(!t)return;this.endWpos=o}else this.endWpos=o;this.startWpos=e,this.dirVec=cc.v2(o.x-e.x,o.y-e.y),this.dirVec.normalizeSelf(),this.isMoving=!0},e.prototype.onUpdate=function(t){if(!this.isStop&&this.isMoving&&!this.isFinish){var e=t*this.speed,o=e*this.dirVec.x,n=e*this.dirVec.y,i=this.node.convertToWorldSpaceAR(cc.v2()),r=cc.v2(i.x+o,i.y+n),a=r.sub(this.startWpos),c=this.endWpos.sub(this.startWpos),s=this.length(c)-this.length(a);if(this.vec1=a,this.vec2=c,s<0)this.overLen=Math.abs(s),this.overPos();else if(0==s)this.isMoving=!1,this.endWpos=null;else{this.node.position=this.node.parent.convertToNodeSpaceAR(r);var l=r.sub(i);this.updateHandAngle(l)}}},e.prototype.update=function(t){this.isStop||(!this.isMoving&&this.index>=this.wPoints.length?(this.isFinish=!1,this.isLoop?this.index=0:(this.isStop=!0,this.runFinishCallback())):this.isMoving?this.isMoving&&this.targetNode&&this.checkCollider():(this.setConfig(),this.index++),this.onUpdate(t))},e.prototype.overPos=function(){var t=this.wPoints[this.index];if(t){this.vec2=t.sub(this.endWpos);var e=this.length(this.vec2)-this.overLen;e>=0?(this.vec2.normalizeSelf(),this.vec2.mulSelf(this.overLen),this.vec2=this.endWpos.add(this.vec2),this.node.position=this.node.parent.convertToNodeSpaceAR(this.vec2),this.isMoving=!1,this.endWpos=null):(this.index++,this.overLen=Math.abs(e),this.endWpos=t,this.overPos())}else this.node.position=this.node.parent.convertToNodeSpaceAR(this.endWpos),this.isMoving=!1,this.endWpos=null},e.prototype.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.prototype.updateHandAngle=function(t){if(t.mag()>2){var e=t.normalize(),o=this.node.scaleX<0?-1:1,n=cc.v2(e).signAngle(cc.v2(0,o));this.node.angle=-cc.misc.radiansToDegrees(n)+this.anglePlus}},e.prototype.stop=function(){this.isStop=!0},e.prototype.resume=function(){this.isStop=!1},e.prototype.runFinishCallback=function(){},e.prototype.checkCollider=function(){},a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],"Level-22217_animalRun_maps":[function(t,e){"use strict";cc._RF.push(e,"2e09awwB21FV6EieLBl30+C","Level-22217_animalRun_maps"),cc._RF.pop()},{}],"Level-22223":[function(t,e){"use strict";cc._RF.push(e,"9a53eXs7fBIOrza+AqI6x2X","Level-22223"),cc._RF.pop()},{}],"Level-22258_klotski":[function(t,e,o){"use strict";cc._RF.push(e,"d5f8cW53vZO35o1KGvukHbI","Level-22258_klotski");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},s=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},l=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var d,p,h,u,f=i("BrainLevelBase"),g=i("LevelUtil"),m=cc._decorator,y=m.ccclass,v=m.property;(function(t){t[t.none=0]="none",t[t.init=1]="init",t[t.touching=2]="touching",t[t.checkWin=3]="checkWin",t[t.over=4]="over"})(d||(d={})),function(t){t[t.horizontal=0]="horizontal",t[t.vertical=1]="vertical"}(p||(p={})),function(t){t[t.grid=0]="grid",t[t.wall=1]="wall",t[t.block=2]="block",t[t.player=3]="player",t[t.door=4]="door"}(h||(h={})),function(t){t[t.up=0]="up",t[t.down=1]="down",t[t.left=2]="left",t[t.right=3]="right"}(u||(u={}));var _=Symbol(),C=(Symbol(),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rows=6,e.cols=6,e.resultTime=180,e.stepNum=80,e._state=d.touching,e.gridLayer=null,e.itemLayer=null,e.effectLayer=null,e.pres=null,e.mapData=null,e.speed=1200,e.isDebug=!1,e.itemDataList={},e.gridSize=0,e.arrow=null,e.propBtnLayer=null,e.lblTime=null,e.labSteps=null,e.isClearItem=!1,e}return a(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.gridLayer=this.dict.gridLayer,this.itemLayer=this.dict.itemLayer,this.pres=this.dict.pres,this.pres.active=!1,this.effectLayer=this.dict.effectLayer,this.arrow=this.dict.arrow;var e=this.arrow.scaleX,o=e>0?1:-1,n=this.arrow.scaleY,i=n>0?1:-1;cc.tween(this.arrow).to(.5,{scaleX:o*Math.abs(e+.2),scaleY:i*Math.abs(n+.2)}).to(.5,{scaleX:o*Math.abs(e),scaleY:i*Math.abs(n)}).union().repeatForever().start(),this.gridLayer.active=!1,this.labSteps=this.dict.labSteps.getComponent(cc.Label),this.labSteps.string="\u5269\u4f59\u6b65\u6570\uff1a"+this.stepNum,this.propBtnLayer=this.dict.propBtnLayer,this.propBtnLayer&&(this.propBtnLayer.active=!1),this.dict.game.active=!1},e.prototype.onLevelReady=function(){this.init()},e.prototype.initEvent=function(){var t=this,e=cc.v2(),o=0,n=0,i=0,r=0,a=0,c=0,s=0,l=0,f=!1;this.itemLayer.children.forEach(function(m){g.default.touchEvent(m,{sFunc:function(){if(t.state==d.touching){if(t.isClearItem){var g=t.itemDataList[m.uuid];if(g.value==h.block)return f=!1,t.isClearItem=!1,m.active=!1,void g.bodys.forEach(function(e){t.mapData[e.x][e.y]=0})}f=!0,e=m.position,o=0,n=0,i=0,r=0,t.itemDataList[m.uuid].type==p.horizontal?(i=t.getGridNumber(m,u.left)*t.gridSize,r=t.getGridNumber(m,u.right)*t.gridSize,s=m.x-i,l=m.x+r):(o=t.getGridNumber(m,u.up)*t.gridSize,n=t.getGridNumber(m,u.down)*t.gridSize,a=m.y+o,c=m.y-n)}},mFunc:function(e){if(t.state==d.touching&&f){var o=e.getDeltaX(),n=e.getDeltaY(),i=o+m.x,r=n+m.y;t.itemDataList[m.uuid].type==p.horizontal?s<=i&&l>=i&&(m.x+=o):c<=r&&a>=r&&(m.y+=n)}},eFunc:function(){if(t.state==d.touching&&f){var o=t.itemDataList[m.uuid];if(o.type==p.horizontal){var n=m.x-e.x,i=Math.round(Math.abs(n)/t.gridSize),r=n>0?u.right:u.left,a=(n>0?1:-1)*i*t.gridSize+e.x,c=Math.abs(a)/t.speed;cc.tween(m).to(c,{x:a}).call(function(){var e=r==u.left?cc.v2(0,-1):cc.v2(0,1);e.mulSelf(i),o.bodys.forEach(function(e){t.mapData[e.x][e.y]=0});var n=!1;o.bodys.forEach(function(i){i.addSelf(e),t.mapData[i.x][i.y]=o.value,t.isBorder(i)&&(n=!0)}),cc.log("\u77eb\u6b63\u540e\u7684\u6570\u636e",t.mapData),n&&t.goOut(m,r)}).start()}else{var s=m.y-e.y,l=Math.round(Math.abs(s)/t.gridSize),h=s>0?u.up:u.down;a=(s>0?1:-1)*l*t.gridSize+e.y,c=Math.abs(a)/t.speed,cc.tween(m).to(c,{y:a}).call(function(){var e=h==u.up?cc.v2(-1,0):cc.v2(1,0);e.mulSelf(l),o.bodys.forEach(function(e){t.mapData[e.x][e.y]=0}),o.bodys.forEach(function(n){n.addSelf(e),t.mapData[n.x][n.y]=o.value}),cc.log("\u77eb\u6b63\u540e\u7684\u6570\u636e",t.mapData)}).start()}e.sub(m.position).mag()>t.gridSize/3&&(t.stepNum--,t.stepNum<=0&&(t.stepNum=0,t.fail(1)),t.labSteps.string="\u5269\u4f59\u6b65\u6570\uff1a"+t.stepNum)}}})})},e.prototype.getStartBody=function(t,e){var o=this.itemDataList[t.uuid],n=o.bodys.length;if(1==n)return o.bodys[0];var i=null;return o.first==e?i=o.bodys[0]:(o.first==u.up&&e==u.down||o.first==u.down&&e==u.up||o.first==u.left&&e==u.right||o.first==u.right&&e==u.left)&&(i=o.bodys[n-1]),i},e.prototype.init=function(){return s(this,void 0,void 0,function(){return l(this,function(){return this.initData(),this.initItemLayer(),this.initEvent(),this.initPropBtn(),this.dict.game.active=!0,[2]})})},e.prototype.initData=function(){var t=this;this.mapData=this.make2DArray(this.rows,this.cols,0);for(var e=0;e<this.mapData.length;e++)for(var o=0;o<this.mapData[e].length;o++)this.mapData[e][o]=this.isBorder(cc.v2(e,o))?1:0;var n=this.arrow.getBoundingBoxToWorld();this.gridLayer.children.forEach(function(e,o){if(e[_]=!0,e.getBoundingBoxToWorld().containsRect(n)){var i=Math.floor(o/t.cols),r=o%t.cols;t.mapData[i][r]=h.door}}),this.gridSize=this.gridLayer.children[0].width},e.prototype.initItemLayer=function(){for(var t=0;t<this.itemLayer.children.length;t++){var e=this.itemLayer.children[t],o="player"==e.name?h.player:h.block,n=new cc.Node;n.parent=e,n.position=cc.v2(),n.width=e.width*e.scale*.8,n.height=e.height*e.scale*.8;var i=n.getBoundingBoxToWorld(),r=new cc.Node;r.parent=e,r.position=cc.v2(),r.width=e.width*e.scale,r.height=e.height*e.scale,r.name="click";for(var a={type:p.horizontal,bodys:[],first:u.up,value:o},c=0;c<this.gridLayer.children.length;c++){var s=this.gridLayer.children[c];if(s[_]&&s.getBoundingBoxToWorld().intersects(i)){s[_]=!1;var l=Math.floor(c/this.cols),d=c%this.cols;this.mapData[l][d]=o,a.bodys.push(cc.v2(l,d))}}if(a.bodys){a.type=this.getTypeByAngle(e.angle);var f=a.bodys[0],g=a.bodys[a.bodys.length-1].sub(f);0==g.x?a.first=g.y>0?u.left:u.right:a.first=g.x>0?u.up:u.down}this.itemDataList[e.uuid]=a}},e.prototype.goOut=function(t,e){var o=this,n=this.getPixelOffset(e).mul(500),i=n.mag()/this.speed;cc.tween(t).by(i,{position:n}).call(function(){t.active=!1,o.checkIsWin()}).start()},e.prototype.make2DArray=function(t,e,o){void 0===o&&(o=0);for(var n=[],i=0;i<t;i++){n[i]=new Array(e);for(var r=0;r<e;r++)n[i][r]=o}return n},e.prototype.checkIsWin=function(){if(this.state!=d.over){for(var t=0;t<this.itemLayer.children.length;t++);this.state=d.checkWin,this.suc()}},e.prototype.suc=function(t){void 0===t&&(t=1),this.state!=d.over&&(this.state=d.over,this.playRight(null,t))},e.prototype.fail=function(t){var e=this;void 0===t&&(t=0),this.state!=d.over&&(this.state=d.over,this.scheduleOnce(function(){e.playError(null,1)},t))},e.prototype.onDisable=function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1,cc.director.getPhysicsManager().enabled=!1,cc.director.getPhysicsManager().debugDrawFlags=0,this.unscheduleAllCallbacks()},e.prototype.getGridNumber=function(t,e){var o=this.getStartBody(t,e);if(o){for(var n=this.getMapOffset(e),i=o.add(n),r=!0,a=0;r;)if(this.isOutOfRange(i))r=!1;else{var c=this.mapData[i.x][i.y];c==h.grid||c==h.door?(a++,i=i.add(n)):r=!1}return a}return 0},e.prototype.getMapOffset=function(t){var e=cc.v2();switch(t){case u.up:e=cc.v2(-1,0);break;case u.down:e=cc.v2(1,0);break;case u.left:e=cc.v2(0,-1);break;case u.right:e=cc.v2(0,1)}return e},e.prototype.getPixelOffset=function(t){var e=cc.v2();switch(t){case u.up:e=cc.v2(0,1);break;case u.down:e=cc.v2(0,-1);break;case u.left:e=cc.v2(-1,0);break;case u.right:e=cc.v2(1,0)}return e},e.prototype.getDirectionByVec=function(t){return u.up,Math.abs(t.x)>Math.abs(t.y)?t.x>0?u.right:u.left:t.y>0?u.up:u.down},e.prototype.getTypeByAngle=function(t){var e=p.horizontal;switch(t){case 0:case 180:e=p.vertical;break;case 90:case 270:e=p.horizontal}return e},e.prototype.isBorder=function(t){return 0==t.x||t.x==this.rows-1||0==t.y||t.y==this.cols-1},e.prototype.isOutOfRange=function(t){return!(t.x>=0&&t.x<this.rows&&t.y>=0&&t.y<this.cols)},e.prototype.initCountDown=function(){var t=this;this.lblTime.node.active=!0,this.resultTime>0&&(this.lblTime.node.opacity=255,this.schedule(function(){0!=t.lblTime.node.opacity&&(t.resultTime--,t.resultTime>0?t.lblTime.string="\u65f6\u95f4\uff1a"+t.resultTime:(t.lblTime.node.opacity=0,t.timeOver()))},1))},e.prototype.timeOver=function(){this.lblTime.node.parent.active=!1,this.fail(1)},e.prototype.initPropBtn=function(){var t=this,e=this.dict.btnClear;e&&g.default.onClickEvent(e,function(){e.stopAllActions(),e.scale=1,cc.tween(e).to(.1,{scale:1.2}).to(.1,{scale:1}).start(),t.func_clearItem()});var o=this.dict.btnAddStep;o&&g.default.onClickEvent(o,function(){o.stopAllActions(),o.scale=1,cc.tween(o).to(.1,{scale:1.2}).to(.1,{scale:1}).start(),t.func_addStep()})},e.prototype.func_addStep=function(){this.stepNum+=40,this.labSteps.string="\u5269\u4f59\u6b65\u6570\uff1a"+this.stepNum},e.prototype.func_clearItem=function(){this.isClearItem=!0},e.prototype.func_addTime=function(){this.isClearItem=!0},c([v({tooltip:"\u884c"})],e.prototype,"rows",void 0),c([v({tooltip:"\u5217"})],e.prototype,"cols",void 0),c([v({type:cc.Float,tooltip:"\u7ed3\u675f\u65f6\u95f4"})],e.prototype,"resultTime",void 0),c([v({type:cc.Float,tooltip:"\u6b65\u6570"})],e.prototype,"stepNum",void 0),c([y],e)}(f.default));r.default=C,cc._RF.pop()},{}],"Level-22281":[function(t,e,o){"use strict";cc._RF.push(e,"ac68bA0Tm9EiK/RV9abaDJ7","Level-22281");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("doubleFingerScaleCtl"),l=i("BrainLevelBase"),d=i("LevelUtil"),p=cc._decorator,h=p.ccclass,u=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._scaleOrMoveMapFlag=!1,e._touchShowNodeFlag=!1,e._touchList=[],e._lbTime=null,e._allTime=140,e._curTime=0,e._beginTimeFlag=!1,e._lbMinTime=null,e._wrongMinTime=5,e._isEnd=!1,e.findArr=[],e._curFindCounut=0,e.pres=null,e.pre_listItem=null,e.node_lists=[],e.node_iconSfs=null,e.allrole=[],e.allPart=[],e.isMove=!1,e._curTouchNode=null,e._curTouchId=-1,e.completedCount=0,e._curTouchNodeName=null,e._moveOldPos=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._initVars(),this._initOtherVars()},e.prototype.onAssetLoadedAllFinishHandle=function(){this.initList(),this.initTouchEvents()},e.prototype.initList=function(){this._touchList=this.levelJSON.json[this.levelID].touchList;for(var t=d.default.fisherYatesShuffle(this._touchList),e=0;e<t.length;e++)this.creatItem(t[e])},e.prototype.initTouchEvents=function(){var t=this,e=this.dict.hahaNode;e.active=!0;var o=0,n=0,i=!1;e.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation(),t._isEnd||-1==t._curTouchId&&(t._curTouchId=e.getID(),t.dict.img_face_27.active&&t.lockPv())}),e.on(cc.Node.EventType.TOUCH_MOVE,function(r){if(r.stopPropagation(),!t._isEnd&&t._curTouchId==r.getID()&&t.dict.img_face_27.active&&(r.getDelta().x<0&&(o+=r.getDelta().x),r.getDelta().y>0&&(n+=r.getDelta().y),o<-100||n>100)){if(i)return;i=!0,e.targetOff(t),t.dict.haha.active=!0,cc.tween(e).to(.5,{opacity:0}).call(function(){e.active=!1,t.checkPageWin(e.parent),t.resetPv()}).start()}}),e.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation(),t._isEnd||t._curTouchId==e.getID()&&t.dict.img_face_27.active&&(t._curTouchId=-1,o=0,n=0,t.resetPv())}),e.on(cc.Node.EventType.TOUCH_CANCEL,function(e){e.stopPropagation(),t._isEnd||t._curTouchId==e.getID()&&t.dict.img_face_27.active&&(t._curTouchId=-1,o=0,n=0,t.resetPv())})},e.prototype.resetPv=function(){this.pageView.node.on(cc.Node.EventType.TOUCH_START,this.pageView._onTouchBegan,this.pageView,!0),this.pageView.node.on(cc.Node.EventType.TOUCH_MOVE,this.pageView._onTouchMoved,this.pageView,!0),this.pageView.node.on(cc.Node.EventType.TOUCH_END,this.pageView._onTouchEnded,this.pageView,!0),this.pageView.node.on(cc.Node.EventType.TOUCH_CANCEL,this.pageView._onTouchCancelled,this.pageView,!0)},e.prototype.lockPv=function(){this.pageView.node.off(cc.Node.EventType.TOUCH_START,this.pageView._onTouchBegan,this.pageView,!0),this.pageView.node.off(cc.Node.EventType.TOUCH_MOVE,this.pageView._onTouchMoved,this.pageView,!0),this.pageView.node.off(cc.Node.EventType.TOUCH_END,this.pageView._onTouchEnded,this.pageView,!0),this.pageView.node.off(cc.Node.EventType.TOUCH_CANCEL,this.pageView._onTouchCancelled,this.pageView,!0)},e.prototype.update=function(e){t.prototype.update.call(this,e)},e.prototype.beginTime=function(){this._beginTimeFlag||(this._beginTimeFlag=!0,this.schedule(this.timeCallback,1))},e.prototype.timeCallback=function(){this._curTime+=1,this.setTime()},e.prototype.setTime=function(){var t=this._allTime-this._curTime;if(t<0&&(t=0),this._lbTime.string="\u65f6\u95f4\uff1a"+t,t<=3&&(this._lbTime.node.color=cc.Color.RED,this._lbTime.node.stopAllActions(),this._lbTime.node.scale=1,cc.tween(this._lbTime.node).to(.3,{scale:1.2}).to(.3,{scale:1}).start()),t<=0)return this.unscheduleAllCallbacks(),void(this._isEnd||(this._isEnd=!0,this.playError(null,1),this.showTipNode("\u65f6\u95f4\u5230\u4e86")))},e.prototype.showTipNode=function(t){this.dict.tipNode.active=!0,this.dict.tipNode.stopAllActions(),this.dict.tipNode.scale=1,this.dict.tipNode.opacity=255,this.dict.tipNode.getChildByName("lbTip").getComponent(cc.Label).string=t,cc.tween(this.dict.tipNode).delay(1).to(.3,{scale:0,opacity:0}).start()},e.prototype.showMinTime=function(t){var e=this,o=this._lbMinTime.node.parent.convertToNodeSpaceAR(t);this._curTime+=this._wrongMinTime,this._lbMinTime.node.opacity=255,this._lbMinTime.node.stopAllActions(),this._lbMinTime.node.setPosition(o),this.setTime(),cc.tween(this._lbMinTime.node).to(.6,{y:o.y+100}).call(function(){e._lbMinTime.node.opacity=0}).start()},e.prototype._initVars=function(){var t=this;this.pageView=this.dict.pageView.getComponent(cc.PageView),this.pres=this.dict.pres,this.pre_listItem=this.dict.pre_listItem,this.node_iconSfs=this.dict.iconSpriteNodes,this._lbTime=this.dict.lblTime.getComponent(cc.Label),this._lbTime.string="\u65f6\u95f4\uff1a"+this._allTime,this.node_lists.forEach(function(e){var o=e.getComponent(cc.ScrollView);e.on(cc.Node.EventType.TOUCH_START,function(o){if(!t._isEnd&&-1==t._curTouchId){t._curTouchId=o.getID();var n=o.getLocation();e.getChildByName("content").children.forEach(function(e){var o=e.getChildByName("img_Icon");o.getBoundingBoxToWorld().contains(n)&&(t._curTouchNode=o)})}}),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(!t._isEnd&&t._curTouchId==e.getID()&&t._curTouchNode){var n=e.getStartLocation();if(e.getLocation().y-n.y>10&&!t.isMove){o.enabled=!1,t.isMove=!0;var i=t._curTouchNode.parent.convertToNodeSpaceAR(e.getLocation());t._curTouchNode.setPosition(i)}t.isMove&&t._curTouchNode.setPosition(cc.v2(t._curTouchNode.position).add(e.getDelta()))}}),e.on(cc.Node.EventType.TOUCH_END,function(e){if(!t._isEnd&&t._curTouchId==e.getID())if(t._curTouchId=-1,o.enabled=!0,t.isMove=!1,t._curTouchNode){var n=t.checkIsCanSet(t._curTouchNode,t._curTouchNode.selfId);n?(cc.log("\u80fd\u653e\u4e0b"),t._curTouchNode.active=!0,t._curTouchNode.parent.destroy(),t.checkPageWin(n)):(cc.log("\u653e\u4e0d\u4e0b"),t._curTouchNode.setPosition(cc.v2(0,0))),t._curTouchNode=null}else cc.log("none")}),e.on(cc.Node.EventType.TOUCH_CANCEL,function(e){if(!t._isEnd&&t._curTouchId==e.getID())if(t._curTouchId=-1,o.enabled=!0,t.isMove=!1,t._curTouchNode){var n=t.checkIsCanSet(t._curTouchNode,t._curTouchNode.selfId);n?(cc.log("\u80fd\u653e\u4e0b"),t._curTouchNode.active=!1,t._curTouchNode.parent.destroy(),t.checkPageWin(n)):(cc.log("\u653e\u4e0d\u4e0b"),t._curTouchNode.setPosition(cc.v2(0,0))),t._curTouchNode=null}else cc.log("cancel none")})}),this.dict.pvContent.children.forEach(function(e){e.children.forEach(function(e){e.name.indexOf("img")>=0&&(e.active=!1,t.allPart.push(e)),e.name.indexOf("dialog")>=0&&(e.active=!1),e.name.indexOf("role")>=0&&t.allrole.push(e)})})},e.prototype._initOtherVars=function(){this.pres=this.dict.pres,this._curFindCounut=0,this._allTime=140},e.prototype.creatItem=function(t){cc.log("creatItem");var e=t.iconId,o=t.selfId,n=cc.instantiate(this.pre_listItem);n.setParent(this.node_lists[o-1].getChildByName("content"));var i=n.getChildByName("img_Icon");n.getChildByName("lbl_name").getComponent(cc.Label).string=t.name,i.getComponent(cc.Sprite).spriteFrame=this.node_iconSfs.getChildByName(e.toString()).getComponent(cc.Sprite).spriteFrame,n.selfId=e,i.selfId=e},e.prototype.checkIsCanSet=function(t,e){for(var o,n=0;n<this.allrole.length;n++){var i=this.allrole[n],r=i.getComponent(cc.PolygonCollider),a=this.getWorldPoints(r.node,r.points),c=this.getWorldPoints(t,[cc.v2(-t.width/2,-t.height/2),cc.v2(t.width/2,-t.height/2),cc.v2(t.width/2,t.height/2),cc.v2(-t.width/2,t.height/2)]);cc.Intersection.polygonPolygon(a,c)&&(o=i.parent)}if(!o)return null;this.beginTime();for(var s=!1,l=0;l<o.children.length;l++)if((d=o.children[l]).name.indexOf("face")>=0&&d.name.indexOf(e)<0&&!d.active)return null;for(l=0;l<o.childrenCount;l++){var d;(d=o.children[l]).name.indexOf(e)>=0&&!d.active&&(d.active=!0,s=!0)}return s?o:null},e.prototype.getWorldPoints=function(t,e){for(var o=[],n=0;n<e.length;n++){var i=e[n],r=t.convertToWorldSpaceAR(i);o.push(r)}return o},e.prototype.checkPageWin=function(t){for(var e=!0,o=0;o<t.childrenCount;o++){var n=t.children[o];if(n.name.indexOf("img")>=0&&!n.active){e=!1;break}}e&&("page4"!=t.name||this.dict.haha.active)&&(console.error("\u8fd8\u597d"),this.playRightOnce(this.dict.dg),this.lockPv(),this.pageWinAnim(t))},e.prototype.pageWinAnim=function(t){var e=this;this.scheduleOnce(function(){t.getChildByName("winIcon").active=!0;var o=0;switch(t.name){case"page0":e.playLevelSound("99");break;default:e.playLevelSound("98")}switch(t.name){case"page5":o=2}cc.tween(t.getChildByName("winIcon")).to(4.5,{scale:1.2}).delay(o).call(function(){e.checkWin()}).start()},1)},e.prototype.checkWin=function(){var t=this;if(this.completedCount++,this.completedCount>=this.dict.pvContent.childrenCount)this.scheduleOnce(function(){t.playRight()},.5);else{for(var e=-1,o=0;o<this.dict.pvContent.childrenCount;o++)for(var n=this.dict.pvContent.children[o],i=!0,r=0;r<n.childrenCount;r++){var a=n.children[r];if(a.name.indexOf("winIcon")>=0&&!a.active&&(i=!1),!i){var c=Number(n.name.substring(4,5));(e<0||c<=e)&&(e=c)}}this.pageView.setCurrentPageIndex(e),this.resetPv()}},e.prototype.onTouchStart=function(t){if(!this._isEnd&&!this._curTouchNodeName){var e=t.target;this._curTouchNodeName=e.name,this._moveOldPos=cc.v2(e.position)}},e.prototype.onTouchMove=function(t){if(!this._isEnd){var e=t.target;if(!(this._curTouchNodeName&&this._curTouchNodeName!=e.name||e.isAni)){var o=t.getDelta();e.position,e.x+=o.x/e.parent.scaleX,e.y+=o.y/e.parent.scaleY}}},e.prototype.onTouchEnd=function(t){var e=t.target;this._curTouchNodeName&&this._curTouchNodeName!=e.name||this.dict.imgParentNode.getComponent(s.doubleFingerScaleCtl).stopMapFollowMove(e)},c([u([cc.Node])],e.prototype,"node_lists",void 0),c([h],e)}(l.default);r.default=f,cc._RF.pop()},{}],"Level-22339":[function(t,e){"use strict";cc._RF.push(e,"33a1e+vJBBBgqWVwTK4qjtb","Level-22339"),cc._RF.pop()},{}],LevelBase:[function(t,e,o){"use strict";cc._RF.push(e,"f983dXFY1FLWY6XRZ6VnPtV","LevelBase");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("zqddn_level_baseui"),d=cc._decorator,p=d.ccclass,h=d.property;(function(t){t[t.Init=0]="Init",t[t.Over=1]="Over"})(s||(s={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rightAudio=null,e.errorAudio=null,e.clickAudio=null,e.starAudio=null,e.xiuAudio=null,e.right=null,e.error=null,e.currentState=s.Init,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.right=this.dict.right,this.error=this.dict.error,this.right.active=!1,this.error.active=!1},e.prototype.suc=function(t,e){var o=this;if(void 0===t&&(t=.2),this.currentState!=s.Over){if(this.currentState=s.Over,e){var n=e.parent.convertToWorldSpaceAR(e.position),i=this.right.parent.convertToNodeSpaceAR(n);this.right.setPosition(i)}this.scheduleOnce(function(){o.right.active=!0,o.right.scale=0,cc.tween(o.right).delay(.2).call(function(){cc.game.emit("game_success1"),console.log("\u8fd9\u91cc\u5417\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f02"),cc.audioEngine.playEffect(o.rightAudio,!1)}).to(.3,{scale:1},{easing:cc.easing.expoOu}).delay(1).call(function(){cc.game.emit("game_success2")}).start()},t)}},e.prototype.fail=function(t,e,o,n){if(void 0===e&&(e=0),void 0===o&&(o=!1),void 0===n&&(n=0),this.currentState!=s.Over){if(this.currentState=s.Over,this.error.active=!0,this.error.scale=0,this.error.stopAllActions(),cc.audioEngine.playEffect(this.errorAudio,!1),cc.tween(this.error).to(.3,{scale:1}).delay(e).to(.3,{scale:0}).start(),t){var i=cc.v2();i=t instanceof cc.Event.EventTouch?t.getLocation():t.parent.convertToWorldSpaceAR(t.position);var r=this.error.parent.convertToNodeSpaceAR(i);this.error.setPosition(r)}o&&(this.currentState=s.Over,this.scheduleOnce(function(){cc.game.emit("onRestartBtn")},e))}},e.prototype.mag=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position),n=e.parent.convertToWorldSpaceAR(e.position);return o.sub(n).mag()},e.prototype.intersects=function(t,e){return t.getBoundingBoxToWorld().intersects(e.getBoundingBoxToWorld())},e.prototype.getWPosArr=function(t){for(var e=t.points,o=[],n=0;n<e.length;n++){var i=cc.v2(e[n].x+t.offset.x,e[n].y+t.offset.y),r=t.node.convertToWorldSpaceAR(i);o.push(r)}return o},e.prototype.playClickAudio=function(){cc.audioEngine.playEffect(this.clickAudio,!1)},e.prototype.playXiuAudio=function(){cc.audioEngine.playEffect(this.xiuAudio,!1)},e.prototype.restart=function(){cc.game.emit("onRestartBtn")},c([h({type:cc.AudioClip})],e.prototype,"rightAudio",void 0),c([h({type:cc.AudioClip})],e.prototype,"errorAudio",void 0),c([h({type:cc.AudioClip})],e.prototype,"clickAudio",void 0),c([h({type:cc.AudioClip})],e.prototype,"starAudio",void 0),c([h({type:cc.AudioClip})],e.prototype,"xiuAudio",void 0),c([p],e)}(l.default);r.default=u,cc._RF.pop()},{}],LevelConstant:[function(t,e,o){"use strict";cc._RF.push(e,"10b6fsQhudHR5IhFZ79Zwh8","LevelConstant");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.LEVEL_EVENT=n.FONT_URL=n.AUDIO_URL=n.ASSET_LOCAL_BUNDLE=n.domain_local=n.domain=void 0,n.domain="https://cdn.ououvip.com/games/screw/wb_webview/brain_level_asset_depository/",n.domain_local="",n.ASSET_LOCAL_BUNDLE="",n.AUDIO_URL={CLICK:"zqddn_zhb_click",RIGHT:"zqddn_zhb_right",ERROR:"zqddn_zhb_error",BOBO:"bobo",HANDCLAP:"",HIT:"",FIGHT:"",BALL_COLLIDE:"",PULLDOWN_WOOD:"",XIU:"",SUC:"",STAR:"",MIX:"",DANGER:""},n.FONT_URL={TX:"font/ttzhuncuyuanja.ttf"},n.LEVEL_EVENT={GAME_HIDEBG:"game_hidebg",GAME_SHOWBG:"game_showbg",GAME_CHANGEBG:"game_changebg",REWARDVIDEO:"rewardVideo",WZZC_OPEN_INPUTBOX:"wzzc_open_inputbox"},cc._RF.pop()},{}],LevelSelectItem:[function(t,e,o){"use strict";cc._RF.push(e,"466fbW6yrRKyI46Ig0klIh0","LevelSelectItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("SceneConst"),d=i("UserConst"),p=i("PlatformManager"),h=i("SceneManager"),u=i("UserManager"),f=cc._decorator,g=f.ccclass,m=f.property;(function(t){t[t.Normal=0]="Normal",t[t.Finish=1]="Finish",t[t.Lock=2]="Lock"})(s||(s={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pass=null,e.level=null,e.new=null,e.lock=null,e.videoIcon=null,e.param=null,e.state=null,e.starAmount=0,e}return a(e,t),e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){var t=this.param.index+1;this.new.active=!1,this.lock.active=!1,this.pass.active=!1,this.videoIcon.active=!1,this.level.string=t+"",-1!=p.Platform.getConfig().flag.indexOf("tt")?-1!=this.param.currentAlreadyPlay.indexOf(t)?(this.pass.active=!0,this.level.node.active=!0):-1!=this.param.currentAlreadyUnlock.indexOf(t)?(this.new.active=!0,this.level.node.active=!0):(this.lock.active=!0,this.videoIcon.active=!0):t==this.param.currentLevel?(this.new.active=!0,this.level.node.active=!0):t>this.param.currentLevel?this.lock.active=!0:(this.pass.active=!0,this.level.node.active=!0)},e.prototype.clickEnter=function(){var t=this;this.lock.active?this.videoIcon.active&&p.Platform.showRewardAds(function(e){if(0==e){cc.game.emit("gamelog","rewarde_btn012"),u.User.setTempData(d.TempData.CURRENT_LEVEL,t.param.index+1);var o=u.User.getTempData(d.TempData.CURRENT_MODE),n=u.User.get(d.UserData.ALREADY_UNLOCK);-1==n[o].indexOf(t.param.index+1)&&n[o].push(t.param.index+1),u.User.set(d.UserData.ALREADY_UNLOCK,n);var i=t.param.index+1,r=u.User.get(d.UserData.LEVEL_LIST);i>r[o]&&(r[o]=i,u.User.set(d.UserData.LEVEL_LIST,r)),h.Scene.loadScene(l.SceneConst.GAME)}}):(u.User.setTempData(d.TempData.CURRENT_LEVEL,this.param.index+1),h.Scene.loadScene(l.SceneConst.GAME))},e.state=s,c([m(cc.Node)],e.prototype,"pass",void 0),c([m(cc.Label)],e.prototype,"level",void 0),c([m(cc.Node)],e.prototype,"new",void 0),c([m(cc.Node)],e.prototype,"lock",void 0),c([m(cc.Node)],e.prototype,"videoIcon",void 0),c([g],e)}(cc.Component);r.default=y,cc._RF.pop()},{}],LevelSelect:[function(t,e,o){"use strict";cc._RF.push(e,"c7db1FPZVBGSZBHiKGhYuSS","LevelSelect");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("RecycleScroll"),d=i("AudioConst"),p=i("EventConst"),h=i("PlatformConst"),u=i("SceneConst"),f=i("UserConst"),g=i("AudioManager"),m=i("EventManager"),y=i("PlatformManager"),v=i("ResManager"),_=i("SceneManager"),C=i("UserManager"),w=i("LevelSelectItem"),P=i("ConfigUtils"),b=i("XMADUtils"),T=i("VIVOADUtils"),S=cc._decorator,A=S.ccclass,N=S.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e._data=null,e.itemsData=[],e.childrenLength=6,e.currentUnlockLevel=1,e.currentAlreadyPlay=[],e.currentAlreadyUnlock=[],e.isLoadingScene=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initView()},e.prototype.onEnable=function(){m.Event.on(p.default.CLICK_BACK,this.clickBack,this),y.Platform.is(h.EPlatform.XIAOMI_ANDROID)?b.XMAD.showBannerFeed():y.Platform.is(h.EPlatform.VIVO)&&T.VIVOAD.showCustomAd_1()},e.prototype.onDisable=function(){m.Event.off(p.default.CLICK_BACK,this.clickBack,this),y.Platform.is(h.EPlatform.XIAOMI_ANDROID)&&(y.Platform.removeBannerFeed(),y.Platform.hideBanner()),y.Platform.hideCustomAd(),y.Platform.hideCustomAd_1(),y.Platform.hideCustomAd_2()},e.prototype.initView=function(){var t=this,e=C.User.getTempData(f.TempData.CURRENT_MODE),o=C.User.get(f.UserData.LEVEL_LIST),n=C.User.get(f.UserData.ALREADY_PLAY),i=C.User.get(f.UserData.ALREADY_UNLOCK),r=1,a=1;o[e]&&(r=o[e],this.currentUnlockLevel=r,this.currentAlreadyPlay=n[e],this.currentAlreadyUnlock=i[e]),cc.resources.load("texture/banner/"+e,function(e,o){if(e)return console.log(e);t.dict.icon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)}),P.ConfigUtils.getDataByID(e,function(e){console.log("res - ",e),a=e.amount,r>=a&&(r=a),t.dict.name.getComponent(cc.Label).string=e.themeName,t.dict.level.getComponent(cc.Label).string=r+"/"+a,t.scroll.onItemRender=t.onItemRender.bind(t),t.scroll.onItemClicked=t.onItemClicked.bind(t),t.scroll.numItems=a}),v.Res.load("prefab/item/TopBar").then(function(e){console.log("\u6d4b\u8bd5\u52a0\u8f7d");var o=cc.instantiate(e);t.node.addChild(o)}),g.Audio.playMusic(d.AudioConst.BGM_MAIN)},e.prototype.onItemRender=function(t,e){var o=e.getComponent(w.default),n=(w.default.state.Normal,{index:t,currentLevel:this.currentUnlockLevel,currentAlreadyPlay:this.currentAlreadyPlay,currentAlreadyUnlock:this.currentAlreadyUnlock});o.setData(n)},e.prototype.onItemClicked=function(){},e.prototype.clickBack=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn008"),_.Scene.loadScene(u.SceneConst.MAIN))},c([N(l.default)],e.prototype,"scroll",void 0),c([A],e)}(s.default);r.default=B,cc._RF.pop()},{}],LevelUtils:[function(t,e,o){"use strict";cc._RF.push(e,"217d1kPV+tBrp6jPSQkh/Se","LevelUtils");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.getRandomInt=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.floor(Math.random()*(e-t+1)+t)},t.getRandomFloat=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.random()*(e-t+1)+t},t.getRandomValueInArray=function(t){return t[Math.floor(Math.random()*t.length)]},t.getTwoPosAngle=function(t,e){return Math.atan((e.y-t.y)/(e.x-t.x))},t.getTwoPosDistance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.getAngleByTwoPoint=function(t,e){var o=e.sub(t).normalize();return o.equals(cc.v2(0,0))?0:o.signAngle(cc.v2(1,0))/Math.PI*180+90},t.convertAngleToRadian=function(t){return t*Math.PI/180},t.convertRadianToAngle=function(t){return t/(Math.PI/180)},t.isHex=function(t){return/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t)},t.convertHexToRGBA=function(t){return this.isHex(t)?{r:parseInt(t.substr(1,2),16)||0,g:parseInt(t.substr(3,2),16)||0,b:parseInt(t.substr(5,2),16)||0,a:parseInt(t.substr(7,2),16)||255}:null},t.convertRGBAToHex=function(t){var e=(256|t.r).toString(16).slice(1),o=(256|t.g).toString(16).slice(1),n=(256|t.b).toString(16).slice(1);return null==t.a?("#"+e+o+n).toUpperCase():("#"+e+o+n+(256|t.a).toString(16).slice(1)).toUpperCase()},t.prototype.copyAny=function(t){return JSON.parse(JSON.stringify(t))},t.shuffle=function(t){for(var e=t.length;e;){var o=Math.floor(Math.random()*e--),n=t[e];t[e]=t[o],t[o]=n}return t},t}();n.default=i,cc._RF.pop()},{}],LevelUtil:[function(t,e,o){"use strict";cc._RF.push(e,"3415doaFZ1BJ6EMUzqMmFQS","LevelUtil");var n=o,i=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=(r.property,function(){function t(){}return t.log=function(t,e){this.isShowLog&&(e?cc.log("%c "+t+" %c "+e+" ","background: #35495E;padding: 1px;border-radius: 2px 0 0 2px;color: #fff;","background: #409EFF;padding: 1px;border-radius: 0 2px 2px 0;color: #fff;"):cc.log("%c "+t+" ","background: #409EFF;padding: 1px;border-radius: 0 2px 2px 0;color: #fff;"))},t.setProjectBg=function(t){var e;void 0===t&&(t=cc.Color.GRAY);for(var o=0;o<cc.Camera.cameras.length;o++){var n=cc.Camera.cameras[o];"Main Camera"==n.node.name&&(e=n)}if(e){var i=e.node.parent.getChildByName("Sprite Background");i&&(cc.log("\u66f4\u6539\u9879\u76ee\u80cc\u666f\u56fe \u6d4b\u8bd5\u78b0\u649e"),i.color=t)}},t.touchEvent=function(t,e){var o={start:function(t){e.sFunc&&e.sFunc(t)},move:function(t){e.mFunc&&e.mFunc(t)},end:function(t){e.eFunc&&e.eFunc(t)}};e.sFunc&&t.on(cc.Node.EventType.TOUCH_START,o.start,this),e.mFunc&&t.on(cc.Node.EventType.TOUCH_MOVE,o.move,this),e.eFunc&&(t.on(cc.Node.EventType.TOUCH_END,o.end,this),t.on(cc.Node.EventType.TOUCH_CANCEL,o.end,this)),this.touchList[t.uuid]={target:t,func:o}},t.clearEvent=function(t,e){if(void 0===e&&(e=!1),e)for(var o=0,n=Object.entries(this.touchList);o<n.length;o++){var i=n[o],r=i[0],a=(i[1],this.touchList[r]),c=a.func,s=a.target;s.off(cc.Node.EventType.TOUCH_START,c.start,this),s.off(cc.Node.EventType.TOUCH_MOVE,c.move,this),s.off(cc.Node.EventType.TOUCH_END,c.end,this),s.off(cc.Node.EventType.TOUCH_CANCEL,c.end,this),delete this.touchList[r]}else{if(!t)return void cc.log("[LevelUtil.clearEvent] target\u4e3a\u7a7a");this.touchList[t.uuid]&&(c=this.touchList[t.uuid].func,t.off(cc.Node.EventType.TOUCH_START,c.start,this),t.off(cc.Node.EventType.TOUCH_MOVE,c.move,this),t.off(cc.Node.EventType.TOUCH_END,c.end,this),t.off(cc.Node.EventType.TOUCH_CANCEL,c.end,this),delete this.touchList[t.uuid])}},t.onClickEvent=function(t,e,o){void 0===o&&(o=!0);var n={start:function(){},move:function(){},end:function(){}};o?(n.start=function(t){e&&e(t)},t.on(cc.Node.EventType.TOUCH_START,n.start,this)):(n.end=function(t){e&&e(t)},t.on(cc.Node.EventType.TOUCH_END,n.end,this)),this.touchList[t.uuid]={target:t,func:n}},t.setRigidBodyType=function(t,e,o){if(void 0===o&&(o=!1),t){var n=null;n=t instanceof cc.Node?t.getComponent(cc.RigidBody):t,e.scheduleOnce(function(){n.type=o?cc.RigidBodyType.Static:cc.RigidBodyType.Dynamic})}},t.removePhysics=function(t,e){e.scheduleOnce(function(){t.removeComponent(cc.PhysicsCollider),t.removeComponent(cc.RigidBody)})},t.playSpineCallBack=function(t,e,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=null),t){var i=t instanceof sp.Skeleton?t:t.getComponent(sp.Skeleton);i&&(i.setAnimation(0,e,o),i.setCompleteListener(function(t){t.animation.name==e&&n&&n()}))}},t.convertPosition=function(t,e){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO))},t.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},t.getObj=function(t,e){var o=null,n=this.poolMap[t];return(o=n&&n.size()?n.get():cc.instantiate(e)).active=!0,o},t.putObj=function(t,e){e.active=!1;var o=this.poolMap[t];if(o)o.put(e);else{var n=new cc.NodePool;this.poolMap[t]=n,n.put(e)}},t.clearObj=function(){this.poolMap.clear},t.loadByFrame=function(t,e,o,n){var i=0;(function r(){for(var a=0;a<o;a++)e&&e(i++);i<n&&t.scheduleOnce(function(){return r()})})()},t.setChildrenActive=function(t,e){t&&t.children.forEach(function(t,o){t.active=e==o})},t.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var o=0,n=t.length;o<n;o++)e[o]=this.deepCopy(t[o]);return e}if(t instanceof Object){for(var i in e={},t)t.hasOwnProperty(i)&&(e[i]=this.deepCopy(t[i]));return e}console.warn("\u4e0d\u652f\u6301\u7684\u7c7b\u578b\uff1a"+e)},t.getRandomInt=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.floor(Math.random()*(e-t)+t)},t.getAngle=function(t,e){return Math.atan((e.y-t.y)/(e.x-t.x))},t.getDistance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.angleToRadian=function(t){return t*Math.PI/180},t.addSafely=function(t,e){var o=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=Math.pow(10,Math.max(o,n));return(t*i+e*i)/i},t.getRandomValueInArray=function(t){return t[Math.floor(Math.random()*t.length)]},t.copyArray=function(t){for(var e=[],o=0;o<t.length;o++)e.push(t[o]);return e},t.copy2DArray=function(t){for(var e=[],o=0;o<t.length;o++)e.push(t[o].concat());return e},t.fisherYatesShuffle=function(t){for(var e=t.length;e;){var o=Math.floor(Math.random()*e--),n=t[e];t[e]=t[o],t[o]=n}return t},t.isHex=function(t){return/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t)},t.hexToRgba=function(t){return this.isHex(t)?{r:parseInt(t.substr(1,2),16)||0,g:parseInt(t.substr(3,2),16)||0,b:parseInt(t.substr(5,2),16)||0,a:parseInt(t.substr(7,2),16)||255}:null},t.rgbaToHex=function(t){var e=(256|t.r).toString(16).slice(1),o=(256|t.g).toString(16).slice(1),n=(256|t.b).toString(16).slice(1);return null==t.a?("#"+e+o+n).toUpperCase():("#"+e+o+n+(256|t.a).toString(16).slice(1)).toUpperCase()},t.createCircleData=function(t,e,o){void 0===o&&(o=60);for(var n=[],i=360,r=0,a=0;a<o;a++){r=(i-=360/o)*Math.PI/180;var c=t*Math.sin(r)+e.x,s=t*Math.cos(r)+e.y;n.push(cc.v2(c,s))}return n},t.getWorldPointsByPolygonComp=function(t){var e=t.getComponent(cc.PolygonCollider);e||(e=t.getComponent(cc.PhysicsPolygonCollider));var o=[],n=[];if(e){o=e.points;var i=e.offset;o.forEach(function(e){var o=cc.v2(e.x+i.x,e.y+i.y);n.push(t.convertToWorldSpaceAR(o))})}return n},t.getAreaByPoints=function(t){for(var e=t.length,o=0,n=0,i=0;i<e-1;++i)o+=t[i].x*t[i+1].y,n+=t[i+1].x*t[i].y;return.5*((o+=t[e-1].x*t[0].y)-(n+t[0].x*t[e-1].y))},t.optimizePoints=function(t){for(var e=[],o=0;o<t.length;o++){var n=t[o],i=Math.floor(1*n.x)/1,r=Math.floor(1*n.y)/1;e.push(cc.v2(i,r))}return e},t.isShowLog=!0,t.touchList={},t.poolMap={},i([a],t)}());n.default=c,cc._RF.pop()},{}],LimitRepeat:[function(t,e,o){"use strict";cc._RF.push(e,"67bfbM5sWxPB75KF6nsc/hw","LimitRepeat");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.LimitRepeat=void 0,n.LimitRepeat=function(t){return void 0===t&&(t=.2),function(e,o,n){var i=n.value,r=!1;n.value=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(!r)return r=!0,setTimeout(function(){r=!1},1e3*t),i.apply(this,e),n;console.log("isLocking")}}},cc._RF.pop()},{}],LimitWelfare:[function(t,e,o){"use strict";cc._RF.push(e,"c2580nmbydEqrWYU1DMYQGa","LimitWelfare");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("PopupConst"),h=i("UserConst"),u=i("EventManager"),f=i("PlatformManager"),g=i("PopupManager"),m=i("TipManager"),y=i("UserManager"),v=i("OPPOAndroidAdUtils"),_=i("OPPOMiniADUtils"),C=i("XMADUtils"),w=i("ShuShuConst"),P=cc._decorator,b=P.ccclass,T=(P.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("yesBtn",this.yesBtn,this),this.initView()},e.prototype.initView=function(){var t=y.User.get(h.UserData.EnterSidebar)||0;this.dict.lock.active=1!=t},e.prototype.onEnable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?C.XMAD.showBannerFeed():f.Platform.is(d.EPlatform.OPPO_ANDROID)?v.OPPOAndroidAd.showLargeFeed():f.Platform.is(d.EPlatform.OPPO)?_.OPPOMiniAD.showLargeFeed():f.Platform.showBanner(),u.Event.on(l.default.EnterSidebar,this.initView,this)},e.prototype.onDisable=function(){f.Platform.is(d.EPlatform.OPPO_ANDROID)&&v.OPPOAndroidAd.removeLargePicFeed(),f.Platform.hideBanner(),f.Platform.hideNativeAds(),f.Platform.hideCustomAd1(),f.Platform.hideCustomAd2(),f.Platform.hideCustomAd_1(),f.Platform.hideCustomAd_2(),u.Event.off(l.default.EnterSidebar,this.initView,this)},e.prototype.yesBtn=function(){if(cc.game.emit("gamelog_Thinking",w.ShuShuConst.btn,{id:"010"}),this.dict.lock.active)m.Tip.show("\u8bf7\u4ece\u4fa7\u8fb9\u680f\u8fdb\u5165\u6e38\u620f");else{y.User.set(h.UserData.EnterSidebar,2);var t=y.User.get(h.UserData.getLockSkinList);t[0].includes(13)||(t[0].push(13),cc.game.emit("gamelog_Thinking",w.ShuShuConst.Skin_unlock,{mode:0,id:13})),y.User.set(h.UserData.getLockSkinList,t),y.User.setTempData("chooseSkinPage",0),y.User.setTempData("chooseSkin",14),g.Popup.show(p.PopupConst.GetSkin),u.Event.emit(l.default.hideLimitWelfareBtn),cc.game.emit("gamelog_Thinking","Sidebar_Reward",{state:"collect"}),g.Popup.hide()}},e.prototype.noBtn=function(){g.Popup.hide()},c([b],e)}(s.default));r.default=T,cc._RF.pop()},{}],LiquidBox2d:[function(t,e,o){"use strict";cc._RF.push(e,"d82a9WkaUpJ0qUl5V0S6WKh","LiquidBox2d");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l,d,p=i("zqddn_level_base"),h=i("zqddn_level_baseui"),u=cc._decorator,f=u.ccclass,g=u.property,m=cc.PhysicsManager.PTM_RATIO,y=cc.gfx;(function(t){t[t.solidParticleGroup=0]="solidParticleGroup",t[t.rigidParticleGroup=1]="rigidParticleGroup"})(l||(l={})),function(t){t[t.elasticParticle=0]="elasticParticle",t[t.springParticle=1]="springParticle",t[t.tensileParticle=2]="tensileParticle",t[t.viscousParticle=3]="viscousParticle"}(d||(d={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.meshRenderer=null,e.spriteFrame=null,e.groupFlags=l.rigidParticleGroup,e.flags=d.elasticParticle,e.linearVelocity=cc.v2(50,-10),e.elasticStrength=1,e.gravityScale=1,e.good=null,e.warning=null,e.isEnd=!1,e.groupFlagsArr=[b2.ParticleGroupFlag.b2_solidParticleGroup,b2.ParticleGroupFlag.b2_rigidParticleGroup],e.flagsArr=[b2.ParticleFlag.b2_elasticParticle,b2.ParticleGroupFlag.b2_springParticle,b2.ParticleFlag.b2_tensileParticle,b2.ParticleGroupFlag.b2_viscousParticle],e.isInit=!1,e.contactLength=0,e.canCheck=!1,e.touchBad=!1,e}return a(e,t),e.prototype.onLoad=function(){var e=this;cc.log("onload"),t.prototype.onLoad.call(this),this.good=this.dict.good,this.warning=this.dict.warning,this.meshRenderer.node.children[0]&&(this.meshRenderer.node.children[0].active=!1),this.initEvent(),cc.director.getPhysicsManager().enabled=!0,cc.tween(this.warning).to(.1,{opacity:100}).to(.1,{opacity:255}).to(.1,{opacity:100}).to(.1,{opacity:255}).call(function(){e.warning.opacity=0,e.setMove()}).start()},e.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onTouchStart=function(){this.isEnd},e.prototype.onTouchMove=function(t){var e=t.getPreviousLocation(),o=t.getLocation().x-e.x;this.good.x+=2*o,this.good.x<=-260&&(this.good.x=-260),this.good.x>=260&&(this.good.x=260)},e.prototype.onTouchEnd=function(){this.isEnd},e.prototype.setMove=function(){var t=this.spriteFrame;if(t){var e=t.getTexture();e&&e.loaded?this.onSpriteFrameLoaded():t.once("load",this.onSpriteFrameLoaded,this)}s.SetGravityScale(this.gravityScale),this.isInit=!0},e.prototype.onSpriteFrameLoaded=function(){var t=this.spriteFrame.getTexture();this.meshRenderer.node.width=t.width,this.meshRenderer.node.height=t.height;var e=cc.director.getPhysicsManager()._world,o=new b2.ParticleSystemDef;o.radius=2/m,o.dampingStrength=1,o.elasticStrength=this.elasticStrength,(s=e.CreateParticleSystem(o)).SetGravityScale(this.gravityScale);var n=new b2.PolygonShape,i=new b2.ParticleGroupDef;n.SetAsBox(this.meshRenderer.node.width/2/m,this.meshRenderer.node.height/2/m),i.flags=this.flagsArr[this.flags],i.groupFlags=this.groupFlagsArr[this.groupFlags];var r=this.meshRenderer.node.convertToWorldSpaceAR(cc.Vec2.ZERO).divSelf(m);i.position.Set(r.x,r.y),i.linearVelocity=cc.v2(this.linearVelocity),i.angularVelocity=Math.random()-.5,i.shape=n,s.CreateParticleGroup(i);var a=s.GetParticleCount(),c=s.GetPositionBuffer(),l=new cc.Mesh;l.init(new y.VertexFormat([{name:y.ATTR_POSITION,type:y.ATTR_TYPE_FLOAT32,num:2},{name:y.ATTR_UV0,type:y.ATTR_TYPE_FLOAT32,num:2}]),a,!0);var d=this.meshRenderer.getMaterial(0),p=this.spriteFrame.uv,h=p[0],u=p[6],f=p[3],g=p[5];d.setProperty("texture",t),d.setProperty("u_pointSize",4);for(var v=[],_=[],C=[],w=0;w<a;++w){var P=c[w].x*m,b=c[w].y*m,T=this.meshRenderer.node.convertToNodeSpaceAR(cc.v2(P,b));v.push(T);var S=this._lerp(h,u,(T.x+t.width/2)/t.width),A=this._lerp(f,g,(T.y+t.height/2)/t.height);C.push(cc.v2(S,A));var N=w;_.push(N)}l.setVertices(y.ATTR_POSITION,v),l.setVertices(y.ATTR_UV0,C),l.setPrimitiveType(y.PT_POINTS,0),l.setIndices(_),this.meshRenderer.mesh=l},e.prototype._lerp=function(t,e,o){return t+o*(e-t)},e.prototype.lateUpdate=function(){var t=this;if(this.isInit&&s){for(var e=s.GetParticleCount(),o=s.GetPositionBuffer(),n=[],i=0;i<e;++i){var r=o[i].x*m,a=o[i].y*m,c=this.meshRenderer.node.convertToNodeSpaceAR(cc.v2(r,a));n.push(c)}this.meshRenderer.mesh.setVertices(y.ATTR_POSITION,n),this.meshRenderer.markForRender(!0),this.contactBodys=s.GetBodyContacts(),this.contactLength=s.GetBodyContactCount();for(var l=0;l<this.contactLength;l++){var d=this.contactBodys[l];if(d&&d.body&&d.body.body&&d.body.body.node){var p=d.body.body.node;"ground"!==p.name||this.touchBad?"good"!==p.name||this.canCheck||(this.canCheck=!0,this.scheduleOnce(function(){t.touchBad||(t.scheduleOnce(function(){t.gameRight(0)}),t.isEnd=!0)},3)):(this.touchBad=!0,this.isEnd=!0,this.scheduleOnce(function(){t.showWrong(null,1,!0)}))}}}},e.prototype.destroyParticleSystem=function(){cc.director.getPhysicsManager()._world.DestroyParticleSystem(s),s=null},e.prototype.gameRight=function(t,e){var o=this;if(void 0===t&&(t=.2),this.gameBase.isGame){if(this.gameBase.isGame=!1,e){var n=e.parent.convertToWorldSpaceAR(e.position),i=this.gameBase.rightNode.parent.convertToNodeSpaceAR(n);this.gameBase.rightNode.setPosition(i)}this.scheduleOnce(function(){o.gameBase.rightNode.active=!0,o.gameBase.rightNode.scale=0,cc.tween(o.gameBase.rightNode).delay(.2).call(function(){o.destroyParticleSystem(),cc.game.emit("game_success1"),console.log("\u8fd9\u91cc\u5417\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f03"),cc.audioEngine.playEffect(o.gameBase.rightSound,!1)}).to(.3,{scale:1},{easing:cc.easing.expoOu}).delay(1).call(function(){cc.game.emit("game_success2")}).start()},t)}},e.prototype.showWrong=function(t,e,o,n){if(void 0===e&&(e=0),void 0===o&&(o=!1),void 0===n&&(n=0),this.gameBase.isGame){if(this.gameBase.wrongNode.active=!0,this.gameBase.wrongNode.scale=0,this.gameBase.wrongNode.stopAllActions(),cc.audioEngine.playEffect(this.gameBase.wrongSound,!1),cc.tween(this.gameBase.wrongNode).to(.3,{scale:1}).delay(e).to(.3,{scale:0}).start(),t){var i=cc.v2();i=t instanceof cc.Event.EventTouch?t.getLocation():t.parent.convertToWorldSpaceAR(t.position);var r=this.gameBase.wrongNode.parent.convertToNodeSpaceAR(i);this.gameBase.wrongNode.setPosition(r)}o&&(this.gameBase.isGame=!1,this.destroyParticleSystem(),this.scheduleOnce(function(){cc.game.emit("onRestartBtn")},e))}},e.prototype.onDestroy=function(){},c([g(p.default)],e.prototype,"gameBase",void 0),c([g(cc.MeshRenderer)],e.prototype,"meshRenderer",void 0),c([g(cc.SpriteFrame)],e.prototype,"spriteFrame",void 0),c([g({type:cc.Enum(l),tooltip:"\u7c92\u5b50\u7ec4"})],e.prototype,"groupFlags",void 0),c([g({type:cc.Enum(d),tooltip:"\u7c92\u5b50"})],e.prototype,"flags",void 0),c([g()],e.prototype,"linearVelocity",void 0),c([g()],e.prototype,"elasticStrength",void 0),c([g()],e.prototype,"gravityScale",void 0),c([f],e)}(h.default);r.default=v,cc._RF.pop()},{}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"4284b2heb5DPrSxSLGTf+FE","Loading");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("EventConst"),l=i("PlatformConst"),d=i("PopupConst"),p=i("SceneConst"),h=i("EventManager"),u=i("PlatformManager"),f=i("PopupManager"),g=i("SceneManager"),m=cc._decorator,y=m.ccclass,v=m.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.age=null,e.copyright=null,e.title=null,e.content=null,e.ageSpriteFrame=[],e.logo=null,e.logoSpriteFrame=[],e.isLoad=!1,e.progressBar=null,e.loginNode=null,e}return a(e,t),e.prototype.onLoad=function(){var t=u.Platform.getConfig(),e=(t.ageTipType,this.copyright.getComponent(cc.Label).string.replace(/2020SR0057230/g,t.registerNumber).replace(/\u5e7f\u5dde\u5c0f\u8d1d\u79d1\u6280\u6709\u9650\u516c\u53f8/g,t.registerPerson));this.copyright.getComponent(cc.Label).string=e,this.schedule(function(){var t=this.progressBar.fillRange;t>=0?t+=.01:t=1,this.progressBar.fillRange=t},.01)},e.prototype.onEnable=function(){h.Event.on(s.default.ENTER_MAIN,this.enterMain,this),cc.game.on("androidSignInClose",this.androidSignInClose,this),cc.game.on("androidSignInSuc",this.androidSignInSuc,this)},e.prototype.onDisable=function(){h.Event.off(s.default.ENTER_MAIN,this.enterMain,this),cc.game.targetOff(this)},e.prototype.androidSignInClose=function(){var t=this;console.log("\u8c03\u7528\u5b89\u5353\u767b\u5f55\u5931\u8d25"),this.isLoad?this.loginNode&&(this.loginNode.active=!0):(this.isLoad=!0,console.log("\u8c03\u7528\u5b89\u5353\u767b\u5f55\u5931\u8d251"),cc.loader.loadRes("prefab/popup/Login",cc.Prefab,function(e,o){if(e)return console.error("",e);t.loginNode=cc.instantiate(o),t.node.addChild(t.loginNode)}))},e.prototype.androidSignInSuc=function(){console.log("\u5b89\u5353\u56de\u8c03\u767b\u5f55\u6210\u529f"),cc.sys.localStorage.setItem("fknd_login",1),this.loginNode&&(this.loginNode.active=!1),g.Scene.loadScene(p.SceneConst.MAIN)},e.prototype.enterMain=function(){var t=this;u.Platform.getConfig().loginType!=l.LoginType.HW?u.Platform.getConfig().loginType!=l.LoginType.HWAndriod?u.Platform.getConfig().privacyPolicyType!=l.PrivacyPolicyType.MINI_GAME&&u.Platform.getConfig().privacyPolicyType!=l.PrivacyPolicyType.MINI_GAME_XM||cc.sys.localStorage.getItem("superBrain_privacypolicy")?this.scheduleOnce(function(){g.Scene.loadScene(p.SceneConst.MAIN,null,!1)},u.Platform.getConfig().loadingDelay):cc.resources.load("prefab/popup/PrivacyPolicy",function(e,o){if(e)return console.error("",e);var n=cc.instantiate(o);t.node.addChild(n),n.getComponent("PrivacyPolicy").open(function(){g.Scene.loadScene(p.SceneConst.MAIN)})}):cc.sys.localStorage.getItem("fknd_login")?u.Platform.signIn():cc.loader.loadRes("prefab/popup/Login",cc.Prefab,function(e,o){if(e)return console.error("",e);t.loginNode=cc.instantiate(o),t.node.addChild(t.loginNode)}):u.Platform.login().then(function(){console.log("\u767b\u5f55\u6210\u529f"),console.log("\u672c\u5730\u6570\u636e",cc.sys.localStorage.getItem("superBrain_privacypolicy")),cc.sys.localStorage.getItem("superBrain_privacypolicy")?g.Scene.loadScene(p.SceneConst.MAIN):cc.loader.loadRes("prefab/popup/PrivacyPolicy",cc.Prefab,function(e,o){if(e)return console.error("",e);var n=cc.instantiate(o);t.node.addChild(n),n.getComponent("PrivacyPolicy").open(function(){g.Scene.loadScene(p.SceneConst.MAIN)})})}).catch(function(e){console.log("\u767b\u5f55\u5931\u8d25",e),cc.loader.loadRes("prefab/popup/Login",cc.Prefab,function(e,o){if(e)return console.error("",e);t.loginNode=cc.instantiate(o),t.node.addChild(t.loginNode)})})},e.prototype.clickAge=function(){f.Popup.show(d.PopupConst.AGE_TIP)},c([v(cc.Node)],e.prototype,"age",void 0),c([v(cc.Node)],e.prototype,"copyright",void 0),c([v(cc.Node)],e.prototype,"title",void 0),c([v(cc.Node)],e.prototype,"content",void 0),c([v([cc.SpriteFrame])],e.prototype,"ageSpriteFrame",void 0),c([v(cc.Sprite)],e.prototype,"logo",void 0),c([v([cc.SpriteFrame])],e.prototype,"logoSpriteFrame",void 0),c([v(cc.Sprite)],e.prototype,"progressBar",void 0),c([y],e)}(cc.Component);r.default=_,cc._RF.pop()},{}],LocalStorage:[function(t,e,o){"use strict";cc._RF.push(e,"378999TrJ9MRoImyJdkFZ4z","LocalStorage");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("StorageSync"),a=function(){function t(){}return t.getItem=function(t){return void 0===window.localStorage?r.default.getItem(t):window.localStorage.getItem(t)},t.setItem=function(t,e){return void 0===window.localStorage?r.default.setItem(t,e):window.localStorage.setItem(t,e)},t.removeItem=function(t){return void 0===window.localStorage?r.default.removeItem(t):window.localStorage.removeItem(t)},t}();i.default=a,cc._RF.pop()},{}],Logger:[function(t,e,o){"use strict";cc._RF.push(e,"eb9750DVjdITq4LPJ9lzjKK","Logger");var n=o,i=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],a=0,c=r.length;a<c;a++,i++)n[i]=r[a];return n};function r(t,e){var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12==0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"\u661f\u671f":"\u5468":"")+"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".charAt(t.getDay()))),o)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return e}Object.defineProperty(n,"__esModule",{value:!0}),n.isLegalLogLevel=n.LOG_LEVEL=void 0,n.LOG_LEVEL={VERBOSE:"verbose",INFO:"info",WARNING:"warning",ERROR:"error",NONE:"none"},n.isLegalLogLevel=function(t){return[n.LOG_LEVEL.VERBOSE,n.LOG_LEVEL.INFO,n.LOG_LEVEL.WARNING,n.LOG_LEVEL.ERROR,n.LOG_LEVEL.NONE].includes(t)};var a=function(){function t(e,o){void 0===e&&(e="none"),void 0===o&&(o="LOG"),this.level=e,this.prefix=o,this.id=t.id}return t.isLegalLogLevel=function(t){return[n.LOG_LEVEL.VERBOSE,n.LOG_LEVEL.INFO,n.LOG_LEVEL.WARNING,n.LOG_LEVEL.ERROR,n.LOG_LEVEL.NONE].includes(t)},t.prototype.getPrintPrefix=function(t){return this.id++,"[wonder-js-sdk] "+r(new Date,"yyyy-MM-ddThh:mm:ss.SZ")+" ["+t.toLocaleUpperCase()+"]["+this.prefix+"#"+this.id+"]:"},t.prototype.setLogLevel=function(t){return this.level=t},t.prototype.getLogLevel=function(){return this.level},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info"];o.includes(this.level)&&console.log.apply(console,i([this.getPrintPrefix("info")],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info","warn"];o.includes(this.level)&&console.warn.apply(console,i([this.getPrintPrefix("warn")],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info","warn","error","verbose"];o.includes(this.level)&&console.error.apply(console,i([this.getPrintPrefix("error")],t))},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info","warn","error","verbose"];o.includes(this.level)&&console.error.apply(console,i([this.getPrintPrefix("verbose")],t))},t.id=0,t.LOG_LEVEL={VERBOSE:"verbose",INFO:"info",WARNING:"warning",ERROR:"error",NONE:"none"},t}();n.default=a,cc._RF.pop()},{}],Login2:[function(t,e,o){"use strict";cc._RF.push(e,"4b51afq9lJMyKxr9pPxCS8x","Login2");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("PlatformConst"),l=i("SceneConst"),d=i("PlatformManager"),p=i("SceneManager"),h=cc._decorator,u=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.content=null,e}return a(e,t),e.prototype.onLoad=function(){this.mask.getComponent(cc.Button).enabled=!1},e.prototype.clickLogin=function(){var t=this;console.log("\u70b9\u51fb\u767b\u5f55"),d.Platform.getConfig().loginType==s.LoginType.HWAndriod?d.Platform.signIn():d.Platform.getConfig().loginType==s.LoginType.HW&&d.Platform.login().then(function(){t.content.active=!1,cc.sys.localStorage.getItem("superBrain_privacypolicy")?p.Scene.loadScene(l.SceneConst.MAIN):cc.loader.loadRes("prefab/popup/PrivacyPolicy",cc.Prefab,function(e,o){if(e)return console.error("",e);var n=cc.instantiate(o);t.node.addChild(n),n.getComponent("PrivacyPolicy").open(function(){p.Scene.loadScene(l.SceneConst.MAIN)})})}).catch(function(){t.content.active=!1,t.mask.getComponent(cc.Button).enabled=!0})},e.prototype.clickCancel=function(){console.log("\u70b9\u51fb\u53d6\u6d88"),this.content.active=!1,this.mask.getComponent(cc.Button).enabled=!0,console.log("\u70b9\u51fb\u53d6\u6d880")},e.prototype.clickShowContent=function(){this.content.active=!0},c([f(cc.Node)],e.prototype,"mask",void 0),c([f(cc.Node)],e.prototype,"content",void 0),c([u],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],Login:[function(t,e,o){"use strict";cc._RF.push(e,"ab35dAQdupCxpxGtt20wS0X","Login");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.login=function(t){window.tt&&window.wxapi.login(t)},t}();n.default=new i,cc._RF.pop()},{}],MD5Type:[function(t,e,o){"use strict";cc._RF.push(e,"89eb2Dgc1BMBbs4hH3Ak6dv","MD5Type");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.Md5=void 0;var i=function(){function t(){}return t.prototype.safeAdd=function(t,e){var o=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(o>>16)<<16|65535&o},t.prototype.bitRotateLeft=function(t,e){return t<<e|t>>>32-e},t.prototype.md5cmn=function(t,e,o,n,i,r){return this.safeAdd(this.bitRotateLeft(this.safeAdd(this.safeAdd(e,t),this.safeAdd(n,r)),i),o)},t.prototype.md5ff=function(t,e,o,n,i,r,a){return this.md5cmn(e&o|~e&n,t,e,i,r,a)},t.prototype.md5gg=function(t,e,o,n,i,r,a){return this.md5cmn(e&n|o&~n,t,e,i,r,a)},t.prototype.md5hh=function(t,e,o,n,i,r,a){return this.md5cmn(e^o^n,t,e,i,r,a)},t.prototype.md5ii=function(t,e,o,n,i,r,a){return this.md5cmn(o^(e|~n),t,e,i,r,a)},t.prototype.binlMD5=function(t,e){var o,n,i,r,a;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var c=1732584193,s=-271733879,l=-1732584194,d=271733878;for(o=0;o<t.length;o+=16)n=c,i=s,r=l,a=d,c=this.md5ff(c,s,l,d,t[o],7,-680876936),d=this.md5ff(d,c,s,l,t[o+1],12,-389564586),l=this.md5ff(l,d,c,s,t[o+2],17,606105819),s=this.md5ff(s,l,d,c,t[o+3],22,-1044525330),c=this.md5ff(c,s,l,d,t[o+4],7,-176418897),d=this.md5ff(d,c,s,l,t[o+5],12,1200080426),l=this.md5ff(l,d,c,s,t[o+6],17,-1473231341),s=this.md5ff(s,l,d,c,t[o+7],22,-45705983),c=this.md5ff(c,s,l,d,t[o+8],7,1770035416),d=this.md5ff(d,c,s,l,t[o+9],12,-1958414417),l=this.md5ff(l,d,c,s,t[o+10],17,-42063),s=this.md5ff(s,l,d,c,t[o+11],22,-1990404162),c=this.md5ff(c,s,l,d,t[o+12],7,1804603682),d=this.md5ff(d,c,s,l,t[o+13],12,-40341101),l=this.md5ff(l,d,c,s,t[o+14],17,-1502002290),s=this.md5ff(s,l,d,c,t[o+15],22,1236535329),c=this.md5gg(c,s,l,d,t[o+1],5,-165796510),d=this.md5gg(d,c,s,l,t[o+6],9,-1069501632),l=this.md5gg(l,d,c,s,t[o+11],14,643717713),s=this.md5gg(s,l,d,c,t[o],20,-373897302),c=this.md5gg(c,s,l,d,t[o+5],5,-701558691),d=this.md5gg(d,c,s,l,t[o+10],9,38016083),l=this.md5gg(l,d,c,s,t[o+15],14,-660478335),s=this.md5gg(s,l,d,c,t[o+4],20,-405537848),c=this.md5gg(c,s,l,d,t[o+9],5,568446438),d=this.md5gg(d,c,s,l,t[o+14],9,-1019803690),l=this.md5gg(l,d,c,s,t[o+3],14,-187363961),s=this.md5gg(s,l,d,c,t[o+8],20,1163531501),c=this.md5gg(c,s,l,d,t[o+13],5,-1444681467),d=this.md5gg(d,c,s,l,t[o+2],9,-51403784),l=this.md5gg(l,d,c,s,t[o+7],14,1735328473),s=this.md5gg(s,l,d,c,t[o+12],20,-1926607734),c=this.md5hh(c,s,l,d,t[o+5],4,-378558),d=this.md5hh(d,c,s,l,t[o+8],11,-2022574463),l=this.md5hh(l,d,c,s,t[o+11],16,1839030562),s=this.md5hh(s,l,d,c,t[o+14],23,-35309556),c=this.md5hh(c,s,l,d,t[o+1],4,-1530992060),d=this.md5hh(d,c,s,l,t[o+4],11,1272893353),l=this.md5hh(l,d,c,s,t[o+7],16,-155497632),s=this.md5hh(s,l,d,c,t[o+10],23,-1094730640),c=this.md5hh(c,s,l,d,t[o+13],4,681279174),d=this.md5hh(d,c,s,l,t[o],11,-358537222),l=this.md5hh(l,d,c,s,t[o+3],16,-722521979),s=this.md5hh(s,l,d,c,t[o+6],23,76029189),c=this.md5hh(c,s,l,d,t[o+9],4,-640364487),d=this.md5hh(d,c,s,l,t[o+12],11,-421815835),l=this.md5hh(l,d,c,s,t[o+15],16,530742520),s=this.md5hh(s,l,d,c,t[o+2],23,-995338651),c=this.md5ii(c,s,l,d,t[o],6,-198630844),d=this.md5ii(d,c,s,l,t[o+7],10,1126891415),l=this.md5ii(l,d,c,s,t[o+14],15,-1416354905),s=this.md5ii(s,l,d,c,t[o+5],21,-57434055),c=this.md5ii(c,s,l,d,t[o+12],6,1700485571),d=this.md5ii(d,c,s,l,t[o+3],10,-1894986606),l=this.md5ii(l,d,c,s,t[o+10],15,-1051523),s=this.md5ii(s,l,d,c,t[o+1],21,-2054922799),c=this.md5ii(c,s,l,d,t[o+8],6,1873313359),d=this.md5ii(d,c,s,l,t[o+15],10,-30611744),l=this.md5ii(l,d,c,s,t[o+6],15,-1560198380),s=this.md5ii(s,l,d,c,t[o+13],21,1309151649),c=this.md5ii(c,s,l,d,t[o+4],6,-145523070),d=this.md5ii(d,c,s,l,t[o+11],10,-1120210379),l=this.md5ii(l,d,c,s,t[o+2],15,718787259),s=this.md5ii(s,l,d,c,t[o+9],21,-343485551),c=this.safeAdd(c,n),s=this.safeAdd(s,i),l=this.safeAdd(l,r),d=this.safeAdd(d,a);return[c,s,l,d]},t.prototype.binl2rstr=function(t){var e,o="",n=32*t.length;for(e=0;e<n;e+=8)o+=String.fromCharCode(t[e>>5]>>>e%32&255);return o},t.prototype.rstr2binl=function(t){var e,o=[];for(o[(t.length>>2)-1]=void 0,e=0;e<o.length;e+=1)o[e]=0;var n=8*t.length;for(e=0;e<n;e+=8)o[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return o},t.prototype.rstrMD5=function(t){return this.binl2rstr(this.binlMD5(this.rstr2binl(t),8*t.length))},t.prototype.rstrHMACMD5=function(t,e){var o,n,i=this.rstr2binl(t),r=[],a=[];for(r[15]=a[15]=void 0,i.length>16&&(i=this.binlMD5(i,8*t.length)),o=0;o<16;o+=1)r[o]=909522486^i[o],a[o]=1549556828^i[o];return n=this.binlMD5(r.concat(this.rstr2binl(e)),512+8*e.length),this.binl2rstr(this.binlMD5(a.concat(n),640))},t.prototype.rstr2hex=function(t){var e,o,n="";for(o=0;o<t.length;o+=1)e=t.charCodeAt(o),n+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return n},t.prototype.str2rstrUTF8=function(t){return unescape(encodeURIComponent(t))},t.prototype.rawMD5=function(t){return this.rstrMD5(this.str2rstrUTF8(t))},t.prototype.hexMD5=function(t){return this.rstr2hex(this.rawMD5(t))},t.prototype.rawHMACMD5=function(t,e){return this.rstrHMACMD5(this.str2rstrUTF8(t),this.str2rstrUTF8(e))},t.prototype.hexHMACMD5=function(t,e){return this.rstr2hex(this.rawHMACMD5(t,e))},t.prototype.md5=function(t,e,o){return e?o?this.rawHMACMD5(e,t):this.hexHMACMD5(e,t):o?this.rawMD5(t):this.hexMD5(t)},t}();n.Md5=i,cc._RF.pop()},{}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"35172NoSbZPPYid4sFKUrOS","Main");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},s=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},l=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var d=i("BaseUI"),p=i("AudioConst"),h=i("ConfigConst"),u=i("EventConst"),f=i("PlatformConst"),g=i("PopupConst"),m=i("SceneConst"),y=i("UserConst"),v=i("AudioManager"),_=i("BmsManager"),C=i("ConfigManager"),w=i("EventManager"),P=i("PlatformManager"),b=i("PopupManager"),T=i("SceneManager"),S=i("UserManager"),A=i("ChallengeHttp"),N=i("ConfigUtils"),B=i("OPPOAndroidAdUtils"),O=i("VIVOADUtils"),R=i("XMADUtils"),D=i("ShuShuConst"),L=cc._decorator,I=L.ccclass,E=L.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickTimes=0,e.ageSpriteFrame=[],e.logoSpriteFrame=[],e.secondModeData=null,e.thirdModesData=[],e.darenModesData=[],e.rankList=[],e.isLoadingScene=!1,e.isLoadPrivacy=!1,e.isEnterUgc=!1,e.isAnim=!1,e.isShow=!1,e}return a(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.addBtnOn("setBtn",this.clickSet,this),this.addBtnOn("startBtn",this.clickStart,this),this.addBtnOn("infinitePowerBtn",this.clickInfinitePower,this),this.addBtnOn("hotModeBtn",this.clickHotMode,this),this.addBtnOn("moreModeBtn",this.clickMoreMode,this),this.addBtnOn("ageBtn",this.clickAge,this),this.addBtnOn("privacyBtn",this.clickPrivacy,this),this.addBtnOn("appointBtn",this.clickAppoint,this),this.addBtnOn("moreGameBtn",this.clickMoreGame,this),this.addBtnOn("levelSelectBtn",this.clickLevelSelect,this),this.addBtnOn("createBtn",this.clickCreateBtn,this),this.addBtnOn("ageBtn",this.clickAgeBtn,this),this.addBtnOn("followBtn",this.clickFollowBtn,this),this.addBtnOn("secondBtn",this.clickSecondMode,this),this.addBtnOn("3Btn",this.click3Mode,this),this.addBtnOn("thirdBtn",this.clickThirdMode,this),this.addBtnOn("beeBtn",this.clickBeeBtn,this),this.addBtnOn("modeJumpBtn",this.modeJumpBtn,this),this.addBtnOn("closeDaren",this.closeDaren,this),this.addBtnOn("darenJump",this.darenJump,this),this.addBtnOn("unlockAllModeBtn",this.unlockAllModeBtn,this),this.addBtnOn("orderBtn",this.orderBtn,this),this.dict.cheats.on(cc.Node.EventType.TOUCH_START,this.clickCheats,this),this.dict.clickBg.on(cc.Node.EventType.TOUCH_START,function(){e.isShow&&e.clickThirdMode()},this),this.dict.clickBg._touchListener&&this.dict.clickBg._touchListener.setSwallowTouches(!1),this.initPlatformUI(),this.initView(),P.Platform.is(f.EPlatform.XIAOMI_ANDROID)&&R.XMAD.showInsert_must(),cc.game.emit("gamelog_Thinking",D.ShuShuConst.page,{id:"001"})},e.prototype.onEnable=function(){w.Event.on(u.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this),w.Event.on(u.default.updateUnlockAllMode,this.updateUnlockAllMode,this),w.Event.on(u.default.ENTER_ID,this.sucEnterByMode,this),P.Platform.is(f.EPlatform.XIAOMI_ANDROID)?R.XMAD.showBannerFeed():P.Platform.is(f.EPlatform.OPPO_ANDROID)?B.OPPOAndroidAd.showBannerFeed():P.Platform.is(f.EPlatform.VIVO)&&O.VIVOAD.showCustomAd_1()},e.prototype.onDisable=function(){w.Event.off(u.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this),w.Event.off(u.default.updateUnlockAllMode,this.updateUnlockAllMode,this),w.Event.off(u.default.ENTER_ID,this.sucEnterByMode,this),P.Platform.hideBanner(),P.Platform.hideCustomAd_1(),P.Platform.hideCustomAd_2()},e.prototype.updateInfinitePower=function(t){this.dict.infinitePowerBtn.active=!t},e.prototype.updateUnlockAllMode=function(){this.dict.unlockAllModeBtn.active=!1},e.prototype.initView=function(){return s(this,void 0,void 0,function(){var t,e,o,n,i,r,a,c,s,d,u,f,m,w,T,A,N,B,O,R;return l(this,function(l){switch(l.label){case 0:return t=S.User.get(y.UserData.LEVEL_LIST)||{},[4,C.Config.get(h.ConfigConst.THEME)];case 1:for(e=l.sent(),S.User.setTempData(y.TempData.CURRENT_ALL_MODE,e),A=0;A<e.length;A++)i=e[A].theme,t[i]||(t[i]=1),2==e[A].id?this.secondModeData=e[A]:e[A].id>=3&&this.thirdModesData.push(e[A]),this.darenModesData.push(e[A]);for(S.User.set(y.UserData.LEVEL_LIST,t),o=S.User.get(y.UserData.ALREADY_PLAY)||{},A=0;A<e.length;A++)i=e[A].theme,o[i]||(o[i]=[]);for(S.User.set(y.UserData.ALREADY_PLAY,o),n=S.User.get(y.UserData.ALREADY_UNLOCK)||{},A=0;A<e.length;A++)i=e[A].theme,n[i]||(n[i]=[1]);if(S.User.set(y.UserData.ALREADY_UNLOCK,n),r=S.User.get(y.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES)||0,a=S.User.get(y.UserData.UNLOCK_MODE_LIST)||[],(2==r||a.length>=e.length)&&(this.dict.unlockAllModeBtn.active=!1),S.User.setTempData(y.TempData.POWER_TYPE,1),S.User.get(y.UserData.FIRST_DAY_DATE)){if(console.log("\u8001\u7528\u6237",P.Platform.getConfig().flag.indexOf("tt")),-1!=P.Platform.getConfig().flag.indexOf("tt")&&(d=S.User.get(y.UserData.IS_COMPATIBLE_233)||0,console.log("\u662f\u5426\u5df2\u7ecf\u517c\u5bb9",d),!d)){for(w in u=S.User.get(y.UserData.LEVEL_LIST),console.log("levelList",JSON.stringify(u)),f={},m={},u){for(T=u[w],f[w]=[],m[w]=[],A=1;A<=T-1&&!(f[w].length>=580);A++)f[w].push(A);for(A=1;A<=T&&!(f[w].length>=580);A++)m[w].push(A)}console.log("\u901a\u5173\u5217\u8868",JSON.stringify(f)),console.log("\u89e3\u9501\u5217\u8868",JSON.stringify(m)),S.User.set(y.UserData.IS_COMPATIBLE_233,1),S.User.set(y.UserData.ALREADY_PLAY,f),S.User.set(y.UserData.ALREADY_UNLOCK,m)}}else{for(w in S.User.set(y.UserData.FIRST_DAY_DATE,(new Date).getDate()),c=S.User.get(y.UserData.LEVEL_LIST),s={},m={},c)s[w]=[],m[w]=[1];S.User.set(y.UserData.IS_COMPATIBLE_233,1),S.User.set(y.UserData.ALREADY_PLAY,s),S.User.set(y.UserData.ALREADY_UNLOCK,m)}return N=_.BMS.getKey("GM"),this.dict.cheats.active=!!N,B=_.BMS.getKey("ugc"),this.dict.createBtn.active=!!B,O=_.BMS.getKey("AllThemeUnlock"),this.dict.unlockAllModeBtn.active=!!O,R=_.BMS.getKey("WuxianTiLi"),this.dict.infinitePowerBtn.active=0!=R,S.User.get(y.UserData.INF_POWER_VIDEO_TIMES)>=3&&this.updateInfinitePower(!0),v.Audio.playMusic(p.AudioConst.BGM_MAIN),cc.game.emit("gamelog","page001"),this.dict.version.getComponent(cc.Label).string=P.Platform.getConfig().version,window.wrongful&&b.Popup.show(g.PopupConst.STOP),this.getRank(),this.updateSkin(),[2]}})})},e.prototype.getRank=function(){var t=this,e=new Date,o="province_"+this.showTime(e.getMonth()+1)+this.showTime(e.getDate())+"_"+P.Platform.getConfig().rank;A.challengeHttp.getRank(o,"1").then(function(e){if(console.log("\u6392\u884c\u699c\u6570\u636e",e),e.total){var o=[],n=0;for(var i in e.list)n+=1,o.push({id:n,province:i,score:e.list[i].score});console.log("list",o),t.rankList=o}else C.Config.get(h.ConfigConst.Rank).then(function(e){console.log("\u5047\u6570\u636e",e);for(var o=0;o<e.length;o++)e[o];t.rankList=e,t.rankList.sort(function(t,e){return e.score-t.score})})})},e.prototype.showTime=function(t){return t>10?t:"0"+t},e.prototype.updateSkin=function(){var t=S.User.get(y.UserData.skinList)||{0:[0],1:[0],2:[0],3:[0],4:[0],5:[0]};S.User.set(y.UserData.skinList,t);var e=S.User.get(y.UserData.useSkinIDList)||{0:0,1:0,2:0,3:0,4:0,5:0};S.User.set(y.UserData.useSkinIDList,e);var o=S.User.get(y.UserData.getLockSkinList)||{0:[],1:[],2:[],3:[],4:[],5:[]};S.User.set(y.UserData.getLockSkinList,o)},e.prototype.judgeMainMode=function(){var t=_.BMS.getKey("mainModeID");console.log("mainModeID",t),0==t?(this.dict.overlapBanner.active=!1,this.dict.screwBanner.active=!0,this.dict.startBtnText.getComponent(cc.Label).string="\u5f00\u59cb\u6e38\u620f",this.dict.secondBtnText.getComponent(cc.Label).string="\u5f00\u59cb\u6e05\u7406"):(this.dict.overlapBanner.active=!0,this.dict.screwBanner.active=!1,this.dict.startBtnText.getComponent(cc.Label).string="\u5f00\u59cb\u6e05\u7406",this.dict.secondBtnText.getComponent(cc.Label).string="\u5f00\u59cb\u6e38\u620f");var e,o=S.User.get(y.UserData.mode0LevelList_stage1ID)||[],n=S.User.get(y.UserData.mode0LevelList_stage2ID)||[],i=S.User.get(y.UserData.mode1LevelList_stage1ID)||[],r=S.User.get(y.UserData.mode1LevelList_stage2ID)||[],a=S.User.get(y.UserData.mode2LevelList_stage1ID)||[],c=S.User.get(y.UserData.mode2LevelList_stage2ID)||[],s=[],l=[],d=[],p=[],u=[],g=[];C.Config.get(h.ConfigConst.THEME+0).then(function(t){if(P.Platform.is(f.EPlatform.WEB)){for(var i=0;i<t.length;i++){var r=t[i];s.push(r.stage1ID),l.push(r.stage2ID)}S.User.set(y.UserData.mode0LevelList_stage1ID,s),S.User.set(y.UserData.mode0LevelList_stage2ID,l)}else if(t.length>o.length&&0!=o.length){for(i=0;i<t.length;i++)r=t[i],i>o.length-1&&(s.push(r.stage1ID),l.push(r.stage2ID));s.sort(function(){return.5-Math.random()}),l.sort(function(){return.5-Math.random()}),s=o.concat(s),l=n.concat(l),console.log("\u6709\u65b0\u589e\u5173\u5361"),S.User.set(y.UserData.mode0LevelList_stage1ID,s),S.User.set(y.UserData.mode0LevelList_stage2ID,l)}else if(0==o.length){var a=[],c=[],d=[],p=[];for(i=0;i<t.length;i++)r=t[i],0==i&&(e=r.stage1ID),i>4?(d.push(r.stage1ID),p.push(r.stage2ID)):(a.push(r.stage1ID),c.push(r.stage2ID));a.sort(function(){return.5-Math.random()}),c.sort(function(){return.5-Math.random()}),d.sort(function(){return.5-Math.random()}),p.sort(function(){return.5-Math.random()}),s=a.concat(d),l=c.concat(p);var h=s.indexOf(e),u=s[0];s[0]=e,s[h]=u,console.log("\u6ca1\u6709\u65b0\u589e\u5173\u5361\u4e14\u662f\u65b0\u7528\u6237"),S.User.set(y.UserData.mode0LevelList_stage1ID,s),S.User.set(y.UserData.mode0LevelList_stage2ID,l)}else console.log("\u8001\u7528\u6237");console.log("\u6253\u87ba\u4e1d",s,l)}),C.Config.get(h.ConfigConst.THEME+1).then(function(t){if(P.Platform.is(f.EPlatform.WEB)){for(var e=0;e<t.length;e++){var o=t[e];d.push(o.stage1ID),p.push(o.stage2ID)}S.User.set(y.UserData.mode1LevelList_stage1ID,d),S.User.set(y.UserData.mode1LevelList_stage2ID,p)}else if(t.length>i.length&&0!=i.length){for(e=0;e<t.length;e++)o=t[e],e>i.length-1&&(d.push(o.stage1ID),p.push(o.stage2ID));d.sort(function(){return.5-Math.random()}),p.sort(function(){return.5-Math.random()}),d=i.concat(d),p=r.concat(p),S.User.set(y.UserData.mode1LevelList_stage1ID,d),S.User.set(y.UserData.mode1LevelList_stage2ID,p)}else if(0==i.length){for(e=0;e<t.length;e++)o=t[e],d.push(o.stage1ID),p.push(o.stage2ID);d.sort(function(){return.5-Math.random()}),p.sort(function(){return.5-Math.random()}),S.User.set(y.UserData.mode1LevelList_stage1ID,d),S.User.set(y.UserData.mode1LevelList_stage2ID,p)}else console.log("\u8001\u7528\u6237");console.log("\u6e05\u7406",d,p)}),C.Config.get(h.ConfigConst.THEME+2).then(function(t){if(P.Platform.is(f.EPlatform.WEB)){for(var e=0;e<t.length;e++){var o=t[e];u.push(o.stage1ID),g.push(o.stage2ID)}S.User.set(y.UserData.mode2LevelList_stage1ID,u),S.User.set(y.UserData.mode2LevelList_stage2ID,g)}else if(t.length>a.length&&0!=a.length){for(e=0;e<t.length;e++)o=t[e],e>a.length-1&&(u.push(o.stage1ID),g.push(o.stage2ID));u.sort(function(){return.5-Math.random()}),g.sort(function(){return.5-Math.random()}),u=a.concat(u),g=c.concat(g),S.User.set(y.UserData.mode2LevelList_stage1ID,u),S.User.set(y.UserData.mode2LevelList_stage2ID,g)}else if(0==a.length){for(e=0;e<t.length;e++)o=t[e],u.push(o.stage1ID),g.push(o.stage2ID);u.sort(function(){return.5-Math.random()}),g.sort(function(){return.5-Math.random()}),S.User.set(y.UserData.mode2LevelList_stage1ID,u),S.User.set(y.UserData.mode2LevelList_stage2ID,g)}else console.log("\u8001\u7528\u6237");console.log("\u6d88\u9664",u,g)}),this.handleModeByID(3)},e.prototype.handleModeByID=function(t){var e=[],o=[],n=S.User.get(y.UserData["mode"+t+"LevelList_stage1ID"])||[],i=S.User.get(y.UserData["mode"+t+"LevelList_stage2ID"])||[];C.Config.get(h.ConfigConst.THEME+t).then(function(r){if(P.Platform.is(f.EPlatform.WEB)){for(var a=0;a<r.length;a++){var c=r[a];e.push(c.stage1ID),o.push(c.stage2ID)}S.User.set(y.UserData["mode"+t+"LevelList_stage1ID"],e),S.User.set(y.UserData["mode"+t+"LevelList_stage2ID"],o)}else if(r.length>n.length&&0!=n.length){for(a=0;a<r.length;a++)c=r[a],a>n.length-1&&(e.push(c.stage1ID),o.push(c.stage2ID));e.sort(function(){return.5-Math.random()}),o.sort(function(){return.5-Math.random()}),e=n.concat(e),o=i.concat(o),S.User.set(y.UserData["mode"+t+"LevelList_stage1ID"],e),S.User.set(y.UserData["mode"+t+"LevelList_stage2ID"],o)}else if(0==n.length){for(a=0;a<r.length;a++)c=r[a],e.push(c.stage1ID),o.push(c.stage2ID);e.sort(function(){return.5-Math.random()}),o.sort(function(){return.5-Math.random()}),S.User.set(y.UserData["mode"+t+"LevelList_stage1ID"],e),S.User.set(y.UserData["mode"+t+"LevelList_stage2ID"],o)}else console.log("\u8001\u7528\u6237");console.log("\u5173\u5361\u6a21\u5f0f",t,e,o)})},e.prototype.updateModeView=function(){var t=this;this.dict.secondBtn.children[0].getComponent(cc.Label).string=this.secondModeData.themeName;for(var e=function(e){var n=o.dict.moreModeBg.children[0].children[e].children[0];n.name=o.thirdModesData[e].theme+"",n.getComponent(cc.Label).string=o.thirdModesData[e].themeName,n.parent.getComponent(cc.Button)||n.parent.addComponent(cc.Button);var i=n.parent.getComponent(cc.Button);i.transition=cc.Button.Transition.SCALE,i.duration=.1,i.zoomScale=1.2,n.parent.on(cc.Node.EventType.TOUCH_END,function(){cc.game.emit("playClickAudio");var o=t.thirdModesData[e].theme;cc.game.emit("gamelog","modebtn_"+o),t.enterByMode(o)},o)},o=this,n=0;n<this.thirdModesData.length;n++)e(n);var i=function(e){var o=r.dict.darenModes.children[1].children[e].children[0];o.name=r.darenModesData[e].theme+"",o.getComponent(cc.Label).string=r.darenModesData[e].themeName,o.parent.getComponent(cc.Button)||o.parent.addComponent(cc.Button);var n=o.parent.getComponent(cc.Button);n.transition=cc.Button.Transition.SCALE,n.duration=.1,n.zoomScale=1.2,o.parent.on(cc.Node.EventType.TOUCH_END,function(){var o=t.darenModesData[e].theme;t.enterByMode2(o)},r)},r=this;for(n=0;n<this.darenModesData.length;n++)i(n)},e.prototype.initPlatformUI=function(){var t=P.Platform.getConfig();if(t.fitUIType!=f.FitUIType.TT&&t.fitUIType!=f.FitUIType.KS||(this.dict.topBar.getComponent(cc.Widget).top=70,this.dict.topBar.getComponent(cc.Widget).updateAlignment()),t.hasAgeTip){this.dict.ageBtn.active=!0;var e=P.Platform.getConfig().ageTipType;e==f.AgeTipType.AGE_12&&(this.dict.ageBtn.getComponent(cc.Sprite).spriteFrame=this.ageSpriteFrame[e])}if(this.dict.privacyBtn.active=!1,t.privacyPolicyType!=f.PrivacyPolicyType.NO&&(this.dict.privacyBtn.active=!0),this.dict.moreGameBtn.active=!1,t.hasMoreGame&&(this.dict.moreGameBtn.active=!0),this.dict.customerService.active=!1,t.hasCustomerService&&(this.dict.customerService.active=!0),this.dict.logo.getComponent(cc.Sprite).spriteFrame=this.logoSpriteFrame[t.logoType],t.logoType!=f.LogoType.PlayHammer&&t.logoType!=f.LogoType.MyDog&&(this.dict.logo.scale=1),P.Platform.is(f.EPlatform.OHAYOO_ANDROID)&&(this.dict.privacyBtn.children[0].getComponent(cc.Label).string="\u9690\u79c1\n\u8bbe\u7f6e"),P.Platform.is(f.EPlatform.QQ)&&(this.dict.appointBtn.active=!0),P.Platform.is(f.EPlatform.HW)&&(this.dict.privacyBtn.x-=100),P.Platform.is(f.EPlatform.WX)){var o=_.BMS.getKey("ys5x5");if(console.log("ys5x5",o),o){var n=window.wx.getSystemInfoSync().windowHeight/2-250;console.log("\u6d4b\u8bd5showBlockAds"),P.Platform.showBlockAds({top:n,left:0,id:"",hideCb:function(){P.Platform.hideBlockAds(),setTimeout(function(){},300)}},function(t){0==t||(P.Platform.hideBlockAds(),setTimeout(function(){},300))})}}t.privacyPolicyType==f.PrivacyPolicyType.MINI_GAME_XM&&(this.dict.ageBtn.active=!0),this.dict.followBtn.active=!1;var i=_.BMS.getKey("isAuditing");console.log("isAuditing",i),i?(this.dict.secondBtn.active=!1,this.dict["3Btn"].active=!1):(this.dict.secondBtn.active=!0,this.dict["3Btn"].active=!0),this.dict.secondBtn.active=!1,this.dict["3Btn"].active=!1},e.prototype.isDOUYIN=function(){var t=window.tt&&window.tt.getSystemInfoSync();if(!t)return!1;switch(t.appName){case"Douyin":return!0;default:return!1}},e.prototype.clickSet=function(){cc.game.emit("gamelog","btn004"),b.Popup.show(g.PopupConst.SET)},e.prototype.clickStart=function(){this.isLoadingScene||(this.isLoadingScene=!0,T.Scene.loadScene(m.SceneConst.Home))},e.prototype.clickInfinitePower=function(){cc.game.emit("gamelog","btn007"),cc.game.emit("gamelog","page011"),b.Popup.show(g.PopupConst.INFINITE_POWER)},e.prototype.clickHotMode=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn002"),T.Scene.loadScene(m.SceneConst.MODE_SELECT,1))},e.prototype.clickMoreMode=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn003"),T.Scene.loadScene(m.SceneConst.MODE_SELECT,2))},e.prototype.clickCheats=function(){this.clickTimes+=1,console.log("["+this.clickTimes+"]"),this.clickTimes>=8&&(b.Popup.show(g.PopupConst.CHEATS),this.clickTimes=0)},e.prototype.clickAge=function(){b.Popup.show(g.PopupConst.AGE_TIP)},e.prototype.clickPrivacy=function(){var t=this,e=P.Platform.getConfig();if(e.privacyPolicyType==f.PrivacyPolicyType.MINI_GAME||e.privacyPolicyType==f.PrivacyPolicyType.MINI_GAME_VIVO||e.privacyPolicyType==f.PrivacyPolicyType.MINI_GAME_XM){if(this.isLoadPrivacy)return;this.isLoadPrivacy=!0,cc.resources.load("prefab/popup/PrivacyPolicy",function(e,o){if(t.isLoadPrivacy=!1,e)console.error(e);else{var n=cc.instantiate(o);t.node.addChild(n),n.getComponent("PrivacyPolicy").open()}})}else e.privacyPolicyType==f.PrivacyPolicyType.NATIVE&&P.Platform.showPrivacyPolicy()},e.prototype.clickAppoint=function(){var t=this;this.isLoadPrivacy||(this.isLoadPrivacy=!0,cc.resources.load("prefab/popup/PrivacyPolicy",function(e,o){if(t.isLoadPrivacy=!1,e)console.error(e);else{var n=cc.instantiate(o);t.node.addChild(n),n.getComponent("PrivacyPolicy").openUserPanelHandle()}}))},e.prototype.clickMoreGame=function(){P.Platform.showMoreGame()},e.prototype.clickLevelSelect=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","page002"),S.User.setTempData(y.TempData.CURRENT_MODE,0),T.Scene.loadScene(m.SceneConst.LEVEL_SELECT))},e.prototype.clickCreateBtn=function(){cc.game.emit("gamelog","btn027"),!_.BMS.getKey("ugcad")||S.User.get(y.UserData.isUnlockUgc)?this.isEnterUgc||(this.isEnterUgc=!0,T.Scene.loadScene(m.SceneConst.UGC)):b.Popup.show(g.PopupConst.UNLOCK_UGC)},e.prototype.clickAgeBtn=function(){b.Popup.show(g.PopupConst.AGE_TIP)},e.prototype.clickFollowBtn=function(){var t=this;P.Platform.follow(function(e){if(0==e){if(console.log("\u5173\u6ce8\u6210\u529f"),S.User.get(y.UserData.isFollow))return;t.dict.followBtn.getChildByName("keyIcon").active=!1,t.dict.followBtn.getChildByName("keyAmount").active=!1;var o=S.User.get(y.UserData.KEY);S.User.set(y.UserData.KEY,o+1),w.Event.emit(u.default.KEY_EFFECT),S.User.set(y.UserData.isFollow,1)}})},e.prototype.clickLoveDog=function(){cc.game.emit("gamelog","btn028"),this.enterByMode(1)},e.prototype.clickDogStone=function(){cc.game.emit("gamelog","btn029"),this.enterByMode(2)},e.prototype.clickSecondMode=function(){var t=0;this.dict.screwBanner.active&&(t=1),0==t?cc.game.emit("gamelog_Thinking",D.ShuShuConst.btn,{id:"001"}):cc.game.emit("gamelog_Thinking",D.ShuShuConst.btn,{id:"002"}),cc.game.emit("gamelog","modebtn_"+t),this.enterByMode(t)},e.prototype.click3Mode=function(){cc.game.emit("gamelog_Thinking",D.ShuShuConst.btn,{id:"003"}),cc.game.emit("gamelog","modebtn_2"),this.enterByMode(2)},e.prototype.clickThirdMode=function(){var t=this;this.isAnim||(this.isAnim=!0,cc.game.emit("gamelog","btn032"),this.dict.moreModeBg.active=!this.dict.moreModeBg.active,this.isShow?(this.dict.moreModeBg.active=!0,this.dict.moreModeBg.opacity=255,cc.tween(this.dict.moreModeBg).to(.3,{opacity:0}).call(function(){t.dict.moreModeBg.active=!1,t.isAnim=!1,t.isShow=!1}).start()):(this.dict.moreModeBg.opacity=0,this.dict.moreModeBg.active=!0,console.log("\u6d4b\u8bd5"),cc.tween(this.dict.moreModeBg).to(.3,{opacity:255}).call(function(){t.isAnim=!1,t.isShow=!0}).start()),0==this.dict.arrow.angle?this.dict.arrow.angle=180:this.dict.arrow.angle=0)},e.prototype.clickBeeBtn=function(){b.Popup.show(g.PopupConst.BEE)},e.prototype.unlockAllModeBtn=function(){b.Popup.show(g.PopupConst.UNLOCK_ALL_MODE)},e.prototype.orderBtn=function(){var t=this.dict.orderID.getComponent(cc.EditBox).string;if(console.log("\u987a\u5e8fid",t),this.isIntNum(t)){if(console.log("\u662f\u6570\u5b57"),S.User.setTempData(y.TempData.CURRENT_MODE,0),S.User.setTempData(y.TempData.CURRENT_LEVEL,Number(t)),this.isLoadingScene)return;this.isLoadingScene=!0,T.Scene.loadScene(m.SceneConst.GAME)}},e.prototype.modeJumpBtn=function(){this.dict.darenModes.active=!0},e.prototype.closeDaren=function(){this.dict.darenModes.active=!1},e.prototype.enterByMode=function(t){if(_.BMS.getKey("newmodead")&&-1==(S.User.get(y.UserData.UNLOCK_MODE_LIST)||[]).indexOf(t))return S.User.setTempData(y.TempData.CURRENT_MODE_UNLOCK_ID,t),void b.Popup.show(g.PopupConst.MODE_UNLOCK);this.sucEnterByMode(t)},e.prototype.enterByMode2=function(t){window.modeID=t,this.dict.darenModes.children[1].active=!1,this.dict.EditBox.active=!0,this.dict.darenJump.active=!0},e.prototype.darenJump=function(){var t=this.dict.EditBox.getComponent(cc.EditBox).string;this.isIntNum(t)&&(console.log("\u662f\u6570\u5b57"),S.User.setTempData(y.TempData.CURRENT_MODE,Number(window.modeID)),S.User.setTempData(y.TempData.CURRENT_LEVEL,Number(t)),T.Scene.loadScene(m.SceneConst.GAME))},e.prototype.isIntNum=function(t){return!isNaN(parseFloat(t))},e.prototype.sucEnterByMode=function(t){if(!this.isLoadingScene){this.isLoadingScene=!0,S.User.setTempData(y.TempData.CURRENT_MODE,t);var e=S.User.get(y.UserData.LEVEL_LIST);N.ConfigUtils.setNextModeID();var o=1;N.ConfigUtils.getDataByID(t,function(n){o=n.amount,e[t]>o?S.User.setTempData(y.TempData.CURRENT_LEVEL,1):S.User.setTempData(y.TempData.CURRENT_LEVEL,e[t]),T.Scene.loadScene(m.SceneConst.GAME)})}},c([E([cc.SpriteFrame])],e.prototype,"ageSpriteFrame",void 0),c([E([cc.SpriteFrame])],e.prototype,"logoSpriteFrame",void 0),c([I],e)}(d.default);r.default=k,cc._RF.pop()},{}],ModeSelectItem:[function(t,e,o){"use strict";cc._RF.push(e,"a70a8sc1yVNz7MeZG+eJSCO","ModeSelectItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("SceneConst"),d=i("UserConst"),p=i("SceneManager"),h=i("UserManager"),u=i("ConfigUtils"),f=cc._decorator,g=f.ccclass,m=f.property;(function(t){t[t.Normal=0]="Normal",t[t.Finish=1]="Finish",t[t.Lock=2]="Lock"})(s||(s={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.level=null,e.modeName=null,e.param=null,e.state=null,e.starAmount=0,e}return a(e,t),e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){var t=this,e=this.param.data,o=e.theme,n=h.User.get(d.UserData.LEVEL_LIST),i=1,r=1;n[o]&&(i=n[o]),u.ConfigUtils.getDataByID(e.theme,function(e){r=e.amount,i>=r&&(i=r),t.level.string=i+"/"+r}),this.modeName.string=""+e.themeName,cc.resources.load("texture/banner/"+e.theme,function(e,o){if(e)return console.log(e);t.icon.spriteFrame=new cc.SpriteFrame(o)})},e.prototype.clickEnter=function(){console.log("\u6d4b\u8bd5\u70b9\u9e21\u86cb1111");var t=this.param.data.theme;h.User.setTempData(d.TempData.CURRENT_MODE,t);var e=h.User.get(d.UserData.LEVEL_LIST);u.ConfigUtils.setNextModeID();var o=1;u.ConfigUtils.getDataByID(t,function(n){o=n.amount,e[t]>o?h.User.setTempData(d.TempData.CURRENT_LEVEL,1):h.User.setTempData(d.TempData.CURRENT_LEVEL,e[t])}),p.Scene.loadScene(l.SceneConst.GAME)},e.state=s,c([m(cc.Sprite)],e.prototype,"icon",void 0),c([m(cc.Label)],e.prototype,"level",void 0),c([m(cc.Label)],e.prototype,"modeName",void 0),c([g],e)}(cc.Component);r.default=y,cc._RF.pop()},{}],ModeSelect:[function(t,e,o){"use strict";cc._RF.push(e,"1b6e0dFI/FEfoLU7W3FLKWv","ModeSelect");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},s=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},l=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var d=i("BaseUI"),p=i("RecycleScroll"),h=i("AudioConst"),u=i("ConfigConst"),f=i("EventConst"),g=i("PlatformConst"),m=i("SceneConst"),y=i("UserConst"),v=i("AudioManager"),_=i("ConfigManager"),C=i("EventManager"),w=i("PlatformManager"),P=i("ResManager"),b=i("SceneManager"),T=i("UserManager"),S=i("ModeSelectItem"),A=i("XMADUtils"),N=cc._decorator,B=N.ccclass,O=N.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e._data=null,e.itemsData=[],e.childrenLength=6,e.isLoadingScene=!1,e}return a(e,t),e.prototype.onLoad=function(){this.initView()},e.prototype.onEnable=function(){C.Event.on(f.default.CLICK_BACK,this.clickBack,this),w.Platform.is(g.EPlatform.XIAOMI_ANDROID)?A.XMAD.showLargeFeed():w.Platform.showBanner()},e.prototype.onDisable=function(){C.Event.off(f.default.CLICK_BACK,this.clickBack,this),w.Platform.is(g.EPlatform.XIAOMI_ANDROID)?(A.XMAD.removeLargePicFeed(),w.Platform.hideBanner()):w.Platform.hideBanner()},e.prototype.initView=function(){return s(this,void 0,void 0,function(){var t,e,o,n,i;return l(this,function(r){switch(r.label){case 0:return[4,_.Config.get(u.ConfigConst.THEME)];case 1:if(t=r.sent(),e=[],2==this._data)for(o=0;o<t.length;o++)0!=o&&e.push(t[o]);else for(o=0;o<t.length;o++)t[o].isHot&&e.push(t[o]);return T.User.setTempData(y.TempData.CURRENT_ALL_MODE,e),this.itemsData=e,this.scroll.onItemRender=this.onItemRender.bind(this),this.scroll.onItemClicked=this.onItemClicked.bind(this),this.scroll.numItems=this.itemsData.length,[4,P.Res.load("prefab/item/TopBar")];case 2:return n=r.sent(),i=cc.instantiate(n),this.node.addChild(i),v.Audio.playMusic(h.AudioConst.BGM_MAIN),2==this._data?cc.game.emit("gamelog","page013"):cc.game.emit("gamelog","page012"),[2]}})})},e.prototype.onItemRender=function(t,e){var o=e.getComponent(S.default),n=(S.default.state.Normal,{index:t,data:this.itemsData[t]});o.setData(n)},e.prototype.onItemClicked=function(){console.log("\u6d4b\u8bd5\u70b9\u9e21\u86cb")},e.prototype.clickBack=function(){this.isLoadingScene||(this.isLoadingScene=!0,2==this._data?cc.game.emit("gamelog","btn010"):cc.game.emit("gamelog","btn009"),b.Scene.loadScene(m.SceneConst.MAIN))},c([O(p.default)],e.prototype,"scroll",void 0),c([B],e)}(d.default);r.default=R,cc._RF.pop()},{}],ModeUnlcok:[function(t,e,o){"use strict";cc._RF.push(e,"b638dnO/gBKhod9J9JtmUzQ","ModeUnlcok");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("UserConst"),h=i("EventManager"),u=i("LanguageManager"),f=i("PlatformManager"),g=i("PopupManager"),m=i("UserManager"),y=i("OPPOAndroidAdUtils"),v=i("OPPOMiniADUtils"),_=i("Utils"),C=i("XMADUtils"),w=cc._decorator,P=w.ccclass,b=(w.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnterUgc=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?C.XMAD.showBannerFeed():f.Platform.is(d.EPlatform.OPPO_ANDROID)?y.OPPOAndroidAd.showLargeFeed():f.Platform.is(d.EPlatform.OPPO)?v.OPPOMiniAD.showLargeFeed():f.Platform.showBanner()},e.prototype.onDisable=function(){f.Platform.is(d.EPlatform.OPPO_ANDROID)&&y.OPPOAndroidAd.removeLargePicFeed(),f.Platform.hideBanner(),f.Platform.hideNativeAds()},e.prototype.initView=function(){var t=this;cc.game.emit("gamelog","page015");var e=_.Utils.randomNum(80,92);this.dict.rate.getComponent(cc.Label).string=u.default.formatStr("\u8d85\u8fc7%d%\u7684\u73a9\u5bb6\u89e3\u9501\u8be5\u4e3b\u9898",e);var o=m.User.getTempData(p.TempData.CURRENT_MODE_UNLOCK_ID);cc.resources.load("texture/newBanner/"+o,function(e,o){if(e)return console.log(e);t.dict.img.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)})},e.prototype.clickGiveUp=function(){g.Popup.hide()},e.prototype.clickVideo=function(){var t=this;cc.game.emit("gamelog","btn031");var e=m.User.getTempData(p.TempData.CURRENT_MODE_UNLOCK_ID);f.Platform.showRewardAds(function(o){if(0==o){if(t.isEnterUgc)return;cc.game.emit("gamelog","rewarde_btn009"),t.isEnterUgc=!0;var n=m.User.get(p.UserData.UNLOCK_MODE_LIST)||[];n.push(e),m.User.set(p.UserData.UNLOCK_MODE_LIST,n),h.Event.emit(l.default.ENTER_ID,e)}})},c([P],e)}(s.default));r.default=b,cc._RF.pop()},{}],MouseJointComponent:[function(t,e,o){"use strict";cc._RF.push(e,"447caZoWLtHwIwUwyVldKEY","MouseJointComponent");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0}),i.MouseJointComponent=void 0;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetNode=null,e.touchMovePoint=null,e}return r(e,t),e.prototype.onTouchBegan=function(){var t=cc.director.getPhysicsManager(),e=this.targetNode.parent.convertToWorldSpaceAR(this.targetNode.position);cc.Camera&&cc.Camera.main&&(e=cc.Camera.main.getScreenToWorldPoint(e));var o=t.testPoint(e);o&&((this.connectedBody=o.body).awake=!0,this.maxForce=1e3*this.connectedBody.getMass(),this.target=e,this._init())},e.prototype.onTouchMove=function(){this._pressPoint=this.touchMovePoint},e.prototype.onTouchEnd=function(){this._destroy(),this._pressPoint=null},e}(cc.MouseJoint);i.MouseJointComponent=a,cc._RF.pop()},{}],NodeAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"6aa236v59dCCbn1YxhLz9MF","NodeAnimation");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameNodes=null,e.playOnLoad=!1,e.interval=.1,e._currChildIndex=0,e.isStop=!1,e}return r(e,t),e.prototype.start=function(){this.playOnLoad&&this.play()},e.prototype.play=function(){var t=this;this.isStop||(this.setChildrenActive(this.frameNodes,this._currChildIndex),this._currChildIndex+=1,this._currChildIndex>=this.frameNodes.childrenCount&&(this._currChildIndex=0),this.scheduleOnce(function(){t.play()},this.interval))},e.prototype.setChildrenActive=function(t,e){t.children.forEach(function(t,o){t.active=e==o})},a([l(cc.Node)],e.prototype,"frameNodes",void 0),a([l()],e.prototype,"playOnLoad",void 0),a([l()],e.prototype,"interval",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],NodeRepeatAnima:[function(t,e,o){"use strict";cc._RF.push(e,"1be4e1/d89E9aTUoZOPhXVz","NodeRepeatAnima");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playOnLoad=!1,e.isMoveRepeat=!1,e.endPos=cc.v2(),e.startScale=cc.v2(1,1),e.endScale=cc.v2(1,1),e.speed=500,e.isRotation=!1,e.dAngle=3,e.startPos=cc.v2(),e.tween=null,e}return r(e,t),e.prototype.start=function(){this.startPos=this.node.position,this.playOnLoad&&this.play()},e.prototype.play=function(){var t=this;if(this.isMoveRepeat){this.tween&&(this.tween.stop(),this.tween=null);var e=this.endPos.sub(this.startPos).mag()/this.speed;this.tween=cc.tween(this.node).call(function(){t.node.scaleX=t.startScale.x,t.node.scaleY=t.startScale.y}).to(e,{position:this.endPos}).call(function(){t.node.scaleX=t.endScale.x,t.node.scaleY=t.endScale.y}).to(e,{position:this.startPos}).union().repeatForever().start()}},e.prototype.update=function(){this.isRotation&&(this.node.angle+=this.dAngle)},a([l()],e.prototype,"playOnLoad",void 0),a([l()],e.prototype,"isMoveRepeat",void 0),a([l()],e.prototype,"endPos",void 0),a([l()],e.prototype,"startScale",void 0),a([l()],e.prototype,"endScale",void 0),a([l()],e.prototype,"speed",void 0),a([l()],e.prototype,"isRotation",void 0),a([l()],e.prototype,"dAngle",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],NutItem1:[function(t,e,o){"use strict";cc._RF.push(e,"1631aqDDU5PCqJi5LrzaRTe","NutItem1");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shadow=null,e.sp=null,e.sfs=[],e}return r(e,t),e.prototype.init=function(t){this.sp.spriteFrame=this.sfs[t]},e.prototype.isShadow=function(t){this.shadow.active=t},a([l(cc.Node)],e.prototype,"shadow",void 0),a([l(cc.Sprite)],e.prototype,"sp",void 0),a([l([cc.SpriteFrame])],e.prototype,"sfs",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],NutItem2:[function(t,e,o){"use strict";cc._RF.push(e,"1ed1dkBitRPwoWQMveDNux9","NutItem2");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp=null,e.sfs=[],e}return r(e,t),e.prototype.init=function(t){this.sp.spriteFrame=this.sfs[t]},a([l(cc.Sprite)],e.prototype,"sp",void 0),a([l([cc.SpriteFrame])],e.prototype,"sfs",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],OPPOADMediatorUtils:[function(t,e,o){"use strict";cc._RF.push(e,"895a1BFzz5MH6OyXUznT/8m","OPPOADMediatorUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.OPPOADMediator=void 0;var r=n("OPPOAndroidAdUtils"),a=function(){function t(){}return t.prototype.showRewardVideo=function(t){r.OPPOAndroidAd.showRewardVideo(t)},t.prototype.showLargeFeed=function(){r.OPPOAndroidAd.showLargeFeed()},t.prototype.removeLargePicFeed=function(){r.OPPOAndroidAd.removeLargePicFeed()},t.prototype.showInterstitialFeed=function(){r.OPPOAndroidAd.showInterstitialFeed()},t.prototype.showInterstitialFeed_must=function(){r.OPPOAndroidAd.showInterstitialFeed_must()},t.prototype.showInterstitialFeed_result=function(){r.OPPOAndroidAd.showInterstitialFeed_result()},t}();i.OPPOADMediator=new a,cc._RF.pop()},{}],OPPOAndroidAdUtils:[function(t,e,o){"use strict";cc._RF.push(e,"62b2a5PwkNLEbNtulzNmmeO","OPPOAndroidAdUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.OPPOAndroidAd=void 0;var r=n("PlatformConst"),a=n("BmsManager"),c=n("PlatformManager"),s=function(){function t(){}return t.prototype.showLargeFeed=function(){var t=a.BMS.getKey("isCheck");console.log("[isCheck-\u539f\u58f0\u5927\u56febanner]",t),t||(console.log("DownDT",a.BMS.getKey("DownDT")),this.getResByChance(a.BMS.getKey("DownDT")[0])&&c.Platform.showLargeFeed(this.getPosID(),a.BMS.getKey("DownDT")[1]))},t.prototype.showSplash=function(){var t=a.BMS.getKey("isCheck");console.log("[isCheck-showSplash]",t),t||a.BMS.getKey("openkp")&&c.Platform.showSplash()},t.prototype.getPosID=function(){var t,e=this.randomNum(0,2);return 0==e?t=a.BMS.getKey("natId1"):1==e?t=a.BMS.getKey("natId2"):2==e&&(t=a.BMS.getKey("natId3")),this.posID=t,console.log("\u3010\u5e7f\u544aid\u3011\uff1a",e,t),t},t.prototype.getPosID2=function(){var t,e=this.randomNum(0,2);return 0==e?t=a.BMS.getKey("natId1"):1==e?t=a.BMS.getKey("natId2"):2==e&&(t=a.BMS.getKey("natId3")),this.posID2=t,console.log("\u3010\u5e7f\u544aid\u3011\uff1a",e,t),t},t.prototype.randomNum=function(t,e,o){var n=e-t,i=o||Math.random();return t+Math.round(i*n)},t.prototype.showBannerFeed=function(){var t=a.BMS.getKey("isCheck");console.log("[isCheck-\u539f\u58f0banner]",t),t||1==t?(console.log("oppo\u5b89\u5353 banner"),c.Platform.showBanner()):(console.log("oppo\u5b89\u5353 showBannerFeed"),a.BMS.getKey("isbanner")&&c.Platform.showBannerFeed2({ratio:a.BMS.getKey("banCloseChance"),posID:this.getPosID()}))},t.prototype.removeLargePicFeed=function(){null!=this.posID&&c.Platform.removeLargePicFeed(this.posID)},t.prototype.showInterstitialFeed=function(){var t=a.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f]",t),t);else{var e=a.BMS.getKey("fullCloseChance"),o=a.BMS.getKey("fullAdChance"),n=a.BMS.getKey("fullChance");console.log("fullChance",n),this.getResByChance(n)&&c.Platform.showInterstitialFeed(this.getPosID2(),3,e,o)}},t.prototype.removeInterstitialFeed=function(){null!=this.posID2&&c.Platform.removeInterstitialFeed(this.posID2)},t.prototype.showInterstitialFeed_must=function(){var t=a.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f\u7ed3\u7b97]",t),t);else{var e=a.BMS.getKey("fullCloseChance"),o=a.BMS.getKey("fullAdChance");c.Platform.showInterstitialFeed(this.getPosID2(),3,e,o)}},t.prototype.showInterstitialFeed_result=function(){var t=a.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f\u7ed3\u7b97]",t),t);else{var e=a.BMS.getKey("fullCloseChance"),o=a.BMS.getKey("fullAdChance");console.log("fullSettleChance",a.BMS.getKey("fullSettleChance")),this.getResByChance(a.BMS.getKey("fullSettleChance"))&&c.Platform.showInterstitialFeed(this.getPosID2(),3,e,o)}},t.prototype.showRewardVideo=function(t){var e=this,o=a.BMS.getKey("isCheck");if(console.log("[isCheck-\u89c6\u9891]",o),o)c.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)});else if(c.Platform.getConfig(),c.Platform.is(r.EPlatform.OPPO_ANDROID)){if(a.BMS.getKey("videoEx"))return this.sucCB_video=t,new Promise(function(){cc.game.on("onInterstitialFeedShow",e.onInterstitialFeedShow,e),cc.game.on("onInterstitialFeedShowFailed",e.onInterstitialFeedShowFailed,e),e.removeLargePicFeed();var t=a.BMS.getKey("fullCloseChance"),o=a.BMS.getKey("fullAdChance");c.Platform.showInterstitialFeed(e.getPosID(),3,t,o),console.log("\u89c6\u9891\u53d8\u6210\u63d2\u5c4f")});c.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)})}else c.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)})},t.prototype.onInterstitialFeedShow=function(){this.sucCB_video(0),cc.game.off("onInterstitialFeedShow",this.onInterstitialFeedShow,this),cc.game.off("onInterstitialFeedShowFailed",this.onInterstitialFeedShowFailed,this)},t.prototype.onInterstitialFeedShowFailed=function(){var t=this;c.Platform.showRewardAds_xiaomi(function(e){0==e&&t.sucCB_video(0)}),cc.game.off("onInterstitialFeedShow",this.onInterstitialFeedShow,this),cc.game.off("onInterstitialFeedShowFailed",this.onInterstitialFeedShowFailed,this)},t.prototype.getResByChance=function(t){var e=100*Math.random(),o=!1;return console.log("\u968f\u673a\u6570",e),console.log("\u5f53\u524d\u914d\u7f6e\u6982\u7387:"+t),0==t?o:(t>=e&&(o=!0),o)},t}();i.OPPOAndroidAd=new s,cc._RF.pop()},{}],OPPOMiniADMediatorUtils:[function(t,e,o){"use strict";cc._RF.push(e,"feb23I2kxNP44tXfUt3hKgQ","OPPOMiniADMediatorUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.OPPOMiniADMediator=void 0;var r=n("OPPOMiniADUtils"),a=function(){function t(){}return t.prototype.showRewardVideo=function(t){r.OPPOMiniAD.showRewardVideo(t)},t.prototype.showLargeFeed=function(){r.OPPOMiniAD.showLargeFeed()},t.prototype.removeLargePicFeed=function(){r.OPPOMiniAD.removeLargePicFeed()},t.prototype.showInterstitialFeed=function(){r.OPPOMiniAD.showInterstitialFeed()},t.prototype.showInterstitialFeed_must=function(){r.OPPOMiniAD.showInterstitialFeed_must()},t.prototype.showInterstitialFeed_result=function(){r.OPPOMiniAD.showInterstitialFeed_result()},t}();i.OPPOMiniADMediator=new a,cc._RF.pop()},{}],OPPOMiniADUtils:[function(t,e,o){"use strict";cc._RF.push(e,"afebeFBmt1Fl77XbcrDR+Q7","OPPOMiniADUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.OPPOMiniAD=void 0;var r=n("PlatformConst"),a=n("BmsManager"),c=n("PlatformManager"),s=function(){function t(){}return t.prototype.showLargeFeed=function(){var t=a.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u58f0\u5927\u56febanner]",t),t);else if(console.log("DownDT",a.BMS.getKey("DownDT")),this.getResByChance(a.BMS.getKey("DownDT")[0])){var e=this.getResByChance(a.BMS.getKey("DownDT")[1]);c.Platform.showNativeAds({type:0,isMistakeClose:e,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeBannerNode")})}},t.prototype.clickAdJump=function(){var t=a.BMS.getKey("isCheck");console.log("[isCheck-\u89e6\u53d1\u70b9\u51fb\u5e7f\u544a\u8df3\u8f6c]",t),t||(console.log("nextAdChange",a.BMS.getKey("nextAdChange")),this.getResByChance(a.BMS.getKey("nextAdChange"))&&c.Platform.clickAdJump())},t.prototype.showSplash=function(){var t=a.BMS.getKey("isCheck");console.log("[isCheck-showSplash]",t),t||a.BMS.getKey("openkp")&&c.Platform.showSplash()},t.prototype.getPosID=function(){var t=a.BMS.getKey("natId1");return this.posID=t,console.log("\u3010\u5e7f\u544aid\u3011\uff1a",t),t},t.prototype.getPosID2=function(){var t=a.BMS.getKey("natId1");return this.posID=t,console.log("\u3010\u5e7f\u544aid\u3011\uff1a",t),t},t.prototype.randomNum=function(t,e,o){var n=e-t,i=o||Math.random();return t+Math.round(i*n)},t.prototype.showBannerFeed=function(){var t=a.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u58f0banner]",t),t||1==t)console.log("oppo\u5c0f\u6e38\u620f banner"),c.Platform.showBanner();else if(console.log("oppo\u5c0f\u6e38\u620f showBannerFeed"),a.BMS.getKey("isbanner")){var e=this.getResByChance(a.BMS.getKey("banCloseChance"));c.Platform.showNativeAds({type:0,isMistakeClose:e,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeBannerNode")})}},t.prototype.removeLargePicFeed=function(){null!=this.posID&&c.Platform.hideNativeAds()},t.prototype.showInterstitialFeed=function(){var t=a.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f]",t),t);else{var e=a.BMS.getKey("fullCloseChance"),o=a.BMS.getKey("fullAdChance"),n=a.BMS.getKey("fullChance");if(console.log("fullChance",n,this.getResByChance(n)),this.getResByChance(n)){var i=this.getResByChance(e),r=this.getResByChance(o);c.Platform.hideNativeAds(),console.log("\u8c03\u7528\u663e\u793a-\u539f\u751f\u63d2\u5c4f"),c.Platform.showNativeAds({type:1,isMistakeClose:i,isMistakeClose_blank:r,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeInsertNode")})}}},t.prototype.removeInterstitialFeed=function(){null!=this.posID2&&c.Platform.hideNativeAds()},t.prototype.showInterstitialFeed_must=function(){var t=a.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f\u7ed3\u7b97]",t),t);else{var e=a.BMS.getKey("fullCloseChance"),o=a.BMS.getKey("fullAdChance"),n=this.getResByChance(e),i=this.getResByChance(o);c.Platform.hideNativeAds(),c.Platform.showNativeAds({type:1,isMistakeClose:n,isMistakeClose_blank:i,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeInsertNode")})}},t.prototype.showInterstitialFeed_result=function(){var t=a.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f\u7ed3\u7b97]",t),t);else{var e=a.BMS.getKey("fullCloseChance"),o=a.BMS.getKey("fullAdChance");if(console.log("fullSettleChance",a.BMS.getKey("fullSettleChance")),this.getResByChance(a.BMS.getKey("fullSettleChance"))){var n=this.getResByChance(e),i=this.getResByChance(o);c.Platform.hideNativeAds(),c.Platform.showNativeAds({type:1,isMistakeClose:n,isMistakeClose_blank:i,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeInsertNode")})}}},t.prototype.showRewardVideo=function(t){var e=this,o=a.BMS.getKey("isCheck");if(console.log("[isCheck-\u89c6\u9891]",o),o)c.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)});else if(c.Platform.getConfig(),c.Platform.is(r.EPlatform.OPPO)){if(a.BMS.getKey("videoEx"))return this.sucCB_video=t,new Promise(function(){cc.game.on("onInterstitialFeedShow",e.onInterstitialFeedShow,e),cc.game.on("onInterstitialFeedShowFailed",e.onInterstitialFeedShowFailed,e),e.removeLargePicFeed();var t=a.BMS.getKey("fullCloseChance"),o=a.BMS.getKey("fullAdChance"),n=e.getResByChance(t),i=e.getResByChance(o);c.Platform.hideNativeAds(),c.Platform.showNativeAds({type:1,isMistakeClose:n,isMistakeClose_blank:i,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeInsertNode")}),console.log("\u89c6\u9891\u53d8\u6210\u63d2\u5c4f")});c.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)})}else c.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)})},t.prototype.onInterstitialFeedShow=function(){var t=this;setTimeout(function(){t.sucCB_video(0),cc.game.off("onInterstitialFeedShow",t.onInterstitialFeedShow,t),cc.game.off("onInterstitialFeedShowFailed",t.onInterstitialFeedShowFailed,t)},1)},t.prototype.onInterstitialFeedShowFailed=function(){var t=this;c.Platform.showRewardAds_xiaomi(function(e){0==e&&t.sucCB_video(0)}),cc.game.off("onInterstitialFeedShow",this.onInterstitialFeedShow,this),cc.game.off("onInterstitialFeedShowFailed",this.onInterstitialFeedShowFailed,this)},t.prototype.getResByChance=function(t){var e=100*Math.random(),o=!1;return console.log("\u968f\u673a\u6570",e),console.log("\u5f53\u524d\u914d\u7f6e\u6982\u7387:"+t),0==t?o:(t>=e&&(o=!0),o)},t}();i.OPPOMiniAD=new s,cc._RF.pop()},{}],OPPO:[function(t,e,o){"use strict";cc._RF.push(e,"74bf8qkG75Fcoh5F0KVCpIr","OPPO");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0}),r.OPPO=void 0;var c=function(t){function e(){var e=t.call(this)||this;return e.sdk=window.qg,e._rewardAds=null,e._rewardAdsCb=null,e._rewardHasShow=!1,e._rewardHasLoad=!1,e._banner=null,e._nativeAds=[],e.ads=null,e.adId=null,console.log("oppo"),e}return a(e,t),e.prototype.getInstance=function(){return this.sdk},e.prototype.showRewardAds=function(t){var e=this;return this.sdk.createRewardedVideoAd?this._config.rewardID?(this._rewardAdsCb=t,this._rewardHasShow=!1,this._rewardAds||(this._rewardAds=this.sdk.createRewardedVideoAd({adUnitId:this._config.rewardID}),this._rewardAds.onLoad(function(){e._rewardHasLoad=!0,e._rewardHasShow||(e._rewardHasShow=!0,e._rewardAds.show())}),this._rewardAds.onClose(function(t){e._rewardHasLoad=!1,e._rewardAdsCb&&(e._rewardAdsCb(t.isEnded?0:1),e._rewardAdsCb=null)}),this._rewardAds.onError(function(t){e._rewardHasLoad=!1,console.log("[platform] [OPPOPlatform] showRewardAds",t),e._rewardAdsCb&&(e._rewardAdsCb(-1),e._rewardAdsCb=null)})),void(this._rewardHasLoad&&!this._rewardHasShow?(this._rewardHasShow=!0,this._rewardAds.show()):this._rewardAds.load())):t(-3):t(-2)},e.prototype.showBanner=function(t,e){void 0===t&&(t={id:""}),this.sdk.createBannerAd&&this._config.bannerID&&(this._banner||(this._banner=this.sdk.createBannerAd({adUnitId:t.id||this._config.bannerID}),console.log("[platform] [OPPOPlatform] create"),this._banner.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)}),this._banner.onError(function(t){console.log("[platform] [OPPOPlatform] showBanner",t)})))},e.prototype.hideBanner=function(){this._banner&&(this._banner.destroy(),this._banner=null)},e.prototype.showNativeAds=function(t,e){var o=this;if(void 0===t&&(t={type:0,container:null}),this.sdk.createNativeAd&&this._config.nativeID){var n=this.sdk.createNativeAd({adUnitId:t.id||this._config.nativeID});t.container.opacity=255,this._nativeAds.push({ads:n,container:t.container}),n.onLoad(function(i){var r=i.adList?i.adList[0]:null;0!=t.container.opacity&&(n&&r&&(n.reportAdShow({adId:r.adId}),0==t.type?o.showNativeBanner(r,n,t):1==t.type?(o.showNativeInsert(r,n,t),console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a]"),cc.game.emit("onInterstitialFeedShow")):o.showNativeIcon(r,n,t)),n.offError(),n.offLoad()),e&&e(0)}),n.onError(function(i){if(console.log("[platform] [OPPOPlatform] showNativeAd",i),t.container){t.container.active=!1,t.container.opacity=0;var r=o._nativeAds.findIndex(function(e){return e.container.name==t.container.name});-1!=r&&o._nativeAds.splice(r,1)}1==t.type&&(console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a\u5931\u8d25]"),cc.game.emit("onInterstitialFeedShowFailed")),n.offError(),n.offLoad(),n.destory&&n.destory(),n=null,e&&e(1)}),n&&n.load()}},e.prototype.hideNativeAds=function(){if(this._nativeAds.length){var t=this._nativeAds.pop();if(cc.isValid(t.container,!0)){t.container.opacity=0,t.container.active=!1,t.container.off(cc.Node.EventType.TOUCH_START);var e=t.container.getChildByName("close");e&&e.off(cc.Node.EventType.TOUCH_START);var o=t.container.getChildByName("next");o&&o.off(cc.Node.EventType.TOUCH_START)}t.ads.destory&&t.ads.destory(),this.ads&&(this.ads=null,this.adId=null)}},e.prototype.clickAdJump=function(){console.log("\u6d4b\u8bd5\u89e6\u53d1",this.ads,this.adId),this.ads&&this.ads.reportAdClick({adId:this.adId})},e.prototype.showNativeBanner=function(t,e,o){var n=this;void 0===o&&(o={type:0,container:null});var i=o.container,r=i.getChildByName("img")||i.getChildByName("mask").getChildByName("img"),a=i.getChildByName("title"),c=i.getChildByName("desc"),s=i.getChildByName("btnText"),l=i.getChildByName("close");if(this.ads=e,this.adId=t.adId,i.active=!0,i.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),n.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),n.hideNativeAds()):n.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),c&&(c.getComponent(cc.Label).string=""+t.desc),s&&(s.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var d=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.assetManager.loadRemote(d,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.showNativeInsert=function(t,e,o){var n=this;void 0===o&&(o={type:0,container:null});var i=o.container,r=i.getChildByName("img")||i.getChildByName("mask").getChildByName("img"),a=i.getChildByName("title"),c=i.getChildByName("desc"),s=i.getChildByName("btnText"),l=i.getChildByName("next"),d=i.getChildByName("close"),p=i.getChildByName("bg2");if(i.active=!0,i.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),n.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),n.hideNativeAds(),o.hideCb&&o.hideCb()},this),d&&d.once(cc.Node.EventType.TOUCH_START,function(){console.log(o.isMistakeClose),o.isMistakeClose?(console.log(1),e.reportAdClick({adId:t.adId}),n.hideNativeAds()):(console.log(2),n.hideNativeAds()),o.hideCb&&o.hideCb()}),console.log("blank",p,o.isMistakeClose_blank),p&&o.isMistakeClose_blank&&p.once(cc.Node.EventType.TOUCH_START,function(){console.log("\u70b9\u51fb\u7a7a\u767d\u5904 - \u4e0b\u8f7d"),e.reportAdClick({adId:t.adId}),n.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),c&&(c.getComponent(cc.Label).string=""+t.desc),s&&(s.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var h=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.assetManager.loadRemote(h,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.showNativeIcon=function(t,e,o){var n=this;void 0===o&&(o={type:0,container:null});var i=o.container,r=i.getChildByName("img")||i.getChildByName("mask").getChildByName("img"),a=i.getChildByName("title"),c=i.getChildByName("close");i.active=!0,i.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),n.hideNativeAds(),o.hideCb&&o.hideCb()},this),c&&c.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),n.hideNativeAds()):n.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),r&&cc.assetManager.loadRemote(t.icon,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})},e}(i("BasePlatform").BasePlatform);r.OPPO=c,cc._RF.pop()},{}],OnCollisionCallBack:[function(t,e,o){"use strict";cc._RF.push(e,"40181N+GbhLe5dMy88DVagt","OnCollisionCallBack");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.onCollisionEnter=function(){},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],Params:[function(t,e,o){"use strict";cc._RF.push(e,"4a6d1YPVA5N1p72U30IiXST","Params");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("LocalStorage"),a=function(){function t(){this._showParams={},this._gameParams={app_name:"",channel:"",version:""},this._userParams={openid:""},this._openidKey="sdk_openid",this._userParams.openid=r.default.getItem(this._openidKey)}return t.prototype.setShowParams=function(t){return this._showParams=t},t.prototype.getShowParams=function(t){return void 0===t&&(t=""),""===t?this._showParams:void 0===this._showParams[t]?"":this._showParams[t]},t.prototype.setGameParams=function(t){return t.channel="tt_minigame",this._gameParams=t},t.prototype.getGameParams=function(t){return void 0===t&&(t=""),""===t?this._gameParams:void 0===this._gameParams[t]?"":this._gameParams[t]},t.prototype.setUserParams=function(t){return r.default.setItem(this._openidKey,void 0===t.openid?"":t.openid),this._userParams=t},t.prototype.getUserParams=function(t){return void 0===t&&(t=""),""===t?this._userParams:void 0===this._userParams[t]?"":this._userParams[t]},t}();i.default=new a,cc._RF.pop()},{}],"Pause - 001":[function(t,e,o){"use strict";cc._RF.push(e,"4c2d16FBmdGqqsqJgyw+HPN","Pause - 001");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("SceneConst"),h=i("UserConst"),u=i("EventManager"),f=i("PlatformManager"),g=i("PopupManager"),m=i("SceneManager"),y=i("UserManager"),v=i("OPPOAndroidAdUtils"),_=i("OPPOMiniADUtils"),C=i("VIVOADUtils"),w=i("XMADUtils"),P=i("ShuShuConst"),b=cc._decorator,T=b.ccclass,S=(b.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("homeBtn",this.homeBtn,this),this.addBtnOn("gameBtn",this.gameBtn,this),this.addBtnOn("answerBtn",this.answerBtn,this),y.User.getTempData(h.TempData.CURRENT_LEVEL_ID),y.User.getTempData(h.TempData.CURRENT_MODE),this.initView()},e.prototype.onEnable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?(w.XMAD.showLargeFeed(),w.XMAD.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.OPPO_ANDROID)?(v.OPPOAndroidAd.showLargeFeed(),v.OPPOAndroidAd.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.OPPO)?(_.OPPOMiniAD.showLargeFeed(),_.OPPOMiniAD.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.VIVO)?C.VIVOAD.showCustomAd_1(function(){C.VIVOAD.showCustomAd_2()}):f.Platform.showBanner()},e.prototype.onDisable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?(w.XMAD.removeLargePicFeed(),f.Platform.hideBanner()):f.Platform.is(d.EPlatform.OPPO_ANDROID)?(v.OPPOAndroidAd.removeLargePicFeed(),f.Platform.hideBanner()):f.Platform.hideBanner(),f.Platform.hideNativeAds(),f.Platform.hideCustomAd1(),f.Platform.hideCustomAd2(),f.Platform.hideCustomAd_1(),f.Platform.hideCustomAd_2()},e.prototype.homeBtn=function(){y.User.getTempData("levelTime"),(new Date).getTime(),cc.game.emit("gamelog_Thinking",P.ShuShuConst.Level_Return,{lv:y.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:y.User.getTempData(h.TempData.CURRENT_MODE)}),y.User.getTempData(h.TempData.isFirst)?y.User.setTempData(h.TempData.isFirstBack,!0):y.User.setTempData("needCheckSignIn",!0),m.Scene.loadScene(p.SceneConst.Home)},e.prototype.gameBtn=function(){u.Event.emit(l.default.restoreTime),g.Popup.hide()},e.prototype.answerBtn=function(){f.Platform.showRewardAds(function(t){0==t&&(u.Event.emit(l.default.restartAnswer2),y.User.getTempData(h.TempData.CURRENT_LEVEL_ID),0==y.User.getTempData(h.TempData.CURRENT_MODE)&&cc.game.emit("gamelog_Thinking",P.ShuShuConst.reward_btn,{id:"010",lv:y.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:y.User.getTempData(h.TempData.CURRENT_MODE)}),u.Event.emit(l.default.restoreTime),g.Popup.hide())})},e.prototype.initView=function(){y.User.getTempData(h.TempData.CURRENT_LEVEL);var t=y.User.getTempData(h.TempData.CURRENT_MODE);if(y.User.getTempData(h.TempData.CURRENT_LEVEL_ID),0==t){var e=y.User.get(h.TempData.isUnlockTip)||!1;this.dict.answerBtn.active=!e}},c([T],e)}(s.default));r.default=S,cc._RF.pop()},{}],Pause:[function(t,e,o){"use strict";cc._RF.push(e,"95577p006JB3YZFATCN7b63","Pause");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("SceneConst"),h=i("UserConst"),u=i("BmsManager"),f=i("EventManager"),g=i("PlatformManager"),m=i("PopupManager"),y=i("SceneManager"),v=i("UserManager"),_=i("OPPOAndroidAdUtils"),C=i("OPPOMiniADUtils"),w=i("VIVOADUtils"),P=i("XMADUtils"),b=i("ShuShuConst"),T=i("ConfigUtils"),S=cc._decorator,A=S.ccclass,N=(S.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("homeBtn",this.homeBtn,this),this.addBtnOn("gameBtn",this.gameBtn,this),this.addBtnOn("answerBtn",this.answerBtn,this),this.addBtnOn("resortBtn",this.resortBtn,this),v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),v.User.getTempData(h.TempData.CURRENT_MODE),this.initView()},e.prototype.onEnable=function(){g.Platform.is(d.EPlatform.XIAOMI_ANDROID)?(P.XMAD.showLargeFeed(),P.XMAD.showInterstitialFeed_result()):g.Platform.is(d.EPlatform.OPPO_ANDROID)?(_.OPPOAndroidAd.showLargeFeed(),_.OPPOAndroidAd.showInterstitialFeed_result()):g.Platform.is(d.EPlatform.OPPO)?(C.OPPOMiniAD.showLargeFeed(),C.OPPOMiniAD.showInterstitialFeed_result()):g.Platform.is(d.EPlatform.VIVO)?w.VIVOAD.showCustomAd_1(function(){w.VIVOAD.showCustomAd_2()}):g.Platform.showBanner()},e.prototype.onDisable=function(){g.Platform.is(d.EPlatform.XIAOMI_ANDROID)?(P.XMAD.removeLargePicFeed(),g.Platform.hideBanner()):g.Platform.is(d.EPlatform.OPPO_ANDROID)?(_.OPPOAndroidAd.removeLargePicFeed(),g.Platform.hideBanner()):g.Platform.hideBanner(),g.Platform.hideNativeAds(),g.Platform.hideCustomAd1(),g.Platform.hideCustomAd2(),g.Platform.hideCustomAd_1(),g.Platform.hideCustomAd_2()},e.prototype.homeBtn=function(){v.User.getTempData("levelTime"),(new Date).getTime(),cc.game.emit("gamelog_Thinking",b.ShuShuConst.Level_Return,{lv:v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(h.TempData.CURRENT_MODE)}),v.User.getTempData(h.TempData.isFirst)?v.User.setTempData(h.TempData.isFirstBack,!0):v.User.setTempData("needCheckSignIn",!0),v.User.setTempData("backByGame",!0),y.Scene.loadScene(p.SceneConst.Home)},e.prototype.gameBtn=function(){f.Event.emit(l.default.restoreTime),m.Popup.hide()},e.prototype.answerBtn=function(){this.dict.tipShareIcon.active?cc.game.emit("pause_answerBtn"):g.Platform.showRewardAds(function(t){0==t&&(f.Event.emit(l.default.restartAnswer2),v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),0==v.User.getTempData(h.TempData.CURRENT_MODE)&&cc.game.emit("gamelog_Thinking",b.ShuShuConst.reward_btn,{id:"010",lv:v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(h.TempData.CURRENT_MODE)}),f.Event.emit(l.default.restoreTime),m.Popup.hide())})},e.prototype.initView=function(){v.User.getTempData(h.TempData.CURRENT_LEVEL);var t=v.User.getTempData(h.TempData.CURRENT_MODE);v.User.getTempData(h.TempData.CURRENT_LEVEL_ID),0==t&&v.User.get(h.TempData.isUnlockTip)},e.prototype.initShareView=function(){v.User.get(h.UserData.getBoreByShareTimes);var t=v.User.get(h.UserData.getTipShareTimes);v.User.get(h.UserData.getResetByShareTimes),v.User.get(h.UserData.getDelayedByShareTimes),g.Platform.getConfig().hasShare&&"all"==u.BMS.getKey("share")&&(t?(this.dict.tipVideoIcon.getComponent(cc.Sprite).enabled=!1,this.dict.tipShareIcon.active=!0):(this.dict.tipVideoIcon.getComponent(cc.Sprite).enabled=!0,this.dict.tipShareIcon.active=!1))},e.prototype.resortBtn=function(){var t=v.User.get(h.UserData.LEVEL_LIST);T.ConfigUtils.setNextModeID();var e=1;T.ConfigUtils.getDataByID(0,function(o){console.log("res - ",o),e=o.amount,t[0]>e?v.User.setTempData(h.TempData.CURRENT_LEVEL,1):v.User.setTempData(h.TempData.CURRENT_LEVEL,t[0]),y.Scene.loadScene(p.SceneConst.GAME)})},c([A],e)}(s.default));r.default=N,cc._RF.pop()},{}],PhysicsPolygonMask:[function(t,e,o){"use strict";cc._RF.push(e,"52554fWgnpKr7PHH2JwS/Ed","PhysicsPolygonMask");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=c.requireComponent,p=c.executeInEditMode,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refleshEveryFrame=!1,e}return r(e,t),e.prototype.start=function(){this.init()},e.prototype.init=function(){this.draw()},e.prototype.draw=function(){var t=this.getComponent(cc.PhysicsPolygonCollider).points,e=this.getComponent(cc.Mask)._graphics;e.clear();var o=t.length,n=this.getComponent(cc.PhysicsPolygonCollider).offset.x,i=this.getComponent(cc.PhysicsPolygonCollider).offset.y;e.moveTo(t[o-1].x+n,t[o-1].y+i);for(var r=0;r<t.length;r++)e.lineTo(t[r].x+n,t[r].y+i);e.fill()},e.prototype.lateUpdate=function(){this.refleshEveryFrame&&this.draw()},a([l()],e.prototype,"refleshEveryFrame",void 0),a([s,d(cc.Mask),p],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],PlatformConst:[function(t,e,o){"use strict";cc._RF.push(e,"050ce4vS+hNCp1Mio3hNmrF","PlatformConst");var n,i,r=t,a=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.PlatformConfig=a.BaseConfig=a.LogoType=a.AgeTipType=a.LoginType=a.PrivacyPolicyType=a.FitUIType=a.EPlatform=void 0;var s,l,d,p,h,u,f=r("BasePlatform"),g=r("Android"),m=r("Android"),y=r("Android"),v=r("Android"),_=r("Android"),C=r("IOS"),w=r("KS"),P=r("Android"),b=r("Android"),T=r("Android"),S=r("Android"),A=r("Android"),N=r("XM");(function(t){t[t.WEB=0]="WEB",t[t.TT=1]="TT",t[t.KS=2]="KS",t[t.WX=3]="WX",t[t.QQ=4]="QQ",t[t.BAIDU=5]="BAIDU",t[t.MEIZU=6]="MEIZU",t[t.OPPO=7]="OPPO",t[t.VIVO=8]="VIVO",t[t.HW=9]="HW",t[t.XIAOMI=10]="XIAOMI",t[t.ANDROID=11]="ANDROID",t[t.ANDROID_GOOGLE=12]="ANDROID_GOOGLE",t[t.IOS=13]="IOS",t[t.IOS_HAIWAI=14]="IOS_HAIWAI",t[t.OPPO_ANDROID=15]="OPPO_ANDROID",t[t.VIVO_ANDROID=16]="VIVO_ANDROID",t[t.XIAOMI_ANDROID=17]="XIAOMI_ANDROID",t[t.HUAWEI_ANDROID=18]="HUAWEI_ANDROID",t[t.KS_ANDROID=19]="KS_ANDROID",t[t.OHAYOO_ANDROID=20]="OHAYOO_ANDROID"})(s=a.EPlatform||(a.EPlatform={})),function(t){t[t.Normal=0]="Normal",t[t.TT=1]="TT",t[t.KS=2]="KS"}(l=a.FitUIType||(a.FitUIType={})),function(t){t[t.NO=0]="NO",t[t.MINI_GAME=1]="MINI_GAME",t[t.MINI_GAME_VIVO=2]="MINI_GAME_VIVO",t[t.MINI_GAME_XM=3]="MINI_GAME_XM",t[t.NATIVE=4]="NATIVE"}(d=a.PrivacyPolicyType||(a.PrivacyPolicyType={})),function(t){t[t.NO=0]="NO",t[t.HW=1]="HW",t[t.HWAndriod=2]="HWAndriod"}(p=a.LoginType||(a.LoginType={})),function(t){t[t.NO=0]="NO",t[t.AGE_12=1]="AGE_12",t[t.AGE_16=2]="AGE_16"}(h=a.AgeTipType||(a.AgeTipType={})),function(t){t[t.PlayHammer=0]="PlayHammer",t[t.MyDog=1]="MyDog",t[t.MySingleDog=2]="MySingleDog",t[t.MyDogEN=3]="MyDogEN",t[t.TravelingDog=4]="TravelingDog"}(u=a.LogoType||(a.LogoType={}));var B=function(){this.platformClass=f.BasePlatform,this.flag="rrbdnios",this.version="1.0.1",this.appID="",this.bannerID="",this.insertID="",this.rewardID="",this.blockID="",this.boxID="",this.nativeID="",this.hasRecord=0,this.hasShare=0,this.fitUIType=l.Normal,this.hasHomeBtn=0,this.hasAgeTip=0,this.loadingDelay=0,this.privacyPolicyType=d.NO,this.hasMoreGame=0,this.hasCopyright=0,this.hasCustomerService=0,this.ageTipType=h.NO,this.logoType=u.PlayHammer,this.loginType=p.NO,this.company="\u5e7f\u5dde\u5c0f\u8d1d",this.email="xiaobei-kf@foxmail.com",this.address="\u5e7f\u5dde\u5e02\u5929\u6cb3\u533a\u73e0\u6c5f\u65b0\u57ce\u73e0\u6c5f\u4e1c\u8def30\u53f7\u5e7f\u5dde\u94f6\u884c\u5927\u53a6601A",this.configSuffix="",this.hasHealthy=1,this.registerNumber="2020SR0746213",this.registerPerson="\u5e7f\u5dde\u52c7\u5f80\u79d1\u6280\u6709\u9650\u516c\u53f8",this.customAd_topImg_bottomText="",this.customAd_leftImg_rightText="",this.serverUrl="https://game.zuiqiangyingyu.net/",this.rank=""};a.BaseConfig=B;var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=g.Android,e.ageTipType=h.AGE_16,e.loadingDelay=2,e.fitUIType=l.TT,e.hasCopyright=1,e.flag="wlgczapk",e.version="1.2.0.1fxrjh",e.logoType=u.TravelingDog,e.registerNumber="2022SR1545538",e.hasAgeTip=1,e.rank="android",e}return c(e,t),e}(B),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=g.Android,e.flag="wdgggp",e.version="1.0.3.0",e.hasHomeBtn=1,e.ageTipType=h.NO,e.fitUIType=l.TT,e.hasCopyright=0,e.configSuffix="_gp",e.hasHealthy=0,e.logoType=u.MyDogEN,e}return c(e,t),e}(B),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=g.Android,e.flag="wdggapk",e.version="1.0.4.1hw",e.hasHomeBtn=1,e.ageTipType=h.AGE_16,e.loadingDelay=2,e.fitUIType=l.TT,e.hasCopyright=1,e.loginType=p.HWAndriod,e}return c(e,t),e}(B),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=g.Android,e.flag="rrbdn",e.version="1.0.3ohayoo",e.hasHomeBtn=1,e.loadingDelay=2,e.ageTipType=h.AGE_12,e.fitUIType=l.TT,e.privacyPolicyType=d.NATIVE,e.hasAgeTip=1,e}return c(e,t),e}(B),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=v.default,e.flag="wlgczapk",e.version="1.0.0.1xm",e.hasHomeBtn=1,e.ageTipType=h.AGE_16,e.loadingDelay=1,e.hasCopyright=1,e.privacyPolicyType=d.NATIVE,e.logoType=u.MyDog,e}return c(e,t),e}(B),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=m.default,e.flag="wlgczapk",e.version="1.0.0.1oppo",e.hasHomeBtn=1,e.ageTipType=h.AGE_16,e.loadingDelay=2,e.hasMoreGame=1,e.privacyPolicyType=d.NATIVE,e.hasCopyright=1,e.hasCustomerService=1,e.fitUIType=l.TT,e.logoType=u.MyDog,e}return c(e,t),e}(O),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=y.default,e.flag="wlgczapk",e.version="1.0.0.1vivo",e.hasHomeBtn=1,e.ageTipType=h.AGE_16,e.loadingDelay=2,e.privacyPolicyType=d.NATIVE,e.hasCopyright=1,e.fitUIType=l.TT,e.logoType=u.MyDog,e}return c(e,t),e}(O),M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=C.IOS,e.flag="wdggios",e.version="1.1.0",e.ageTipType=h.AGE_16,e.fitUIType=l.TT,e}return c(e,t),e}(B),U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=C.IOS,e.flag="wdgghwios",e.version="1.1.0",e.ageTipType=h.NO,e.fitUIType=l.TT,e.hasCopyright=0,e.hasHealthy=0,e.logoType=u.MyDogEN,e.serverUrl="https://bms.yarkgame.com/",e}return c(e,t),e}(B),F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=T.TT,e.flag="wlgcztt",e.version="1.0.17",e.appID="tt751703aaea2b9ed402",e.bannerID="2r20sjsuo5vta73bc8",e.rewardID="4kgicn0c138h50fe0b",e.insertID="204mao2a6efj1dei4b",e.fitUIType=l.TT,e.hasRecord=1,e}return c(e,t),e}(B),x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=P.OPPO,e.flag="wdggoppo",e.version="1.1.5",e.appID="30841165",e.bannerID="565455",e.rewardID="565458",e.nativeID="565457",e.boxID="565459",e.fitUIType=l.TT,e.hasCopyright=1,e.privacyPolicyType=d.MINI_GAME,e.ageTipType=h.AGE_16,e}return c(e,t),e}(B),j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=N.XM,e.flag="wdggxm",e.version="1.1.5",e.appID="2882303761520177155",e.bannerID="a50b2ff21bbe25f1fc675ac7fd411e91",e.rewardID="188792c0e2bd130df5a692700c1894c7",e.insertID="097adfd4ff885bef023334f45f3c7fa1",e.nativeID="",e.ageTipType=h.AGE_16,e.boxID="",e.fitUIType=l.TT,e.hasCopyright=1,e.privacyPolicyType=d.MINI_GAME_XM,e.company="\u5e7f\u5dde\u5353\u8baf",e.email="zhuoxunhudong-kf@qq.com",e.address="\u5e7f\u5dde\u5e02\u5929\u6cb3\u533a\u73e0\u6c5f\u4e1c\u8def30\u53f7601\u5ba4(\u90e8\u4f4d:\u81ea\u7f16B\u5355\u5143)",e}return c(e,t),e}(B),V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=S.VIVO,e.flag="wlgczvivo",e.version="1.0.1",e.appID="105660562",e.bannerID="21955b5d2b694b6fa553aaa605171d28",e.rewardID="a255dc2523f64706bb9eb09e0c16633f",e.nativeID="",e.insertID="051f9c2dfb8b4678bf8c75f828d2cf1d",e.boxID="",e.fitUIType=l.TT,e.hasCopyright=1,e.privacyPolicyType=d.MINI_GAME_VIVO,e.customAd_topImg_bottomText="018042ead8b049eaa3d0f6262d343c68",e.customAd_leftImg_rightText="71d0803f5a4e47f9b58974feaf660184",e.logoType=u.MyDog,e}return c(e,t),e}(B),W=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=w.KS,e.flag="wlgczks",e.version="1.0.14",e.appID="ks660340297460491502",e.bannerID="",e.rewardID="2300004678_01",e.insertID="2300004678_02",e.fitUIType=l.KS,e.hasRecord=1,e.logoType=u.MyDog,e.hasCopyright=1,e.rank="ks",e}return c(e,t),e}(B),H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=b.QQ,e.flag="wdggqq",e.version="1.1.0",e.appID="1112223440",e.bannerID="ff62f60a3d7b194a8c1a4fedfcfb25a8",e.rewardID="15631c3036ac6280fdb371f9bb6f0124",e.insertID="c3b4467306fa6ccd4b6b293c649e5cbd",e.fitUIType=l.TT,e.hasCopyright=1,e.privacyPolicyType=d.MINI_GAME,e}return c(e,t),e}(B),G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=A.WX,e.flag="wlgczwx",e.version="1.0.5",e.appID="wxe350d5b8768bee2b",e.bannerID="adunit-065f3b5201a1fe56",e.rewardID="adunit-7d3dbdd8e17f8bea",e.insertID="adunit-bec3b7c7eae3ea00",e.blockID="",e.blockID2="",e.fitUIType=l.TT,e.hasShare=1,e.rank="wx",e}return c(e,t),e}(B),z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=_.default,e.flag="wdgghw",e.version="1.1.0",e.appID="106706891",e.bannerID="x7z0llr5fc",e.rewardID="h3p62ppoik",e.insertID="f30g2ec9m7",e.fitUIType=l.TT,e.privacyPolicyType=d.MINI_GAME,e.loginType=p.HW,e.hasCopyright=1,e}return c(e,t),e}(B);a.PlatformConfig=((i={})[s.WEB]=B,i[s.TT]=F,i[s.OPPO]=x,i[s.XIAOMI]=j,i[s.VIVO]=V,i[s.KS]=W,i[s.WX]=G,i[s.HW]=z,i[s.QQ]=H,i[s.IOS]=M,i[s.IOS_HAIWAI]=U,i[s.ANDROID]=O,i[s.ANDROID_GOOGLE]=R,i[s.OPPO_ANDROID]=E,i[s.VIVO_ANDROID]=k,i[s.XIAOMI_ANDROID]=I,i[s.OHAYOO_ANDROID]=L,i[s.HUAWEI_ANDROID]=D,i),cc._RF.pop()},{}],PlatformManager:[function(t,e,o){"use strict";cc._RF.push(e,"1ac0d4Os3hIDYaTrB4el0Fe","PlatformManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.Platform=void 0;var r=n("BasePlatform"),a=n("PlatformConst"),c=(n("OPPOADMediatorUtils"),n("OPPOMiniADMediatorUtils"),n("XMADMediatorUtils")),s=n("BmsManager"),l=(n("Android"),function(){function t(){this.id=a.EPlatform.WEB,this.config=new a.PlatformConfig[a.EPlatform.WEB],this.instance=new r.BasePlatform,this.isNoAD=!1,this.bannerAdCounter=1e10}return t.prototype.startInit=function(){var t=this;this.setPlatform(),this.setConfig(),this.judgePlatform(),this.init(),setInterval(function(){t.bannerAdCounter++},1e3)},t.prototype.setPlatform=function(){},t.prototype.setConfig=function(){this.config=new a.PlatformConfig[a.EPlatform.TT]},t.prototype.setNoAd=function(t){this.isNoAD=t},t.prototype.judgePlatform=function(){var t=cc.sys;if(t.platform==t.ANDROID)return this.id=a.EPlatform.ANDROID},t.prototype.init=function(){this.id!=a.EPlatform.WEB&&(this.config=new a.PlatformConfig[this.id],this.instance=new this.config.platformClass,this.instance.setConfig(this.config))},t.prototype.getPlatform=function(){return this.instance},t.prototype.getConfig=function(){return this.config},t.prototype.is=function(t){return this.id==t},t.prototype.showRewardAds=function(t){if(this.isNoAD)return t(0);this.id==a.EPlatform.ANDROID?c.XMADMediator.showRewardVideo(t):this.instance.showRewardAds(t)},t.prototype.showRewardAds_xiaomi=function(t){if(this.isNoAD)return t(0);this.instance.showRewardAds(t)},t.prototype.showAdDebugger=function(){this.instance.showAdDebugger()},t.prototype.showBanner=function(t,e){if(s.BMS.getKey("isbanner")){var o=s.BMS.getKey("bannerAdIntervals");if(console.log("== banner\u68c0\u6d4b cd\u95f4\u9694\u4e0d\u5c55\u793a\uff0ccd\u8ba1\u65f6: "+this.bannerAdCounter+"\uff0ccd\u95f4\u9694"+o),this.bannerAdCounter<o)return console.log("== banner cd\u4e2d\uff0c\u65e0\u6cd5\u89e6\u53d1");this.instance.showBanner(t,e)}},t.prototype.hideBanner=function(t){this.instance.hideBanner(t)},t.prototype.clickAdJump=function(){this.instance.clickAdJump()},t.prototype.showNativeAds=function(t,e){this.instance.showNativeAds(t,e)},t.prototype.hideNativeAds=function(){this.instance.hideNativeAds()},t.prototype.showInsert=function(){this.instance.showInsert()},t.prototype.showOpenAd=function(){this.instance.showOpenAd()},t.prototype.destroyInsert=function(){this.instance.destroyInsert()},t.prototype.showBlockAds=function(t){void 0===t&&(t={id:"",left:null,top:null}),this.instance.showBlockAds(t)},t.prototype.hideBlockAds=function(){this.instance.hideBlockAds()},t.prototype.showAppBoxAds=function(){this.instance.showAppBoxAds()},t.prototype.hideAppBoxAds=function(){this.instance.hideAppBoxAds()},t.prototype.changeBlockAdsPos=function(t){this.instance.changeBlockAdsPos(t)},t.prototype.showNativeAdvanceBigBanner=function(t,e){void 0===e&&(e=!1),this.instance.showNativeAdvanceBigBanner(t,e)},t.prototype.hideNativeAdvanceBigBanner=function(){this.instance.hideNativeAdvanceBigBanner()},t.prototype.showInsertBannerImg=function(t,e){void 0===e&&(e=!1),this.instance.showInsertBannerImg(t,e)},t.prototype.hideInsertBannerImg=function(){this.instance.hideInsertBannerImg()},t.prototype.share=function(t){this.instance.share(t)},t.prototype.shareRecordCap=function(t){this.instance.shareRecordCap(t)},t.prototype.startRecordCap=function(t){this.instance.startRecordCap(t)},t.prototype.stopRecordCap=function(){this.instance.stopRecordCap()},t.prototype.getShareStatus=function(){return this.instance.getShareStatus()},t.prototype.showPrivacyPolicy=function(){return this.instance.showPrivacyPolicy()},t.prototype.report=function(t,e){this.instance.report(t,e)},t.prototype.showMoreGame=function(){this.instance.showMoreGame()},t.prototype.showLargeFeed=function(t,e){void 0===e&&(e=0),this.instance.showLargeFeed(t,e)},t.prototype.removeLargePicFeed=function(t){this.instance.removeLargePicFeed(t)},t.prototype.removeInterstitialFeed=function(t){this.instance.removeInterstitialFeed(t)},t.prototype.showInterstitialFeed=function(t,e,o,n){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===n&&(n=0),this.instance.showInterstitialFeed(t,e,o,n)},t.prototype.showBannerFeed=function(t){this.instance.showBannerFeed(t)},t.prototype.showBannerFeed2=function(t){this.instance.showBannerFeed2(t)},t.prototype.showSplash=function(){this.instance.showSplash()},t.prototype.removeBannerFeed=function(){this.instance.removeBannerFeed()},t.prototype.gameComment=function(){this.instance.gameComment()},t.prototype.login=function(){return this.instance.login()},t.prototype.signIn=function(){this.instance.signIn()},t.prototype.hideCustomAd1=function(){this.instance.hideCustomAd1()},t.prototype.hideCustomAd2=function(){this.instance.hideCustomAd2()},t.prototype.showCustomAd1=function(t){this.instance.showCustomAd1(t)},t.prototype.showCustomAd2=function(t){this.instance.showCustomAd2(t)},t.prototype.follow=function(t){this.instance.follow(t)},t.prototype.showCustomAd=function(t){this.instance.showCustomAd(t)},t.prototype.hideCustomAd=function(){this.instance.hideCustomAd()},t.prototype.showCustomAd_1=function(t,e){this.instance.showCustomAd_1(t,e)},t.prototype.hideCustomAd_1=function(){this.instance.hideCustomAd_1()},t.prototype.showCustomAd_2=function(t,e){this.instance.showCustomAd_2(t,e)},t.prototype.hideCustomAd_2=function(){this.instance.hideCustomAd_2()},t.prototype.taInit=function(t){this.instance.taInit(t)},t}());i.Platform=new l,cc._RF.pop()},{}],PlayItem:[function(t,e,o){"use strict";cc._RF.push(e,"3ef114FnslCG4pO1ZECcCAf","PlayItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("SceneConst"),d=i("UserConst"),p=i("PlatformManager"),h=i("SceneManager"),u=i("UserManager"),f=i("ConfigUtils"),g=i("ShuShuConst"),m=cc._decorator,y=m.ccclass,v=m.property;(function(t){t[t.Normal=0]="Normal",t[t.Finish=1]="Finish",t[t.Lock=2]="Lock"})(s||(s={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.modeName=null,e.video=null,e.param=null,e.state=null,e.starAmount=0,e.isLoadingScene=!1,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){var t=this,e=u.User.get("mode"+this.param.modeID+"Btn")||0;this.video.active=!e,cc.resources.load("texture/mode/moshi"+this.param.modeID,function(e,o){if(e)return console.log(e);t.icon.spriteFrame=new cc.SpriteFrame(o)}),this.modeName.string=""+this.param.modeName},e.prototype.clickEnter=function(){var t=this,e=this.param.modeID;cc.game.emit("gamelog","modebtn_"+e),this.video.active?p.Platform.showRewardAds(function(o){0==o&&(cc.game.emit("gamelog_Thinking",g.ShuShuConst.Play,{mode:e}),u.User.set("mode"+t.param.modeID+"Btn",1),t.enterByMode(e))}):this.enterByMode(e)},e.prototype.enterByMode=function(t){if(!this.isLoadingScene){this.isLoadingScene=!0,u.User.setTempData(d.TempData.CURRENT_MODE,t);var e=u.User.get(d.UserData.LEVEL_LIST);f.ConfigUtils.setNextModeID();var o=1;f.ConfigUtils.getDataByID(t,function(n){o=n.amount,e[t]>o?u.User.setTempData(d.TempData.CURRENT_LEVEL,1):u.User.setTempData(d.TempData.CURRENT_LEVEL,e[t]),h.Scene.loadScene(l.SceneConst.GAME)})}},e.state=s,c([v(cc.Sprite)],e.prototype,"icon",void 0),c([v(cc.Label)],e.prototype,"modeName",void 0),c([v(cc.Node)],e.prototype,"video",void 0),c([y],e)}(cc.Component);r.default=_,cc._RF.pop()},{}],Play:[function(t,e,o){"use strict";cc._RF.push(e,"7900dKVJGRLnJ2SxcwEP1sO","Play");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("RecycleScroll"),d=i("PlatformConst"),p=i("SceneConst"),h=i("UserConst"),u=i("PlatformManager"),f=i("SceneManager"),g=i("UserManager"),m=i("ConfigUtils"),y=i("XMADUtils"),v=i("VIVOADUtils"),_=i("ConfigManager"),C=i("ConfigConst"),w=i("PopupManager"),P=i("ShuShuConst"),b=i("PlayItem"),T=cc._decorator,S=T.ccclass,A=T.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e._data=null,e.itemsData=[],e.childrenLength=6,e.currentUnlockLevel=1,e.currentAlreadyPlay=[],e.currentAlreadyUnlock=[],e.playList=[],e.isLoadingScene=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.initView()},e.prototype.noBtn=function(){w.Popup.hide()},e.prototype.onItemRender=function(t,e){var o=e.getComponent(b.default),n=(b.default.state.Normal,{index:t,modeID:this.playList[t].theme,modeName:this.playList[t].themeName});o.setData(n)},e.prototype.onItemClicked=function(){},e.prototype.mode1Btn=function(){var t=this;cc.game.emit("gamelog","modebtn_1"),this.dict.mode1BtnIcon.active?u.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",P.ShuShuConst.reward_btn,{id:"012",lv:1,mode:1}),g.User.set("mode1Btn",1),t.enterByMode(1))}):this.enterByMode(1)},e.prototype.mode2Btn=function(){var t=this;cc.game.emit("gamelog","modebtn_2"),this.dict.mode2BtnIcon.active?u.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",P.ShuShuConst.reward_btn,{id:"013",lv:1,mode:2}),g.User.set("mode2Btn",1),t.enterByMode(2))}):this.enterByMode(2)},e.prototype.mode3Btn=function(){var t=this;this.dict.mode3BtnIcon.active?u.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",P.ShuShuConst.reward_btn,{id:"014",lv:1,mode:3}),g.User.set("mode3Btn",1),t.enterByMode(3))}):this.enterByMode(3)},e.prototype.enterByMode=function(t){if(!this.isLoadingScene){this.isLoadingScene=!0,g.User.setTempData(h.TempData.CURRENT_MODE,t);var e=g.User.get(h.UserData.LEVEL_LIST);m.ConfigUtils.setNextModeID();var o=1;m.ConfigUtils.getDataByID(t,function(n){o=n.amount,e[t]>o?g.User.setTempData(h.TempData.CURRENT_LEVEL,1):g.User.setTempData(h.TempData.CURRENT_LEVEL,e[t]),f.Scene.loadScene(p.SceneConst.GAME)})}},e.prototype.onEnable=function(){u.Platform.is(d.EPlatform.XIAOMI_ANDROID)?y.XMAD.showBannerFeed():u.Platform.is(d.EPlatform.VIVO)&&v.VIVOAD.showCustomAd_1()},e.prototype.onDisable=function(){u.Platform.is(d.EPlatform.XIAOMI_ANDROID)&&(u.Platform.removeBannerFeed(),u.Platform.hideBanner()),u.Platform.hideCustomAd(),u.Platform.hideCustomAd_1(),u.Platform.hideCustomAd_2()},e.prototype.initView=function(){var t=this;_.Config.get(C.ConfigConst.THEME).then(function(e){e.sort(function(t,e){return t.sort-e.sort}),e.forEach(function(e,o){0!=o&&t.playList.push(e)}),console.log("playList",t.playList),t.scroll.onItemRender=t.onItemRender.bind(t),t.scroll.onItemClicked=t.onItemClicked.bind(t),t.scroll.numItems=t.playList.length})},c([A(l.default)],e.prototype,"scroll",void 0),c([S],e)}(s.default);r.default=N,cc._RF.pop()},{}],PolygonMask2:[function(t,e,o){"use strict";cc._RF.push(e,"e5ed0aO2YxHLow3Xk/COe9x","PolygonMask2");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=c.requireComponent,p=c.executeInEditMode,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refleshEveryFrame=!1,e}return r(e,t),e.prototype.start=function(){this.init()},e.prototype.init=function(){this.draw()},e.prototype.draw=function(){var t=this.getComponent(cc.PolygonCollider).points,e=this.getComponent(cc.Mask)._graphics;e.clear();var o=t.length,n=this.getComponent(cc.PolygonCollider).offset.x,i=this.getComponent(cc.PolygonCollider).offset.y;e.moveTo(t[o-1].x+n,t[o-1].y+i);for(var r=0;r<t.length;r++)e.lineTo(t[r].x+n,t[r].y+i);e.fill()},e.prototype.lateUpdate=function(){this.refleshEveryFrame&&this.draw()},a([l()],e.prototype,"refleshEveryFrame",void 0),a([s,d(cc.PolygonCollider),d(cc.Mask),p],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],PopupConst:[function(t,e,o){"use strict";cc._RF.push(e,"5052c/73AtMCbwi19jFqabO","PopupConst");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.PopupConst=void 0,function(t){t.SET="Set",t.INFINITE_POWER="InfinitePower",t.POWER_SHORTAGE="PowerShortage",t.SHOP="Shop",t.SKIP="Skip",t.TIP="Tip",t.WIN="Win",t.CHEATS="Cheats",t.AGE_TIP="AgeTip",t.CRY_HELP="CryHelp",t.PRIVACY_POLICY="PrivacyPolicy",t.UNLOCK_UGC="UnlockUgc",t.MODE_UNLOCK="ModeUnlock",t.UnlockNewMode="UnlockNewMode",t.COMMENT="Comment",t.STOP="Stop",t.BEE="beeDogDataModifyPanel",t.UNLOCK_ALL_MODE="UnlockAllMode",t.TimeEnd="TimeEnd",t.Bore="Bore",t.Pause="Pause",t.Rank="Rank",t.Play="Play",t.Skin="Skin",t.SkinGetWay="SkinGetWay",t.GetSkin="GetSkin",t.SignIn="SignIn",t.LimitWelfare="LimitWelfare",t.Feedback="Feedback",t.Revive="Revive",t.DealUnlock="DealUnlock"}(n.PopupConst||(n.PopupConst={})),cc._RF.pop()},{}],PopupManager:[function(t,e,o){"use strict";cc._RF.push(e,"b413aV+vr1HZYlHpCol5CA2","PopupManager");var n=o,i=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},r=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Popup=void 0;var a=function(){function t(){this.container=null,this.mask=null,this.nodes=[],this.paths=[],this._isInit=!1,this._isOn=!1,this.pathPrefix="prefab/popup/"}return t.prototype._init=function(){var t=this;return new Promise(function(e){var o,n=cc.find("Canvas");n.getChildByName("PopupRoot")?o=n.getChildByName("PopupRoot"):(o=new cc.Node("PopupRoot"),n.addChild(o));var i=o.addComponent(cc.Widget);["isAlignTop","isAlignBottom","isAlignRight","isAlignLeft"].forEach(function(t){return i[t]=!0}),["top","bottom","right","left"].forEach(function(t){return i[t]=0}),t.container=o,e()})},t.prototype.show=function(t,e,o){return void 0===o&&(o=!0),i(this,void 0,Promise,function(){var n=this;return r(this,function(i){switch(i.label){case 0:return this._isInit?[3,2]:[4,this._init()];case 1:i.sent(),i.label=2;case 2:return this._isOn||(this._isOn=!0,cc.game.on("hideAllPopup",this.hideAll,this)),t=this.pathPrefix+t,this.paths.some(function(e){return e==t})?[2]:(this.paths.push(t),cc.resources.load(t,function(i,r){if(i){var a=n.paths.indexOf(t);return-1!=a&&n.paths.splice(a,1),console.log("[popup] show() error",i)}var c=cc.instantiate(r);e&&c._components[0]&&(c._components[0]._data=e),n.container.addChild(c),n.nodes.push(c);var s=c.getChildByName("content"),l=c.getChildByName("mask"),d=l.opacity;if(o){if(l.opacity=0,l.active=!0,l.stopAllActions(),cc.tween(l).to(.3,{opacity:d}).start(),s){var p=s.scale;s.scale=0,cc.tween(s).to(.4,{scale:p},{easing:"backOut"}).start()}}else l.opacity=d,s&&(p=s.scale,s.scale=p)}),[2])}})})},t.prototype.hide=function(t){if(void 0===t&&(t=!0),this.nodes.length){var e=this.nodes.pop();this.paths.pop();var o=e.getChildByName("content"),n=e.getChildByName("mask");t?(n.stopAllActions(),cc.tween(n).to(.3,{opacity:0}).call(function(){n.active=!1}).start(),o&&cc.tween(o).to(.3,{scale:0},{easing:"backIn"}).call(function(){e.destroy()}).start()):(n.active=!1,e.destroy())}},t.prototype.hideAll=function(){this.nodes.length&&(this.nodes.forEach(function(t){t.active=!1,t.destroy()}),this.nodes=[],this.paths=[])},t}();n.Popup=new a,cc._RF.pop()},{}],PowerShortage:[function(t,e,o){"use strict";cc._RF.push(e,"ac7f0sa5HBJ85jwRPxIxWW2","PowerShortage");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("SceneConst"),h=i("UserConst"),u=i("BmsManager"),f=i("EventManager"),g=i("LanguageManager"),m=i("PlatformManager"),y=i("PopupManager"),v=i("SceneManager"),_=i("TipManager"),C=i("UserManager"),w=i("OPPOAndroidAdUtils"),P=i("OPPOMiniADUtils"),b=i("XMADUtils"),T=cc._decorator,S=T.ccclass,A=(T.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){m.Platform.is(d.EPlatform.XIAOMI_ANDROID)?b.XMAD.showBannerFeed():m.Platform.is(d.EPlatform.OPPO_ANDROID)?w.OPPOAndroidAd.showLargeFeed():m.Platform.is(d.EPlatform.OPPO)?P.OPPOMiniAD.showLargeFeed():m.Platform.showBanner()},e.prototype.onDisable=function(){m.Platform.is(d.EPlatform.OPPO_ANDROID)&&w.OPPOAndroidAd.removeLargePicFeed(),m.Platform.hideBanner(),m.Platform.hideNativeAds()},e.prototype.initView=function(){var t=u.BMS.getKey("BuchongTiLi");this.dict.amount.getComponent(cc.Label).string="x"+t},e.prototype.clickGiveUp=function(){C.User.getTempData(h.TempData.POWER_TYPE)?y.Popup.hide():(C.User.get(h.UserData.POWER)<5&&(v.Scene.loadScene(p.SceneConst.LEVEL_SELECT),C.User.setTempData(h.TempData.POWER_TYPE,1)),y.Popup.hide())},e.prototype.clickVideo=function(){cc.game.emit("gamelog","btn025"),m.Platform.showRewardAds(function(t){if(0==t){cc.game.emit("gamelog","rewarde_btn006");var e=C.User.get(h.UserData.POWER),o=u.BMS.getKey("BuchongTiLi");_.Tip.show(g.default.formatStr("\u4f53\u529b+%d",o)),C.User.getTempData(h.TempData.POWER_TYPE)?C.User.set(h.UserData.POWER,e+o):C.User.set(h.UserData.POWER,e+o-5),f.Event.emit(l.default.POWER_EFFECT,!0),y.Popup.hide(),C.User.setTempData(h.TempData.POWER_TYPE,1)}})},c([S],e)}(s.default));r.default=A,cc._RF.pop()},{}],Power:[function(t,e,o){"use strict";cc._RF.push(e,"a8643xXrDRAwoIz+TMrtkRv","Power");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("EventConst"),l=i("PopupConst"),d=i("SceneConst"),p=i("UserConst"),h=i("BmsManager"),u=i("EffectManager"),f=i("EventManager"),g=i("PopupManager"),m=i("SceneManager"),y=i("UserManager"),v=cc._decorator,_=v.ccclass,C=v.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTime=null,e.labelPower=null,e.icon=null,e.addImg=null,e.infinite=null,e.unitRecoverTime=60,e.maxPower=5,e.surplusTime=0,e.power=0,e.hasTimer=!1,e}return a(e,t),e.prototype.start=function(){},e.prototype.powerEffect=function(){u.Effect.showEffect(5,this.icon)},e.prototype.onEnable=function(){this.initEvent(),this.initView()},e.prototype.onDisable=function(){this.clearEvent()},e.prototype.initEvent=function(){f.Event.on(s.default.POWER_UPDATE,this.changePower,this),f.Event.on(s.default.POWER_EFFECT,this.powerEffect,this),f.Event.on(s.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this)},e.prototype.clearEvent=function(){f.Event.off(s.default.POWER_UPDATE,this.changePower,this),f.Event.off(s.default.POWER_EFFECT,this.powerEffect,this),f.Event.off(s.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this)},e.prototype.updateInfinitePower=function(t){var e=this;console.log("\u6d4b\u8bd5status",t),t?(this.infinite.active=!0,this.labelTime.node.active=!1,this.labelPower.node.active=!1,this.scheduleOnce(function(){e.labelTime.node.active=!1},.2),this.addImg.active=!1):(this.infinite.active=!1,this.labelTime.node.active=!0,this.labelPower.node.active=!0,this.addImg.active=!0)},e.prototype.startInvalidTimer=function(){this.schedule(function(){},5)},e.prototype.initView=function(){var t=h.BMS.getKey("TiLi");if(console.log("bmsPower",t),0==t&&(this.node.active=!1),h.BMS.getKey("WuxianTiLi")){var e=y.User.get(p.UserData.INF_POWER_START_TIME),o=(new Date).getTime();if(e){if(!((o-e)/1e3>=86400)){console.log("[\u5f53\u524d\u5c5e\u4e8e\u65e0\u9650\u4f53\u529b\u72b6\u6001]"),y.User.setTempData(p.TempData.IS_INFINITE_POWER,!0),f.Event.emit(s.default.UPDATE_INFINITE_POWER,!0);var n=86400-(o-e)/1e3;return console.log("\u5269\u4f59\u65f6\u95f4\uff08\u5c0f\u65f6\uff09",n/60/60),this.scheduleOnce(function(){y.User.set(p.UserData.INF_POWER_START_TIME,0),y.User.set(p.UserData.INF_POWER_VIDEO_TIMES,0),y.User.setTempData(p.TempData.IS_INFINITE_POWER,!1),f.Event.emit(s.default.UPDATE_INFINITE_POWER,!1)},n),void(this.labelTime.node.active=!1)}y.User.set(p.UserData.INF_POWER_START_TIME,0),y.User.setTempData(p.TempData.IS_INFINITE_POWER,!1),y.User.set(p.UserData.INF_POWER_VIDEO_TIMES,0)}}this.maxPower=h.BMS.getKey("TiLi"),this.surplusTime=this.unitRecoverTime;var i=cc.sys.localStorage.getItem("walkFast_power");console.log("\u672c\u5730\u5b58\u50a8res",i),this.power=null==i||null==i||""==i?this.maxPower:y.User.get(p.UserData.POWER),y.User.set(p.UserData.POWER,this.power);var r=this.getTime(),a=null==y.User.get(p.UserData.RECOVERY_TIME)?r:y.User.get(p.UserData.RECOVERY_TIME);if(this.power>=this.maxPower)this.updatePowerView();else{var c=Math.floor((r-a)/1e3),l=Math.floor(c/this.unitRecoverTime),d=c%this.unitRecoverTime;console.log("\u79bb\u7ebf\u79d2\u6570",c),console.log("\u79bb\u7ebf\u52a0\u4f53\u529b",l),console.log("\u5269\u4f59\u8ba1\u65f6\u65f6\u95f4",d),this.power=this.power+l>=this.maxPower?this.maxPower:this.power+l,y.User.set(p.UserData.POWER,this.power),this.updatePowerView(),this.power<this.maxPower&&(this.surplusTime=this.unitRecoverTime-d,y.User.set(p.UserData.RECOVERY_TIME,r-1e3*d),this.updateTimeView(),this.startTimer())}},e.prototype.getTime=function(){return(new Date).getTime()},e.prototype.changePower=function(){this.power=y.User.get(p.UserData.POWER),this.updatePowerView(),this.power>=this.maxPower&&this.hasTimer&&(this.hasTimer=!1,this.unscheduleAllCallbacks()),this.power<this.maxPower&&!this.hasTimer&&(this.surplusTime=this.unitRecoverTime,y.User.set(p.UserData.RECOVERY_TIME,this.getTime()),this.updateTimeView(),this.startTimer())},e.prototype.startTimer=function(){var t=this;this.hasTimer||(this.hasTimer=!0,this.schedule(function(){t.surplusTime-=1,t.updateTimeView(),0==t.surplusTime&&(t.power+=1,y.User.set(p.UserData.POWER,t.power),t.updatePowerView(),t.power>=t.maxPower?(t.hasTimer=!1,t.unscheduleAllCallbacks()):(t.surplusTime=t.unitRecoverTime+1,y.User.set(p.UserData.RECOVERY_TIME,t.getTime())))},1))},e.prototype.updateTimeView=function(){this.labelTime.string=""+this.secondFormat(this.surplusTime)},e.prototype.updatePowerView=function(){this.labelPower.string=""+this.power,this.labelTime.node.active=this.power<this.maxPower},e.prototype.clickSelf=function(){cc.game.emit("playClickAudio"),m.Scene.getCurrentScene()==d.SceneConst.MAIN?cc.game.emit("gamelog","btn006"):m.Scene.getCurrentScene()==d.SceneConst.GAME&&cc.game.emit("gamelog","btn021"),y.User.getTempData(p.TempData.IS_INFINITE_POWER)||(cc.game.emit("gamelog","page010"),g.Popup.show(l.PopupConst.POWER_SHORTAGE))},e.prototype.secondFormat=function(t,e,o){void 0===e&&(e=2),void 0===o&&(o=!1);var n=t/3600,i=(t%=3600)/60,r=t%=60,a=(n=Math.floor(n))>=10?n+"":"0"+n,c=(i=Math.floor(i))>=10?i+"":"0"+i,s=(r=Math.floor(r))>=10?r+"":"0"+r;o&&(r=100*r/60,s=(r=Math.floor(r))>=10?r+"":"0"+r);var l=a+":"+c+":"+s;switch(e){case 2:l=c+":"+s}return l},c([C(cc.Label)],e.prototype,"labelTime",void 0),c([C(cc.Label)],e.prototype,"labelPower",void 0),c([C(cc.Node)],e.prototype,"icon",void 0),c([C(cc.Node)],e.prototype,"addImg",void 0),c([C(cc.Node)],e.prototype,"infinite",void 0),c([_],e)}(cc.Component);r.default=w,cc._RF.pop()},{}],PrivacyPolicy:[function(t,e,o){"use strict";cc._RF.push(e,"54796Q0mcBMPJgLsk+nONv0","PrivacyPolicy");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("PlatformManager"),l=cc._decorator,d=l.ccclass,p=l.property,h=window.qq,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeUserPanel=null,e.nodePrivacyPanel=null,e.nodeUserButton=null,e.nodeUserAnd=null,e.func=null,e}return a(e,t),e.prototype.onLoad=function(){for(var t=s.Platform.getConfig().company,e=s.Platform.getConfig().email,o=s.Platform.getConfig().address,n=0;n<this.nodeUserPanel.children[0].children[0].childrenCount;n++)r=(r=(r=(r=(r=(r=(r=(i=this.nodeUserPanel.children[0].children[0].children[n]).getComponent(cc.Label).string.replace(/\u6d77\u5357\u4e50\u679c\u4e92\u5a31/g,t)).replace(/\u4e50\u679c\u4e92\u5a31/g,t)).replace(/\u4e50\u679c\u6e38\u620f/g,t)).replace(/\u4e50\u679c/g,t)).replace(/\u4e50\u679c/g,t)).replace(/leguo-kf@foxmail.com/g,e)).replace(/\u5e7f\u5dde\u5e02\u5929\u6cb3\u533a\u73e0\u6c5f\u65b0\u57ce\u73e0\u6c5f\u4e1c\u8def30\u53f7\u5e7f\u5dde\u94f6\u884c\u5927\u53a6601A/g,o),i.getComponent(cc.Label).string=r;for(n=0;n<this.nodePrivacyPanel.children[0].children[0].childrenCount;n++){var i,r;(i=this.nodePrivacyPanel.children[0].children[0].children[n]).getComponent(cc.Label)&&(r=(r=(r=i.getComponent(cc.Label).string.replace(/\u5e7f\u5dde\u5c0f\u8d1d/g,t)).replace(/xiaobei-kf@foxmail.com/g,e)).replace(/\u5e7f\u5dde\u5e02\u5929\u6cb3\u533a\u73e0\u6c5f\u4e1c\u8def 30\u53f7601\u623f/g,o),i.getComponent(cc.Label).string=r)}void 0!==window.qq&&(this.nodeUserButton.active=!0,this.nodeUserAnd.active=!0)},e.prototype.open=function(t){this.func=t,this.func||this.openPrivacyPanelHandle()},e.prototype.acceptHandle=function(){this.func&&this.func(),this.func=null,cc.sys.localStorage.setItem("superBrain_privacypolicy",1),this.node.destroy()},e.prototype.refuseHandle=function(){window.qq?h?h.exitMiniProgram():cc.game.end():void 0!==window.qg?window.qg.exitApplication({}):cc.game.end()},e.prototype.openUserPanelHandle=function(){this.nodeUserPanel.active=!0,this.nodeUserPanel.getComponent(cc.ScrollView).scrollToTop(0)},e.prototype.openPrivacyPanelHandle=function(){this.nodePrivacyPanel.active=!0,this.nodePrivacyPanel.getComponent(cc.ScrollView).scrollToTop(0)},e.prototype.closeHandle=function(){this.func?(this.nodePrivacyPanel.active=!1,this.nodeUserPanel.active=!1):this.node.destroy()},c([p(cc.Node)],e.prototype,"nodeUserPanel",void 0),c([p(cc.Node)],e.prototype,"nodePrivacyPanel",void 0),c([p(cc.Node)],e.prototype,"nodeUserButton",void 0),c([p(cc.Node)],e.prototype,"nodeUserAnd",void 0),c([d],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],QQ:[function(t,e,o){"use strict";cc._RF.push(e,"33324Scx6xKx5B9iAiB6y2q","QQ");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0}),r.QQ=void 0;var c=i("BasePlatform"),s=(i("AudioManager"),i("BmsManager"),function(t){function e(){var e=t.call(this)||this;return e.sdk=window.qq,e._rewardAds=null,e._rewardAdsCb=null,e._rewardHasShow=!1,e._rewardHasLoad=!1,e._banner=null,e._insert=null,e._block=null,e._appBox=null,e._toastTimer=null,e._isMute=!1,e.bgm=null,console.log("qq"),e.sdk.showShareMenu({withShareTicket:!0}),e.sdk.onShareAppMessage(function(){return e.getShareData()}),e}return a(e,t),e.prototype.getInstance=function(){return this.sdk},e.prototype.showRewardAds=function(){},e.prototype.preloadBanner=function(){},e.prototype.showBanner=function(){},e.prototype.hideBanner=function(){},e.prototype.showInsert=function(){},e.prototype.showBlockAds=function(){},e.prototype.hideBlockAds=function(){this._block&&(this._block.destroy(),this._block=null)},e.prototype.showAppBoxAds=function(){},e.prototype.hideAppBoxAds=function(){this._appBox&&(this._appBox.destroy(),this._appBox=null)},e.prototype.share=function(){this.sdk.shareAppMessage(this.getShareData())},e.prototype.getShareData=function(){},e}(c.BasePlatform));r.QQ=s,cc._RF.pop()},{}],RankItem:[function(t,e,o){"use strict";cc._RF.push(e,"4f18bmX0MhFQLtu3ggaf0z8","RankItem");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c,s=cc._decorator,l=s.ccclass,d=s.property;(function(t){t[t.Normal=0]="Normal",t[t.Finish=1]="Finish",t[t.Lock=2]="Lock"})(c||(c={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ranking=null,e.score=null,e.province=null,e.bgSpriteFrame=[],e.rankingBgSpriteFrame=[],e.param=null,e.state=null,e.starAmount=0,e.skinNameArr=[],e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){var t=this.param.index+1;this.ranking.string=""+t,this.score.string=""+this.param.score,this.province.string=""+this.param.province,this.param.province.includes("UNKNOW")&&(this.province.string="\u5176\u4ed6"),this.param.index>2?(this.node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[3],this.node.getChildByName("rankingBg").getComponent(cc.Sprite).spriteFrame=this.rankingBgSpriteFrame[3]):(this.node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[this.param.index],this.node.getChildByName("rankingBg").getComponent(cc.Sprite).spriteFrame=this.rankingBgSpriteFrame[this.param.index])},e.state=c,a([d(cc.Label)],e.prototype,"ranking",void 0),a([d(cc.Label)],e.prototype,"score",void 0),a([d(cc.Label)],e.prototype,"province",void 0),a([d([cc.SpriteFrame])],e.prototype,"bgSpriteFrame",void 0),a([d([cc.SpriteFrame])],e.prototype,"rankingBgSpriteFrame",void 0),a([l],e)}(cc.Component);i.default=p,cc._RF.pop()},{}],Rank:[function(t,e,o){"use strict";cc._RF.push(e,"b576cSwpZlGRqSeayEL4iN4","Rank");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("RecycleScroll"),d=i("EventConst"),p=i("PlatformConst"),h=i("SceneConst"),u=i("EventManager"),f=i("PlatformManager"),g=i("SceneManager"),m=i("UserManager"),y=i("XMADUtils"),v=i("VIVOADUtils"),_=i("ChallengeHttp"),C=i("ConfigManager"),w=i("ConfigConst"),P=i("RankItem"),b=i("PopupManager"),T=cc._decorator,S=T.ccclass,A=T.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e.bgSpriteFrame=[],e.rankingBgSpriteFrame=[],e._data=null,e.itemsData=[],e.childrenLength=6,e.currentUnlockLevel=1,e.currentAlreadyPlay=[],e.currentAlreadyUnlock=[],e.rankList=[],e.myRank=1,e.myScore=1,e.isLoadingScene=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.initView()},e.prototype.noBtn=function(){b.Popup.hide()},e.prototype.onEnable=function(){u.Event.on(d.default.CLICK_BACK,this.clickBack,this),f.Platform.is(p.EPlatform.XIAOMI_ANDROID)?y.XMAD.showBannerFeed():f.Platform.is(p.EPlatform.VIVO)&&v.VIVOAD.showCustomAd_1()},e.prototype.getRank=function(){var t=this,e=new Date,o="province_"+this.showTime(e.getMonth()+1)+this.showTime(e.getDate())+"_"+f.Platform.getConfig().rank;f.Platform.getConfig().rank,_.challengeHttp.getRank(o,"1").then(function(e){if(console.log("\u6392\u884c\u699c\u6570\u636e",e),e.total){var o=[],n=0;for(var i in e.list)n+=1,o.push({id:n,province:i,score:e.list[i].score});console.log("list",o),t.rankList=o,t.sucGetRank()}else C.Config.get(w.ConfigConst.Rank).then(function(e){console.log("\u5047\u6570\u636e",e);for(var o=0;o<e.length;o++)e[o];t.rankList=e,t.rankList.sort(function(t,e){return e.score-t.score}),t.sucGetRank()})})},e.prototype.sucGetRank=function(){this.scroll.onItemRender=this.onItemRender.bind(this),this.scroll.onItemClicked=this.onItemClicked.bind(this),this.scroll.numItems=this.rankList.length,this.rankList.forEach(function(t){t.score}),this.myRank=this.rankList.findIndex(function(t){return t.province==m.User.get("province")})+1,this.myScore=this.rankList.find(function(t){return t.province==m.User.get("province")}).score,this.dict.ranking.getComponent(cc.Label).string=""+this.myRank,this.dict.province.getComponent(cc.Label).string=""+m.User.get("province"),this.dict.score.getComponent(cc.Label).string=""+this.myScore,this.myRank>3?(this.dict.bg.getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[3],this.dict.rankingBg.getComponent(cc.Sprite).spriteFrame=this.rankingBgSpriteFrame[3]):(this.dict.bg.getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[this.myRank-1],this.dict.rankingBg.getComponent(cc.Sprite).spriteFrame=this.rankingBgSpriteFrame[this.myRank-1])},e.prototype.showTime=function(t){return t>10?t:"0"+t},e.prototype.onDisable=function(){u.Event.off(d.default.CLICK_BACK,this.clickBack,this),f.Platform.is(p.EPlatform.XIAOMI_ANDROID)&&(f.Platform.removeBannerFeed(),f.Platform.hideBanner()),f.Platform.hideCustomAd(),f.Platform.hideCustomAd_1(),f.Platform.hideCustomAd_2()},e.prototype.initView=function(){this.getRank()},e.prototype.onItemRender=function(t,e){var o=e.getComponent(P.default),n=(P.default.state.Normal,{index:t,province:this.rankList[t].province,score:this.rankList[t].score});o.setData(n)},e.prototype.onItemClicked=function(){},e.prototype.clickBack=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn008"),g.Scene.loadScene(h.SceneConst.MAIN))},c([A(l.default)],e.prototype,"scroll",void 0),c([A([cc.SpriteFrame])],e.prototype,"bgSpriteFrame",void 0),c([A([cc.SpriteFrame])],e.prototype,"rankingBgSpriteFrame",void 0),c([S],e)}(s.default);r.default=N,cc._RF.pop()},{}],RecycleScroll:[function(t,e,o){"use strict";cc._RF.push(e,"7abbb2Q77RBhaHoyyXUrZWM","RecycleScroll");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrefab=null,e.spacingX=0,e.spacingY=0,e.canScroll=!0,e.borderTop=0,e.borderBot=0,e.isReverse=!1,e._numItems=0,e.onPosCallBack=function(){},e._content=null,e._items=[],e._itemsUidToIndex={},e._updateTimer=0,e._updateInterval=.016,e._lastContentPosY=0,e._lastContentPosX=0,e._col=0,e._row=0,e._spawnCount=0,e._isHorizon=!1,e._itemList={},e}return r(e,t),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._numItems},set:function(t){this._numItems=t,this.updateAllItem()},enumerable:!1,configurable:!0}),e.prototype.onScrollingCallBack=function(){},e.prototype.onLoad=function(){var t=this.node.getComponent(cc.ScrollView);this._content=t.content,this._isHorizon=!t.vertical,this._initialize(),t.enabled=this.canScroll,this._regScrollEvent()},e.prototype.getItemList=function(){return this._itemList},e.prototype.getContent=function(){return this._content},e.prototype.scrollTo=function(t,e,o){this.node.getComponent(cc.ScrollView).scrollTo(t,e,o)},e.prototype.scrollToIndex=function(t,e,o){if(this.numItems){this.isReverse&&(t=this.numItems-t);var n=this.node.getComponent(cc.ScrollView),i=cc.v2();if(this._isHorizon){var r=t/(this.numItems-1);i=cc.v2(r,0)}else r=(Math.ceil(t/this._col)-1)/(this._row-1),i=cc.v2(0,1-r);console.log("pos================",this._content.height),n.scrollTo(i,e,o)}},e.prototype.scrollToPos=function(t){var e=this.node.getComponent(cc.ScrollView),o=cc.winSize.height,n=1-(t.y-o/2+o*(1-Math.abs(t.y/e.content.height)))/e.content.height*-1;e.scrollToPercentVertical(n,1)},e.prototype.getContentHeightByUnify=function(){var t=this.itemPrefab.data;return this._row*(t.height+this.spacingY)},e.prototype.getPosByUnify=function(t){var e=this.itemPrefab.data,o=0,n=0;return this._isHorizon?o=this.borderTop+e.width/2+t*(e.width+this.spacingX):(o=.5*(e.width+this.spacingX)-((this._col-t%this._col)*(e.width+this.spacingX)*.5+(.5-e.anchorX)*e.width)+t%this._col*(e.width+this.spacingX)*.5,n=-this.borderTop-e.height*(1-e.anchorY)-Math.floor(t/this._col)*(e.height+this.spacingY)),this.isReverse&&(n=-(this._content.height+n)),cc.v2(o,n)},e.prototype.stopAutoScroll=function(){this.node.getComponent(cc.ScrollView).stopAutoScroll()},e.prototype.updateItem=function(t,e){0!=this.numItems&&(e.active=t<this.numItems,e.active&&(this._itemList[t]=e,this.onItemRender&&this.onItemRender(t,e)))},e.prototype.updateAllItem=function(){if(0!=this.numItems){for(var t=0;t<this._items.length;++t){var e=this._items[t];if(e){var o=this._itemsUidToIndex[e.uuid];(o||0===o)&&this.updateItem(o,e)}}this._isHorizon?this._updateContentWidth():this._updateContentHeight()}},e.prototype.scrollComponent=function(){return this.node.getComponent(cc.ScrollView)},e.prototype._initialize=function(){this._isHorizon?(this._content.anchorX=0,this._content.anchorY=.5,this._content.position=cc.v3(-this.node.width/2,-this.node.height/2,0),this._updateContentWidth(),this._spawnCount=Math.ceil(this.node.width/this.itemPrefab.data.width)+2,console.log("\u521d\u59cb\u5316RecycleScroll item, \u5b9e\u4f8b\u5316\u6570\u91cf\uff1a"+this._spawnCount+" width: "+this._content.width)):(this._content.anchorX=.5,this._content.anchorY=1,this._content.position=cc.v3(),this._updateContentHeight(),this._spawnCount=this._col*Math.ceil(this.node.height/this.itemPrefab.data.height)+3*this._col,console.log("\u521d\u59cb\u5316RecycleScroll item, \u5b9e\u4f8b\u5316\u6570\u91cf\uff1a"+this._spawnCount)),this._createItem()},e.prototype._regScrollEvent=function(){this.scrollComponent().node.on("scrolling",this.onScrollingCallBack,this)},e.prototype._updateContentHeight=function(){if(this._content){var t=this.itemPrefab.data,e=this.numItems;this._col=Math.floor(this.node.width/(t.width+this.spacingX)),this._row=Math.ceil(e/this._col),this._content.height=this.getContentHeightByUnify()+this.borderTop+this.borderBot}},e.prototype._updateContentWidth=function(){if(this._content){var t=this.itemPrefab.data,e=this.numItems;this._row=1,this._content.width=t.width*e+this.spacingX*(e-1)+this.borderTop+this.borderBot}},e.prototype._createItem=function(){var t=this,e=0;p(this._spawnCount,function(o){if(cc.isValid(t.node)){var n=cc.instantiate(t.itemPrefab);t._content.addChild(n),n.setPosition(t.getPosByUnify(o)),n.active=o<t.numItems,t._items[o]=n,t._itemsUidToIndex[n.uuid]=o,n.on(cc.Node.EventType.TOUCH_END,function(){t.onItemClicked&&t.onItemClicked(t._itemsUidToIndex[n.uuid],n)},t),t.updateItem(o,n),++e==t._spawnCount&&t.onItemFinish()}})},e.prototype.onItemFinish=function(){},e.prototype._getPositionInView=function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.node.convertToNodeSpaceAR(e)},e.prototype.update=function(t){if(this._items.length==this._spawnCount&&(this._updateTimer+=t,!(this._updateTimer<this._updateInterval))){this._updateTimer=0;var e=this._items,o=this.node.getComponent(cc.ScrollView);if(this._lastContentPosX==o.content.x&&this._lastContentPosY==o.content.y||this.onPosCallBack(),this._isHorizon){for(var n=Math.floor(o.content.x)<this._lastContentPosX,i=(this.itemPrefab.data.width+this.spacingX)*Math.ceil(this._items.length/this._row),r=0;r<e.length;++r){var a=e[r],c=this._getPositionInView(a);if(n){if(c.x<-a.width-(1-this.node.anchorX)*this.node.width&&a.x+i<=o.content.width){var s=this._itemsUidToIndex[a.uuid],l=1;this.isReverse&&(l=-1),(p=s+e.length*l)>=0&&(a.x=a.x+i,this._itemList[s]=null,this._itemList[p]=a,this._itemsUidToIndex[a.uuid]=p,this.updateItem(p,a))}}else c.x>a.width+(1-this.node.anchorX)*this.node.width&&a.x-i>=0&&(s=this._itemsUidToIndex[a.uuid],l=1,this.isReverse&&(l=-1),(p=s-e.length*l)>=0&&(a.x=a.x-i,this._itemList[s]=null,this._itemList[p]=a,this._itemsUidToIndex[a.uuid]=p,this.updateItem(p,a)))}this._lastContentPosX=o.content.x}else{var d=Math.floor(o.content.y)<=this._lastContentPosY;for(i=(this.itemPrefab.data.height+this.spacingY)*Math.ceil(this._items.length/this._col),r=0;r<e.length;++r)if(a=e[r],c=this._getPositionInView(a),d)c.y<-a.height-(1-this.node.anchorY)*this.node.height&&a.y+i<=0&&(s=this._itemsUidToIndex[a.uuid],l=1,this.isReverse&&(l=-1),(p=s-e.length*l)>=0&&(a.y=a.y+i,this._itemList[s]=null,this._itemList[p]=a,this._itemsUidToIndex[a.uuid]=p,this.updateItem(p,a)));else if(c.y>a.height+(1-this.node.anchorY)*this.node.height&&a.y-i>=-o.content.height){var p;s=this._itemsUidToIndex[a.uuid],l=1,this.isReverse&&(l=-1),(p=s+e.length*l)>=0&&(a.y=a.y-i,this._itemList[s]=null,this._itemList[p]=a,this._itemsUidToIndex[a.uuid]=p,this.updateItem(p,a))}this._lastContentPosY=o.content.y}}},a([l({type:cc.Prefab,tooltip:"item\u9884\u5236\u4f53"})],e.prototype,"itemPrefab",void 0),a([l({type:cc.Float,tooltip:"item\u4e4b\u95f4x\u95f4\u9694"})],e.prototype,"spacingX",void 0),a([l({type:cc.Float,tooltip:"item\u4e4b\u95f4y\u95f4\u9694"})],e.prototype,"spacingY",void 0),a([l({tooltip:"\u662f\u5426\u53ef\u6ed1\u52a8"})],e.prototype,"canScroll",void 0),a([l({type:cc.Float,tooltip:"\u8fb9\u754c\u586b\u5145\u4e0a/\u5de6"})],e.prototype,"borderTop",void 0),a([l({type:cc.Float,tooltip:"\u8fb9\u754c\u586b\u5145\u4e0b/\u53f3"})],e.prototype,"borderBot",void 0),a([l({tooltip:"\u662f\u5426\u53cd\u5411\u6392\u5217"})],e.prototype,"isReverse",void 0),a([s],e)}(cc.Component);function p(t,e,o,n){void 0===o&&(o=1),void 0===n&&(n=0);for(var i=t,r=(new Date).getTime(),a=0;a<i&&!(n>=i);++a){try{e&&e(n)}catch(s){cc.error(s)}if(n++,(new Date).getTime()-r>o)return void setTimeout(function(){p(t,e,o,n)},20)}}i.default=d,cc._RF.pop()},{}],ReportManager:[function(t,e,o){"use strict";cc._RF.push(e,"c6b5cgLGuBEyZrWnX9CGreH","ReportManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.Report=void 0;var r=n("PlatformManager"),a=function(){function t(){}return t.prototype.init=function(){console.log("\u521d\u59cb\u5316:GameLogMgr"),cc.game.on("gamelog",this.onGameLog,this),cc.game.on("gamelog_Thinking",this.onGameLog_Thinking,this),cc.game.on("gameTime-log",this.onGameTimeLog,this),cc.game.on("gameLevel-log",this.onGameLevelLog,this),cc.game.on("language-init",this.onLanguageInit,this)},t.prototype.onGameLog=function(t,e){void 0===e&&(e="count"),window.tt},t.prototype.onGameLog_Thinking=function(t,e){r.Platform.report(t,JSON.stringify(e)),console.log("%c [GameLog] \u4e8b\u4ef6\u6253\u70b9: "+t+"  \u5b50\u4e8b\u4ef6 "+JSON.stringify(e),"color:#F500FF")},t.prototype.onGameTimeLog=function(){},t.prototype.onGameLevelLog=function(t){console.log("%c [GameLog] **** \u5173\u5361\u6253\u70b9: "+t+" ****}","color:#F500FF")},t.prototype.onLanguageInit=function(){},t}();i.Report=new a,cc._RF.pop()},{}],ReportQueue:[function(t,e,o){"use strict";cc._RF.push(e,"f0151tG12FDtIxnQTDkidOU","ReportQueue");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("LocalStorage"),a=new(function(){function t(){this._list=[],this._storageKey="sdk_report_list";var t=r.default.getItem(this._storageKey);this._list=t?JSON.parse(t):[]}return t.prototype.push=function(t){var e=this._list.push(t);return this.refeshStorage(),e},t.prototype.pop=function(){var t=this._list.shift();return this.refeshStorage(),t},t.prototype.range=function(t,e){var o=this._list.splice(t,e);return this.refeshStorage(),o},t.prototype.refeshStorage=function(){var t=JSON.stringify(this._list);return r.default.setItem(this._storageKey,t)},t.prototype.len=function(){return this._list.length},t.prototype.getList=function(){return this._list},t}());i.default=a,cc._RF.pop()},{}],Report:[function(t,e,o){"use strict";cc._RF.push(e,"da3d8iaoJpDxpRzaZMmhQzO","Report");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("Api"),a=n("function"),c=n("TimeManage"),s=n("config"),l=function(){function t(){}return t.prototype.click=function(){if(window.params.getShowParams("w_cid")||window.params.getShowParams("clickid")){var t={yw_track_channel:"tt_ttmn",yw_app_name:window.params.getGameParams("app_name"),yw_channel:window.params.getGameParams("channel"),yw_version:window.params.getGameParams("version"),yw_opi:window.params.getUserParams("openid")};t=Object.assign(t,window.params.getShowParams()),window.Logger.info("## \u4e0a\u62a5\u76d1\u6d4b\u6570\u636e",t),r.click(t,function(t){window.Logger.info("## \u4e0a\u62a5\u76d1\u6d4b\u6570\u636e\u5b8c\u6210",t)},function(t){window.Logger.error("## \u76d1\u6d4b\u6570\u636e\u4e0a\u62a5\u5931\u8d25;",t)},function(){})}},t.prototype.active=function(){a.getServerTime(function(t){var e=[{d_type:"u_op",t:a.getClientTime(),act:"active",wds:"\u6fc0\u6d3b",clickid:window.params.getShowParams("clickid")}],o={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(e),b_t:t.data.data.time};o=a.getSign(o),window.Logger.info("## \u4e0a\u62a5\u6fc0\u6d3b",o),r.report(o,function(){},function(t){window.Logger.error("## \u6fc0\u6d3b\u4e0a\u62a5\u5931\u8d25;",t)},function(){})})},t.prototype.online=function(){var t=c.default.getEndClientTime(),e=c.default.getOnlineTime();c.default.removeStartClientTime(),c.default.removeEndClientTime(),a.getServerTime(function(o){var n=[{d_type:"u_op",t:t,act:"time",wds:"\u65f6\u957f",tab1:e,clickid:window.params.getShowParams("clickid")}],i={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(n),b_t:o.data.data.time};i=a.getSign(i),window.Logger.info("## \u4e0a\u62a5\u5728\u7ebf\u65f6\u957f",i),r.report(i,function(){},function(t){window.Logger.error("## \u5728\u7ebf\u65f6\u957f\u4e0a\u62a5\u5931\u8d25;",t)},function(){})})},t.prototype.userInfo=function(){a.getServerTime(function(t){var e=[{d_type:"u",platform:"tt_minigame",t:a.getClientTime(),clickid:window.params.getShowParams("clickid"),requestid:window.params.getShowParams("requestid"),os:window.params.getShowParams("os"),imei:window.params.getShowParams("imei"),android_id:window.params.getShowParams("android_id"),mac:window.params.getShowParams("mac"),idfa:window.params.getShowParams("idfa"),idfa_md5:window.params.getShowParams("idfa_md5"),d_m:window.params.getShowParams("d_m"),idfv:window.params.getShowParams("idfv"),oaid:window.params.getShowParams("oaid")}],o={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(e),b_t:t.data.data.time};o=a.getSign(o),window.Logger.info("## \u4e0a\u62a5\u7528\u6237\u4fe1\u606f",o),r.report(o,function(t){window.Logger.info("## \u4e0a\u62a5\u7528\u6237\u4fe1\u606f\u6210\u529f;",t)},function(t){window.Logger.error("## \u4e0a\u62a5\u7528\u6237\u4fe1\u606f\u5931\u8d25;",t)},function(){})})},t.prototype.adRequest=function(t){var e={d_type:"ad_ac",t:a.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_request",wds:"\u5e7f\u544a\u8bf7\u6c42",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adFill=function(t){var e={d_type:"ad_ac",t:a.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_fill",wds:"\u5e7f\u544a\u586b\u5145",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adClick=function(t){var e={d_type:"ad_ac",t:a.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_click",wds:"\u5e7f\u544a\u89e6\u53d1",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adImpression=function(t){var e={d_type:"ad_ac",t:a.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_impression",wds:"\u5e7f\u544a\u5c55\u793a",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adImpressionDone=function(t){var e={d_type:"ad_ac",t:a.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_impression_done",wds:"\u5e7f\u544a\u64ad\u653e\u5b8c\u6210",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.other=function(t,e){var o={d_type:"u_op",t:a.getClientTime(),clickid:window.params.getShowParams("clickid"),act:t,wds:e};window.reportQueue.push(o),this.checkReportQueue()},t.prototype.checkReportQueue=function(t){var e=this;void 0===t&&(t=!0),t&&!c.default.getFirstReportServerTime()&&(c.default.setFirstReportServerTime(),c.default.setFirstReportClientTime()),window.Logger.info("## \u5f53\u524d\u4e8b\u4ef6\u961f\u5217\u60c5\u51b5;","\u4e8b\u4ef6\u961f\u5217\u603b\u6570\uff08"+window.reportQueue.len()+"\uff09\uff08\u9650\u5236\u6570\u4e3a\uff1a"+s.LIMIT_REPORT_COUNT+"\uff09","\u8ddd\u79bb\u9996\u4e2a\u4e8b\u4ef6\u65f6\u957f\uff08"+(a.getClientTime()-c.default.getFirstReportClientTime())+"\uff09\uff08\u9650\u5236\u65f6\u957f\u4e3a\uff1a"+s.LIMIT_REPORT_INTERVAL+"\uff09",c.default.getFirstReportClientTime(),window.reportQueue.len()>=s.LIMIT_REPORT_COUNT||c.default.getFirstReportClientTime()&&a.getClientTime()-c.default.getFirstReportClientTime()>=s.LIMIT_REPORT_INTERVAL),window.reportQueue.len()>0&&(window.reportQueue.len()>=s.LIMIT_REPORT_COUNT||c.default.getFirstReportClientTime()&&a.getClientTime()-c.default.getFirstReportClientTime()>=s.LIMIT_REPORT_INTERVAL)&&setTimeout(function(){e.reportQueue()},500)},t.prototype.reportQueue=function(t){if(void 0===t&&(t=0),!(Object.keys(window.params.getGameParams()).length<=0)&&window.params.getUserParams("openid")){var e=window.reportQueue.range(0,0===t?window.reportQueue.len():t),o={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(e),b_t:c.default.getFirstReportServerTime()};c.default.removeFirstReportServerTime(),c.default.removeFirstReportClientTime(),o=a.getSign(o),window.Logger.info("## \u4e0a\u62a5\u4e8b\u4ef6\u961f\u5217",o,e),r.report(o,function(){},function(t){window.Logger.error("## \u4e8b\u4ef6\u961f\u5217\u4e0a\u62a5\u5931\u8d25;",t)},function(){})}},t}();i.default=new l,cc._RF.pop()},{}],Request:[function(t,e,o){"use strict";cc._RF.push(e,"6055cPYOiRJnZNWxmApD+U5","Request");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.get=function(t){if(window.tt)return t.method="GET",t.header={"content-type":"application/x-www-form-urlencoded"},window.wxapi.request(t)},t.post=function(t){if(window.tt)return t.method="POST",t.header={"content-type":"application/x-www-form-urlencoded"},window.wxapi.request(t)},t}();n.default=i,cc._RF.pop()},{}],ResManager:[function(t,e,o){"use strict";cc._RF.push(e,"f929cIDE0dJPIwOrBhsBkwC","ResManager");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.Res=void 0;var i=function(){function t(){}return t.prototype.load=function(t){return new Promise(function(e,o){cc.resources.load(t,function(t,n){return t?(cc.warn(t),o(t)):e(n)})})},t.prototype.releaseResPackage=function(t){for(var e in t)for(var o=t[e].urls,n=0;n<o.length;n++)cc.assetManager.releaseAsset(o[n])},t}();n.Res=new i,cc._RF.pop()},{}],Revive:[function(t,e,o){"use strict";cc._RF.push(e,"603ecbEfhdBoLrifT3NycSa","Revive");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("UserConst"),h=i("BmsManager"),u=i("EventManager"),f=i("PlatformManager"),g=i("PopupManager"),m=i("UserManager"),y=i("OPPOAndroidAdUtils"),v=i("OPPOMiniADUtils"),_=i("VIVOADUtils"),C=i("XMADUtils"),w=i("ShuShuConst"),P=cc._decorator,b=P.ccclass,T=(P.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("yesBtn",this.yesBtn,this)},e.prototype.onEnable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?(C.XMAD.showLargeFeed(),C.XMAD.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.OPPO_ANDROID)?(y.OPPOAndroidAd.showLargeFeed(),y.OPPOAndroidAd.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.OPPO)?(v.OPPOMiniAD.showLargeFeed(),v.OPPOMiniAD.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.VIVO)?_.VIVOAD.showCustomAd_1(function(){_.VIVOAD.showCustomAd_2()}):f.Platform.showBanner()},e.prototype.onDisable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?(C.XMAD.removeLargePicFeed(),f.Platform.hideBanner()):f.Platform.is(d.EPlatform.OPPO_ANDROID)?(y.OPPOAndroidAd.removeLargePicFeed(),f.Platform.hideBanner()):f.Platform.hideBanner(),f.Platform.hideNativeAds(),f.Platform.hideCustomAd1(),f.Platform.hideCustomAd2(),f.Platform.hideCustomAd_1(),f.Platform.hideCustomAd_2()},e.prototype.noBtn=function(){cc.game.emit("onRestartBtn"),g.Popup.hide()},e.prototype.yesBtn=function(){this.dict.boreShareIcon.active?cc.game.emit("bore_bore"):(console.log("\u590d\u6d3b"),f.Platform.showRewardAds(function(t){0==t&&(cc.game.emit("Revive"),u.Event.emit(l.default.extendTime2),cc.game.emit("gamelog_Thinking",w.ShuShuConst.reward_btn,{id:"042",lv:m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(p.TempData.CURRENT_MODE)}),g.Popup.hide())}))},e.prototype.initView=function(){var t=m.User.get(p.UserData.getBoreByShareTimes);m.User.get(p.UserData.getTipShareTimes),m.User.get(p.UserData.getResetByShareTimes),m.User.get(p.UserData.getDelayedByShareTimes),f.Platform.getConfig().hasShare&&"all"==h.BMS.getKey("share")&&(t?(this.dict.boreVideoIcon.getComponent(cc.Sprite).enabled=!1,this.dict.boreShareIcon.active=!0):(this.dict.boreVideoIcon.getComponent(cc.Sprite).enabled=!0,this.dict.boreShareIcon.active=!1))},c([b],e)}(s.default));r.default=T,cc._RF.pop()},{}],RewriteMask:[function(t,e){"use strict";cc._RF.push(e,"fce47sGueBLj5qbP+lhSMVs","RewriteMask"),(function(){}.prototype=cc.Mask.prototype).onDestroy=function(){this._super&&this._super(),this._removeGraphics&&this._removeGraphics(),this._spriteFrame=null},cc._RF.pop()},{}],Rewrite:[function(t,e){"use strict";cc._RF.push(e,"8add7WBV1VP/YNHb8pdLFFP","Rewrite"),(function(){}.prototype=cc.Button.prototype)._onTouchEnded=function(t){this.interactable&&this.enabledInHierarchy&&(this._pressed&&(cc.Component.EventHandler.emitEvents(this.clickEvents,t),this.node.emit("click",this)),this._pressed=!1,this._updateState(),t.stopPropagation())},cc._RF.pop()},{}],SceneConst:[function(t,e,o){"use strict";cc._RF.push(e,"0b4b65fq45DeZ+aqfrn2y89","SceneConst");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.SceneConst=void 0,function(t){t.LOADING="Loading",t.MAIN="Main",t.GAME="Game",t.MODE_SELECT="ModeSelect",t.LEVEL_SELECT="LevelSelect",t.UGC="Ugc",t.Home="Home"}(n.SceneConst||(n.SceneConst={})),cc._RF.pop()},{}],SceneFit:[function(t,e,o){"use strict";cc._RF.push(e,"06125y+k6dJWYy3Eui9vWAf","SceneFit");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.fit(),console.log("111")},e.prototype.fit=function(){var t=cc.Canvas.instance,e=cc.view.getFrameSize().width/cc.view.getFrameSize().height>=t.designResolution.width/t.designResolution.height;t.fitHeight=e,t.fitWidth=!e},a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],SceneManager:[function(t,e,o){"use strict";cc._RF.push(e,"c753b1QVVNLcYjkcaPN9El5","SceneManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.Scene=void 0;var r=n("SceneConst"),a=function(){function t(){this.rootNode=null,this.currentScene=r.SceneConst.LOADING,this.currentSceneNode=null,this.canvas=null,this.nodes={},this.hasAnim=!0,this.time=.1,this.isLoading=!1,this.isInit=!1}return t.prototype.loadScene=function(t,e,o){var n=this;void 0===o&&(o=!0),this.isInit?this.loadScene2(t,e,o):this.init(function(){n.loadScene2(t,e,o)})},t.prototype.loadScene2=function(t,e,o){var n=this;void 0===o&&(o=!0),this.canvas=cc.find("Canvas/SceneRoot"),this.isLoading||(this.isLoading=!0,cc.resources.load("prefab/scene/"+t,function(i,r){if(i)console.error(i);else{var a=cc.instantiate(r);n.hasAnim?(n.rootNode.opacity=0,cc.tween(n.rootNode).to(n.time,{opacity:255}).call(function(){console.log("\u5220\u9664\u65e7\u573a\u666f",n.currentScene),n.canvas.destroyAllChildren(),e&&a._components[0]&&(a._components[0]._data=e),n.canvas.addChild(a),n.currentScene=t}).to(n.time,{opacity:0}).start()):(console.log("\u5220\u9664\u65e7\u573a\u666f",n.currentScene),n.canvas.destroyAllChildren(),e&&a._components[0]&&(a._components[0]._data=e),n.canvas.addChild(a),n.currentScene=t),n.isLoading=!1,o&&cc.game.emit("hideAllPopup")}}))},t.prototype.init=function(t){var e=this;this.rootNode=new cc.Node("Transition"),cc.find("Canvas").parent.addChild(this.rootNode),cc.game.addPersistRootNode(this.rootNode);var o=this.rootNode.addComponent(cc.Widget);o.isAlignVerticalCenter=!0,o.isAlignHorizontalCenter=!0;var n=this.rootNode.addComponent(cc.Sprite);n.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.rootNode.setContentSize(2e3,2e3),this.rootNode.color=cc.color(255,255,255),this.rootNode.opacity=0,cc.loader.loadRes("texture/common/singleColor",cc.SpriteFrame,function(o,i){o||(n.spriteFrame=i,e.isInit=!0,t())})},t.prototype.getCurrentScene=function(){return this.currentScene},t}();i.Scene=new a,cc._RF.pop()},{}],ScreenshotUtils:[function(t,e,o){"use strict";cc._RF.push(e,"689d8ScQFlDWIZZjoaPqKwB","ScreenshotUtils");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.Screenshot=void 0;var i=function(){function t(){this._camera=null,this._texture=null,this._sprite=null}return t.prototype.init=function(t){if(cc.sys.isBrowser){var e=new cc.Node;e.parent=cc.director.getScene().getChildByName("Canvas");var o=e.addComponent(cc.Camera);o.enabled=!1;var n=cc.winSize.width,i=cc.winSize.height,r=cc.size(1*n,1*i),a=cc.v2(0,0);o.zoomRatio=1;var c=new cc.RenderTexture;c.initWithSize(r.width,r.height),t.setPosition(a),o.targetTexture=c,this._camera=o,this._texture=c,this._sprite=t.getComponent(cc.Sprite)}},t.prototype.btn_image_knife=function(t){console.log("save"),this._camera.render(void 0);var e=this._texture,o=e.readPixels(),n=e.width,i=e.height,r=document.createElement("canvas"),a=r.getContext("2d");r.width=n,r.height=i;for(var c=4*n,s=0;s<i;s++){for(var l=i-1-s,d=a.createImageData(n,1),p=l*n*4,h=0;h<c;h++)d.data[h]=o[p+h];a.putImageData(d,0,s)}var u=r.toDataURL("image/jpeg").replace(/^data:image[^;]*/,"data:image/octet-stream"),f=document.createElement("a");f.href=u,f.download=t+".png",f.click(),f.remove()},t}();n.Screenshot=new i,cc._RF.pop()},{}],ScrewItem:[function(t,e,o){"use strict";cc._RF.push(e,"85b57gSzpRCHaq7H2piCsmI","ScrewItem");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.line=null,e.circle=null,e.labNumber=null,e.isMove=!1,e.isCollider=!1,e.speed=1500,e.limitedY=0,e.isInit=!1,e.redScrewSp=null,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){},e.prototype.init=function(t,e,o){this.mgr=o;var n=this.mgr.container,i=n.parent.convertToWorldSpaceAR(n.position),r=this.node.parent.convertToNodeSpaceAR(i);this.limitedY=r.y-n.height/2,this.isInit=!0},e.prototype.update=function(t){this.isInit&&(this.mgr.isEnd||this.isMove&&!this.isCollider&&(this.node.y+=t*this.speed,this.node.y>=this.limitedY&&(cc.game.emit("ScrewMgr_ball_circle",this.node.uuid),this.isMove=!1)))},e.prototype.onCollisionEnter=function(t,e){this.isInit&&(this.mgr.isEnd||this.isCollider||(this.isCollider=!0,t.node.getComponent(o).isCollider=!0,t.node.children[1].getComponent(cc.Sprite).spriteFrame=this.redScrewSp,e.node.children[1].getComponent(cc.Sprite).spriteFrame=this.redScrewSp,cc.game.emit("ScrewMgr_ball_ball",this.node.uuid)))},a([l(cc.SpriteFrame)],e.prototype,"redScrewSp",void 0),o=a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],ScrewMgr:[function(t,e,o){"use strict";cc._RF.push(e,"e7885pgqa1FNKCEyWm2bSld","ScrewMgr");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("ClickLock"),l=i("zqddn_level_base"),d=i("ScrewItem"),p=i("zqddn_level_baseui"),h=cc._decorator,u=h.ccclass,f=h.property,g=[{id:3361,startNumber:0,targetNumber:10,clockwise:!0,needMove:!1},{id:3362,startNumber:0,targetNumber:15,clockwise:!0,needMove:!1},{id:3363,startNumber:3,targetNumber:10,clockwise:!1,needMove:!1},{id:3364,startNumber:3,targetNumber:15,clockwise:!0,needMove:!1},{id:3365,startNumber:0,targetNumber:40,clockwise:!1,needMove:!1}],m=[cc.color().fromHEX("#9f39c5"),cc.color().fromHEX("#339839"),cc.color().fromHEX("#5bcc95"),cc.color().fromHEX("#44caec"),cc.color().fromHEX("#ec8e00"),cc.color().fromHEX("#6a469e"),cc.color().fromHEX("#325ec4"),cc.color().fromHEX("#a9a805"),cc.color().fromHEX("#e7292a"),cc.color().fromHEX("#f76200"),cc.color().fromHEX("#f87483"),cc.color().fromHEX("#995c01"),cc.color().fromHEX("#94c82a"),cc.color().fromHEX("#5a72cf"),cc.color().fromHEX("#ffc12f")],y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelId=0,e.needMoveNode=null,e.midCircle=null,e.sp=null,e.container=null,e.item=null,e.itemLayer=null,e.circleNumber=null,e.labNeedMoveNumber=null,e.finger=null,e.lsm=null,e.clockwise=!1,e.posMap=new Map,e.gameBase=null,e.isTween=!1,e.isEnd=!1,e.circleSpeed=2,e.targetNumber=10,e.currData=null,e.currColorIndex=[],e.circleColorIndex=0,e.isMoveNode=!1,e.isInit=!1,e.moveIsOk=!0,e.isTouchingMoveNode=!1,e.only1=!1,e.time1=null,e.fps=0,e}return a(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this);var o=cc.director.getCollisionManager();o.enabledDebugDraw=!1,o.enabled=!0,this.gameBase=this.node.getComponent(l.default),g.forEach(function(t){t.id!==e.levelId||(e.currData=t)}),3365==this.levelId?(this.dict.title.getComponent(cc.Label).string="\u5c06\u66f4\u591a\u7684\u9897\u87ba\u4e1d\u6253\u8fdb\u6a21\u5177\u91cc\u3002",this.circleNumber.node.opacity=0,this.dict.circleNumber2.active=!0,this.circleSpeed=1.2):(this.circleNumber.node.opacity=255,this.dict.title.getComponent(cc.Label).string="\u5c06"+this.currData.targetNumber+"\u9897\u87ba\u4e1d\u6253\u8fdb\u6a21\u5177\u91cc\u3002"),this.currData?(this.fingerTween(),this.recordStartPos(this.needMoveNode),cc.game.on("ScrewMgr_ball_ball",this.ballToBall,this),cc.game.on("ScrewMgr_ball_circle",this.ballToCircle,this)):cc.error("[SpinBallMgr] \u5173\u5361id\u9519\u8bef,\u83b7\u53d6\u914d\u7f6e\u5931\u8d25."),this.turnAround()},e.prototype.fingerTween=function(){this.finger&&cc.tween(this.finger).by(.5,{scale:-.1},{easing:cc.easing.backIn}).by(.5,{scale:.1},{easing:cc.easing.backOut}).union().repeatForever().start()},e.prototype.timeAnimation=function(){var t=this;this.only1||(this.only1=!0,this.dict.timeLabel.getComponent(cc.Label).string=parseInt(this.dict.timeLabel.getComponent(cc.Label).string)-1+"",this.time1=this.schedule(function(){t.dict.timeLabel.getComponent(cc.Label).string=parseInt(t.dict.timeLabel.getComponent(cc.Label).string)-1+"",parseInt(t.dict.timeLabel.getComponent(cc.Label).string)<=0&&(t.dict.timeLabel.getComponent(cc.Label).string="0",t.unscheduleAllCallbacks(),t.gameBase.gameRight())},1,20))},e.prototype.turnAround=function(){cc.tween(this.container).by(1.3,{angle:-180}).by(1.3,{angle:-180}).union().repeatForever().start()},e.prototype.start=function(){var t=this;this.clickEvent(this.node,function(){if(!t.isTouchingMoveNode){t.finger&&t.finger.active&&(t.finger.active=!1);var e=t.itemLayer.children[0];e&&(t.updateNumberView(),e.getComponent(d.default).isMove=!0,3365==t.levelId&&t.timeAnimation())}}),this.currData.needMove?(this.needMoveNode.width=this.midCircle.width,this.needMoveNode.height=this.midCircle.height,this.moveEvent(this.needMoveNode,{sFunc:function(){t.isMoveNode||(t.isTouchingMoveNode=!0,t.circleNumber.string=t.currData.targetNumber.toString())},mFunc:function(e){t.isMoveNode||(t.isTouchingMoveNode=!0,t.needMoveNode.position=t.needMoveNode.position.add(e.getDelta()))},eFunc:function(){if(!t.isMoveNode)if(t.needMoveNode.position.sub(t.midCircle.position).mag()>=100)t.moveIsOk=!1,t.isMoveNode=!0,t.isTween=!0,cc.tween(t.needMoveNode).to(.2,{opacity:0}).call(function(){t.isTween=!1,t.targetNumber=t.currData.targetNumber,t.reset(),t.isTouchingMoveNode=!1}).start();else{var e=t.posMap.get(t.needMoveNode.uuid);cc.tween(t.needMoveNode).to(.2,{position:e}).call(function(){t.circleNumber.string=t.targetNumber.toString(),t.isTouchingMoveNode=!1}).start()}}})):this.needMoveNode.active=!1,this.reset()},e.prototype.reset=function(){var t=this;this.isInit=!1,this.lsm.active=!1,this.itemLayer.childrenCount>0&&this.itemLayer.destroyAllChildren(),this.container.childrenCount>0&&this.container.destroyAllChildren(),this.scheduleOnce(function(){t.targetNumber=t.deepCopy(t.currData.targetNumber),t.currData.needMove&&!t.isMoveNode?t.targetNumber=72:(t.labNeedMoveNumber.string="",t.labNeedMoveNumber.node.active=!1),t.createBall()},.1),this.midCircle.scale=1,this.isEnd=!1},e.prototype.createBall=function(){for(var t=this,e=360/this.currData.startNumber,o=0;o<this.currData.startNumber;++o){var n=this.currColorIndex[o],i=cc.instantiate(this.item);i.parent=this.container,i.position=cc.v2(0,0),i.angle=e*(o+1),i.getComponent(d.default).init(m[n],0,this)}var r=this.targetNumber>30?31:this.targetNumber,a=0;(function e(){for(var o=Math.min(r-a,30),n=0;n<o;n++){var i=Math.round(Math.random()*(m.length-1)),c=cc.instantiate(t.item);c.parent=t.itemLayer,3365==t.levelId?c.position=cc.v2(0,80*-n):c.position=cc.v2(0,60*-n),c.active=!1,c.angle=0,c.getComponent(d.default).init(m[i],t.targetNumber-n,t),a++}a<r?t.scheduleOnce(function(){return e()}):(t.isInit=!0,t.updateNumberView())})();var c=this.itemLayer.children[0];if(c){var s=c.parent.convertToWorldSpaceAR(c.position),l=this.lsm.parent.convertToNodeSpaceAR(s);l.y-=c.height,this.lsm.y=l.y,this.lsm.active=!0}},e.prototype.ballToCircle=function(t){var e;this.isEnd||(this.itemLayer.children.forEach(function(o){o.uuid!==t||(e=o)}),e&&(e.removeFromParent(),e.parent=this.container,e.angle=-this.container.angle,e.setPosition(0,0),this.targetNumber--,this.dict.circleNumber2.getComponent(cc.Label).string=parseInt(this.dict.circleNumber2.getComponent(cc.Label).string)+1+"",this.updateNumberView(),this.isWin()))},e.prototype.ballToBall=function(t){var e;this.isEnd||(this.unscheduleAllCallbacks(),this.itemLayer.children.forEach(function(o){o.uuid!==t||(e=o)}),e?(e.removeFromParent(),e.parent=this.container,e.angle=-this.container.angle,e.setPosition(0,0),this.isEnd=!0,this.failTween()):(this.container.children.forEach(function(o){o.uuid!==t||(e=o)}),e&&(this.isEnd=!0,this.isTween=!0,this.failTween())))},e.prototype.failTween=function(){var t=this;this.isTween=!0,cc.tween(this.midCircle).to(.6,{scale:2},{easing:cc.easing.backIn}).to(.6,{scale:1},{easing:cc.easing.backOut}).call(function(){t.gameBase.showWrong(t.node,.3,!0)}).delay(.2).call(function(){t.isTween=!1,t.currData.needMove?cc.game.emit("onRestartBtn"):t.reset()}).start(),cc.tween(this.needMoveNode).to(.6,{scale:2},{easing:cc.easing.backIn}).to(.6,{scale:1},{easing:cc.easing.backOut}).start()},e.prototype.isWin=function(){var t=this;this.targetNumber<=0&&(this.isEnd=!0,this.container.stopAllActions(),cc.tween(this.container).by(1,{angle:720}).call(function(){t.gameBase.gameRight()}).start())},e.prototype.updateNumberView=function(){var t=this;this.circleNumber.string=this.targetNumber.toString(),this.labNeedMoveNumber.string=this.targetNumber.toString(),this.itemLayer.children.forEach(function(e,o){3365==t.levelId?e.position=cc.v2(0,150-80*o):e.position=cc.v2(0,150-60*o),e.active=o<=0})},e.prototype.update=function(){},e.prototype.clickEvent=function(t,e){var o=this;t.on(cc.Node.EventType.TOUCH_END,function(t){o.gameBase.onClickSound(),t.stopPropagation(),o.isEnd||o.isTween||e&&e(t)},this)},e.prototype.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var o=0,n=t.length;o<n;o++)e[o]=this.deepCopy(t[o]);return e}if(t instanceof Object){for(var i in e={},t)t.hasOwnProperty(i)&&(e[i]=this.deepCopy(t[i]));return e}console.warn("\u4e0d\u652f\u6301\u7684\u7c7b\u578b\uff1a"+e)},e.prototype.moveEvent=function(t,e){var o=this;if(e.sFunc&&t.on(cc.Node.EventType.TOUCH_START,function(t){o.isTween||e.sFunc&&e.sFunc(t)},this),e.mFunc&&t.on(cc.Node.EventType.TOUCH_MOVE,function(t){o.isTween||e.mFunc&&e.mFunc(t)},this),e.eFunc){var n=function(t){o.isTween||e.eFunc&&e.eFunc(t)};t.on(cc.Node.EventType.TOUCH_END,n,this),t.on(cc.Node.EventType.TOUCH_CANCEL,n,this)}},e.prototype.recordStartPos=function(t){this.posMap.set(t.uuid,t.position)},c([f({type:cc.Integer,tooltip:"\u5173\u5361id"})],e.prototype,"levelId",void 0),c([f(cc.Node)],e.prototype,"needMoveNode",void 0),c([f(cc.Node)],e.prototype,"midCircle",void 0),c([f(cc.Node)],e.prototype,"sp",void 0),c([f(cc.Node)],e.prototype,"container",void 0),c([f(cc.Node)],e.prototype,"item",void 0),c([f(cc.Node)],e.prototype,"itemLayer",void 0),c([f(cc.Label)],e.prototype,"circleNumber",void 0),c([f(cc.Label)],e.prototype,"labNeedMoveNumber",void 0),c([f(cc.Node)],e.prototype,"finger",void 0),c([f(cc.Node)],e.prototype,"lsm",void 0),c([s.ClickLock(.2)],e.prototype,"clickEvent",null),c([u],e)}(p.default);r.default=y,cc._RF.pop()},{}],ScrewSkinItem:[function(t,e,o){"use strict";cc._RF.push(e,"a2783JamE1DmbCt6vjJ8Ae+","ScrewSkinItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("EventConst"),d=i("UserConst"),p=i("EventManager"),h=i("UserManager"),u=cc._decorator,f=u.ccclass,g=u.property;(function(t){t[t.lock=0]="lock",t[t.getNoUnlock=1]="getNoUnlock",t[t.unlockNoUse=2]="unlockNoUse",t[t.unlockUse=3]="unlockUse"})(s||(s={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lock=null,e.unlockNoUse=null,e.unlockUse=null,e.param=null,e.state=s.lock,e.starAmount=0,e.skinNameArr=[],e}return a(e,t),e.prototype.onLoad=function(){this.skinNameArr=new Array(6).fill("pifu").map(function(t,e){return t+(e+1)})},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.state=this.param.eState,this.refresh()},e.prototype.refresh=function(){var t=this,e=this.param.index+1;this.lock.active=!1,this.unlockNoUse.active=!1,this.unlockUse.active=!1,cc.resources.load("texture/skin/luosi_"+e,function(e,o){if(e)return console.log(e);switch(t.unlockNoUse.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),t.state){case s.lock:t.unlockNoUse.active=!0,t.lock.active=!0;break;case s.unlockNoUse:t.unlockNoUse.active=!0;break;case s.unlockUse:t.unlockNoUse.active=!0,t.unlockUse.active=!0}})},e.prototype.clickEnter=function(){if(h.User.setTempData("chooseSkinPage",2),h.User.setTempData("chooseSkin",this.param.index+1),!this.unlockUse.active&&!this.lock.active){var t=h.User.get(d.UserData.useSkinIDList);t[2]=this.param.index,h.User.set(d.UserData.useSkinIDList,t),p.Event.emit(l.default.update_use_skin)}},e.state=s,c([g(cc.Node)],e.prototype,"lock",void 0),c([g(cc.Node)],e.prototype,"unlockNoUse",void 0),c([g(cc.Node)],e.prototype,"unlockUse",void 0),c([f],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],Set:[function(t,e,o){"use strict";cc._RF.push(e,"e4cd4LM451KiKxw25hI2P/t","Set");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("PlatformManager"),d=i("PopupManager"),p=cc._decorator,h=p.ccclass,u=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),t.prototype.onLoad.call(this),this.addBtnOn("privacyBtn",this.privacyBtn,this),t.prototype.onLoad.call(this),this.addBtnOn("termsBtn",this.termsBtn,this),t.prototype.onLoad.call(this),this.addBtnOn("noBtnwebview",this.noBtnwebview,this),t.prototype.onLoad.call(this),this.addBtnOn("noBtnwebview_2",this.noBtnwebview_2,this),this.contentwebview=this.node.getChildByName("contentwebview"),this.contentwebview_2=this.node.getChildByName("contentwebview_2")},e.prototype.noBtn=function(){d.Popup.hide()},e.prototype.privacyBtn=function(){this.contentwebview.active=1},e.prototype.noBtnwebview=function(){this.contentwebview.active=0},e.prototype.noBtnwebview_2=function(){this.contentwebview_2.active=0},e.prototype.termsBtn=function(){this.contentwebview_2.active=1},e.prototype.onEnable=function(){l.Platform.showBanner()},e.prototype.onDisable=function(){l.Platform.hideBanner()},c([h],e)}(s.default));r.default=u,cc._RF.pop()},{}],Shop:[function(t,e,o){"use strict";cc._RF.push(e,"aa832ug9a5DGZ7yfuyws9Iw","Shop");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("SceneConst"),h=i("UserConst"),u=i("EventManager"),f=i("PlatformManager"),g=i("PopupManager"),m=i("SceneManager"),y=i("UserManager"),v=i("OPPOAndroidAdUtils"),_=i("OPPOMiniADUtils"),C=i("XMADUtils"),w=cc._decorator,P=w.ccclass,b=(w.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?C.XMAD.showBannerFeed():f.Platform.is(d.EPlatform.OPPO_ANDROID)?v.OPPOAndroidAd.showLargeFeed():f.Platform.is(d.EPlatform.OPPO)?_.OPPOMiniAD.showLargeFeed():f.Platform.showBanner()},e.prototype.onDisable=function(){f.Platform.is(d.EPlatform.OPPO_ANDROID)&&v.OPPOAndroidAd.removeLargePicFeed(),f.Platform.hideBanner(),f.Platform.hideNativeAds()},e.prototype.initView=function(){console.log("\u6d4b\u8bd5",m.Scene.getCurrentScene()),m.Scene.getCurrentScene()==p.SceneConst.MAIN?cc.game.emit("gamelog","page003"):m.Scene.getCurrentScene()==p.SceneConst.GAME&&cc.game.emit("gamelog","page004"),1==y.User.getTempData(h.TempData.current_key_type)&&(this.dict.amount.getComponent(cc.Label).string="x3")},e.prototype.clickGiveUp=function(){cc.game.emit("gamelog","btn011"),g.Popup.hide()},e.prototype.clickVideo=function(){cc.game.emit("gamelog","btn012"),y.User.getTempData(h.TempData.current_key_type)?f.Platform.showRewardAds(function(t){if(0==t){cc.game.emit("gamelog","rewarde_btn010");var e=y.User.get(h.UserData.KEY);y.User.set(h.UserData.KEY,e+3),u.Event.emit(l.default.KEY_EFFECT),y.User.set(h.UserData.hasUseKey,1)}}):f.Platform.showRewardAds(function(t){if(0==t){cc.game.emit("gamelog","rewarde_btn001");var e=y.User.get(h.UserData.KEY);y.User.set(h.UserData.KEY,e+1),u.Event.emit(l.default.KEY_EFFECT)}})},c([P],e)}(s.default));r.default=b,cc._RF.pop()},{}],Show:[function(t,e,o){"use strict";cc._RF.push(e,"3a0194i7n1O17j63X2C07Ov","Show");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.show=function(t){window.tt&&window.wxapi.onShow(t)},t}();n.default=new i,cc._RF.pop()},{}],ShuShuConst:[function(t,e,o){"use strict";cc._RF.push(e,"6dae2uFGZhCx4yT8IC+inbr","ShuShuConst");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.ShuShuConst=void 0,n.ShuShuConst={Level_Page:"Level_Page",Level_Tips:"Level_Tips",Level_Reset:"Level_Reset",Level_Win:"Level_Win",Level_Lose:"Level_Lose",reward_btn:"reward_btn",btn:"btn",page:"page",Level_End:"Level_End",Level_Course:"Level_Course",Level_Pause:"Level_Pause",Level_Return:"Level_Return",Skin_unlock:"Skin_unlock",Skin_get:"Skin_get",Sign:"Sign",Play:"Play"},cc._RF.pop()},{}],SignInManager:[function(t,e,o){"use strict";cc._RF.push(e,"2098bxGltFP5IC+VY6fSSaX","SignInManager");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=new(function(){function t(){this.key="signIn",this.todayIsSigned=!1}return t.prototype.init=function(){console.log("\u521d\u59cb\u5316\u7b7e\u5230\u7cfb\u7edf");var t=this.getItem()||[(new Date).getTime(),0];this.setItem(t),this.isSameDay((new Date).getTime(),t[0])?this.todayIsSigned=!0:this.todayIsSigned=!1},t.prototype.signIn=function(t){if(void 0===t&&(t=1),console.log("\u70b9\u51fb\u7b7e\u5230\u6309\u94ae"),this.todayIsSigned)return console.log("\u4eca\u5929\u5df2\u7ecf\u7b7e\u5230");var e=this.getItem();e[0]=(new Date).getTime(),e[1]+=1,this.setItem(e),console.log("\u7b7e\u5230\u5956\u52b1"),cc.game.emit("signInReward",t)},t.prototype.getItem=function(){var t=cc.sys.localStorage.getItem(this.key)||null;return JSON.parse(t)},t.prototype.setItem=function(t){return cc.sys.localStorage.setItem(this.key,JSON.stringify(t))},t.prototype.isSameDay=function(t,e){var o=new Date(t),n=new Date(e);return o.getDate()===n.getDate()&&o.getMonth()===n.getMonth()&&o.getFullYear()===n.getFullYear()},t}());n.default=i,cc._RF.pop()},{}],SignIn:[function(t,e,o){"use strict";cc._RF.push(e,"2b75dwCaeZBbL0ncc3JIOT8","SignIn");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PopupConst"),p=i("UserConst"),h=i("EventManager"),u=i("PlatformManager"),f=i("PopupManager"),g=i("TipManager"),m=i("UserManager"),y=i("ShuShuConst"),v=i("AudioManager"),_=i("AudioConst"),C=cc._decorator,w=C.ccclass,P=(C.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.amountArr=[100,200,300,500,500,500,900],e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("videoBtn",this.videoBtn,this),this.addBtnOn("receiveBtn",this.receiveBtn,this),this.initView()},e.prototype.initView=function(){var t=this,e=m.User.get(p.UserData.signInDays)||0,o=m.User.get(p.UserData.todaySignIn)||0;m.User.set(p.UserData.signInDays,e),m.User.set(p.UserData.todaySignIn,o),this.dict.content2.children.forEach(function(e,o){e.getChildByName("amount").getComponent(cc.Label).string=""+t.amountArr[o],e.getChildByName("mask").active=!1,e.getChildByName("gou").active=!1,e.name=""+o,e.on(cc.Node.EventType.TOUCH_START,t.clickSign,t)});for(var n=0;n<e;n++){var i=this.dict.content2.children[n];i.getChildByName("mask").active=!0,i.getChildByName("gou").active=!0}},e.prototype.clickSign=function(){},e.prototype.noBtn=function(){f.Popup.hide()},e.prototype.videoBtn=function(){var t=this,e=m.User.get(p.UserData.todaySignIn)||0,o=m.User.get(p.UserData.signInDays)||0;return e?g.Tip.show("\u4eca\u65e5\u5df2\u7b7e\u5230"):o>=7?g.Tip.show("\u5df2\u5b8c\u6210\u6240\u6709\u7b7e\u5230"):void u.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",y.ShuShuConst.reward_btn,{id:"015",lv:m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(p.TempData.CURRENT_MODE)}),t.receiveBtn(2))})},e.prototype.receiveBtn=function(t){void 0===t&&(t=1);var e=m.User.get(p.UserData.todaySignIn)||0,o=m.User.get(p.UserData.signInDays)||0;if(e)return g.Tip.show("\u4eca\u65e5\u5df2\u7b7e\u5230");if(o>=7)return g.Tip.show("\u5df2\u5b8c\u6210\u6240\u6709\u7b7e\u5230");m.User.setTempData(p.TempData.isFirstBack,!1),m.User.setTempData(p.TempData.isFirst,!1),g.Tip.show("\u7b7e\u5230\u6210\u529f!"),cc.game.emit("signInHint"),m.User.set(p.UserData.signInDays,o+1),m.User.set(p.UserData.todaySignIn,1);var n=m.User.get(p.UserData.getLockSkinList),i=n[0];if(cc.game.emit("gamelog_Thinking",y.ShuShuConst.Sign,{type:t-1,id:o+1}),o+1==2){var r=9;i.includes(r)||(n[0].push(r),cc.game.emit("gamelog_Thinking",y.ShuShuConst.Skin_unlock,{mode:0,id:r})),m.User.set(p.UserData.getLockSkinList,n),m.User.setTempData("chooseSkinPage",0),m.User.setTempData("chooseSkin",r+1),f.Popup.show(d.PopupConst.GetSkin)}else o+1==7&&(r=10,i.includes(r)||(n[0].push(r),cc.game.emit("gamelog_Thinking",y.ShuShuConst.Skin_unlock,{mode:0,id:r})),m.User.set(p.UserData.getLockSkinList,n),m.User.setTempData("chooseSkinPage",0),m.User.setTempData("chooseSkin",r+1),f.Popup.show(d.PopupConst.GetSkin));var a=m.User.get("coin"),c=this.amountArr[o]*t;m.User.set("coin",a+c),h.Event.emit(l.default.COIN_EFFECT),v.Audio.playEffect(_.AudioConst.GAME_GOLD),this.initView()},c([w],e)}(s.default));r.default=P,cc._RF.pop()},{}],SkinGetWay:[function(t,e,o){"use strict";cc._RF.push(e,"2009afHRkBODIsUGZI9F9aX","SkinGetWay");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("ConfigConst"),d=i("EventConst"),p=i("ConfigManager"),h=i("EventManager"),u=i("PopupManager"),f=i("UserManager"),g=cc._decorator,m=g.ccclass,y=(g.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("noBtn2",this.noBtn,this),this.updateView()},e.prototype.noBtn=function(){u.Popup.hide()},e.prototype.onEnable=function(){h.Event.on(d.default.update_use_skin,this.updateView,this)},e.prototype.onDisable=function(){h.Event.off(d.default.update_use_skin,this.updateView,this)},e.prototype.updateView=function(){var t=this,e=f.User.getTempData("chooseSkin")||0;cc.resources.load("texture/skin/pifu"+e,function(e,o){if(e)return console.log(e);t.dict.img.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)}),p.Config.get(l.ConfigConst.Skin0).then(function(o){t.dict.describe.getComponent(cc.Label).string=o.find(function(t){return console.log("e-----------\x3e:",e),t.id==e}).unlock})},c([m],e)}(s.default));r.default=y,cc._RF.pop()},{}],SkinItem:[function(t,e,o){"use strict";cc._RF.push(e,"a6774MyXflH5IE8UU48BiFO","SkinItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("EventConst"),d=i("PopupConst"),p=i("UserConst"),h=i("EventManager"),u=i("PopupManager"),f=i("UserManager"),g=i("TipManager"),m=i("ConfigConst"),y=i("ConfigManager"),v=cc._decorator,_=v.ccclass,C=v.property;(function(t){t[t.lock=0]="lock",t[t.getNoUnlock=1]="getNoUnlock",t[t.unlockNoUse=2]="unlockNoUse",t[t.unlockUse=3]="unlockUse"})(s||(s={}));var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lock=null,e.lockbg=null,e.getNoUnlock=null,e.unlockNoUse=null,e.unlockUse=null,e.param=null,e.state=s.lock,e.starAmount=0,e.skinNameArr=[],e}return a(e,t),e.prototype.onLoad=function(){this.skinNameArr=new Array(15).fill("pifu").map(function(t,e){return t+(e+1)})},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.state=this.param.eState,this.refresh()},e.prototype.refresh=function(){var t=this,e=this.param.skinID;this.lock.active=!1,this.lockbg.active=!1,this.getNoUnlock.active=!1,this.unlockNoUse.active=!1,this.unlockUse.active=!1,cc.resources.load("texture/skin/pifu"+e,function(e,o){if(e)return console.log(e);switch(t.state){case s.lock:t.lock.active=!0,t.lockbg.active=!0,t.lock.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o);break;case s.getNoUnlock:t.getNoUnlock.active=!0,t.getNoUnlock.getChildByName("skin").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),t.getNoUnlock.getComponent(cc.Mask).spriteFrame=new cc.SpriteFrame(o),t.getNoUnlock.getComponent(cc.Mask).node.setContentSize(o.width,o.height);break;case s.unlockNoUse:t.unlockNoUse.active=!0,t.unlockNoUse.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o);break;case s.unlockUse:t.unlockUse.active=!0,t.unlockUse.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)}})},e.prototype.clickEnter=function(){if(f.User.setTempData("chooseSkinPage",0),f.User.setTempData("chooseSkin",this.param.skinID),this.lock.active){var t,e=this;y.Config.get(m.ConfigConst.Skin0).then(function(o){t=o.find(function(t){return t.id==e.param.skinID}).unlock,g.Tip.show(t+"")})}else if(this.getNoUnlock.active)u.Popup.show(d.PopupConst.GetSkin);else if(this.unlockNoUse.active){var o=f.User.get(p.UserData.useSkinIDList);o[0]=this.param.skinID-1,f.User.set(p.UserData.useSkinIDList,o),h.Event.emit(l.default.update_use_skin)}},e.state=s,c([C(cc.Node)],e.prototype,"lock",void 0),c([C(cc.Node)],e.prototype,"lockbg",void 0),c([C(cc.Node)],e.prototype,"getNoUnlock",void 0),c([C(cc.Node)],e.prototype,"unlockNoUse",void 0),c([C(cc.Node)],e.prototype,"unlockUse",void 0),c([_],e)}(cc.Component);r.default=w,cc._RF.pop()},{}],Skin:[function(t,e,o){"use strict";cc._RF.push(e,"83d752RgrlAj7pcejqS8Gpp","Skin");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("RecycleScroll"),d=i("ConfigConst"),p=i("EventConst"),h=i("PopupConst"),u=i("UserConst"),f=i("ConfigManager"),g=i("EventManager"),m=i("PlatformManager"),y=i("PopupManager"),v=i("TipManager"),_=i("UserManager"),C=i("Utils"),w=i("BaseboardItem"),P=i("ScrewSkinItem"),b=i("SkinItem"),T=cc._decorator,S=T.ccclass,A=T.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e.scroll1=null,e.scroll2=null,e.currentPage=0,e.currentChooseID=0,e.isAnim=!1,e.skinStateList=[],e.skin_sort=[],e.skinStateList1=[],e.skinStateList2=[],e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("videoBtn",this.videoBtn,this),this.addBtnOn("coinBtn",this.coinBtn,this),cc.game.emit("gamelog","page004");var e=_.User.get(u.UserData.useSkinIDList);this.currentChooseID=e[this.currentPage];for(var o=0;o<this.dict.list.children.length;o++){var n=this.dict.list.children[o];n.name=""+o,n.on(cc.Node.EventType.TOUCH_START,this.clickColorBtn,this)}this.initView()},e.prototype.clickColorBtn=function(t){if(!this.isAnim){var e=t.target,o=Number(e.name);if(o!=this.currentPage){this.currentPage=o;var n=_.User.get(u.UserData.useSkinIDList);this.currentChooseID=n[this.currentPage],this.initView()}}},e.prototype.initView=function(){var t=this;this.initBtnView(),this.initContentView(),this.scheduleOnce(function(){t.updateView()},0)},e.prototype.initView_s=function(){var t=this;this.initBtnView(),this.initContentView(),this.scheduleOnce(function(){t.updateView()},0)},e.prototype.initBtnView=function(){for(var t=0;t<this.dict.list.children.length;t++)this.dict.list.children[t].children[1].active=!0;this.dict.list.children[this.currentPage].children[1].active=!1,this.dict.btnGroup.active=!1,0!=this.currentPage&&(this.dict.btnGroup.active=!0)},e.prototype.initContentView=function(){this.scroll.node.active=!1,this.scroll1.node.active=!1,this.scroll2.node.active=!1,0==this.currentPage?this.scroll.node.active=!0:1==this.currentPage?this.scroll1.node.active=!0:this.scroll2.node.active=!0},e.prototype.noBtn=function(){y.Popup.hide()},e.prototype.videoBtn=function(){var t=this;if(!this.isAnim){var e=[];if(console.log(this["skinStateList"+this.currentPage]),this["skinStateList"+this.currentPage].forEach(function(t,o){0==t&&e.push(o)}),console.log("arr",e),!e.length)return v.Tip.show("\u6240\u6709\u76ae\u80a4\u90fd\u5df2\u89e3\u9501!");m.Platform.showRewardAds(function(o){0==o&&t.sucUnlockSkin(e)})}},e.prototype.sucUnlockSkin=function(t){var e=this,o=this.dict["content"+this.currentPage].children.filter(function(t){if(t.active)return t}),n=0,i=-1;this.isAnim=!0,1==t.length?this.sucGet(t[0]):this.schedule(function(){for(var r=C.Utils.randomNum(0,t.length-1);r==i;)r=C.Utils.randomNum(0,t.length-1);i=r;var a=t[r],c=e.dict["content"+e.currentPage].convertToWorldSpaceAR(o[a].position),s=e.dict.gaolianluang.parent.convertToNodeSpaceAR(c);e.dict.gaolianluang.position=s,e.dict.gaolianluang.active=!0,n+=1,console.log("times",n),n>=11&&e.sucGet(a)},.1,10)},e.prototype.sucGet=function(t){this.isAnim=!1,this.dict.gaolianluang.active=!1,_.User.setTempData("chooseSkinPage",this.currentPage),_.User.setTempData("chooseSkin",t+1),y.Popup.show(h.PopupConst.GetSkin)},e.prototype.coinBtn=function(){if(!this.isAnim){var t=[];if(console.log(this["skinStateList"+this.currentPage]),this["skinStateList"+this.currentPage].forEach(function(e,o){0==e&&t.push(o)}),console.log("arr",t),!t.length)return v.Tip.show("\u6240\u6709\u76ae\u80a4\u90fd\u5df2\u89e3\u9501\uff01");var e=_.User.get("coin")||0;e>=1e3?((e-=1e3)<=0&&(e=0),_.User.set("coin",e),g.Event.emit(p.default.COIN_UPDATE),this.sucUnlockSkin(t)):v.Tip.show("\u91d1\u5e01\u4e0d\u8db3!")}},e.prototype.onEnable=function(){g.Event.on(p.default.update_use_skin,this.updateView,this)},e.prototype.onDisable=function(){g.Event.off(p.default.update_use_skin,this.updateView,this)},e.prototype.updateView=function(){var t=this,e=_.User.get(u.UserData.skinList),o=_.User.get(u.UserData.useSkinIDList),n=_.User.get(u.UserData.getLockSkinList);this.currentChooseID=o[this.currentPage],console.log("skinList",e),console.log("useSkinIDList",o),console.log("getLockSkinList",n),this.skin_sort=[],f.Config.get(d.ConfigConst.Skin0).then(function(i){t.skinStateList=new Array(i.length).fill(0),t.skinStateList=t.skinStateList.map(function(i,r){return n[t.currentPage].includes(r)?b.default.state.getNoUnlock:r==o[t.currentPage]?b.default.state.unlockUse:e[t.currentPage].includes(r)?b.default.state.unlockNoUse:b.default.state.lock}),t.skinStateList[7]=n[t.currentPage].includes(9)?b.default.state.getNoUnlock:9==o[t.currentPage]?b.default.state.unlockUse:e[t.currentPage].includes(9)?b.default.state.unlockNoUse:b.default.state.lock,t.skinStateList[8]=n[t.currentPage].includes(10)?b.default.state.getNoUnlock:10==o[t.currentPage]?b.default.state.unlockUse:e[t.currentPage].includes(10)?b.default.state.unlockNoUse:b.default.state.lock,i.forEach(function(e,o){8==e.id?e.id=10:e.id=e.id,9==e.id?e.id=11:e.id=e.id,t.skin_sort.push({skinID:e.id,sort:e.sort,skinStateList:t.skinStateList[o]})}),t.skin_sort.sort(function(t,e){return t.sort-e.sort}),console.log("skin_sort",t.skin_sort),t.scroll.onItemRender=t.onItemRender.bind(t),t.scroll.onItemClicked=t.onItemClicked.bind(t),t.scroll.numItems=t.skinStateList.length}),this.skinStateList1=new Array(6).fill(0),this.skinStateList1=this.skinStateList1.map(function(t,n){return n==o[1]?b.default.state.unlockUse:e[1].includes(n)?b.default.state.unlockNoUse:b.default.state.lock}),this.scroll1.onItemRender=this.onItemRender1.bind(this),this.scroll1.onItemClicked=this.onItemClicked.bind(this),this.scroll1.numItems=this.skinStateList1.length,this.skinStateList2=new Array(6).fill(0),this.skinStateList2=this.skinStateList2.map(function(t,n){return n==o[2]?b.default.state.unlockUse:e[2].includes(n)?b.default.state.unlockNoUse:b.default.state.lock}),this.scroll2.onItemRender=this.onItemRender2.bind(this),this.scroll2.onItemClicked=this.onItemClicked.bind(this),this.scroll2.numItems=this.skinStateList2.length},e.prototype.onItemRender=function(t,e){var o=e.getComponent(b.default),n=(b.default.state.lock,{index:t,eState:this.skin_sort[t].skinStateList,skinID:this.skin_sort[t].skinID});o.setData(n)},e.prototype.onItemRender1=function(t,e){var o=e.getComponent(w.default),n=(w.default.state.lock,{index:t,eState:this.skinStateList1[t]});o.setData(n)},e.prototype.onItemRender2=function(t,e){var o=e.getComponent(P.default),n=(P.default.state.lock,{index:t,eState:this.skinStateList2[t]});o.setData(n)},e.prototype.onItemClicked=function(){},e.prototype.showBigImg=function(t){for(var e=0;e<this.dict.bigImg.children.length;e++)this.dict.bigImg.children[e].active=e==t},e.prototype.touchStart=function(t){var e=t.target;if(Number(e.name)!=this.currentChooseID&&e.getChildByName("unlock").active){var o=_.User.get(u.UserData.useSkinIDList);o[this.currentPage]=Number(e.name),_.User.set(u.UserData.useSkinIDList,o),this.currentChooseID=Number(e.name);for(var n=0;n<this.dict.skinItemRoot.children.length;n++)this.dict.skinItemRoot.children[n].getChildByName("use").active=!1;e.getChildByName("use").active=!0,e.getChildByName("icon").active=!0,this.showBigImg(Number(e.name))}},e.prototype.unlockSkinBtn=function(){},e.prototype.videoSkinBtn=function(){},e.prototype.skinCloseBtn=function(){},c([A(l.default)],e.prototype,"scroll",void 0),c([A(l.default)],e.prototype,"scroll1",void 0),c([A(l.default)],e.prototype,"scroll2",void 0),c([S],e)}(s.default);r.default=N,cc._RF.pop()},{}],Skip:[function(t,e,o){"use strict";cc._RF.push(e,"af7176qHlFCh4WEbidkqF35","Skip");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("UserConst"),h=i("EventManager"),u=i("PlatformManager"),f=i("PopupManager"),g=i("UserManager"),m=i("OPPOAndroidAdUtils"),y=i("OPPOMiniADUtils"),v=i("XMADUtils"),_=cc._decorator,C=_.ccclass,w=(_.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("defineBtn",this.clickDefine,this)},e.prototype.onEnable=function(){u.Platform.is(d.EPlatform.XIAOMI_ANDROID)?v.XMAD.showBannerFeed():u.Platform.is(d.EPlatform.OPPO_ANDROID)?m.OPPOAndroidAd.showLargeFeed():u.Platform.is(d.EPlatform.OPPO)?y.OPPOMiniAD.showLargeFeed():u.Platform.showBanner()},e.prototype.onDisable=function(){u.Platform.is(d.EPlatform.OPPO_ANDROID)&&m.OPPOAndroidAd.removeLargePicFeed(),u.Platform.hideBanner(),u.Platform.hideNativeAds()},e.prototype.clickGiveUp=function(){f.Popup.hide()},e.prototype.clickDefine=function(){var t=g.User.get(p.UserData.KEY)-2;t<=0&&(t=0),g.User.set(p.UserData.KEY,t),h.Event.emit(l.default.KEY_UPDATE),g.User.setTempData("isNeedInsert",!1),setTimeout(function(){cc.game.emit("game_success2")},300),f.Popup.hide()},c([C],e)}(s.default));r.default=w,cc._RF.pop()},{}],SpiderItem:[function(t,e,o){"use strict";cc._RF.push(e,"2470aDgBKlO1q/pbJOhXgAF","SpiderItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l,d=i("DrawPhysicsLineBody"),p=i("DrawPhysicsLineContact"),h=i("BeeThornDogTag");(function(t){t[t.normal=0]="normal",t[t.fall=1]="fall",t[t.rise=2]="rise"})(s||(s={})),function(t){t.normal="daiji",t.putDown="fang",t.fall0="xialuo1",t.fall1="xialuo2",t.take="na"}(l||(l={}));var u=cc._decorator,f=u.ccclass,g=u.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fallSpeed=cc.v2(0,-100),e.riseSpeed=cc.v2(0,100),e.target=null,e.speed=1,e.beeIndex=-1,e.isLeftPower=!0,e.hitAmount=0,e.localPoints=[],e.state=s.normal,e.routeIndex=0,e.flyArr=[],e.radius=200,e.mgr=null,e.isToLeft=!0,e.startPos=null,e.spine=null,e.delayTime=.3,e.time=0,e.isInit=!1,e.offset=200,e}return a(e,t),e.prototype.onLoad=function(){this.spine=this.node.getChildByName("spine").getComponent(sp.Skeleton),this.spine.setAnimation(0,l.normal,!0)},e.prototype.init=function(t){this.mgr=t,this.isInit=!0,this.startPos=this.node.position,this.spine.setAnimation(0,l.fall0,!1),this.state=s.fall,this.node.getComponent(p.default).onBeginContact=this.onBeginContact.bind(this)},e.prototype.onBeginContact=function(t,e,o){if(o.tag==h.BeeThornDogTag.role&&(e.node.isFall||(e.node.isFall=!0,console.log("\u78b0\u5230\u72d7\u5934"),e.node.getComponent(cc.RevoluteJoint).connectedBody=o.node.getComponent(cc.RigidBody),e.node.getComponent(cc.RevoluteJoint).apply(),this.spine.setAnimation(0,l.take,!1),this.state=s.rise)),o.tag!=h.BeeThornDogTag.floor&&o.tag!=h.BeeThornDogTag.spider&&o.tag!=h.BeeThornDogTag.magma||e.node.isFall||(e.node.isFall=!0,console.log("\u78b0\u5230\u5730\u677f"),this.state=s.rise,this.spine.setAnimation(0,l.fall1,!1),this.spine.addAnimation(0,l.fall0,!1)),o.tag==h.BeeThornDogTag.line&&this.time>=this.delayTime&&!e.node.isFall){e.node.isFall=!0,console.log("\u78b0\u5230\u7ebf\u6761");var n=t.getWorldManifold().points[0],i=this.mgr.getComponent(d.default).lineBody.node,r=i.convertToNodeSpaceAR(n),a=i.addComponent(cc.PhysicsPolygonCollider);a.offset=r,a.points=[cc.v2(-10,-10),cc.v2(10,-10),cc.v2(10,10),cc.v2(-10,10)],a.apply(),e.node.getComponent(cc.RevoluteJoint).connectedBody=i.getComponent(cc.RigidBody),e.node.getComponent(cc.RevoluteJoint).connectedAnchor=r,e.node.getComponent(cc.RevoluteJoint).apply(),this.spine.setAnimation(0,l.take,!1),this.state=s.rise}},e.prototype.randomNum=function(t,e,o){var n=e-t,i=o||Math.random();return t+Math.round(i*n)},e.prototype.update=function(t){this.isInit&&(this.time+=t);var e=this.node.getComponent(cc.RigidBody);if(this.state==s.fall){var o=this.fallSpeed;this.move(o,e,t)}if(this.state==s.rise){if(o=this.riseSpeed,this.getDistance(this.startPos,this.node.position)<=10)return this.state=s.normal,console.log("\u6d4b\u8bd5\u56de\u5f52"),void(this.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static);this.move(o,e,t)}},e.prototype.move=function(t,e,o){(t=t.normalize()).scaleSelf(cc.v2(this.speed,this.speed)),t.x>=2e3?t.x=2e3:t.x<=-2e3&&(t.x=-2e3),t.y>=2e3?t.y=2e3:t.y<=-2e3&&(t.y=-2e3),e.linearVelocity=t,this.speed+=300*o,this.speed>=300&&(this.speed=300)},e.prototype.getDistance=function(t,e){return t.sub(e).mag()},e.prototype.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},c([g({tooltip:"\u4e0b\u843d\u901f\u5ea6"})],e.prototype,"fallSpeed",void 0),c([g({tooltip:"\u4e0a\u5347\u901f\u5ea6"})],e.prototype,"riseSpeed",void 0),c([f],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],SpinBallMgr2:[function(t,e,o){"use strict";cc._RF.push(e,"5d857IO7N1AK61IMPA0pQi2","SpinBallMgr2");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("zqddn_level_base"),l=i("ClickLock"),d=i("BallItem2"),p=cc._decorator,h=p.ccclass,u=p.property,f=[{id:1614,startNumber:1,targetNumber:1,clockwise:!0,needMove:!1},{id:1615,startNumber:2,targetNumber:2,clockwise:!0,needMove:!1},{id:1616,startNumber:3,targetNumber:3,clockwise:!0,needMove:!1},{id:1617,startNumber:4,targetNumber:4,clockwise:!0,needMove:!1},{id:1618,startNumber:5,targetNumber:5,clockwise:!0,needMove:!1}],g=[cc.color().fromHEX("#9f39c5"),cc.color().fromHEX("#339839"),cc.color().fromHEX("#5bcc95"),cc.color().fromHEX("#44caec"),cc.color().fromHEX("#ec8e00"),cc.color().fromHEX("#6a469e"),cc.color().fromHEX("#325ec4"),cc.color().fromHEX("#a9a805"),cc.color().fromHEX("#e7292a"),cc.color().fromHEX("#f76200"),cc.color().fromHEX("#f87483"),cc.color().fromHEX("#995c01"),cc.color().fromHEX("#94c82a"),cc.color().fromHEX("#5a72cf"),cc.color().fromHEX("#ffc12f")],m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelId=0,e.midCircle=null,e.sp=null,e.container=null,e.item=null,e.itemLayer=null,e.circleNumber=null,e.finger=null,e.clockwise=!1,e.posMap=new Map,e.gameBase=null,e.isTween=!1,e.isEnd=!1,e.circleSpeed=1.2,e.targetNumber=10,e.currData=null,e.currColorIndex=[],e.circleColorIndex=0,e.isMoveNode=!1,e.isInit=!1,e.moveIsOk=!0,e.isTouchingMoveNode=!1,e}return a(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,this.gameBase=this.node.getComponent(s.default),this.initData(),this.initEvent()},e.prototype.start=function(){this.reset()},e.prototype.initData=function(){var t=this;if(f.forEach(function(e){e.id!==t.levelId||(t.currData=e)}),this.currData){for(var e=0;e<this.currData.startNumber;++e){var o=Math.round(Math.random()*(g.length-1));this.currColorIndex.push(o)}this.circleColorIndex=Math.round(Math.random()*(g.length-1)),this.sp.color=g[this.circleColorIndex]}else cc.error("[SpinBallMgr] \u5173\u5361id\u9519\u8bef,\u83b7\u53d6\u914d\u7f6e\u5931\u8d25.")},e.prototype.initEvent=function(){var t=this;this.clickEvent(this.node,function(){if(!t.isTouchingMoveNode){t.finger&&t.finger.active&&(t.finger.active=!1);var e=t.itemLayer.children[0];e&&(t.updateNumberView(),t.updateItemLayer(),e.getComponent(d.default).isMove=!0)}})},e.prototype.reset=function(){var t=this;this.isInit=!1,cc.log("\u5b50\u8282\u70b9\u6570\u91cf1",this.itemLayer.childrenCount,this.container.childrenCount),this.itemLayer.childrenCount>0&&this.itemLayer.destroyAllChildren(),this.container.childrenCount>0&&this.container.destroyAllChildren(),this.scheduleOnce(function(){t.targetNumber=t.deepCopy(t.currData.targetNumber),cc.log("\u5b50\u8282\u70b9\u6570\u91cf2",t.itemLayer.childrenCount,t.container.childrenCount),t.createBall()},.1),this.midCircle.scale=1,this.isEnd=!1},e.prototype.createBall=function(){for(var t=this,e=360/this.currData.startNumber,o=Math.floor(360*Math.random()),n=0;n<this.currData.startNumber;++n){var i=this.currColorIndex[n],r=cc.instantiate(this.item);r.parent=this.container,r.position=cc.v2(0,0),r.angle=o+e*n;var a=r.getComponent(d.default);a.init(g[i],0,this),a.circle.opacity=0,a.isConnected=!0}var c=this.targetNumber>30?31:this.targetNumber,s=0;(function e(){for(var o=Math.min(c-s,30),n=0;n<o;n++){var i=t.currColorIndex[n],r=cc.instantiate(t.item);r.parent=t.itemLayer,r.position=cc.v2(0,60*-n),r.angle=0;var a=r.getComponent(d.default);a.init(g[i],t.targetNumber-n,t),a.line.active=!1,a.isConnected=!1,s++}s<c?t.scheduleOnce(function(){return e()}):(t.isInit=!0,t.updateNumberView(),t.updateItemLayer())})()},e.prototype.ballToCircle=function(){this.isEnd||(this.isEnd=!0,this.targetNumber--,this.updateNumberView(),this.failTween())},e.prototype.ballToBall=function(){this.isEnd||(this.targetNumber--,this.updateNumberView(),this.updateItemLayer(),this.isWin())},e.prototype.failTween=function(){var t=this;this.isTween=!0,cc.tween(this.midCircle).to(.6,{scale:2},{easing:cc.easing.backIn}).to(.6,{scale:1},{easing:cc.easing.backOut}).call(function(){t.gameBase.showWrong()}).delay(.2).call(function(){t.isTween=!1,cc.game.emit("onRestartBtn")}).start(),cc.tween(this.itemLayer).to(.6,{scale:2},{easing:cc.easing.backIn}).to(.6,{scale:1},{easing:cc.easing.backOut}).start()},e.prototype.isWin=function(){var t=this;this.targetNumber<=0&&(this.isEnd=!0,cc.tween(this.container).by(1,{angle:720}).call(function(){t.gameBase.gameRight()}).start())},e.prototype.updateNumberView=function(){this.circleNumber.string=this.targetNumber.toString(),0===this.targetNumber?(this.circleNumber.string="",this.circleNumber.node.active=!1):this.circleNumber.node.active=!0},e.prototype.updateItemLayer=function(){this.itemLayer.children.forEach(function(t,e){t.position=cc.v2(0,60*-e),t.active=e<=2})},e.prototype.update=function(){if(this.isInit&&!this.isEnd){var t=this.currData.clockwise?1:-1;this.container.angle+=t*this.circleSpeed}},e.prototype.clickEvent=function(t,e){var o=this;t.on(cc.Node.EventType.TOUCH_END,function(t){o.gameBase.onClickSound(),t.stopPropagation(),o.isEnd||o.isTween||e&&e(t)},this)},e.prototype.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var o=0,n=t.length;o<n;o++)e[o]=this.deepCopy(t[o]);return e}if(t instanceof Object){for(var i in e={},t)t.hasOwnProperty(i)&&(e[i]=this.deepCopy(t[i]));return e}console.warn("\u4e0d\u652f\u6301\u7684\u7c7b\u578b\uff1a"+e)},e.prototype.moveEvent=function(t,e){var o=this;if(e.sFunc&&t.on(cc.Node.EventType.TOUCH_START,function(t){o.isTween||e.sFunc&&e.sFunc(t)},this),e.mFunc&&t.on(cc.Node.EventType.TOUCH_MOVE,function(t){o.isTween||e.mFunc&&e.mFunc(t)},this),e.eFunc){var n=function(t){o.isTween||e.eFunc&&e.eFunc(t)};t.on(cc.Node.EventType.TOUCH_END,n,this),t.on(cc.Node.EventType.TOUCH_CANCEL,n,this)}},e.prototype.recordStartPos=function(t){this.posMap.set(t.uuid,t.position)},c([u({type:cc.Integer,tooltip:"\u5173\u5361id"})],e.prototype,"levelId",void 0),c([u(cc.Node)],e.prototype,"midCircle",void 0),c([u(cc.Node)],e.prototype,"sp",void 0),c([u(cc.Node)],e.prototype,"container",void 0),c([u(cc.Node)],e.prototype,"item",void 0),c([u(cc.Node)],e.prototype,"itemLayer",void 0),c([u(cc.Label)],e.prototype,"circleNumber",void 0),c([u(cc.Node)],e.prototype,"finger",void 0),c([l.ClickLock(.2)],e.prototype,"clickEvent",null),c([h],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],SpinBallMgr3:[function(t,e,o){"use strict";cc._RF.push(e,"4db3daOrXhPIaHDjwTgYv70","SpinBallMgr3");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("zqddn_level_base"),l=i("ClickLock"),d=i("BallItem3"),p=cc._decorator,h=p.ccclass,u=p.property,f=[{id:1622,colorNumber:3,distribution:[1,1,1]},{id:1623,colorNumber:3,distribution:[1,1,2]},{id:1624,colorNumber:4,distribution:[1,1,1,1]},{id:1625,colorNumber:4,distribution:[1,2,1,2]},{id:1626,colorNumber:5,distribution:[1,1,1,1,1]}],g=[cc.color().fromHEX("#9f39c5"),cc.color().fromHEX("#339839"),cc.color().fromHEX("#5bcc95"),cc.color().fromHEX("#44caec"),cc.color().fromHEX("#ec8e00"),cc.color().fromHEX("#6a469e"),cc.color().fromHEX("#325ec4"),cc.color().fromHEX("#a9a805"),cc.color().fromHEX("#e7292a"),cc.color().fromHEX("#f76200"),cc.color().fromHEX("#f87483"),cc.color().fromHEX("#995c01"),cc.color().fromHEX("#94c82a"),cc.color().fromHEX("#5a72cf"),cc.color().fromHEX("#ffc12f")],m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelId=0,e.midCircle=null,e.item=null,e.itemLayer=null,e.colorNode=null,e.particle=null,e.finger=null,e.clockwise=!1,e.posMap=new Map,e.gameBase=null,e.isTween=!1,e.isEnd=!1,e.circleSpeed=2.4,e.targetNumber=10,e.currData=null,e.currColorIndex=[],e.circleColorIndex=0,e.isMoveNode=!1,e.isInit=!1,e.moveIsOk=!0,e.isTouchingMoveNode=!1,e}return a(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,this.gameBase=this.node.getComponent(s.default),this.initData(),this.initEvent(),this.reset()},e.prototype.initColor=function(){for(var t=this,e=0;e<this.currData.colorNumber;){var o=Math.round(Math.random()*(g.length-1));this.currColorIndex.indexOf(o)<0&&(this.currColorIndex.push(o),e++)}var n=0;this.currColorIndex.forEach(function(e,o){for(var i=t.currData.distribution[o],r=0;r<i;++r){var a=t.colorNode.children[n];a.colorIndex=e,a.color=g[e],n++}}),cc.log("\u5168\u90e8\u989c\u8272",this.currColorIndex)},e.prototype.initData=function(){var t=this;f.forEach(function(e){e.id!==t.levelId||(t.currData=e)}),this.currData?(this.targetNumber=this.currData.colorNumber,this.initColor()):cc.error("[SpinBallMgr] \u5173\u5361id\u9519\u8bef,\u83b7\u53d6\u914d\u7f6e\u5931\u8d25.")},e.prototype.initEvent=function(){var t=this;this.clickEvent(this.node,function(){if(!t.isTouchingMoveNode){t.finger&&t.finger.active&&(t.finger.active=!1);var e=t.itemLayer.children[0];e&&(t.updateNumberView(),t.updateItemLayer(),e.getComponent(d.default).isMove=!0)}})},e.prototype.reset=function(){this.midCircle.scale=1,this.createBall(),this.isEnd=!1,this.isInit=!0},e.prototype.createBall=function(){for(var t=this,e=this.targetNumber,o=0;o<e;o++){var n=this.currColorIndex[o],i=cc.instantiate(this.item);i.parent=this.itemLayer,i.position=cc.v2(0,60*-o),i.angle=0,i.colorIndex=this.currColorIndex[o];var r=i.getComponent(d.default);r.init(g[n],this.targetNumber-o,this),r.line.active=!1,r.isConnected=!1}this.scheduleOnce(function(){t.isInit=!0,t.updateNumberView(),t.updateItemLayer()})},e.prototype.colliderWrong=function(){this.isEnd||(this.isEnd=!0,this.targetNumber--,this.updateNumberView(),this.gameBase.showWrong(),this.scheduleOnce(function(){cc.game.emit("onRestartBtn")},1))},e.prototype.colliderRight=function(t){this.isEnd||(this.targetNumber--,this.colorNode.children.forEach(function(e){e.colorIndex===t&&(e.active=!1)}),this.updateNumberView(),this.updateItemLayer(),this.isWin(),this.particle.resetSystem())},e.prototype.failTween=function(){var t=this;this.isTween=!0,cc.tween(this.midCircle).to(.6,{scale:2},{easing:cc.easing.backIn}).to(.6,{scale:1},{easing:cc.easing.backOut}).call(function(){t.gameBase.showWrong()}).delay(.2).call(function(){t.isTween=!1,cc.game.emit("onRestartBtn")}).start(),cc.tween(this.itemLayer).to(.6,{scale:2},{easing:cc.easing.backIn}).to(.6,{scale:1},{easing:cc.easing.backOut}).start()},e.prototype.isWin=function(){var t=this;this.targetNumber<=0&&this.scheduleOnce(function(){t.colorNode.children.forEach(function(t){t.active=!0}),t.isEnd=!0,cc.tween(t.midCircle).by(1,{angle:720}).call(function(){t.gameBase.gameRight()}).start()},.5)},e.prototype.updateNumberView=function(){},e.prototype.updateItemLayer=function(){this.itemLayer.children.forEach(function(t,e){t.position=cc.v2(0,60*-e),t.active=e<=2})},e.prototype.update=function(){this.isInit&&(this.isEnd||(this.midCircle.angle+=this.circleSpeed))},e.prototype.clickEvent=function(t,e){var o=this;t.on(cc.Node.EventType.TOUCH_END,function(t){o.gameBase.onClickSound(),t.stopPropagation(),o.isEnd||o.isTween||e&&e(t)},this)},e.prototype.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var o=0,n=t.length;o<n;o++)e[o]=this.deepCopy(t[o]);return e}if(t instanceof Object){for(var i in e={},t)t.hasOwnProperty(i)&&(e[i]=this.deepCopy(t[i]));return e}console.warn("\u4e0d\u652f\u6301\u7684\u7c7b\u578b\uff1a"+e)},e.prototype.moveEvent=function(t,e){var o=this;if(e.sFunc&&t.on(cc.Node.EventType.TOUCH_START,function(t){o.isTween||e.sFunc&&e.sFunc(t)},this),e.mFunc&&t.on(cc.Node.EventType.TOUCH_MOVE,function(t){o.isTween||e.mFunc&&e.mFunc(t)},this),e.eFunc){var n=function(t){o.isTween||e.eFunc&&e.eFunc(t)};t.on(cc.Node.EventType.TOUCH_END,n,this),t.on(cc.Node.EventType.TOUCH_CANCEL,n,this)}},e.prototype.recordStartPos=function(t){this.posMap.set(t.uuid,t.position)},c([u({type:cc.Integer,tooltip:"\u5173\u5361id"})],e.prototype,"levelId",void 0),c([u(cc.Node)],e.prototype,"midCircle",void 0),c([u(cc.Node)],e.prototype,"item",void 0),c([u(cc.Node)],e.prototype,"itemLayer",void 0),c([u(cc.Node)],e.prototype,"colorNode",void 0),c([u(cc.ParticleSystem)],e.prototype,"particle",void 0),c([u(cc.Node)],e.prototype,"finger",void 0),c([l.ClickLock(.2)],e.prototype,"clickEvent",null),c([h],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],SpinBallMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b168azPJrNCm4ZywUYXNn5/","SpinBallMgr");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("ClickLock"),l=i("zqddn_level_base"),d=i("BallItem"),p=cc._decorator,h=p.ccclass,u=p.property,f=[{id:1609,startNumber:2,targetNumber:8,clockwise:!0,needMove:!1},{id:1610,startNumber:3,targetNumber:10,clockwise:!0,needMove:!1},{id:1611,startNumber:3,targetNumber:10,clockwise:!1,needMove:!1},{id:1612,startNumber:3,targetNumber:12,clockwise:!0,needMove:!0},{id:1613,startNumber:3,targetNumber:12,clockwise:!1,needMove:!1}],g=[cc.color().fromHEX("#9f39c5"),cc.color().fromHEX("#339839"),cc.color().fromHEX("#5bcc95"),cc.color().fromHEX("#44caec"),cc.color().fromHEX("#ec8e00"),cc.color().fromHEX("#6a469e"),cc.color().fromHEX("#325ec4"),cc.color().fromHEX("#a9a805"),cc.color().fromHEX("#e7292a"),cc.color().fromHEX("#f76200"),cc.color().fromHEX("#f87483"),cc.color().fromHEX("#995c01"),cc.color().fromHEX("#94c82a"),cc.color().fromHEX("#5a72cf"),cc.color().fromHEX("#ffc12f")],m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelId=0,e.needMoveNode=null,e.midCircle=null,e.sp=null,e.container=null,e.item=null,e.itemLayer=null,e.circleNumber=null,e.labNeedMoveNumber=null,e.finger=null,e.clockwise=!1,e.posMap=new Map,e.gameBase=null,e.isTween=!1,e.isEnd=!1,e.circleSpeed=1.2,e.targetNumber=10,e.currData=null,e.currColorIndex=[],e.circleColorIndex=0,e.isMoveNode=!1,e.isInit=!1,e.moveIsOk=!0,e.isTouchingMoveNode=!1,e}return a(e,t),e.prototype.onLoad=function(){var t=this;if(cc.director.getCollisionManager().enabled=!0,this.gameBase=this.node.getComponent(l.default),f.forEach(function(e){e.id!==t.levelId||(t.currData=e)}),this.currData){this.fingerTween(),this.recordStartPos(this.needMoveNode),cc.game.on("ball_ball",this.ballToBall,this),cc.game.on("ball_circle",this.ballToCircle,this);for(var e=0;e<this.currData.startNumber;++e){var o=Math.round(Math.random()*(g.length-1));this.currColorIndex.push(o)}this.circleColorIndex=Math.round(Math.random()*(g.length-1)),this.sp.color=g[this.circleColorIndex]}else cc.error("[SpinBallMgr] \u5173\u5361id\u9519\u8bef,\u83b7\u53d6\u914d\u7f6e\u5931\u8d25.")},e.prototype.fingerTween=function(){this.finger&&cc.tween(this.finger).by(.5,{scale:-.1},{easing:cc.easing.backIn}).by(.5,{scale:.1},{easing:cc.easing.backOut}).union().repeatForever().start()},e.prototype.start=function(){var t=this;this.clickEvent(this.node,function(){if(!t.isTouchingMoveNode){t.finger&&t.finger.active&&(t.finger.active=!1);var e=t.itemLayer.children[0];e&&(t.updateNumberView(),e.getComponent(d.default).isMove=!0)}}),this.currData.needMove?(Math.round(Math.random()*(g.length-1)),this.needMoveNode.width=this.midCircle.width,this.needMoveNode.height=this.midCircle.height,this.moveEvent(this.needMoveNode,{sFunc:function(){t.isMoveNode||(t.isTouchingMoveNode=!0,t.circleNumber.string=t.currData.targetNumber.toString())},mFunc:function(e){t.isMoveNode||(t.isTouchingMoveNode=!0,t.needMoveNode.position=t.needMoveNode.position.add(e.getDelta()))},eFunc:function(){if(!t.isMoveNode)if(t.needMoveNode.position.sub(t.midCircle.position).mag()>=100)t.moveIsOk=!1,t.isMoveNode=!0,t.isTween=!0,cc.tween(t.needMoveNode).to(.2,{opacity:0}).call(function(){t.isTween=!1,t.targetNumber=t.currData.targetNumber,t.reset(),t.isTouchingMoveNode=!1}).start();else{var e=t.posMap.get(t.needMoveNode.uuid);cc.tween(t.needMoveNode).to(.2,{position:e}).call(function(){t.circleNumber.string=t.targetNumber.toString(),t.isTouchingMoveNode=!1}).start()}}})):this.needMoveNode.active=!1,this.reset()},e.prototype.reset=function(){var t=this;this.isInit=!1,cc.log("\u5b50\u8282\u70b9\u6570\u91cf1",this.itemLayer.childrenCount,this.container.childrenCount),this.itemLayer.childrenCount>0&&this.itemLayer.destroyAllChildren(),this.container.childrenCount>0&&this.container.destroyAllChildren(),this.scheduleOnce(function(){t.targetNumber=t.deepCopy(t.currData.targetNumber),cc.log("\u5b50\u8282\u70b9\u6570\u91cf2",t.itemLayer.childrenCount,t.container.childrenCount),t.currData.needMove&&!t.isMoveNode?t.targetNumber=72:(t.labNeedMoveNumber.string="",t.labNeedMoveNumber.node.active=!1),t.createBall()},.1),this.midCircle.scale=1,this.isEnd=!1},e.prototype.createBall=function(){for(var t=this,e=360/this.currData.startNumber,o=0;o<this.currData.startNumber;++o){var n=this.currColorIndex[o],i=cc.instantiate(this.item);i.parent=this.container,i.position=cc.v2(0,0),i.angle=e*(o+1),i.getComponent(d.default).init(g[n],0,this)}var r=this.targetNumber>30?31:this.targetNumber,a=0;(function e(){for(var o=Math.min(r-a,30),n=0;n<o;n++){var i=Math.round(Math.random()*(g.length-1)),c=cc.instantiate(t.item);c.parent=t.itemLayer,c.position=cc.v2(0,60*-n),c.angle=0,c.getComponent(d.default).init(g[i],t.targetNumber-n,t),a++}a<r?t.scheduleOnce(function(){return e()}):(t.isInit=!0,t.updateNumberView())})()},e.prototype.ballToCircle=function(t){var e;this.isEnd||(cc.log("uuid",t),this.itemLayer.children.forEach(function(o){o.uuid!==t||(e=o)}),e&&(e.removeFromParent(),e.parent=this.container,e.angle=-this.container.angle,e.setPosition(0,0),this.targetNumber--,this.updateNumberView(),this.isWin()))},e.prototype.ballToBall=function(t){var e;this.isEnd||(this.itemLayer.children.forEach(function(o){o.uuid!==t||(e=o)}),e?(e.removeFromParent(),e.parent=this.container,e.angle=-this.container.angle,e.setPosition(0,0),this.isEnd=!0,this.failTween()):(this.container.children.forEach(function(o){o.uuid!==t||(e=o)}),e&&(this.isEnd=!0,this.isTween=!0,this.failTween())))},e.prototype.failTween=function(){var t=this;this.isTween=!0,cc.tween(this.midCircle).to(.6,{scale:2},{easing:cc.easing.backIn}).to(.6,{scale:1},{easing:cc.easing.backOut}).call(function(){t.gameBase.showWrong()}).delay(.2).call(function(){t.isTween=!1,t.currData.needMove?cc.game.emit("onRestartBtn"):t.reset()}).start(),cc.tween(this.needMoveNode).to(.6,{scale:2},{easing:cc.easing.backIn}).to(.6,{scale:1},{easing:cc.easing.backOut}).start()},e.prototype.isWin=function(){var t=this;this.targetNumber<=0&&(this.isEnd=!0,cc.tween(this.container).by(1,{angle:720}).call(function(){t.gameBase.gameRight()}).start())},e.prototype.updateNumberView=function(){this.circleNumber.string=this.targetNumber.toString(),this.labNeedMoveNumber.string=this.targetNumber.toString(),0===this.targetNumber?(this.circleNumber.string="",this.circleNumber.node.active=!1):this.circleNumber.node.active=!0,this.itemLayer.children.forEach(function(t,e){t.position=cc.v2(0,60*-e),t.active=e<=2})},e.prototype.update=function(){if(this.isInit&&!this.isEnd){var t=this.currData.clockwise?1:-1;this.container.angle+=t*this.circleSpeed}},e.prototype.clickEvent=function(t,e){var o=this;t.on(cc.Node.EventType.TOUCH_END,function(t){o.gameBase.onClickSound(),t.stopPropagation(),o.isEnd||o.isTween||e&&e(t)},this)},e.prototype.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var o=0,n=t.length;o<n;o++)e[o]=this.deepCopy(t[o]);return e}if(t instanceof Object){for(var i in e={},t)t.hasOwnProperty(i)&&(e[i]=this.deepCopy(t[i]));return e}console.warn("\u4e0d\u652f\u6301\u7684\u7c7b\u578b\uff1a"+e)},e.prototype.moveEvent=function(t,e){var o=this;if(e.sFunc&&t.on(cc.Node.EventType.TOUCH_START,function(t){o.isTween||e.sFunc&&e.sFunc(t)},this),e.mFunc&&t.on(cc.Node.EventType.TOUCH_MOVE,function(t){o.isTween||e.mFunc&&e.mFunc(t)},this),e.eFunc){var n=function(t){o.isTween||e.eFunc&&e.eFunc(t)};t.on(cc.Node.EventType.TOUCH_END,n,this),t.on(cc.Node.EventType.TOUCH_CANCEL,n,this)}},e.prototype.recordStartPos=function(t){this.posMap.set(t.uuid,t.position)},c([u({type:cc.Integer,tooltip:"\u5173\u5361id"})],e.prototype,"levelId",void 0),c([u(cc.Node)],e.prototype,"needMoveNode",void 0),c([u(cc.Node)],e.prototype,"midCircle",void 0),c([u(cc.Node)],e.prototype,"sp",void 0),c([u(cc.Node)],e.prototype,"container",void 0),c([u(cc.Node)],e.prototype,"item",void 0),c([u(cc.Node)],e.prototype,"itemLayer",void 0),c([u(cc.Label)],e.prototype,"circleNumber",void 0),c([u(cc.Label)],e.prototype,"labNeedMoveNumber",void 0),c([u(cc.Node)],e.prototype,"finger",void 0),c([s.ClickLock(.2)],e.prototype,"clickEvent",null),c([h],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],SquarePuzzleMgr2:[function(t,e,o){"use strict";cc._RF.push(e,"86435sYIjpGq6Igmpdu98ci","SquarePuzzleMgr2");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("zqddn_level_base"),l=i("zqddn_level_baseui"),d=cc._decorator,p=d.ccclass,h=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.jumpSound=null,e.bombSound=null,e.squaresLayer=null,e.shiningParticle=null,e.test=null,e.state=0,e.btnArray=[],e.isClicked=!1,e.posList={},e.kuaiArray=[],e.finishUuidMap=new Map,e.canMove=!0,e.chooseLayer=null,e.physicsManager=null,e.shakeTween=null,e}return a(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.chooseLayer=this.dict.chooseLayer,this.chooseLayer.getComponent(cc.Layout).enabled=!1,this.physicsManager=cc.director.getPhysicsManager(),this.physicsManager.enabled=!0,this.chooseLayer.children.forEach(function(t){if(e.posList[t.uuid]=t.position,e.setTouch(t),e.posList[t.uuid+"z"]=t.zIndex,e.finishUuidMap.set(t.uuid,!1),t.children.forEach(function(t){e.test&&(cc.instantiate(e.test).parent=t)}),t.getComponent(cc.PolygonCollider)){var o=e.getWPosByPolygon(t.getComponent(cc.PolygonCollider));t.points=o}else{for(var n=Math.round(t.height/86),i=Math.round(t.width/86),r=t.position,a=[],c=[],s=0;s<n;s++)for(var l=0;l<i;l++){var d=r.add(cc.v2(86*l,86*-s));a.push(d)}a.length>0&&a.forEach(function(e){var o=t.parent.convertToWorldSpaceAR(e);c.push(o)}),t.points=c}}),cc.log("[SquarePuzzleMgr2] onload")},e.prototype.onFinishCallBack=function(){},e.prototype.playBombSound=function(){this.bombSound&&cc.audioEngine.playEffect(this.bombSound,!1)},e.prototype.hideFinishSquare=function(){var t=this;this.squaresLayer.active=!1,this.chooseLayer.children.forEach(function(e){t.finishUuidMap.get(e.uuid)?e.active=!1:e.active=!0})},e.prototype.shake=function(t,e,o,n,i){var r=this;void 0===e&&(e=0),void 0===o&&(o=0),void 0===i&&(i=!0),this.shakeTween&&(this.shakeTween.stop(),this.shakeTween=null);var a=t.position;this.shakeTween=cc.tween(t).by(.05,{x:e,y:o}).by(.05,{x:-e,y:-o}).repeat(4).call(function(){t.position=a,n&&n()}).start();var c=this.chooseLayer.position;cc.tween(this.chooseLayer).by(.05,{x:e,y:o}).by(.05,{x:-e,y:-o}).repeat(4).call(function(){r.chooseLayer.position=c}).start()},e.prototype.setTouch=function(t){var e=this;t.on(cc.Node.EventType.TOUCH_START,function(){e.canMove&&(e.isClicked=!0,t.scale=1/e.chooseLayer.scale,t.zIndex=99)},this),t.on(cc.Node.EventType.TOUCH_MOVE,function(o){if(e.canMove&&e.isClicked){var n=o.touch.getDelta();t.x+=1*n.x/e.chooseLayer.scale,t.y+=1*n.y/e.chooseLayer.scale}},this),t.on(cc.Node.EventType.TOUCH_END,function(){e.touchEnd(t)},this),t.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.touchEnd(t)},this)},e.prototype.touchEnd=function(t){if(this.canMove)if(this.isClicked=!1,t.zIndex=this.posList[t.uuid+"z"],this.gameBase.onClickSound(),this.checkWin(t));else{this.finishUuidMap.set(t.uuid,!1);var e=this.kuaiArray.indexOf(t);-1!=e&&this.kuaiArray.splice(e,1),cc.tween(t).to(.2,{position:this.posList[t.uuid]}).call(function(){t.scale=1}).start()}},e.prototype.checkWin=function(t){var e=this,o=!1;return this.squaresLayer.children.forEach(function(n){var i=null;(i=n.getComponent(cc.PhysicsPolygonCollider))||(i=n.getComponent(cc.PolygonCollider)),n.children.forEach(function(n){if(e.getDistanceFromNode(n,t)<40){var r=e.getWPosByPolygon(i),a=!0;t.children.forEach(function(t){var e=t.parent.convertToWorldSpaceAR(t.position);cc.Intersection.pointInPolygon(e,r)||(a=!1)}),a&&e.kuaiSuperposition(t)&&(e.moveToNodePosition(n,t),o=!0)}})}),o},e.prototype.checkNodeIsRight=function(t){var e=!0,o=this.kuaiArray,n=null,i=[];1==t.type?(n=t.getComponent(cc.PolygonCollider),i=this.getWPosByPolygon(n)):t.getBoundingBoxToWorld();for(var r=0;r<o.length;r++){var a=o[r];if(1==a.type){var c=this.getWPosByPolygon(a.getComponent(cc.PolygonCollider));if(cc.Intersection.polygonPolygon(i,c)){cc.log("\u591a\u8fb9\u5f62\u548c\u591a\u8fb9\u5f62\u76f8\u4ea4\u4e86"),e=!1;break}}else for(var s=a.getBoundingBoxToWorld(),l=0;l<i.length;l++){var d=i[l];if(s.contains(d)){e=!1,cc.log("\u5f53\u524d\u70b9\u548c\u77e9\u5f62\u76f8\u4ea4\u4e86");break}}}return e},e.prototype.kuaiSuperposition=function(t){var e=this.kuaiArray.indexOf(t);-1!=e&&this.kuaiArray.splice(e,1);var o=!0;if(this.kuaiArray.length>0){for(var n=[],i=0;i<this.kuaiArray.length;i++)for(var r=this.kuaiArray[i],a=0;a<r.children.length;a++){var c=r.children[a];n.push(c)}for(var s=0;s<n.length;s++)for(var l=n[s],d=0;d<t.children.length;d++){var p=t.children[d],h=this.getDistanceFromNode(l,p);cc.log("\u662f\u5426\u91cd\u53e0",l.name,l.parent.name,p.name,t.name,h),h<45&&(o=!1)}}return o},e.prototype.getDistanceFromNode=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position),n=e.parent.convertToWorldSpaceAR(e.position);return o.sub(n).mag()},e.prototype.moveToNodePosition=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position),n=e.parent.convertToNodeSpaceAR(o);cc.tween(e).to(.2,{position:n}).start(),this.kuaiArray.push(e),this.finishUuidMap.set(e.uuid,!0),this.kuaiArray.length==this.chooseLayer.children.length&&(console.log("[SquarePuzzleMgr2] \u62fc\u63a5\u5b8c\u6210"),this.canMove=!1,this.onFinishCallBack())},e.prototype.getWPosByPolygon=function(t){for(var e=t.points,o=[],n=0;n<e.length;n++){var i=cc.v2(e[n].x+t.offset.x,e[n].y+t.offset.y),r=t.node.convertToWorldSpaceAR(i);o.push(r)}return o},c([h(s.default)],e.prototype,"gameBase",void 0),c([h({type:cc.AudioClip})],e.prototype,"jumpSound",void 0),c([h({type:cc.AudioClip,tooltip:"\u7206\u70b8\u97f3\u6548"})],e.prototype,"bombSound",void 0),c([h(cc.Node)],e.prototype,"squaresLayer",void 0),c([h(cc.Node)],e.prototype,"shiningParticle",void 0),c([h(cc.Node)],e.prototype,"test",void 0),c([p],e)}(l.default);r.default=u,cc._RF.pop()},{}],SquarePuzzleMgr3:[function(t,e,o){"use strict";cc._RF.push(e,"b43efpiBttEdZ7P7ZFVLygY","SquarePuzzleMgr3");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("zqddn_level_base"),l=i("zqddn_level_baseui"),d=cc._decorator,p=d.ccclass,h=d.property,u={4498:{map:[[[0,0,0,0,0,0,4,6],[6,6,0,0,0,4,6,6],[6,6,6,6,6,6,6,6],[0,6,6,6,6,6,0,0]]],items:[[[4,6],[5,5],[5,6]],[[5,5,3],[5,3,6]],[[5,5],[5,6]],[[6,4,5],[4,5,5]],[[4,5],[5,5],[6,5]]]},4500:{map:[[[0,6,0,0,0,0],[6,6,6,0,0,0],[0,0,6,6,6,0],[0,0,0,6,6,6]]],items:[[[4],[5]],[[5,3]],[[5,6],[2,5]],[[5,1]],[[5,6],[5,5]]]},4502:{map:[[[0,0,0,6,0,6],[0,0,6,6,6,6],[6,6,6,6,6,0],[0,0,6,6,0,0],[0,0,6,0,0,0]]],items:[[[1],[5]],[[5,5,1]],[[6,5],[5,5],[2,6]],[[6,5],[2,5]],[[1],[5]],[[6,5],[2,5]]]},4503:{map:[[[0,0,0,0,4,6],[0,0,0,4,6,6],[0,0,4,6,6,6],[0,4,6,6,6,6],[4,6,6,6,6,6]]],items:[[[4],[5],[5]],[[6,4,6],[4,5,1]],[[4,5],[5,5]],[[5,5,6],[6,5,5]],[[4,5],[6,3]],[[4,6],[5,6],[2,5]]]},4505:{map:[[[0,4,6,6,1,0],[4,6,0,0,6,1],[6,6,0,0,6,6],[6,6,0,0,6,6],[6,6,0,0,6,6]]],items:[[[4,5,5,1],[5,6,6,2]],[[6,4],[2,5]],[[1],[5]],[[1,6],[5,5]],[[4,6],[5,3]],[[1,6],[5,6],[5,5]],[[5,5]]]},4506:{map:[[[6,6,6,6,6],[2,6,6,6,3]]],items:[[[5,5],[5,6]],[[5],[3]],[[5],[2]],[[6,5],[5,5]]]},4508:{map:[[[0,6,6,0],[0,6,6,0],[6,6,6,6],[2,6,6,3]]],items:[[[4,1],[2,3]],[[5,1],[2,5]],[[5,5],[3,2]],[[4,5],[5,3]]]},4509:{map:[[[0,0,6,0],[0,0,6,6],[0,0,6,6],[6,6,6,6],[0,6,6,0],[0,6,0,0]]],items:[[[6,4],[2,5],[6,2]],[[5,6],[5,3]],[[6,4,1],[2,5,6]],[[6,6,1],[5,5,3]],[[1],[5]]]},4510:{map:[[[0,0,0,4,0],[0,0,0,6,4],[0,0,0,6,6],[0,0,4,6,6],[0,4,6,6,6],[6,6,6,0,0],[6,6,0,0,0]]],items:[[[5,6],[5,5]],[[4],[5],[3]],[[4,6],[5,6],[2,5]],[[4,1],[5,5]],[[4,6],[2,1]],[[4],[5],[5]]]},4511:{map:[[[6,6,0,0,0,0,0,0],[6,6,6,1,0,0,0,0],[6,6,6,6,6,0,0,0],[6,0,2,6,6,6,6,6],[0,0,0,0,0,6,6,0]]],items:[[[1,6],[5,5],[2,3]],[[1],[5]],[[4,5,3],[6,5,6]],[[5,6],[5,1],[2,6]],[[5,5,6],[6,2,1]],[[5,6],[2,5]],[[4,5],[5,6]]]},4512:{map:[[[4,6,6,1],[6,6,6,6],[6,6,6,6],[2,6,6,3]]],items:[[[4,5],[5,3]],[[1],[5],[2]],[[4],[5]],[[5,5],[3,6]],[[4,1],[2,3]],[[5,6,6],[2,5,1]]]},4513:{map:[[[2,6,6,6,6,6,6,3],[0,2,6,6,6,6,3,0]]],items:[[[2,5,3]],[[6,4],[5,3]],[[2,5,6],[6,2,1]],[[6,1,6],[4,5,3]],[[5,5,3],[2,6,6]]]},4514:{map:[[[0,0,0,6],[0,0,6,6],[0,0,6,6],[0,6,6,0],[6,6,0,0]]],items:[[[5,1],[2,6]],[[5,1]],[[6,5],[2,5]],[[1],[2]],[[1,6],[2,5]]]},4543:{map:[[[0,0,4,0,0,0],[0,4,6,0,0,0],[4,6,6,6,6,0],[6,6,6,6,6,6]]],items:[[[5,3],[5,6]],[[4,6],[5,1]],[[4,6],[5,5]],[[4],[5],[2]],[[6,4],[4,3]],[[4,3],[5,6]]]},4547:{map:[[[0,4,6,6,6],[4,6,6,6,6]]],items:[[[4,5,1]],[[6,4],[4,5]],[[5,3]],[[4,6],[2,3]],[[4,3]]]},4548:{map:[[[6,6,6,6,6],[6,0,0,0,6],[6,0,0,0,6],[6,0,0,0,6]]],items:[[[1],[5]],[[2,3]],[[1],[3]],[[1],[5]],[[5],[2]],[[4,5]],[[4],[2]],[[4,5,3]]]},4549:{map:[[[0,0,0,0,4],[0,0,0,4,6],[0,0,4,6,6],[0,4,6,6,6],[4,6,6,6,6]]],items:[[[4,1]],[[4],[2]],[[4,5,3]],[[4],[5],[3]],[[4],[5],[2]],[[4],[5],[5]],[[4,5,1]]]},4550:{map:[[[1,0,0,0],[6,1,0,0],[6,6,1,0],[6,6,6,1]],[[0,0,0,4],[0,0,4,6],[0,4,6,6],[4,6,6,6]]],items:[[[6,6,1],[5,5,3]],[[1],[5]],[[1],[5],[5]],[[4,1]],[[1],[5],[5]],[[4],[2]],[[6,4],[4,5]],[[4,5,5]]]},4554:{map:[[[0,0,4,6,0],[0,0,6,6,6],[0,4,6,6,6],[0,6,6,6,6],[6,6,6,6,6]]],items:[[[5,5],[6,5],[6,2]],[[4,5,5]],[[4,5,6],[6,5,5]],[[6,5],[5,3]],[[4,5,5,1]],[[4,5],[3,6]]]},4556:{map:[[[2,6,6,6,6,6,3],[0,2,6,6,6,3,0]]],items:[[[2,1]],[[6,1],[2,3]],[[2,3]],[[4,5]],[[6,1],[4,3]],[[2,5]],[[2,5],[6,3]]]},4558:{map:[[[0,4,6,6,1],[4,6,6,6,6],[0,0,0,0,6]]],items:[[[1,6],[5,1]],[[4],[2]],[[2,1],[6,2]],[[2,1],[6,3]],[[4,1]],[[4],[5]]]},4559:{map:[[[0,0,4,6,6],[0,4,6,6,6],[4,6,6,6,6]]],items:[[[4,5,1]],[[6,5],[2,5]],[[4,5,3]],[[4,5]],[[4,5,5]]]},4560:{map:[[[0,0,4,6,6,6],[0,4,6,6,6,6],[4,6,6,6,6,6]]],items:[[[6,4,3],[4,3,6]],[[6,4,6],[4,5,5]],[[4],[5]],[[6,4],[4,5]],[[4,5,3]],[[5,5,3],[3,6,6]]]},4561:{map:[[[0,0,4,6,6,1,0,0],[0,4,6,6,6,6,1,0],[4,6,6,0,0,6,6,1]]],items:[[[1,6,6],[5,5,5]],[[1,6],[2,1]],[[5,1]],[[4],[5],[5]],[[2,5,1]],[[6,4],[4,5]]]},4562:{map:[[[0,0,0,0,6],[0,0,6,6,3],[0,4,6,6,0],[6,6,3,0,0],[6,6,0,0,0]]],items:[[[5],[3]],[[1,6],[5,5]],[[5,1],[6,5]],[[6,5],[2,3]],[[6,4],[2,5]]]},4563:{map:[[[6,6,6,6],[0,6,6,6],[0,0,6,6],[0,0,6,6],[0,0,6,6]]],items:[[[5,5,6],[6,5,5]],[[5,5],[5,6]],[[5,5],[6,5]],[[6,5],[5,5]]]},4564:{map:[[[0,0,4,6,1],[0,4,6,6,6],[4,6,6,6,6],[2,6,6,6,6]]],items:[[[5,1],[2,6]],[[2,5,1]],[[4,5,3]],[[6,4,6],[4,5,1]],[[4,5],[2,6]],[[6,5],[6,5],[5,5]]]},4565:{map:[[[4,6,6,1],[6,6,6,6],[6,6,6,6],[6,6,6,6],[0,0,6,0],[0,0,6,0]]],items:[[[5],[5],[5]],[[5],[5],[5]],[[6,5],[6,5],[5,5]],[[5],[5]],[[4,5,1],[6,5,6],[6,5,6]],[[4,3]]]},4566:{map:[[[4,6,6],[6,6,6],[0,6,6],[0,6,3],[0,6,0],[0,6,0]]],items:[[[4,5]],[[5],[2]],[[4,5],[3,6]],[[4],[5],[3]],[[5],[3]],[[1],[5],[5]]]},4567:{map:[[[6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6],[6,6,0,0,0,0,0,6]]],items:[[[5,5,5],[6,5,6]],[[6,5,5],[5,5,6]],[[6,5],[5,5],[6,5]],[[6,5,5],[5,5,6]],[[5,5],[5,6]]]},4853:{map:[[[6,6,0,0,0,6,6],[6,6,6,6,6,6,6],[0,6,6,6,6,6,0]]],items:[[[5,5],[5,5]],[[5],[5]],[[5,5],[6,2]],[[5,1],[5,5]],[[5,1],[6,5]],[[5],[2]]]},4854:{map:[[[6,6,6],[6,6,6],[6,6,6],[6,6,6],[2,6,3]]],items:[[[1,6],[5,3]],[[5],[5],[3]],[[5,6],[2,5]],[[4],[2]],[[5,5,5],[6,5,6]],[[5],[5]]]},4855:{map:[[[4,1,0,0,0,4,1],[6,6,0,0,0,6,6],[2,6,1,0,4,6,3],[0,2,6,6,6,3,0],[0,0,2,6,3,0,0]]],items:[[[4,1],[6,5]],[[2,5],[4,3]],[[4,1],[5,5],[6,3]],[[5,6],[2,5],[6,2]],[[4,1],[2,3]],[[1],[3]],[[4,5],[6,3]]]},4856:{map:[[[4,1,4,1],[6,6,6,6],[2,6,6,3],[0,2,3,0]]],items:[[[4,1],[3,2]],[[4],[3]],[[1],[2]],[[4,1],[2,3]],[[4,1],[2,3]],[[4,1],[2,3]]]},4857:{map:[[[1,0],[6,6],[6,6],[6,6],[6,6]],[[0,4],[4,6],[6,6],[6,6],[6,6],[6,6]]],items:[[[5,6],[5,1],[5,5]],[[5,1],[5,3],[3,6]],[[6,4],[4,5]],[[4],[5]],[[4],[5],[5],[5],[2]],[[1,6],[5,5],[6,2]]]},4858:{map:[[[6,6,6,6,6,6,6,6],[6,0,0,6,0,0,0,6],[6,0,0,6,0,0,0,6],[6,0,0,6,0,0,0,6],[6,0,0,6,0,0,0,6],[6,6,6,6,6,6,6,6]]],items:[[[5,5],[5,6],[5,6]],[[5,6],[5,6],[5,5]],[[5,5],[6,5],[6,5]],[[5,6,6],[5,6,6],[5,5,5]],[[6,6,5],[5,5,5]],[[5,5,5]],[[5],[5],[5],[5]]]},4859:{map:[[[0,0,0,0,6],[0,0,0,6,6],[0,0,6,6,6],[0,6,6,6,6],[6,6,6,6,6]]],items:[[[5],[5]],[[6,5],[5,5]],[[5,6],[5,5]],[[6,5],[5,5]],[[5,5,5],[6,5,6]]]},4860:{map:[[[2,6,6,6,3],[0,2,6,3,0]]],items:[[[2,1],[6,2]],[[2,1],[6,5]],[[2,1],[6,3]],[[2,3]]]},4861:{map:[[[6,6,6,6,0],[6,0,0,6,0],[6,0,0,6,0],[6,0,0,6,6]]],items:[[[1],[5],[3]],[[1,6],[5,5]],[[2,5,5]],[[5],[5],[2]],[[4],[5]]]}},f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.jumpSound=null,e.bombSound=null,e.squaresLayer=null,e.shiningParticle=null,e.levelId=-1,e.levelData=[],e.levelGrid=[],e.mapToGrid=[],e.itemData=[],e.state=0,e.btnArray=[],e.isClicked=!1,e.posList={},e.kuaiArray=[],e.finishUuidMap=new Map,e.canMove=!0,e.chooseLayer=null,e.physicsManager=null,e.uuidToIndex={},e.choosePositionByIndex={},e.shakeTween=null,e}return a(e,t),e.prototype.getBaseIndexByPIndex=function(t){for(var e=0,o=0;o<t;o++)e+=this.levelData[t-1].length;return e},e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.gameBase=this.node.getComponent(s.default),this.chooseLayer=this.dict.chooseLayer,this.chooseLayer.getComponent(cc.Layout).enabled=!1,this.shiningParticle||(this.shiningParticle=this.dict.shiningParticle),this.squaresLayer||(this.squaresLayer=this.dict.squaresLayer),this.physicsManager=cc.director.getPhysicsManager(),this.physicsManager.enabled=!0,this.itemData=u[this.levelId.toString()].items,this.levelData=u[this.levelId.toString()].map,this.levelData.forEach(function(t,o){for(var n=e.getBaseIndexByPIndex(o),i=0;i<t.length;i++){e.mapToGrid[n+i]=[];for(var r=0;r<t[i].length;r++){var a={};a.parentIndex=o,a.pos=cc.v2(i,r),a.storage=[],a.type=t[i][r],0==t[i][r]&&a.storage.push(t[i][r]),e.mapToGrid[n+i][r]=a,e.levelGrid.push(a)}}}),cc.log("data",this.levelGrid),cc.log("mapToGrid",this.mapToGrid),this.chooseLayer.children.forEach(function(t,o){e.posList[t.uuid]=t.position,e.setTouch(t),e.posList[t.uuid+"z"]=t.zIndex,e.finishUuidMap.set(t.uuid,!1),e.uuidToIndex[t.uuid]=o,t.isTouing=!1}),cc.log("[SquarePuzzleMgr3] onload")},e.prototype.onFinishCallBack=function(){},e.prototype.outputPosition=function(){var t=this;this.chooseLayer.children.forEach(function(e){t.choosePositionByIndex[e.name]=e.position});var e=window.brain_level&&window.brain_level._levelID;cc.log("%c \u672c\u5173\u5b9d\u8d35\u7684\u63d0\u793a","background: #35495E;padding: 1px;border-radius: 2px 0 0 2px;color: #fff;"),cc.log('%c "'+e+'":'+JSON.stringify(this.choosePositionByIndex)+",","background: #587A9E;padding: 1px;border-radius: 2px 0 0 2px;color: #fff;")},e.prototype.playBombSound=function(){this.bombSound&&cc.audioEngine.playEffect(this.bombSound,!1)},e.prototype.hideFinishSquare=function(){var t=this;this.squaresLayer.active=!1,this.chooseLayer.children.forEach(function(e){t.finishUuidMap.get(e.uuid)?e.active=!1:e.active=!0})},e.prototype.shake=function(t,e,o,n,i){var r=this;void 0===e&&(e=0),void 0===o&&(o=0),void 0===i&&(i=!0),this.shakeTween&&(this.shakeTween.stop(),this.shakeTween=null);var a=t.position;this.shakeTween=cc.tween(t).by(.05,{x:e,y:o}).by(.05,{x:-e,y:-o}).repeat(4).call(function(){t.position=a,n&&n()}).start();var c=this.chooseLayer.position;cc.tween(this.chooseLayer).by(.05,{x:e,y:o}).by(.05,{x:-e,y:-o}).repeat(4).call(function(){r.chooseLayer.position=c}).start()},e.prototype.setTouch=function(t){t.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){var e=this,o=t.target;this.canMove&&(this.isClicked=!0,o.scale=1/this.chooseLayer.scale,o.zIndex=99,o.isTouing&&this.squaresLayer.children.forEach(function(t,n){t.children.forEach(function(t){e.getDistanceFromNode(t,o)<40&&(cc.log("dele"),e.check(o,t,n,!0))})}))},e.prototype.onTouchMove=function(t){var e=t.target;if(this.canMove&&this.isClicked){var o=t.getDelta();e.x+=1*o.x/this.chooseLayer.scale,e.y+=1*o.y/this.chooseLayer.scale}},e.prototype.onTouchEnd=function(t){if(this.canMove){var e=t.target;this.isClicked=!1,e.zIndex=this.posList[e.uuid+"z"],this.gameBase.onClickSound();for(var o=!1,n=0;n<this.squaresLayer.children.length;n++)for(var i=this.squaresLayer.children[n],r=0;r<i.children.length;r++){var a=i.children[r];if(this.getDistanceFromNode(a,e)<40&&this.check(e,a,n)){this.moveToNodePosition(a,e),o=!0,e.isTouing=!0;break}}if(!o){this.finishUuidMap.set(e.uuid,!1);var c=this.kuaiArray.indexOf(e);-1!=c&&this.kuaiArray.splice(c,1),cc.tween(e).to(.2,{position:this.posList[e.uuid]}).call(function(){e.scale=1}).start()}}},e.prototype.check=function(t,e,o,n){void 0===n&&(n=!1);var i=this.getMapIndex(o,e.position);if(i.x<0||i.y<0)return!1;var r=this.itemData[this.uuidToIndex[t.uuid]],a=this.levelData[o];if(i.y+r.length>a.length)return!1;if(i.x+r[0].length>a[0].length)return!1;var c=!0,s=!1;return n?(s=!1,cc.log("\u672c\u6b21\u6267\u884c\u5220\u9664"),this.dealData(r,i,s,n,o),t.isTouing=!1):(cc.log("\u672c\u6b21\u6267\u884c\u5148\u68c0\u67e5"),(c=this.dealData(r,i,s,n,o))&&(cc.log("\u672c\u6b21\u6267\u884c\u518d\u66f4\u65b0"),s=!0,this.dealData(r,i,s,n,o))),c},e.prototype.dealData=function(t,e,o,n,i){void 0===o&&(o=!1),void 0===n&&(n=!1);for(var r=!0,a=this.getBaseIndexByPIndex(i),c=0;c<t.length;c++){if(!r)return;for(var s=0;s<t[c].length;s++){var l=this.mapToGrid[a+e.y+c][e.x+s],d=t[c][s];cc.log("\u5f53\u524d\u7684move",t,d);var p=l.storage.indexOf(6);p>-1&&(cc.log("\u5c06\u586b\u5145\u76846\u5220\u9664",l.storage),l.storage.splice(p,1));var h=l.storage.length;if(n){var u=l.storage.indexOf(d);u>-1&&l.storage.splice(u,1)}else{if(6==d&&!r)return!0;if(0==l.type&&6!=d)return cc.log("\u5f53\u524d\u56fe\u5757\u4e0d\u53ef\u586b\u5145,\u4e14\u79fb\u52a8\u5757\u4e0d\u662f6"),!1;if(0==h)if(6==l.type||6==d)r=!0,o&&(cc.log("\u5982\u679c\u662f\u7a7a\u5730 \u4ec0\u4e48\u90fd\u53ef\u4ee5\u586b\u5145"),l.storage.push(d));else{if(l.type!=d)return cc.log("standLength == 0"),!1;r=!0,o&&(cc.log("\u5982\u679c\u4e0d\u662f\u7a7a\u5730 \u5f62\u72b6\u76f8\u540c\u624d\u53ef\u4ee5\u586b\u5145"),l.storage.push(d))}else if(1==h)switch(l.storage[0]){case 1:if(2!=d&&6!=d)return cc.log("\u6709\u4e00\u4e2a\u586b\u5145: move\u4e0d\u662f2"),!1;r=!0,o&&l.storage.push(d);break;case 2:if(1!=d&&6!=d)return cc.log("\u6709\u4e00\u4e2a\u586b\u5145: move\u4e0d\u662f1"),!1;r=!0,o&&l.storage.push(d);break;case 3:if(4!=d&&6!=d)return cc.log("\u6709\u4e00\u4e2a\u586b\u5145: move\u4e0d\u662f4"),!1;r=!0,o&&l.storage.push(d);break;case 4:if(3!=d&&6!=d)return cc.log("\u6709\u4e00\u4e2a\u586b\u5145: move\u4e0d\u662f3"),!1;r=!0,o&&l.storage.push(d);break;case 5:if(6!=d)return cc.log("\u6709\u4e00\u4e2a\u586b\u5145: \u5757\u662f5 move\u4e0d\u662f6"),!1;break;case 6:r=!0,o&&(l.storage[0]=d)}else 2==h&&6!=d&&(cc.log("standLength == 2"),l.storage.indexOf(6)<0&&(r=!1));var f=l.storage.indexOf(6);f>-1&&(cc.log("\u5c06\u586b\u5145\u76846\u5220\u9664",l.storage),l.storage.splice(f,1))}}}if(o){cc.log("isInput mapToGrid ",this.mapToGrid);var g=[];this.mapToGrid.forEach(function(t,e){g[e]=[],t.forEach(function(t,o){g[e][o]=t.storage})}),cc.log("point ",g)}return n&&cc.log("isDelt mapToGrid ",this.mapToGrid),r},e.prototype.getMapIndex=function(t,e){var o=this.squaresLayer.children[t].children[0],n=cc.v2(o.x/83.75,o.y/83.75),i=cc.v2(e.x/83.75,e.y/83.75),r=Math.round(i.x-n.x),a=Math.round(n.y-i.y);return cc.log("[getMapIndex] \u5f53\u524d\u70b9\u7684\u5730\u56fe\u5750\u6807",r,a,n,i),cc.v2(r,a)},e.prototype.checkNodeIsRight=function(t){var e=!0,o=this.kuaiArray,n=null,i=[];1==t.type?(n=t.getComponent(cc.PolygonCollider),i=this.getWPosByPolygon(n)):t.getBoundingBoxToWorld();for(var r=0;r<o.length;r++){var a=o[r];if(1==a.type){var c=this.getWPosByPolygon(a.getComponent(cc.PolygonCollider));if(cc.Intersection.polygonPolygon(i,c)){e=!1;break}}else for(var s=a.getBoundingBoxToWorld(),l=0;l<i.length;l++){var d=i[l];if(s.contains(d)){e=!1;break}}}return e},e.prototype.kuaiSuperposition=function(t){var e=this.kuaiArray.indexOf(t);-1!=e&&this.kuaiArray.splice(e,1);var o=!0;if(this.kuaiArray.length>0){for(var n=[],i=0;i<this.kuaiArray.length;i++)for(var r=this.kuaiArray[i],a=0;a<r.children.length;a++){var c=r.children[a];n.push(c)}for(var s=0;s<n.length;s++)for(var l=n[s],d=0;d<t.children.length;d++){var p=t.children[d];this.getDistanceFromNode(l,p)<28&&(o=!1)}}return o},e.prototype.getDistanceFromNode=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position),n=e.parent.convertToWorldSpaceAR(e.position);return o.sub(n).mag()},e.prototype.moveToNodePosition=function(t,e){var o=this,n=t.parent.convertToWorldSpaceAR(t.position),i=e.parent.convertToNodeSpaceAR(n);cc.tween(e).to(.2,{position:i}).start(),this.kuaiArray.push(e),this.finishUuidMap.set(e.uuid,!0);for(var r=!0,a=0;a<this.mapToGrid.length&&r;a++)for(var c=0;c<this.mapToGrid[a].length;c++){var s=this.mapToGrid[a][c];if(1==s.storage.length){if(5==s.storage[0]||0==s.storage[0]||s.storage[0]==s.type)continue;r=!1}else if(2==s.storage.length){if(s.storage[0]+s.storage[1]==3||s.storage[0]+s.storage[1]==7)continue;r=!1}else r=!1}r&&(console.log("[SquarePuzzleMgr2] \u62fc\u63a5\u5b8c\u6210"),this.canMove=!1,this.scheduleOnce(function(){o.outputPosition()},.5),this.onFinishCallBack())},e.prototype.getWPosByPolygon=function(t){for(var e=t.points,o=[],n=0;n<e.length;n++){var i=cc.v2(e[n].x+t.offset.x,e[n].y+t.offset.y),r=t.node.convertToWorldSpaceAR(i);o.push(r)}return o},c([h({type:cc.AudioClip})],e.prototype,"jumpSound",void 0),c([h({type:cc.AudioClip,tooltip:"\u7206\u70b8\u97f3\u6548"})],e.prototype,"bombSound",void 0),c([h(cc.Node)],e.prototype,"squaresLayer",void 0),c([h(cc.Node)],e.prototype,"shiningParticle",void 0),c([h()],e.prototype,"levelId",void 0),c([p],e)}(l.default);r.default=f,cc._RF.pop()},{}],SquarePuzzleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"3e866GVFU1DfI+OlwEYCaOO","SquarePuzzleMgr");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("NodeAnimation"),l=i("zqddn_level_base"),d=i("zqddn_level_baseui"),p=cc._decorator,h=p.ccclass,u=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.jumpSound=null,e.bodys=[],e.levelId=-1,e.state=0,e.btnArray=[],e.isClicked=!1,e.posList={},e.kuaiArray=[],e.isUpdating=!1,e.isEnd=!1,e.canMove=!0,e.chooseLayer=null,e.squareLayer=null,e.moveNode=null,e.instantiateLayer=null,e.bodysLayer=null,e.shiningParticle=null,e}return a(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.chooseLayer=this.dict.chooseLayer,this.squareLayer=this.dict.squareLayer,this.moveNode=this.dict.moveNode,this.instantiateLayer=this.dict.instantiateLayer,this.bodysLayer=this.dict.bodysLayer,this.shiningParticle=this.dict.shiningParticle,cc.director.getPhysicsManager().enabled=!0,this.chooseLayer.children.forEach(function(t){e.posList[t.name]=t.position,e.setTouch(t),e.posList[t.name+"z"]=t.zIndex})},e.prototype.update=function(){var t=this;this.isUpdating&&(this.isEnd||4542==this.levelId&&this.bodysLayer.children.forEach(function(e){e.x>=t.moveNode.x&&(e.active=!0,t.setDynamic(e))}))},e.prototype.onFinishCallBack=function(){var t=this;if(-1!=this.levelId){if(this.isUpdating=!0,this.canMove=!1,4496==this.levelId){var e=this.bodys[0];e&&(this.setDynamic(e),e.linearVelocity=cc.v2(600,300),this.isEnd=!0,this.gameShiningParticle())}if(4542==this.levelId&&cc.tween(this.moveNode).by(2,{x:-805}).call(function(){t.isEnd=!0,t.gameShiningParticle()}).start(),4543==this.levelId){var o=this.moveNode.getComponent(s.default);o&&o.play(),cc.tween(this.moveNode).to(1,{y:431.717}).call(function(){t.isEnd=!0,t.gameShiningParticle()}).start()}}},e.prototype.setDynamic=function(t){if(t){var e=null;e=t instanceof cc.Node?t.getComponent(cc.RigidBody):t,this.scheduleOnce(function(){e.type=cc.RigidBodyType.Dynamic})}},e.prototype.setTouch=function(t){var e=this;t.on(cc.Node.EventType.TOUCH_START,function(){e.canMove&&(e.isClicked=!0,t.scale=1/e.chooseLayer.scale,t.zIndex=99)},this),t.on(cc.Node.EventType.TOUCH_MOVE,function(o){if(e.canMove&&e.isClicked){var n=o.touch.getDelta();t.x+=1*n.x/e.chooseLayer.scale,t.y+=1*n.y/e.chooseLayer.scale}},this),t.on(cc.Node.EventType.TOUCH_END,function(){e.touchEnd(t)},this),t.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.touchEnd(t)},this)},e.prototype.touchEnd=function(t){if(this.canMove)if(this.isClicked=!1,t.zIndex=this.posList[t.name+"z"],this.gameBase.onClickSound(),this.checkWin(t));else{var e=this.kuaiArray.indexOf(t);-1!=e&&this.kuaiArray.splice(e,1),cc.tween(t).to(.2,{position:this.posList[t.name]}).call(function(){t.scale=1}).start()}},e.prototype.gameShiningParticle=function(){var t=this;cc.tween(this.node).delay(.6).call(function(){t.shiningParticle.active=!0,cc.audioEngine.playEffect(t.gameBase.rightStarSound,!1)}).delay(.8).call(function(){t.gameBase.isGame=!0,t.gameBase.gameRight()}).start()},e.prototype.checkWin=function(t){var e=this,o=!1;return this.squareLayer.children.forEach(function(n){if(e.getDistanceFromNode(n,t)<40){var i=e.squareLayer.getComponent(cc.PhysicsPolygonCollider);i||(i=e.squareLayer.getComponent(cc.PolygonCollider));var r=e.getWPosByPolygon(i),a=!0;t.children.forEach(function(t){var e=t.parent.convertToWorldSpaceAR(t.position);cc.Intersection.pointInPolygon(e,r)||(a=!1)}),a&&e.kuaiSuperposition(t)&&(e.moveToNodePosition(n,t),o=!0)}}),o},e.prototype.kuaiSuperposition=function(t){var e=this.kuaiArray.indexOf(t);-1!=e&&this.kuaiArray.splice(e,1);var o=!0;if(this.kuaiArray.length>0){for(var n=[],i=0;i<this.kuaiArray.length;i++)for(var r=this.kuaiArray[i],a=0;a<r.children.length;a++){var c=r.children[a];n.push(c)}for(var s=0;s<n.length;s++)for(var l=n[s],d=0;d<t.children.length;d++){var p=t.children[d];this.getDistanceFromNode(l,p)<30&&(o=!1)}}return o},e.prototype.getDistanceFromNode=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position),n=e.parent.convertToWorldSpaceAR(e.position);return o.sub(n).mag()},e.prototype.moveToNodePosition=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position),n=e.parent.convertToNodeSpaceAR(o);cc.tween(e).to(.2,{position:n}).start(),console.log("[SquarePuzzleMgr] \u62fc\u63a5\u5b8c\u6210"),this.kuaiArray.push(e),this.kuaiArray.length==this.chooseLayer.children.length&&this.onFinishCallBack()},e.prototype.getWPosByPolygon=function(t){for(var e=t.points,o=[],n=0;n<e.length;n++){var i=cc.v2(e[n].x+t.offset.x,e[n].y+t.offset.y),r=t.node.convertToWorldSpaceAR(i);o.push(r)}return o},c([u(l.default)],e.prototype,"gameBase",void 0),c([u({type:cc.AudioClip})],e.prototype,"jumpSound",void 0),c([u([cc.RigidBody])],e.prototype,"bodys",void 0),c([u()],e.prototype,"levelId",void 0),c([h],e)}(d.default);r.default=f,cc._RF.pop()},{}],SquarePuzzleTips:[function(t,e,o){"use strict";cc._RF.push(e,"a2902a2uIBH+aBZN7P8vQwr","SquarePuzzleTips");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("zqddn_level_baseui"),l=cc._decorator,d=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelId=-1,e.chooseLayer=null,e.grayBg=null,e.data={"-4853":{0:{x:-407.16999999999996,y:519.384,z:0},1:{x:260.83000000000015,y:686.384,z:0},2:{x:-741.17,y:686.384,z:0},3:{x:-73.16999999999996,y:519.384,z:0},4:{x:-741.17,y:519.384,z:0},5:{x:93.83000000000004,y:686.384,z:0}},"-4854":{0:{x:-260.35,y:728.8720000000001,z:0},1:{x:-427.35,y:1062.872,z:0},2:{x:-260.35,y:895.8720000000001,z:0},3:{x:-427.35,y:728.8720000000001,z:0},4:{x:-427.35,y:1229.872,z:0},5:{x:-93.35000000000002,y:1062.872,z:0}},"-4855":{0:{x:-581.15,y:1104.296,z:0},1:{x:-80.14999999999998,y:603.296,z:0},2:{x:253.85000000000002,y:1104.296,z:0},3:{x:-581.15,y:937.296,z:0},4:{x:-247.14999999999998,y:603.296,z:0},5:{x:-247.14999999999998,y:770.296,z:0},6:{x:86.85000000000002,y:770.296,z:0}},"-4856":{0:{x:-367.23,y:1109.91,z:0},1:{x:-33.23000000000002,y:1109.91,z:0},2:{x:-534.23,y:1109.91,z:0},3:{x:-367.23,y:942.9100000000001,z:0},4:{x:-200.23000000000002,y:1276.91,z:0},5:{x:-534.23,y:1276.91,z:0}},"-4857":{0:{x:76.18400000000008,y:550.2560000000001,z:0},1:{x:-817.76,y:551.742,z:0},2:{x:-817.76,y:384.74199999999996,z:0},3:{x:76.18400000000008,y:884.2560000000001,z:0},4:{x:243.18400000000008,y:1051.256,z:0},5:{x:-817.76,y:885.742,z:0}},"-4858":{0:{x:-718.4224999999998,y:1580.825,z:0},1:{x:-92.17249999999979,y:954.5750000000003,z:0},2:{x:-300.9224999999998,y:1580.825,z:0},3:{x:-718.4224999999998,y:954.5750000000003,z:0},4:{x:325.3275000000001,y:745.8250000000003,z:0},5:{x:116.57750000000021,y:1580.825,z:0},6:{x:742.8275000000003,y:1580.825,z:0}},"-4859":{0:{x:82.39750000000004,y:598.3925000000002,z:0},1:{x:-752.6024999999998,y:598.3925000000002,z:0},2:{x:-335.10249999999985,y:598.3925000000002,z:0},3:{x:-126.35249999999996,y:1224.6425000000002,z:0},4:{x:-335.10249999999985,y:807.1425000000002,z:0}},"-4860":{0:{x:-752.6024999999998,y:677.0450000000001,z:0},1:{x:-543.8524999999998,y:677.0450000000001,z:0},2:{x:-335.10249999999985,y:677.0450000000001,z:0},3:{x:-126.35249999999996,y:677.0450000000001,z:0}},"-4861":{0:{x:-832.5124999999998,y:1016.7,z:0},1:{x:-206.26249999999982,y:599.2,z:0},2:{x:-832.5124999999998,y:1016.7,z:0},3:{x:-206.26249999999982,y:1016.7,z:0},4:{x:-832.5124999999998,y:599.2,z:0}}},e}return a(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.grayBg=this.dict.grayBg,this.grayBg&&(this.grayBg.active=!1),this.chooseLayer=this.dict.chooseLayer;var o=this.chooseLayer.getComponent(cc.Layout);o&&(o.enabled=!1),this.chooseLayer.children.forEach(function(t){t.scale=1/e.chooseLayer.scale});var n=this.data[this.levelId.toString()];if(cc.log(n,n.length),n){var i={},r=[];Object.keys(n).forEach(function(t){var e=n[t],o=e.x,a=e.y;r.push(cc.v2(o,a)),i[t]=cc.v2(o,a)}),cc.log("\u6bcf\u4e2a\u7684\u5730\u4f4d",i),r.length>0&&this.chooseLayer.children.forEach(function(t){t.position=i[t.name]})}else cc.error("[SquarePuzzleTips] \u6ca1\u6709\u6570\u636e")},c([p()],e.prototype,"levelId",void 0),c([d],e)}(s.default);r.default=h,cc._RF.pop()},{}],Stars:[function(t,e,o){"use strict";cc._RF.push(e,"70ea3YbDsJECIwwtARBmHxo","Stars");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.starNum=0,e.canMark=!0,e.isTouch=!1,e}return r(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.onTouchStart=function(t){this.isTouch=!0,this.canMark&&this.checkStar(this.node.convertToNodeSpaceAR(t.getLocation()))},e.prototype.onTouchMove=function(t){this.canMark&&this.checkStar(this.node.convertToNodeSpaceAR(t.getLocation()))},e.prototype.setCanMark=function(t){this.canMark=t},e.prototype.checkStar=function(t){var e=t.x+this.node.width/2;this.mask.node.width=e;var o=this.node.width/5;this.starNum=e/o,this.starNum=Math.ceil(this.starNum),this.starNum=this.starNum<1?1:this.starNum},e.prototype.onDestroy=function(){this.node.targetOff(this)},a([l(cc.Mask)],e.prototype,"mask",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],StorageSync:[function(t,e,o){"use strict";cc._RF.push(e,"e8a40W5KeJDTL/az7nUfbxg","StorageSync");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.getItem=function(t){if(window.tt)return window.wxapi.getStorageSync(t)},t.setItem=function(t,e){if(window.tt)return window.wxapi.setStorageSync(t,e)},t.removeItem=function(t){if(window.tt)return window.wxapi.removeStorageSync(t)},t}();n.default=i,cc._RF.pop()},{}],TaskManager:[function(t,e,o){"use strict";cc._RF.push(e,"5b3060X9qRJUaEHODJxek+/","TaskManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("ConfigConst"),a=n("UserConst"),c=n("ConfigManager"),s=n("UserManager"),l=n("ShuShuConst"),d=new(function(){function t(){this.taskConfig=[]}return t.prototype.init=function(){var t=this;c.Config.get(r.ConfigConst.Task).then(function(e){t.taskConfig=e}),cc.game.on("TaskFinish",this.taskFinish,this)},t.prototype.taskFinish=function(){var t=s.User.getTempData(a.TempData.CURRENT_MODE),e=s.User.get("passLevel"+t)||0;e+=1,s.User.set("passLevel"+t,e);for(var o=0;o<this.taskConfig.length;o++){var n=this.taskConfig[o],i=this.paramObj(n.finishCondition);if(t==i.mode&&e==i.passLevel){var r=this.paramObj(n.reward);console.log("\u6d4b\u8bd5\u89e3\u9501\u76ae\u80a4",r.skinID);var c=s.User.get(a.UserData.getLockSkinList),d=c[0],p=Number(r.skinID);d.includes(p)||c[0].push(p),s.User.set(a.UserData.getLockSkinList,c),cc.game.emit("gamelog_Thinking",l.ShuShuConst.Skin_unlock,{mode:0,id:p});break}}},t.prototype.paramObj=function(t){for(var e,o=/([^&=]+)=?([^&]*)/g,n=/\+/g,i=function(t){return decodeURIComponent(t.replace(n," "))},r={};e=o.exec(t);)r[i(e[1])]=i(e[2]);return r},t}());i.default=d,cc._RF.pop()},{}],TimeEnd:[function(t,e,o){"use strict";cc._RF.push(e,"819ffYOySFNPqyuE3V67piq","TimeEnd");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("UserConst"),h=i("BmsManager"),u=i("EventManager"),f=i("PlatformManager"),g=i("PopupManager"),m=i("UserManager"),y=i("OPPOAndroidAdUtils"),v=i("OPPOMiniADUtils"),_=i("VIVOADUtils"),C=i("XMADUtils"),w=i("ShuShuConst"),P=cc._decorator,b=P.ccclass,T=(P.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("yesBtn",this.yesBtn,this),this.addBtnOn("answerBtn",this.answerBtn,this),this.addBtnOn("answerBtn2",this.answerBtn,this),this.addBtnOn("jumpBtn",this.jumpBtn,this),this.addBtnOn("resortBtn",this.resortBtn,this),m.User.getTempData(p.TempData.CURRENT_LEVEL_ID);var e=m.User.getTempData(p.TempData.CURRENT_MODE);0==e?cc.game.emit("gamelog_Thinking",w.ShuShuConst.page,{id:"004"}):1==e?cc.game.emit("gamelog_Thinking",w.ShuShuConst.page,{id:"005"}):cc.game.emit("gamelog_Thinking",w.ShuShuConst.page,{id:"007"}),this.initView()},e.prototype.onEnable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?(C.XMAD.showLargeFeed(),C.XMAD.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.OPPO_ANDROID)?(y.OPPOAndroidAd.showLargeFeed(),y.OPPOAndroidAd.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.OPPO)?(v.OPPOMiniAD.showLargeFeed(),v.OPPOMiniAD.showInterstitialFeed_result()):f.Platform.is(d.EPlatform.VIVO)?_.VIVOAD.showCustomAd_1(function(){_.VIVOAD.showCustomAd_2()}):f.Platform.showBanner()},e.prototype.onDisable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?(C.XMAD.removeLargePicFeed(),f.Platform.hideBanner()):f.Platform.is(d.EPlatform.OPPO_ANDROID)?(y.OPPOAndroidAd.removeLargePicFeed(),f.Platform.hideBanner()):f.Platform.hideBanner(),f.Platform.hideNativeAds(),f.Platform.hideCustomAd1(),f.Platform.hideCustomAd2(),f.Platform.hideCustomAd_1(),f.Platform.hideCustomAd_2(),cc.game.emit("isTimeEnd")},e.prototype.noBtn=function(){var t=m.User.getTempData("levelTime"),e=((new Date).getTime()-t)/1e3;cc.game.emit("gamelog_Thinking",w.ShuShuConst.Level_End,{EndType:1,Duration:e,lv:m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(p.TempData.CURRENT_MODE)}),cc.game.emit("onRestartReset"),g.Popup.hide()},e.prototype.yesBtn=function(){this.dict.addTimeShareIcon.active?cc.game.emit("timeEnd_addTime"):f.Platform.showRewardAds(function(t){0==t&&(u.Event.emit(l.default.extendTime),m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),0==m.User.getTempData(p.TempData.CURRENT_MODE)?cc.game.emit("gamelog_Thinking",w.ShuShuConst.reward_btn,{id:"004",lv:m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(p.TempData.CURRENT_MODE)}):cc.game.emit("gamelog_Thinking",w.ShuShuConst.reward_btn,{id:"005",lv:m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(p.TempData.CURRENT_MODE)}),g.Popup.hide())})},e.prototype.jumpBtn=function(){f.Platform.showRewardAds(function(t){0==t&&(m.User.setTempData("isNeedInsert",!1),cc.game.emit("gamelog_Thinking",w.ShuShuConst.reward_btn,{id:"011",lv:m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(p.TempData.CURRENT_MODE)}),cc.game.emit("game_success2"),g.Popup.hide())})},e.prototype.answerBtn=function(){this.dict.tipShareIcon.active?cc.game.emit("timeEnd_answerBtn"):f.Platform.showRewardAds(function(t){0==t&&(u.Event.emit(l.default.restartAnswer),m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),0==m.User.getTempData(p.TempData.CURRENT_MODE)?cc.game.emit("gamelog_Thinking",w.ShuShuConst.reward_btn,{id:"014",lv:m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(p.TempData.CURRENT_MODE)}):cc.game.emit("gamelog_Thinking",w.ShuShuConst.reward_btn,{id:"015",lv:m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(p.TempData.CURRENT_MODE)}),g.Popup.hide())})},e.prototype.initView=function(){m.User.getTempData(p.TempData.CURRENT_LEVEL);var t=m.User.getTempData(p.TempData.CURRENT_MODE),e=(m.User.getTempData(p.TempData.CURRENT_LEVEL_ID),h.BMS.getKey("changeStage"));if(0==t)if(e){var o=m.User.get(p.TempData.isUnlockTip)||!1;this.dict.jumpBtn.active=!0,this.dict.answerBtn.active=!1,this.dict.answerBtn2.active=!o}else o=m.User.get(p.TempData.isUnlockTip)||!1,this.dict.answerBtn.active=!1;this.initShareView(),f.Platform.getConfig().hasShare&&(this.dict.resortBtn.active=!0)},e.prototype.resortBtn=function(){f.Platform.share()},e.prototype.initShareView=function(){m.User.get(p.UserData.getBoreByShareTimes);var t=m.User.get(p.UserData.getTipShareTimes),e=(m.User.get(p.UserData.getResetByShareTimes),m.User.get(p.UserData.getDelayedByShareTimes));f.Platform.getConfig().hasShare&&"all"==h.BMS.getKey("share")&&(t?(this.dict.tipVideoIcon.getComponent(cc.Sprite).enabled=!1,this.dict.tipShareIcon.active=!0):(this.dict.tipVideoIcon.getComponent(cc.Sprite).enabled=!0,this.dict.tipShareIcon.active=!1),e?(this.dict.addTimeVideoIcon.getComponent(cc.Sprite).enabled=!1,this.dict.addTimeShareIcon.active=!0):(this.dict.addTimeVideoIcon.getComponent(cc.Sprite).enabled=!0,this.dict.addTimeShareIcon.active=!1))},c([b],e)}(s.default));r.default=T,cc._RF.pop()},{}],TimeManage:[function(t,e,o){"use strict";cc._RF.push(e,"a7b862fi75MzJjLzmuokVkX","TimeManage");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("function"),a=n("LocalStorage"),c=function(){function t(){this._startClientTime="sdk_s_c_t",this._endClientTime="sdk_e_c_t",this._firstReportServerTime="sdk_s_b_t",this._firstReportClientTime="sdk_c_b_t",this.lockGetFirstServerTime="sdk_lock_get_fst"}return t.prototype.setStartClientTime=function(){a.default.setItem(this._startClientTime,r.getClientTime())},t.prototype.getStartClientTime=function(){var t=a.default.getItem(this._startClientTime);return t>0?t:0},t.prototype.removeStartClientTime=function(){a.default.removeItem(this._startClientTime)},t.prototype.setEndClientTime=function(){a.default.setItem(this._endClientTime,r.getClientTime())},t.prototype.getEndClientTime=function(){var t=a.default.getItem(this._endClientTime);return t>0?t:0},t.prototype.removeEndClientTime=function(){a.default.removeItem(this._endClientTime)},t.prototype.getOnlineTime=function(){var t=this.getStartClientTime(),e=this.getEndClientTime();return t>0&&e>0?e-t:0},t.prototype.setFirstReportServerTime=function(){var t=this;a.default.getItem(this.lockGetFirstServerTime)||(a.default.setItem(this.lockGetFirstServerTime,r.getClientTime()),r.getServerTime(function(e){try{a.default.setItem(t._firstReportServerTime,e.data.data.time),a.default.removeItem(t.lockGetFirstServerTime)}catch(i){}}))},t.prototype.getFirstReportServerTime=function(){return a.default.getItem(this._firstReportServerTime)},t.prototype.removeFirstReportServerTime=function(){return a.default.removeItem(this._firstReportServerTime)},t.prototype.setFirstReportClientTime=function(){a.default.setItem(this._firstReportClientTime,r.getClientTime())},t.prototype.getFirstReportClientTime=function(){return a.default.getItem(this._firstReportClientTime)},t.prototype.removeFirstReportClientTime=function(){return a.default.removeItem(this._firstReportClientTime)},t}();i.default=new c,cc._RF.pop()},{}],TipManager:[function(t,e,o){"use strict";cc._RF.push(e,"af1fbFfj9NOVZXQiN8aiZyJ","TipManager");var n=o,i=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},r=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Tip=void 0;var a=function(){function t(){}return t.prototype.show=function(t,e){return void 0===e&&(e=1),i(this,void 0,Promise,function(){var o,n;return r(this,function(i){switch(i.label){case 0:return[4,this.getText()];case 1:return(o=i.sent())?(n=o.node.parent,o.string=t,n.active=!0,n.stopAllActions(),n.setPosition(cc.v2(0,-60)),n.opacity=0,cc.tween(n).by(.6,{position:cc.v3(0,180,0),opacity:255}).delay(e).by(1,{position:cc.v3(0,240,0),opacity:-255}).call(function(){n.destroy()}).start(),[2]):[2]}})})},t.prototype.getText=function(){return new Promise(function(t){var e=cc.find("Canvas");cc.resources.load("prefab/common/Tip",function(o,n){if(o)return t(null);var i=cc.instantiate(n);i.active=!1,e.addChild(i),t(i.getChildByName("Label Text").getComponent(cc.Label))})})},t}();n.Tip=new a,cc._RF.pop()},{}],Tip:[function(t,e,o){"use strict";cc._RF.push(e,"29c90Bb3+lAM5xYQ661FwtQ","Tip");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},s=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},l=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var d=i("BaseUI"),p=i("ConfigConst"),h=i("PlatformConst"),u=i("UserConst"),f=i("ConfigManager"),g=i("PlatformManager"),m=i("PopupManager"),y=i("ResManager"),v=i("UserManager"),_=i("OPPOAndroidAdUtils"),C=i("OPPOMiniADUtils"),w=i("XMADUtils"),P=cc._decorator,b=P.ccclass,T=(P.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("defineBtn",this.clickDefine,this),this.initView()},e.prototype.onEnable=function(){g.Platform.is(h.EPlatform.XIAOMI_ANDROID)?w.XMAD.showBannerFeed():g.Platform.is(h.EPlatform.OPPO_ANDROID)?_.OPPOAndroidAd.showLargeFeed():g.Platform.is(h.EPlatform.OPPO)?C.OPPOMiniAD.showLargeFeed():g.Platform.showBanner()},e.prototype.onDisable=function(){g.Platform.is(h.EPlatform.OPPO_ANDROID)&&_.OPPOAndroidAd.removeLargePicFeed(),g.Platform.hideBanner(),g.Platform.hideNativeAds()},e.prototype.initView=function(){return s(this,void 0,void 0,function(){var t,e,o,n,i,r,a=this;return l(this,function(c){switch(c.label){case 0:return t=v.User.getTempData(u.TempData.CURRENT_LEVEL_ID),e="zqddn_zhb/prefab/tips/zqddn_zhb_tip"+t,this.dict.text.active=!1,this.dict.img.active=!1,[4,f.Config.get(p.ConfigConst.TIP)];case 1:for(o=c.sent(),n=0;n<o.length;n++)o[n].stageID==t&&(2==o[n].tipsType?(this.dict.img.active=!0,console.log("e111111----------\x3e",e),y.Res.load(e).then(function(t){var e=cc.instantiate(t);e.position=cc.v2(),a.dict.img.addChild(e)}).catch(function(){console.log("\u6ca1\u6709\u63d0\u793a"),cc.loader.loadRes("zqddn_zhb/prefab/tips/zqddn_zhb_tip-picture",function(e,o){if(e)return cc.error(e);if(o){var n=cc.instantiate(o);-1!=n.name.indexOf("zqddn_zhb_tip-picture")&&(n.assetName=t),a.dict.img.addChild(n),n.setPosition(0,0),n.scale=1}})})):(this.dict.text.active=!0,this.dict.text.getComponent(cc.Label).string=o[n].text));return i=v.User.getTempData(u.TempData.CURRENT_LEVEL),r=v.User.getTempData(u.TempData.CURRENT_MODE),cc.game.emit("gamelog","Level_Tips_"+r+"_"+i),[2]}})})},e.prototype.clickDefine=function(){m.Popup.hide()},c([b],e)}(d.default));r.default=T,cc._RF.pop()},{}],Tools:[function(t,e,o){"use strict";cc._RF.push(e,"0e3522OE29LSJwPKn6/U/O/","Tools");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.deepClone=function(t){var e=t instanceof Array?[]:{};for(var o in t)e[o]="object"==typeof t[o]?this.deepClone(t[o]):t[o];return e},t}();n.default=i,cc._RF.pop()},{}],TopBar:[function(t,e,o){"use strict";cc._RF.push(e,"d961c44celOt79AcjzUSiXb","TopBar");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("EventManager"),h=i("PlatformManager"),u=cc._decorator,f=u.ccclass,g=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key=null,e.power=null,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("backBtn",this.clickBack,this),this.addBtnOn("backBtn_tt",this.clickBack,this),this.addBtnOn("backBtn_ks",this.clickBack,this),this.initPlatformUI()},e.prototype.initPlatformUI=function(){this.dict.normal.active=!1,this.dict.tt.active=!1,this.dict.ks.active=!1,h.Platform.getConfig().fitUIType==d.FitUIType.TT?this.dict.tt.active=!0:h.Platform.getConfig().fitUIType==d.FitUIType.KS?this.dict.ks.active=!0:this.dict.normal.active=!0},e.prototype.clickBack=function(){p.Event.emit(l.default.CLICK_BACK)},c([f],e)}(s.default));r.default=g,cc._RF.pop()},{}],TouchSound:[function(t,e,o){"use strict";cc._RF.push(e,"b953e1zrb9M/qKTsTH7RYXQ","TouchSound");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickSound=null,e}return r(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchStart,this),this.node._touchListener&&this.node._touchListener.setSwallowTouches(!1)},e.prototype.onTouchStart=function(){cc.audioEngine.playEffect(this.clickSound,!1)},a([l({type:cc.AudioClip})],e.prototype,"clickSound",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],TransportWatermelon:[function(t,e,o){"use strict";cc._RF.push(e,"60244BSkLRNCbYVOJkNOrPo","TransportWatermelon");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("DrawPhysicsLineContact"),l=i("zqddn_level_base"),d=i("zqddn_level_baseui"),p=cc._decorator,h=p.ccclass,u=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.base=null,e.map=null,e.role=null,e.wheelLeft=null,e.wheelRight=null,e.tip=null,e.end=null,e.progress=null,e.icon=null,e.watermelon=null,e.spine=null,e.roleStartX=null,e.isWin=!1,e.isAnim=!1,e.isTouch=!1,e.maxSpeed=-2e3,e.speed=0,e.distance=null,e.isFreeFall=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.base=this.node.getComponent(l.default),this.map=this.dict.map,this.role=this.dict.role,this.wheelLeft=this.dict.wheelLeft,this.wheelRight=this.dict.wheelRight,this.tip=this.dict.tip,this.end=this.dict.end,this.progress=this.dict.progress,this.icon=this.dict.icon,this.watermelon=this.dict.watermelon,this.spine=this.dict.spine.getComponent(sp.Skeleton),this.init()},e.prototype.update=function(t){var e=this;if(!this.isWin){if(this.role.x>=0&&this.role.x<=this.end.x-300){var o=this.role.x-0;this.map.x=-o;for(var n=0;n<this.map.childrenCount;n++){var i=this.map.children[n];i.getComponent(cc.RigidBody)&&i.getComponent(cc.RigidBody).syncPosition(!0)}}var r=this.progress.parent.width*(this.role.x-this.roleStartX)/this.distance;r>=this.progress.parent.width&&(r=this.progress.parent.width,this.watermelon.x>=this.end.x-50&&this.scheduleOnce(function(){e.suc()},1)),this.progress.width=r,this.icon.width=this.progress.width,this.icon.children[0].getComponent(cc.Widget).updateAlignment(),this.isFreeFall||this.isTouch&&(this.speed-=Math.abs(this.maxSpeed)/3*t,this.speed<=this.maxSpeed&&(this.speed=this.maxSpeed),this.wheelLeft.getComponent(cc.WheelJoint).motorSpeed=this.speed,this.wheelRight.getComponent(cc.WheelJoint).motorSpeed=this.speed,this.wheelLeft.getComponent(cc.WheelJoint).apply(),this.wheelRight.getComponent(cc.WheelJoint).apply(),console.log("\u52a0\u901f"))}},e.prototype.init=function(){cc.director.getPhysicsManager().enabled=!0,this.roleStartX=this.role.x,this.distance=this.end.x-this.roleStartX,this.wheelLeft.getComponent(cc.WheelJoint).frequency=15,this.wheelLeft.getComponent(cc.WheelJoint).apply(),this.wheelRight.getComponent(cc.WheelJoint).frequency=15,this.wheelRight.getComponent(cc.WheelJoint).apply();var t=cc.Node.EventType;this.node.on(t.TOUCH_START,this.touchStart,this),this.node.on(t.TOUCH_END,this.touchEnd,this),this.node.on(t.TOUCH_CANCEL,this.touchEnd,this),this.dict.restart.on(t.TOUCH_START,this.touchStart_restart,this),this.watermelon.getComponent(s.default).onBeginContact=this.onBeginContact.bind(this),this.role.getComponent(s.default).onBeginContact=this.onBeginContact_role.bind(this),cc.tween(this.tip).to(.3,{scale:1.1}).to(.3,{scale:1}).to(.3,{scale:1.1}).to(.3,{scale:1}).delay(2).union().repeatForever().start()},e.prototype.onBeginContact=function(t,e,o){var n=this;2==o.tag&&(o.node.isFall||(o.node.isFall=!0,this.playClickAudio(),this.scheduleOnce(function(){n.spine.timeScale=1,n.watermelon.angle=0,n.watermelon.getComponent(cc.RigidBody).fixedRotation=!0,n.watermelon.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,n.fail()})))},e.prototype.onBeginContact_role=function(t,e,o){2==o.tag&&1==e.tag&&this.fail()},e.prototype.touchStart_restart=function(){this.playClickAudio(),cc.game.emit("onRestartBtn")},e.prototype.touchStart=function(t){var e=this;if(!(t.getTouches().length>1||this.isWin||this.isAnim)){t.target,this.playClickAudio(),this.isTouch=!0,this.isFreeFall=!1,cc.tween(this.tip).to(.3,{opacity:0}).start();var o=this.role.x;this.scheduleOnce(function(){var t=e.role.x;Math.abs(t-o)<=30&&(e.dict.restart.active=!0,cc.tween(e.dict.restart).to(.3,{scale:1.1}).to(.3,{scale:.9}).to(.3,{scale:1.1}).to(.3,{scale:.9}).union().repeatForever().start())},3)}},e.prototype.touchEnd=function(t){t.getTouches().length>1||this.isWin||this.isAnim||(t.target,this.isTouch=!1,this.wheelLeft.getComponent(cc.WheelJoint).motorSpeed=0,this.wheelRight.getComponent(cc.WheelJoint).motorSpeed=0,this.unscheduleAllCallbacks())},e.prototype.checkRes=function(){this.isWin},e.prototype.getInstance=function(t,e){return t.sub(e).mag()},e.prototype.fail=function(){this.base.showWrong(null,2,!0)},e.prototype.playClickAudio=function(){this.base.playClickSound()},e.prototype.suc=function(){this.isWin=!0,this.dict.win.active=!0,this.unscheduleAllCallbacks(),this.base.gameRight(1),this.base.playRightStarSound()},c([h],e)}(d.default));r.default=u,cc._RF.pop()},{}],Ugc:[function(t,e,o){"use strict";cc._RF.push(e,"634bccGmfBCkaZrXQa1rOCl","Ugc");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("AudioConst"),d=i("SceneConst"),p=i("AudioManager"),h=i("SceneManager"),u=cc._decorator,f=u.ccclass,g=u.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelPrefab=null,e._data=null,e.level=null,e.isBack=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.level=this.dict.level,this.initView(),p.Audio.playMusic(l.AudioConst.BGM_GAME)},e.prototype.initView=function(){cc.game.emit("gamelog","page016"),this.node.addChild(cc.instantiate(this.levelPrefab))},e.prototype.clickBack=function(){this.isBack||(this.isBack=!0,h.Scene.loadScene(d.SceneConst.MAIN))},c([g(cc.Prefab)],e.prototype,"levelPrefab",void 0),c([f],e)}(s.default);r.default=m,cc._RF.pop()},{}],UnlockAllMode:[function(t,e,o){"use strict";cc._RF.push(e,"76aacn2K35FO6UrYuKVWKRn","UnlockAllMode");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("UserConst"),h=i("EventManager"),u=i("LanguageManager"),f=i("PlatformManager"),g=i("PopupManager"),m=i("TipManager"),y=i("UserManager"),v=i("OPPOAndroidAdUtils"),_=i("OPPOMiniADUtils"),C=i("XMADUtils"),w=cc._decorator,P=w.ccclass,b=(w.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnterUgc=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?C.XMAD.showBannerFeed():f.Platform.is(d.EPlatform.OPPO_ANDROID)?v.OPPOAndroidAd.showLargeFeed():f.Platform.is(d.EPlatform.OPPO)?_.OPPOMiniAD.showLargeFeed():f.Platform.showBanner()},e.prototype.onDisable=function(){f.Platform.is(d.EPlatform.OPPO_ANDROID)&&v.OPPOAndroidAd.removeLargePicFeed(),f.Platform.hideBanner(),f.Platform.hideNativeAds()},e.prototype.initView=function(){var t=y.User.get(p.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES)||0;y.User.set(p.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES,t),this.dict.amount.getComponent(cc.Label).string=u.default.formatStr("\u9886\u53d6(%d/2)",t)},e.prototype.clickGiveUp=function(){g.Popup.hide()},e.prototype.clickVideo=function(){var t=this;console.log("\u70b9\u51fb\u770b\u89c6\u9891\u89e3\u9501"),f.Platform.showRewardAds(function(e){if(0==e){cc.game.emit("gamelog","rewarde_btn013");var o=y.User.get(p.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES)+1;if(y.User.set(p.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES,o),t.initView(),1==o)m.Tip.show(u.default.formatStr("\u8fd8\u9700\u518d\u770b1\u6b21\u6fc0\u52b1\u89c6\u9891\u89e3\u9501\u5168\u4e3b\u9898"));else{m.Tip.show(u.default.formatStr("\u5df2\u89e3\u9501\u6240\u6709\u4e3b\u9898"));var n=y.User.get(p.UserData.LEVEL_LIST),i=[];for(var r in n)i.push(Number(r));y.User.set(p.UserData.UNLOCK_MODE_LIST,i),h.Event.emit(l.default.updateUnlockAllMode,!0),g.Popup.hide()}}})},c([P],e)}(s.default));r.default=b,cc._RF.pop()},{}],UnlockNewMode:[function(t,e,o){"use strict";cc._RF.push(e,"4ebeebNimtDN5EWQONLhanr","UnlockNewMode");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("EventConst"),d=i("PlatformConst"),p=i("UserConst"),h=i("EventManager"),u=i("LanguageManager"),f=i("PlatformManager"),g=i("PopupManager"),m=i("UserManager"),y=i("ConfigUtils"),v=i("OPPOAndroidAdUtils"),_=i("OPPOMiniADUtils"),C=i("Utils"),w=i("XMADUtils"),P=cc._decorator,b=P.ccclass,T=(P.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnterUgc=!1,e.isLoadingScene=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){f.Platform.is(d.EPlatform.XIAOMI_ANDROID)?w.XMAD.showBannerFeed():f.Platform.is(d.EPlatform.OPPO_ANDROID)?v.OPPOAndroidAd.showLargeFeed():f.Platform.is(d.EPlatform.OPPO)?_.OPPOMiniAD.showLargeFeed():f.Platform.showBanner()},e.prototype.onDisable=function(){f.Platform.is(d.EPlatform.OPPO_ANDROID)&&v.OPPOAndroidAd.removeLargePicFeed(),f.Platform.hideBanner(),f.Platform.hideNativeAds()},e.prototype.initView=function(){var t=this,e=C.Utils.randomNum(80,92);this.dict.rate.getComponent(cc.Label).string=u.default.formatStr("\u8d85\u8fc7%d%\u7684\u73a9\u5bb6\u89e3\u9501\u8be5\u4e3b\u9898",e);var o=m.User.getTempData(p.TempData.CURRENT_MODE_UNLOCK_ID);cc.resources.load("texture/newBanner/"+o,function(e,o){if(e)return console.log(e);t.dict.img.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)})},e.prototype.clickGiveUp=function(){g.Popup.hide()},e.prototype.clickVideo=function(){var t=this,e=m.User.getTempData(p.TempData.CURRENT_MODE_UNLOCK_ID);console.log("\u70b9\u51fb\u770b\u89c6\u9891\u89e3\u9501"),f.Platform.showRewardAds(function(o){if(0==o){if(t.isEnterUgc)return;cc.game.emit("gamelog","rewarde_btn011"),t.isEnterUgc=!0;var n=m.User.get(p.UserData.UNLOCK_MODE_LIST)||[];n.push(e),m.User.set(p.UserData.UNLOCK_MODE_LIST,n),t.sucEnterByMode(e),g.Popup.hideAll()}})},e.prototype.sucEnterByMode=function(t){if(!this.isLoadingScene){this.isLoadingScene=!0,m.User.setTempData(p.TempData.CURRENT_MODE,t);var e=m.User.get(p.UserData.LEVEL_LIST);y.ConfigUtils.setNextModeID();var o=1;y.ConfigUtils.getDataByID(t,function(n){o=n.amount,e[t]>o?m.User.setTempData(p.TempData.CURRENT_LEVEL,1):m.User.setTempData(p.TempData.CURRENT_LEVEL,e[t]),h.Event.emit(l.default.enterNewMode)})}},c([b],e)}(s.default));r.default=T,cc._RF.pop()},{}],UnlockUgc:[function(t,e,o){"use strict";cc._RF.push(e,"b269aaeNGdJMbqtA+vZfflg","UnlockUgc");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("PlatformConst"),d=i("SceneConst"),p=i("UserConst"),h=i("PlatformManager"),u=i("PopupManager"),f=i("SceneManager"),g=i("UserManager"),m=i("OPPOAndroidAdUtils"),y=i("OPPOMiniADUtils"),v=i("XMADUtils"),_=cc._decorator,C=_.ccclass,w=(_.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnterUgc=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){h.Platform.is(l.EPlatform.XIAOMI_ANDROID)?v.XMAD.showBannerFeed():h.Platform.is(l.EPlatform.OPPO_ANDROID)?m.OPPOAndroidAd.showLargeFeed():h.Platform.is(l.EPlatform.OPPO)?y.OPPOMiniAD.showLargeFeed():h.Platform.showBanner()},e.prototype.onDisable=function(){h.Platform.is(l.EPlatform.OPPO_ANDROID)&&m.OPPOAndroidAd.removeLargePicFeed(),h.Platform.hideBanner(),h.Platform.hideNativeAds()},e.prototype.initView=function(){cc.game.emit("gamelog","page014")},e.prototype.clickGiveUp=function(){u.Popup.hide()},e.prototype.clickVideo=function(){var t=this;cc.game.emit("gamelog","btn030"),h.Platform.showRewardAds(function(e){if(0==e){if(t.isEnterUgc)return;cc.game.emit("gamelog","rewarde_btn008"),t.isEnterUgc=!0,g.User.set(p.UserData.isUnlockUgc,1),f.Scene.loadScene(d.SceneConst.UGC)}})},c([C],e)}(s.default));r.default=w,cc._RF.pop()},{}],UserConst:[function(t,e,o){"use strict";cc._RF.push(e,"307dbBRzABCz7bNYWt0S5Su","UserConst");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.UserData=n.TempData=void 0,function(t){t.CURRENT_MODE="current_mode",t.CURRENT_MODE_TOP_LEVEL="current_mode_top_level",t.CURRENT_LEVEL="current_level",t.CURRENT_LEVEL_ID="current_level_id",t.CURRENT_ALL_MODE="current_all_mode",t.NEXT_MODE_ID="next_mode_id",t.POWER_TYPE="power_type",t.IS_INFINITE_POWER="is_infinite_power",t.IS_NO_AD="is_no_ad",t.IS_WIN="is_win",t.CURRENT_MODE_UNLOCK_ID="current_mode_unlock_id",t.CURRENT_PLAY_TIMES="current_play_times",t.current_key_type="current_key_type",t.cryHelpList="cryHelpList",t.screenshotStr="screenshotStr",t.isUnlockTip="isUnlockTip",t.isFirst="isFirst",t.isFirstBack="isFirstBack"}(n.TempData||(n.TempData={})),function(t){t.POWER="power",t.KEY="key",t.RECOVERY_TIME="recoveryTime",t.LEVEL_LIST="levelList",t.INF_POWER_VIDEO_TIMES="infPowerVideoTimes",t.UNLOCK_ALL_MODE_VIDEO_TIMES="unlockAllModeVideoTimes",t.INF_POWER_START_TIME="infPowerStartTime",t.FIRST_DAY_DATE="firstDayDate",t.isUnlockUgc="isUnlockUgc",t.UNLOCK_MODE_LIST="unlock_mode_list",t.IS_COMMENT="is_comment",t.LEVEL_COMMENT_MARK="levelCommentMark",t.hasUseKey="hasUseKey",t.cryHelpTimes="cryHelpTimes",t.offlineTime="offlineTime",t.isFollow="isFollow",t.IS_COMPATIBLE_233="isCompatible_233_tt_tt",t.ALREADY_PLAY="alreadyPlay",t.ALREADY_UNLOCK="alreadyUnlock",t.loginDaysTimes="loginDaysTimes",t.mode0LevelList_stage1ID="mode0LevelList_stage1ID",t.mode0LevelList_stage2ID="mode0LevelList_stage2ID",t.mode1LevelList_stage1ID="mode1LevelList_stage1ID",t.mode1LevelList_stage2ID="mode1LevelList_stage2ID",t.mode2LevelList_stage1ID="mode2LevelList_stage1ID",t.mode2LevelList_stage2ID="mode2LevelList_stage2ID",t.mode3LevelList_stage1ID="mode3LevelList_stage1ID",t.mode3LevelList_stage2ID="mode3LevelList_stage2ID",t.skinList="skinList",t.useSkinIDList="useSkinIDList",t.getLockSkinList="getLockSkinList",t.signInDays="signInDays",t.todaySignIn="todaySignIn",t.todayFirstPass="todayFirstPass",t.EnterSidebar="EnterSidebar",t.isFirstShared="isFirstShared",t.getBoreByShareTimes="getBoreByShareTimes",t.getTipShareTimes="getTipShareTimes",t.getResetByShareTimes="getResetByShareTimes",t.getDelayedByShareTimes="getDelayedByShareTimes"}(n.UserData||(n.UserData={})),cc._RF.pop()},{}],UserManager:[function(t,e,o){"use strict";cc._RF.push(e,"ccac2FwSaVHbrrHai/vHFRO","UserManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.User=void 0;var r=n("UserConst"),a=function(){function t(){this.prefix="walkFast",this.defaultData={getBoreByShareTimes:1,getTipShareTimes:1,getResetByShareTimes:1,getDelayedByShareTimes:1},this.data={},this.tempData={};var t=this.get("offlineTime")||(new Date).getTime();this.set("offlineTime",t),this.hammer_state=0;var e=(new Date).getDate(),o=this.get(r.UserData.loginDaysTimes)||1;this.set(r.UserData.loginDaysTimes,o),new Date(this.data.offlineTime).getDate()!=e&&(console.log("\u65b0\u7684\u4e00\u5929"),this.set("cryHelpTimes",0),this.set("todaySignIn",0),this.set("offlineTime",(new Date).getTime()),this.set("todayOpenSignIn",!1),this.set(r.UserData.loginDaysTimes,o+1),this.set(r.UserData.todayFirstPass,0),this.set(r.UserData.isFirstShared,!1),this.set(r.UserData.getBoreByShareTimes,1),this.set(r.UserData.getTipShareTimes,1),this.set(r.UserData.getResetByShareTimes,1),this.set(r.UserData.getDelayedByShareTimes,1))}return t.prototype.get=function(t){return this.getData(t)},t.prototype.set=function(t,e){this.data[t]=e,this.save()},t.prototype.get_hammer=function(){return this.hammer_state},t.prototype.set_hammer=function(t){this.hammer_state=t},t.prototype.getTempData=function(t){return this.tempData[t]},t.prototype.setTempData=function(t,e){this.tempData[t]=e},t.prototype.save=function(){for(var t in this.data)cc.sys.localStorage.setItem(this.prefix+"_"+t,JSON.stringify(this.data[t]))},t.prototype.getData=function(t){var e=this.data[t];if(void 0!==e)return e;try{var o=JSON.parse(cc.sys.localStorage.getItem(this.prefix+"_"+t))||this.defaultData[t]||null;return this.data[t]=o,o}catch(r){return this.defaultData[t]||null}},t}();i.User=new a,cc._RF.pop()},{}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"8a199m3gVFNkqGoD+x8CL9a","Utils");var n=o,i=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},r=function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=void 0;var a=function(){function t(){}return t.randomNum=function(t,e){var o=e-t,n=Math.random();return t+Math.round(n*o)},t.secondFormat=function(t,e,o){void 0===e&&(e=2),void 0===o&&(o=!1);var n=t/3600,i=(t%=3600)/60,r=t%=60,a=(n=Math.floor(n))>=10?n+"":"0"+n,c=(i=Math.floor(i))>=10?i+"":"0"+i,s=(r=Math.floor(r))>=10?r+"":"0"+r;o&&(r=100*r/60,s=(r=Math.floor(r))>=10?r+"":"0"+r);var l=a+":"+c+":"+s;switch(e){case 2:l=c+":"+s}return l},t.randomByWeight=function(t){for(var e=[],o=[],n=0;n<t.length;n++)e.push(t[n][0]),o.push(t[n][1]);var i=0,r=0,a=Math.random();for(n=o.length-1;n>=0;n--)i+=o[n];for(a*=i,n=o.length-1;n>=0;n--)if(a<=(r+=o[n]))return e[n];return null},t.nodeShot=function(t){return i(this,void 0,Promise,function(){var e,o;return r(this,function(){return(e=new cc.Node).parent=cc.director.getScene().children[0],this.camera=e.addComponent(cc.Camera),this.camera.enabled=!0,this.camera.cullingMask=4294967295,this.initNode(t),this.camera.render(t),this.camera.enabled=!1,o=new cc.SpriteFrame(this.texture),this.camera.node.destroy(),[2,o]})})},t.initNode=function(t){var e=new cc.RenderTexture,o=cc.game._renderContext;e.initWithSize(t.width,t.height,o.STENCIL_INDEX8),this.camera.targetTexture=e,this.texture=e},t}();n.Utils=a,cc._RF.pop()},{}],VIVOADUtils:[function(t,e,o){"use strict";cc._RF.push(e,"1fbf3r58jJOyZSzikUh0GPD","VIVOADUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.VIVOAD=void 0;var r=n("BmsManager"),a=n("PlatformManager"),c=function(){function t(){}return t.prototype.showCustomAd_1=function(t){var e=r.BMS.getKey("openads");console.log("openads",e),e&&a.Platform.showCustomAd_1(a.Platform.getConfig().customAd_topImg_bottomText,t)},t.prototype.showCustomAd_2=function(){var t=r.BMS.getKey("openads");console.log("openads",t),t&&a.Platform.showCustomAd_2(a.Platform.getConfig().customAd_leftImg_rightText)},t.prototype.showInsert=function(){var t=r.BMS.getKey("openvideo");console.log("openvideo",t),t&&a.Platform.showInsert()},t}();i.VIVOAD=new c,cc._RF.pop()},{}],Win:[function(t,e,o){"use strict";cc._RF.push(e,"98546R4ITpEbKkQSJwqSbee","Win");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("ConfigConst"),d=i("EventConst"),p=i("PlatformConst"),h=i("PopupConst"),u=i("SceneConst"),f=i("UserConst"),g=i("BmsManager"),m=i("ConfigManager"),y=i("EventManager"),v=i("PlatformManager"),_=i("PopupManager"),C=i("SceneManager"),w=i("TipManager"),P=i("UserManager"),b=(i("ChallengeHttp"),i("AudioManager")),T=i("AudioConst"),S=(i("OPPOAndroidAdUtils"),i("OPPOMiniADUtils"),i("VIVOADUtils"),i("XMADUtils"),cc._decorator),A=S.ccclass,N=S.property,B=(S.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e.cursor=null,e.numbg=null,e.allnumbg=[],e.numttf=[],e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.text=this.dict.text.getComponent(cc.Label),this.addBtnOn("nextBtn",this.clickNext,this),this.addBtnOn("jinbiBtn",this.clickAddCoin,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.addBtnOn("shareBtn",this.clickShare,this),this.addBtnOn("homeBtn",this.clickHome,this),this.addBtnOn("restartBtn",this.clickRestart,this),this.addBtnOn("gouRoot",this.clickGou,this),this.initView()},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){this.unscheduleAllCallbacks(),y.Event.emit(d.default.destroyInsert)},e.prototype.shareSuc=function(){},e.prototype.initView=function(){var t=this,e=P.User.getTempData(f.TempData.CURRENT_LEVEL),o=P.User.getTempData(f.TempData.CURRENT_MODE),n=P.User.getTempData(f.TempData.CURRENT_LEVEL_ID);m.Config.get(l.ConfigConst.RESULT).then(function(e){for(var o=0;o<e.length;o++)e[o].stageID==n&&(t.text.string=e[o].resultText)});var i=g.BMS.getKey("freekeylv"),r=g.BMS.getKey("freekeychance");if(console.log("\u8bbe\u7f6e\u7b2c\u51e0\u5173:",i,"\u5f53\u524d\u7b2c\u51e0\u5173:",e),0==o&&i<=e){this.dict.tip.active=!0;var a=this.getIsMistakeByChance(r);this.dict.gou.active=!1,a&&(this.dict.gou.active=!0)}else this.dict.tip.active=!1;0==i&&(this.dict.tip.active=!1);var c=v.Platform.getConfig();cc.game.emit("gamelog","page007"),cc.game.emit("gamelog","Level_Win_"+o+"_"+e),this.dict.screenshot.getComponent(cc.Sprite).spriteFrame=window.screenShotPicture,v.Platform.is(p.EPlatform.XIAOMI_ANDROID)||v.Platform.is(p.EPlatform.WX)||v.Platform.is(p.EPlatform.VIVO)?this.dict.content.getComponent(cc.Widget).top=-300:this.dict.content.getComponent(cc.Widget).top=0,c.hasShare&&(this.dict.shareBtn.children[1].getComponent(cc.Label).string="\u70ab\u8000\u4e00\u4e0b"),this.scheduleOnce(function(){t.judgeNewMode()},.3),this.dict.videoBtn.active=!1,console.log("\u6d4b\u8bd5\u76ae\u80a4");var s=P.User.getTempData("totalLevelTime"),d=((new Date).getTime()-s)/1e3,h=P.User.get(f.UserData.useSkinIDList);this.dict.time.getComponent(cc.Label).string="\u7d2f\u8ba1\u7528\u65f6"+this.secondFormat(d);var u="pifu"+(h[0]+1);u="pifu2"==u?"pifu8":u,this.dict.spine.getComponent(sp.Skeleton).setSkin(u),this.dict.spine.getComponent(sp.Skeleton).defaultSkin=u;var y=new Date;this.showTime(y.getMonth()+1),this.showTime(y.getDate()),c.rank,this.scheduleOnce(function(){this.dict.EffWin.getComponent(cc.ParticleSystem).resetSystem()},1.8),this.scheduleOnce(function(){this.dict.EffWin.getComponent(cc.ParticleSystem).resetSystem()},3.6),this.clickAddCoin_s(),this.speed=5,this.schedule(this.callbackCoin,.01)},e.prototype.showTime=function(t){return t>10?t:"0"+t},e.prototype.secondFormat=function(t,e,o){void 0===e&&(e=2),void 0===o&&(o=!1);var n=t/3600,i=(t%=3600)/60,r=t%=60,a=(n=Math.floor(n))>=10?n+"":"0"+n,c=(i=Math.floor(i))>=10?i+"":i,s=(r=Math.floor(r))>=10?r+"":r;o&&(r=100*r/60,s=(r=Math.floor(r))>=10?r+"":"0"+r);var l=a+":"+c+":"+s;switch(e){case 2:c<10&&(c="0"+c),s<10&&(s="0"+s),l=c+":"+s}return l},e.prototype.judgeNewMode=function(){var t=P.User.getTempData(f.TempData.CURRENT_LEVEL),e=P.User.getTempData(f.TempData.CURRENT_MODE),o=g.BMS.getKey("UnlockThemeList"),n=g.BMS.getKey("UnlockThemeMainLv"),i=g.BMS.getKey("UnlockThemeSubLv");if(o.length){for(var r=P.User.get(f.UserData.UNLOCK_MODE_LIST)||[],a=-1,c=0;c<o.length;c++){var s=o[c];if(-1==r.indexOf(s)){a=s;break}}console.log("\u51c6\u5907\u89e3\u9501\u7684\u65b0\u6a21\u5f0fid",a),-1!=a&&(0==e?(console.log("UnlockThemeMainLv",n),console.log("currentLevel",t),(t==n[0]||t>n[0]&&(t-n[0])%n[1]==0)&&(P.User.setTempData(f.TempData.CURRENT_MODE_UNLOCK_ID,a),_.Popup.show(h.PopupConst.UnlockNewMode))):(console.log("UnlockThemeSubLv",i),console.log("currentLevel",t),(t==i[0]||t>i[0]&&(t-i[0])%i[1]==0)&&(P.User.setTempData(f.TempData.CURRENT_MODE_UNLOCK_ID,a),_.Popup.show(h.PopupConst.UnlockNewMode))))}},e.prototype.clickNext=function(){var t=this;this.dict.tip.active&&this.dict.gou.active?v.Platform.showRewardAds(function(e){if(0==e){var o=P.User.get(f.UserData.KEY);P.User.set(f.UserData.KEY,o+1),y.Event.emit(d.default.KEY_EFFECT),t.nextCb()}}):this.nextCb()},e.prototype.callbackCoin=function(){this.cursor.angle>=90&&(this.speed=-3),this.cursor.angle<=-90&&(this.speed=3),this.cursor.angle=this.cursor.angle+this.speed,this.cursor.angle>30&&this.cursor.angle<90?(this.numbg.spriteFrame=this.allnumbg[0],this.clickAddCoin_mj(0)):this.cursor.angle>-15&&this.cursor.angle<30?(this.numbg.spriteFrame=this.allnumbg[1],this.clickAddCoin_mj(1)):this.cursor.angle>-60&&this.cursor.angle<-15?(this.numbg.spriteFrame=this.allnumbg[2],this.clickAddCoin_mj(2)):this.cursor.angle>-90&&this.cursor.angle<-60&&(this.numbg.spriteFrame=this.allnumbg[3],this.clickAddCoin_mj(3))},e.prototype.clickAddCoin_mj=function(t){for(var e=0;e<this.numttf.length;e++)this.numttf[e].scale=t==e?1.5:1.2},e.prototype.clickAddCoin_m=function(){this.addConinnum=0,this.cursor.angle>30&&this.cursor.angle<90?this.addConinnum=20:this.cursor.angle>-15&&this.cursor.angle<30?this.addConinnum=30:this.cursor.angle>-60&&this.cursor.angle<-15?this.addConinnum=40:this.cursor.angle>-90&&this.cursor.angle<-60&&(this.addConinnum=50)},e.prototype.clickAddCoin_s=function(){P.User.set("coin",P.User.get("coin")+10),y.Event.emit(d.default.COIN_EFFECT_S),b.Audio.playEffect(T.AudioConst.GAME_GOLD)},e.prototype.clickAddCoin=function(){var t=this;t.unschedule(t.callbackCoin),v.Platform.showRewardAds(function(e){0==e&&(t.clickAddCoin_m(),P.User.set("coin",P.User.get("coin")+t.addConinnum),y.Event.emit(d.default.COIN_EFFECT_M),b.Audio.playEffect(T.AudioConst.GAME_GOLD),t.scheduleOnce(function(){y.Event.emit(d.default.CLICK_NEXT),_.Popup.hide()},2)),0!=e&&t.schedule(t.callbackCoin,.01)})},e.prototype.nextCb=function(){y.Event.emit(d.default.CLICK_NEXT),_.Popup.hide()},e.prototype.clickGou=function(){this.dict.gou.active=!this.dict.gou.active},e.prototype.clickVideo=function(){console.log("clickVideo-----\x3e")},e.prototype.clickShare=function(){var t=this;v.Platform.getConfig().hasShare?(v.Platform.share(),this.scheduleOnce(function(){t.nextCb()},1)):v.Platform.shareRecordCap(function(e){0==e?(w.Tip.show("\u5206\u4eab\u5f55\u5c4f\u6210\u529f\uff01"),t.nextCb()):-1==e?w.Tip.show("\u5f55\u5c4f\u65f6\u95f4\u8fc7\u77ed\uff01"):w.Tip.show("\u6682\u65e0\u5f55\u5c4f\u4fe1\u606f\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")})},e.prototype.clickHome=function(){C.Scene.loadScene(u.SceneConst.MAIN)},e.prototype.clickRestart=function(){_.Popup.hide(),cc.game.emit("onRestartBtn")},e.prototype.getIsMistakeByChance=function(t){var e=100*Math.random(),o=!1;return console.log("\u968f\u673a\u6570",e),console.log("\u5f53\u524d\u914d\u7f6e\u6982\u7387:"+t),0==t?o:(t>=e&&(o=!0),o)},c([N(cc.Node)],e.prototype,"cursor",void 0),c([N(cc.Sprite)],e.prototype,"numbg",void 0),c([N([cc.SpriteFrame])],e.prototype,"allnumbg",void 0),c([N([cc.Node])],e.prototype,"numttf",void 0),c([A],e)}(s.default));r.default=B,cc._RF.pop()},{}],XMADMediatorUtils:[function(t,e,o){"use strict";cc._RF.push(e,"825496NznVPh5WwTYJPjVRg","XMADMediatorUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.XMADMediator=void 0;var r=n("XMADUtils"),a=function(){function t(){}return t.prototype.showRewardVideo=function(t){r.XMAD.showRewardVideo(t)},t.prototype.showLargeFeed=function(){r.XMAD.showLargeFeed()},t.prototype.removeLargePicFeed=function(){r.XMAD.removeLargePicFeed()},t.prototype.showInterstitialFeed=function(){r.XMAD.showInterstitialFeed()},t.prototype.showInterstitialFeed_must=function(){r.XMAD.showInterstitialFeed_must()},t.prototype.showInterstitialFeed_result=function(){r.XMAD.showInterstitialFeed_result()},t}();i.XMADMediator=new a,cc._RF.pop()},{}],XMADUtils:[function(t,e,o){"use strict";cc._RF.push(e,"95e40GgWH5I+5FzaOf3vW8s","XMADUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.XMAD=void 0,n("PlatformConst"),n("BmsManager");var r=n("PlatformManager"),a=function(){function t(){}return t.prototype.showLargeFeed=function(){},t.prototype.showBannerFeed=function(){},t.prototype.removeLargePicFeed=function(){null!=this.posID&&r.Platform.removeLargePicFeed(this.posID)},t.prototype.showInterstitialFeed=function(){},t.prototype.showInterstitialFeed_must=function(){},t.prototype.showInterstitialFeed_result=function(){},t.prototype.showRewardVideo=function(t){console.log("[platform] [AndroidPlatform] showRewardAds"),window._rewardAdsCb=null,window._rewardAdsCb=t,t._rewardAdsCb=null,t._rewardAdsCb=t,window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showVideo","()V")},t.prototype.onInterstitialFeedShow=function(){},t.prototype.onInterstitialFeedShowFailed=function(){},t.prototype.randomNum=function(){},t.prototype.getPosID=function(){},t.prototype.getResByChance=function(){},t.prototype.downloadBtn=function(){},t.prototype.showInsert_must=function(){},t.prototype.onForeground=function(){},t.prototype.test=function(){var t=this;setTimeout(function(){t._rewardAdsCb&&t._rewardAdsCb(0),t._rewardAdsCb=null},200)},cc.java_call_js=function(t){"video_reward_1"==t?(console.log("[platform] [AndroidPlatform] videoFinish"),setTimeout(function(){window._rewardAdsCb&&window._rewardAdsCb(0),window._rewardAdsCb=null},200)):(console.log("[platform] [AndroidPlatform] videoUnfinish"),setTimeout(function(){window._rewardAdsCb&&window._rewardAdsCb(1),window._rewardAdsCb=null},200))},t}();i.XMAD=new a,cc._RF.pop()},{}],XM:[function(t,e,o){"use strict";cc._RF.push(e,"575f162rbxMAZPM9g+6gYXL","XM");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0}),r.XM=void 0;var c=i("BasePlatform"),s=cc._decorator,l=(s.ccclass,s.property,function(t){function e(){var e=t.call(this)||this;return e.firstBannerDelayTime=90,e.sdk=window.qg,e._nativeAds=[],e.isInsert=!1,e.gamePortalAd=null,e.succFunc=null,e.failFunc=null,e.insertVideoInterval=60,e.inertVideoLimitCount=8,console.log("\u5c0f\u7c73\u5feb\u5e94\u7528"),e}return a(e,t),e.prototype.enabledDebug=function(){window.qg&&(console.log("window['qg'].setEnableDebug",!1),window.qg.setEnableDebug({enableDebug:!1,success:function(){},complete:function(){},fail:function(){}}))},e.prototype.silentLogin=function(){return new Promise(function(t,e){window.qg.login({success:function(o){o?t(o.uid):e("[XM] --\x3e data is null")},fail:function(t){e(t)}})})},e.prototype.showBanner=function(t,e){var o=this;if(void 0===t&&(t={id:""}),window.qg&&this.sdk.createBannerAd){var n=window.qg.getSystemInfoSync(),i=n.windowHeight-80,r=n.windowWidth;this._banner||(this._banner=this.sdk.createBannerAd({adUnitId:this._config.bannerID,style:{top:i,left:0,width:r},adIntervals:30}),this._banner.onResize(function(t){o._banner.style.top=n.windowHeight-t.height}),this._banner.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)}),this._banner.onError(function(t){console.log("[platform] [VIVOPlatform] showBanner",JSON.stringify(t))}))}},e.prototype.destroyBannerAd=function(){console.log("\u9500\u6bc1banner000"),this._banner&&(console.log("\u9500\u6bc1banner111"),this._banner.destroy(),console.log("\u9500\u6bc1banner22"),this._banner=null,console.log("\u9500\u6bc1banne3333"))},e.prototype.showNativeAds=function(t,e){var o=this;void 0===t&&(t={type:0,container:null}),console.log("XM == >>","showNativeAds",t),console.log("XM == >>","showNativeAds11"),console.log("XM == >>","showNativeAds22");var n=this.sdk.createNativeAd({adUnitId:t.id||this._config.nativeID});t.container.opacity=255,this._nativeAds.push({ads:n,container:t.container}),console.log("XM == >>","showNativeAds33"),n.onLoad(function(i){var r=i.adList?i.adList[0]:null;0!=t.container.opacity&&(n&&r&&(n.reportAdShow({adId:r.adId}),0==t.type?(console.log("XM == >>","showNativeAds444"),o.showNativeBanner2(r,n,t)):1==t.type?o.showNativeInsert(r,n,t):o.showNativeIcon(r,n,t)),n.offError(),n.offLoad()),e&&e(0)}),n.onError(function(i){if(console.log("[platform] [XMPlatform] showNativeAd",i),t.container){t.container.active=!1,t.container.opacity=0;var r=o._nativeAds.findIndex(function(e){return e.container.name==t.container.name});-1!=r&&o._nativeAds.splice(r,1)}n.offError(),n.offLoad(),n.destory&&n.destory(),n=null,e&&e(1),1==t.type&&cc.game.emit("onInterstitialFeedShowFailed")}),n&&n.load()},e.prototype.showNativeBanner2=function(t,e,o){var n=this;void 0===o&&(o={type:0,container:null}),console.log("\u663e\u793a\u539f\u751fBanner=======");var i=o.container,r=i.getChildByName("img"),a=i.getChildByName("title"),c=i.getChildByName("desc"),s=i.getChildByName("btnText"),l=i.getChildByName("close");if(i.active=!0,i.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),n.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),n.hideNativeAds()):n.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),c&&(c.getComponent(cc.Label).string=""+t.desc),s&&(s.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var d=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.loader.load({url:d,type:"png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.hideNativeAds=function(){if(console.log("\u9690\u85cf\u539f\u751f\u5e7f\u544a"),this._nativeAds.length){var t=this._nativeAds.pop();if(cc.isValid(t.container,!0)){t.container.opacity=0,t.container.active=!1,t.container.off(cc.Node.EventType.TOUCH_START);var e=t.container.getChildByName("close");e&&e.off(cc.Node.EventType.TOUCH_START);var o=t.container.getChildByName("next");o&&o.off(cc.Node.EventType.TOUCH_START)}t.ads.destory&&t.ads.destory(),this.isInsert&&cc.game.emit("onInterstitialFeedRemove"),this.isInsert=!1,console.log("\u629b\u4e8b\u4ef6\u5173\u95ed\u539f\u751fbanner"),cc.game.emit("hideNativeAds")}},e.prototype.showNativeInsert=function(t,e,o){var n=this;void 0===o&&(o={type:0,container:null});var i=o.container,r=i.getChildByName("img")||i.getChildByName("mask").getChildByName("img"),a=i.getChildByName("title"),c=i.getChildByName("desc"),s=i.getChildByName("btnText"),l=i.getChildByName("next"),d=i.getChildByName("close"),p=i.getChildByName("mask");if(i.active=!0,i.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),n.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),n.hideNativeAds(),o.hideCb&&o.hideCb()},this),d&&d.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),n.hideNativeAds()):n.hideNativeAds(),o.hideCb&&o.hideCb()}),p&&p.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeAll?(e.reportAdClick({adId:t.adId}),n.hideNativeAds()):n.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),c&&(c.getComponent(cc.Label).string=""+t.desc),s&&(s.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var h=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.loader.load({url:h,type:"png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}cc.game.emit("onInterstitialFeedShow"),this.isInsert=!0},e.prototype.showNativeIcon=function(t,e,o){var n=this;void 0===o&&(o={type:0,container:null});var i=o.container,r=i.getChildByName("img")||i.getChildByName("mask").getChildByName("img"),a=i.getChildByName("title"),c=i.getChildByName("close");i.active=!0,i.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),n.hideNativeAds(),o.hideCb&&o.hideCb()},this),c&&c.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),n.hideNativeAds()):n.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),r&&cc.loader.loadRes(t.icon,cc.SpriteFrame,function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=e)})},e.prototype.showPortalAd=function(t){var e=this;window.qg.getSystemInfoSync().platformVersionCode>=1076?this.gamePortalAd?this.gamePortalAd.show().then(function(){console.log("show success"),t&&t(!0)}).catch(function(e){t&&t(!1),console.log("show fail with:"+e.errCode+","+e.errMsg)}):(this.gamePortalAd=window.qg.createGamePortalAd({adUnitId:"342428"}),this.gamePortalAd.onLoad(function(){console.log("\u4e92\u63a8\u76d2\u5b50\u4e5d\u5bab\u683c\u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.gamePortalAd.show().then(function(){console.log("show success"),t&&t(!0)}).catch(function(e){t&&t(!1),console.log("show fail with:"+e.errCode+","+e.errMsg)})}),this.gamePortalAd.onClose(function(){console.log("\u4e92\u63a8\u76d2\u5b50\u4e5d\u5bab\u683c\u5e7f\u544a\u5173\u95ed")}),this.gamePortalAd.load().then(function(){console.log("load success")}).catch(function(e){t&&t(!1),console.log("load fail with:"+e.errCode+","+e.errMsg)})):console.log("\u5feb\u5e94\u7528\u5e73\u53f0\u7248\u672c\u53f7\u4f4e\u4e8e1076\uff0c\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API")},e.prototype.hideBanner=function(){window.qg&&this._banner&&(console.log("hideBannerAd===="),this._banner.hide(),this._banner.destroy(),this._banner=null)},e.prototype.hideNativeBanner=function(){console.log("hideNativeAds===="),this.hideNativeAds()},e.prototype.loadRewardVideoAd=function(){},e.prototype.showRewardAds=function(t){var e=this;console.log("[XM][showRewardVideo]"),this.videoAd||(console.log("[XM][showRewardVideo1]"),this.videoAd=window.qg.createRewardedVideoAd({adUnitId:this._config.rewardID}),this.videoAd.onLoad(function(){console.log("[XM] load success")}),this.videoAd.onError(function(t,e){console.log("error: \u9519\u8bef\u4fe1\u606f: "+t+", \u9519\u8bef\u7801: "+e)})),this.videoAd.onClose(function o(n){n.isEnded?(console.log("XM \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5b8c\u6210\uff0c\u53d1\u653e\u5956\u52b1"),t(0)):(console.log("XM \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u53d6\u6d88\u5173\u95ed\uff0c\u4e0d\u53d1\u653e\u5956\u52b1"),t(1)),e.videoAd.offClose(o)}),console.log("[XM][showRewardVideo2]"),this.videoAd.load().then(function(){e.videoAd.show().then(function(){console.log("xm \u89c6\u9891\u663e\u793a\u6210\u529f1")})}).catch(function(e){console.error("[XM][showVideoAD] error",JSON.stringify(e)),t(-1)}),console.log("[XM][showRewardVideo3]")},e.prototype.showInsert=function(){var t=this;console.log("[XM] --\x3e \u5c55\u793a\u63d2\u5c4f");var e=window.qg.createInterstitialAd({adUnitId:this._config.insertID});e.show(),e&&(e.onClose(function o(){e&&(e.offClose(o),e.destroy(),e=null,t.playInsertAdEnd())}),e.onError(function o(n,i){console.log("XM \u63d2\u5c4f\u9519\u8bef"),console.log("errCode",n),console.log("errMsg",i),e&&(e.offError(o),e.destroy(),e=null,t.playInsertAdEnd())}))},e.prototype.playInsertAdEnd=function(){},e.prototype.playInsertAdShow=function(){},e.prototype.hasShortcutInstalled=function(){return new Promise(function(t,e){window.qg.hasShortcutInstalled&&window.qg.hasShortcutInstalled({success:function(e){0==e&&t()},fail:function(t){e(t)},complete:function(){}})})},e.prototype.removeLargePicFeed=function(){this.hideNativeAds()},e.prototype.showInterstitialFeed=function(t,e,o,n){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===n&&(n=0)},e}(c.BasePlatform));r.XM=l,cc._RF.pop()},{}],carttRun:[function(t,e,o){"use strict";cc._RF.push(e,"eca12tx7ftL/r39rO6UxAAB","carttRun");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("path_root"),l=cc._decorator,d=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pathRoot=null,e.redPoint=null,e.cycle=!0,e.speed=250,e.road_data=[],e.path_count=0,e.walk_time=0,e.vx=0,e.vy=0,e.walk_time_total=0,e.next_step=0,e}return a(e,t),e.prototype.onLoad=function(){this.road_data=this.pathRoot.get_path(0),console.log("this.road_data",this.road_data),this.walk_to_next()},e.prototype.showRedPoint=function(){for(var t=0;t<this.road_data.length;t++){var e=this.road_data[t],o=cc.instantiate(this.redPoint);o.active=!0,o.parent=this.node.parent,o.position=e}},e.prototype.walk_to_next=function(){var t=this.node.getPosition(),e=this.road_data[this.next_step].sub(t),o=e.mag();this.walk_time_total=o/this.speed,this.vx=this.speed*e.x/o,this.vy=this.speed*e.y/o,this.walk_time=0},e.prototype.updateAngle=function(){var t=this.node.getPosition(),e=this.road_data[this.next_step].sub(t),o=180*Math.atan2(e.y,e.x)/Math.PI;this.node.angle=o},e.prototype.walk_update=function(t){this.walk_time+=t,this.walk_time>=this.walk_time_total&&(t-=this.walk_time-this.walk_time_total);var e=this.vx*t,o=this.vy*t;this.node.x+=e,this.node.y+=o,this.walk_time>=this.walk_time_total&&(this.next_step++,this.next_step>=this.road_data.length&&this.cycle&&(this.next_step=0),this.walk_to_next(),this.updateAngle())},e.prototype.update=function(t){this.walk_update(t)},c([p(s.default)],e.prototype,"pathRoot",void 0),c([p(cc.Node)],e.prototype,"redPoint",void 0),c([p({tooltip:"\u662f\u5426\u5faa\u73af"})],e.prototype,"cycle",void 0),c([p({})],e.prototype,"speed",void 0),c([d],e)}(cc.Component);r.default=h,cc._RF.pop()},{}],checkTrandomRect:[function(t,e,o){"use strict";cc._RF.push(e,"e279evpMVJK2oKpwhKG076b","checkTrandomRect");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("zqddn_level_base"),d=cc._decorator,p=d.ccclass,h=d.property;(function(t){t[t.init=1]="init",t[t.waitTouch=2]="waitTouch",t[t.checkWin=3]="checkWin",t[t.win=4]="win",t[t.lose=5]="lose"})(s||(s={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.frameNode=null,e.imgPicNode=null,e.movePathNode=null,e.moveSpeed=350,e.rollback=!1,e._targetPos=cc.v2(0,0),e._pathIndex=0,e._pathArr=[],e._state=s.init,e._backFlag=!1,e}return a(e,t),e.prototype.start=function(){if(this._pathArr.length<=0)for(var t=0;t<this.movePathNode.children.length;t++){var e=this.movePathNode.children[t];this._pathArr.push(e.position)}this.setState(s.init),this.initTouchEvent(),this.beginMove(),this.setState(s.waitTouch)},e.prototype.onDisable=function(){this.unscheduleAllCallbacks(),this.imgPicNode.stopAllActions()},e.prototype.setState=function(t){this._state=t},e.prototype.beginMove=function(){this._pathIndex=0,this._targetPos=this._pathArr[this._pathIndex],this.imgPicNode.position=cc.v2(this._targetPos.x,this._targetPos.y)},e.prototype.initTouchEvent=function(){var t=this.node;t.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchStart=function(){},e.prototype.onTouchEnd=function(){this.checkWin()},e.prototype.update=function(t){if(this._state==s.waitTouch){t>.5&&(t=.02),this.imgPicNode.getPosition().fuzzyEquals(this._targetPos,this.moveSpeed*t)&&this.refreshTargetPos();var e=this._targetPos.sub(this.imgPicNode.position);this.imgPicNode.position=this.imgPicNode.position.add(e.normalize().mul(this.moveSpeed*t))}},e.prototype.refreshTargetPos=function(){this._backFlag?(this._pathIndex-=1,this._pathIndex<0&&(this._backFlag=!1,this._pathIndex=0,this._targetPos=this._pathArr[this._pathIndex],this.imgPicNode.position=cc.v2(this._targetPos.x,this._targetPos.y))):(this._pathIndex+=1,this._pathIndex>=this._pathArr.length&&(this.rollback?(this._backFlag=!0,this._pathIndex=this._pathArr.length-1,this._targetPos=this._pathArr[this._pathIndex],this.imgPicNode.position=cc.v2(this._targetPos.x,this._targetPos.y)):(this._backFlag=!1,this._pathIndex=0,this._targetPos=this._pathArr[this._pathIndex],this.imgPicNode.position=cc.v2(this._targetPos.x,this._targetPos.y)))),this._targetPos=this._pathArr[this._pathIndex]},e.prototype.checkWin=function(){var t=this;if(this._state!=s.checkWin){this.setState(s.checkWin);for(var e=this.frameNode.getComponent(cc.PolygonCollider).points,o=[],n=0;n<e.length;n++){var i=this.frameNode.convertToWorldSpaceAR(e[n]);o.push(i)}var r=this.imgPicNode.getComponent(cc.PolygonCollider).points,a=!1;for(n=0;n<r.length;n++){if(i=this.imgPicNode.convertToWorldSpaceAR(r[n]),!cc.Intersection.pointInPolygon(i,o)){a=!1;break}a=!0}a?(this.gameBase.gameRight(),this.setState(s.win)):(this.gameBase.showWrong(),this.scheduleOnce(function(){t.beginMove(),t.setState(s.waitTouch)},.5))}},c([h(l.default)],e.prototype,"gameBase",void 0),c([h(cc.Node)],e.prototype,"frameNode",void 0),c([h(cc.Node)],e.prototype,"imgPicNode",void 0),c([h(cc.Node)],e.prototype,"movePathNode",void 0),c([h],e.prototype,"moveSpeed",void 0),c([h],e.prototype,"rollback",void 0),c([p],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],classify_nuts_lookVideo:[function(t,e,o){"use strict";cc._RF.push(e,"0e60d6lUzpP44ShfBO9dB9a","classify_nuts_lookVideo");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.AnimationName=void 0;var s,l=i("BrainLevelBase"),d=i("FrameAnim"),p=cc._decorator,h=p.ccclass,u=p.property,f=function(t,e){this.color_id=-1,this.node=null,this.color_id=t,this.node=e};(function(t){t.daiji="daiji",t.caidai="caidai",t.animation="animation"})(s=r.AnimationName||(r.AnimationName={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFixedColor=!1,e.offsetY=54,e.offsetX=240,e.maxLength=10,e.fullTipString="\u4f4d\u7f6e\u5df2\u6ee1",e.differenceTipString="\u4e0d\u540c\u7269\u54c1\u4e0d\u80fd\u653e\u8fdb\u53bb\u54e6",e.pieceList=null,e.groupBgList=null,e.finalShowList=null,e.node_places=[],e.tempTopLayer=null,e.node_tip=null,e.lockPre=null,e.isGameEnd=!1,e.placeDats=[],e._speed=1e3,e._delayTime=.1,e._curPlace=null,e._lastPlace=null,e._config={},e._groupTypeConfig=[],e._isFinishDatas={},e._dataIsLock="_dataIsLock",e._lockNodeList=[],e._isShowTip=!1,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){this.dict.presList.active=!1},e.prototype.onAssetLoadedAllFinishHandle=function(){var t=this;this.scheduleOnce(function(){t._initAll()})},e.prototype._initAll=function(){this._initData(),this._initVar(),this._initUI()},e.prototype._initData=function(){this._config=this.levelJSON.json[this.levelID]},e.prototype._initVar=function(){this.node_tip=this.dict.node_tip,this.tempTopLayer=this.dict.tempTopLayer,this.node_places=this.dict.groupRoot.children,this.pieceList=this.dict.pieceList.children,this.groupBgList=this.dict.groupBgList.children,this.finalShowList=this.dict.finalShowList.children,this.lockPre=this.dict.lockPre},e.prototype._initUI=function(){for(var t=this._config.Cfg,e=this._config.lookVideoList,o=0;o<this.node_places.length;o++){var n=t[o][0],i=t[o][1];this.placeDats.push([]),this._groupTypeConfig.push(n);for(var r=0;r<this.maxLength;r++)if(i[r]>=0){var a=this._creat(i[r],o,r);this.placeDats[o][r]=a}var c=this.node_places[o];c.isCanTouch=!0,c.moveCount=0,c.moveTimes=0,this.onInitPlaces(c),this._initEvents(c),this.updateTipsByPlace(o),this._initGroup(c,n,-1!=e.indexOf(String(o)))}},e.prototype._initEvents=function(t){t.on(cc.Node.EventType.TOUCH_END,this._onTouchPlacesEnd,this)},e.prototype.updateTipsByPlace=function(t){var e=this.placeDats[t].length;this.node_places[t].getChildByName("tips").getComponent(cc.Label).string=e+"/"+this.maxLength},e.prototype._creat=function(t,e,o){if(!(t<0)){null==this._isFinishDatas[t]&&(this._isFinishDatas[t]=!1);var n=this.node_places[e].getChildByName("topLayer"),i=cc.instantiate(this.pieceList[t]);i.parent=n;var r=o*this.offsetY;return i.setPosition(cc.v2(0,r)),i.zIndex=i.position.y+1e3,i.active=!0,new f(t,i)}},e.prototype._initGroup=function(t,e,o){var n=t.getChildByName("img_down"),i=t.getChildByName("img_down2");if(-1!=e&&(n.getComponent(cc.Sprite).spriteFrame=this.groupBgList[e].getComponent(cc.Sprite).spriteFrame),n.active=!o,i.active=o,o){var r=cc.instantiate(this.lockPre);r.parent=i,r.setPosition(cc.v2(0,i.height/2)),r.active=!0,this._lockNodeList.push(t)}t[this._dataIsLock]=o},e.prototype.dealUnlock=function(){if(0!=this._lockNodeList.length){var t=this._lockNodeList.pop();t[this._dataIsLock]=!1;var e=t.getChildByName("img_down"),o=t.getChildByName("img_down2");e.active=!0,o.active=!1}},e.prototype._onTouchPlacesEnd=function(t){if(!this.isGameEnd){var e=t.target;if(this.getIsLockByGroupNode(e))cc.game.emit("dealUnlock");else{if(this._lastPlace=this._curPlace,this._curPlace=e,this._lastPlace==this._curPlace)return this._removeStartAniByPlaces(this._curPlace),this._curPlace=null,void(this._lastPlace=null);if(this._lastPlace&&!this._lastPlace.isCanTouch)return this._curPlace=null,void(this._lastPlace=null);if(!this._curPlace.isCanTouch)return this._lastPlace&&this._removeStartAniByPlaces(this._lastPlace),this._curPlace=null,void(this._lastPlace=null);var o=this.getPlaceIdByNode(e),n=this.getDatasByNode(e);if(0==n.length){if(this._lastPlace){var i=this.getPlaceIdByNode(this._lastPlace),r=this.getSameDatasCount(this._lastPlace);if(this.placeDats[o].length+r<=this.maxLength){for(var a=0;a<r;a++){var c=this.placeDats[i].pop();this.placeDats[o].push(c)}this.updatePlaceDatas(o,r,i)}else this.showTips(this.fullTipString),this._removeStartAniByPlaces(this._lastPlace);this._curPlace=null,this._lastPlace=null}}else if(n.length>=this.maxLength){var s=this.checkPlacesDatasByNode(this._curPlace),l=this.getPlaceIdByNode(this._curPlace),d=this._groupTypeConfig[l],p=this.getColorByNode_2(this._curPlace);if(s&&-1!=d&&d==p)this.showTips(this.fullTipString),this._curPlace=null,this._removeStartAniByPlaces(this._lastPlace),this._lastPlace=null;else if(this._lastPlace)this.showTips(this.fullTipString),this._removeStartAniByPlaces(this._lastPlace),this._curPlace=null,this._lastPlace=null;else{this._curPlace=e;var h=this.getDatasByNode(this._curPlace),u=this.getSameDatasByDatas(h);for(a=0;a<u.length;a++)this._startAni(u[a])}}else if(this._lastPlace){i=this.getPlaceIdByNode(this._lastPlace);var f=this.getDatasByNode(this._lastPlace);if(f.length>=this.maxLength){var g=this.getPlaceIdByNode(this._lastPlace);if(this.getSameDatasCount(this._lastPlace)==this.maxLength&&-1!=this._groupTypeConfig[g])this.showTips(this.fullTipString),this._removeStartAniByPlaces(this._lastPlace),this._curPlace=null,this._lastPlace=null;else if(this.getColorByNode(this._lastPlace)==this.getColorByNode(this._curPlace)){r=this.getSameDatasCount(this._lastPlace),h=this.getDatasByNode(this._curPlace);var m=this.getPlaceIdByNode(this._curPlace);if(this.placeDats[m].length+r<=this.maxLength){for(a=0;a<r;a++)c=this.placeDats[i].pop(),this.placeDats[m].push(c);this.updatePlaceDatas(m,r,i)}else this.showTips(this.fullTipString),this._removeStartAniByPlaces(this._lastPlace);this._curPlace=null,this._lastPlace=null}else this.showTips(this.differenceTipString),this._removeStartAniByPlaces(this._lastPlace),this._curPlace=null,this._lastPlace=null}else if(0==f.length)this._curPlace=e;else if(this.getColorByNode(this._lastPlace)==this.getColorByNode(this._curPlace)){r=this.getSameDatasCount(this._lastPlace),h=this.getDatasByNode(this._curPlace);var y=this.getPlaceIdByNode(this._curPlace);if(this.placeDats[y].length+r<=this.maxLength){for(a=0;a<r;a++)c=this.placeDats[i].pop(),this.placeDats[y].push(c);this.updatePlaceDatas(y,r,i)}else this.showTips(this.fullTipString),this._removeStartAniByPlaces(this._lastPlace);this._curPlace=null,this._lastPlace=null}else this.showTips(this.differenceTipString),this._removeStartAniByPlaces(this._lastPlace),this._curPlace=null,this._lastPlace=null}else for(h=this.getDatasByNode(this._curPlace),u=this.getSameDatasByDatas(h),a=0;a<u.length;a++)this._startAni(u[a])}}},e.prototype.checkAllPlacesDatas=function(){var t=this,e=!0;if(this.isFixedColorClassify()){for(var o in this._isFinishDatas)if(!this._isFinishDatas[o]){e=!1;break}}else for(var n=0;n<this.node_places.length;n++){var i=this.node_places[n];if(this.getDatasByNode(i).length>0&&!this.checkPlacesDatasByNode(i)){e=!1;break}if(0==i.isCanTouch){e=!1;break}}return e&&(this.isGameEnd=!0,this.scheduleOnce(function(){t.playRight()},1)),e},e.prototype.checkPlacesDatasById=function(t){var e=!1;return this.getSameDatasCount(this.node_places[t])==this.maxLength&&(e=!0),e},e.prototype.checkPlacesDatasByNode=function(t){var e=!1;return this.getSameDatasCount(t)==this.maxLength&&(e=!0),e},e.prototype.getPlaceIdByNode=function(t){return this.node_places.indexOf(t)},e.prototype.getDatasByNode=function(t){var e=this.node_places.indexOf(t);return this.placeDats[e]},e.prototype.getColorByNode=function(t){var e=this.getDatasByNode(t);return e.length>=this.maxLength?this.getSameDatasCount(t)==this.maxLength?-1:e[e.length-1].color_id:0==e.length?-1:e[e.length-1].color_id},e.prototype.getColorByNode_2=function(t){var e=-1,o=this.getDatasByNode(t);return o.length>=this.maxLength&&this.getSameDatasCount(t)==this.maxLength&&(e=o[o.length-1].color_id),e},e.prototype.getSameDatasCount=function(t){var e=this.getDatasByNode(t);if(e.length<=0)return 0;if(e.length<=1)return 1;for(var o=e[e.length-1],n=1,i=e.length-2;i>=0&&o.color_id==e[i].color_id;i--)n++;return n},e.prototype.getSameDatasByDatas=function(t){if(t.length<0)return[];if(t.length<=1)return t;var e=t[t.length-1],o=[];o.push(e);for(var n=t.length-2;n>=0&&t[n].color_id==e.color_id;n--)o.push(t[n]);return o},e.prototype.checkIsCanTouch=function(t){var e=this.node_places[t];if(0==e.isCanTouch&&e.moveTimes>=e.moveCount){e.isCanTouch=!0,e.moveTimes=0,e.moveCount=0;var o=this.placeDats[t][0].color_id,n=!this.isFixedColorClassify()||o==this._groupTypeConfig[t];this.checkPlacesDatasById(t)&&n&&(this.onCurPlaceFillSame(e,t,o),this.checkAllPlacesDatas()),this.updateTipsByPlace(t)}},e.prototype._addMoveTimes=function(t){var e=this.node_places[t];if(!e.isCanTouch){e.moveTimes+=1;var o=this.getPlaceIdByNode(e);this.checkIsCanTouch(o)}},e.prototype.updatePlaceDatas=function(t,e,o){this.node_places[t].isCanTouch=!1,this.node_places[t].moveCount=e;for(var n=this.placeDats[t],i=.1,r=cc.v2(0,0),a=this.node_places[t].getChildByName("topLayer"),c=0;c<n.length;c++){var s=r.x,l=r.y+c*this.offsetY,d=cc.v2(s,l),p=n[c].node,h=p.parent.convertToWorldSpaceAR(p.position),u=a.convertToWorldSpaceAR(d);this.getDistance(h,u)>=1&&(this._moveAni(t,o,p,d,i),i+=this._delayTime)}this.checkPlacesDatasById(t)},e.prototype.getDistance=function(t,e){var o=e.y-t.y,n=e.x-t.x;return Math.sqrt(n*n+o*o)},e.prototype._moveAni=function(t,e,o,n,i){var r=this;this.updateTipsByPlace(e);var a=this.node_places[e],c=this.node_places[t],s=c.convertToWorldSpaceAR(cc.v2(0,c.height)),l=c.getChildByName("topLayer").convertToNodeSpaceAR(s),p=a.convertToWorldSpaceAR(cc.v2(0,a.height)),h=a.getChildByName("topLayer").convertToNodeSpaceAR(p),u=h.y>l.y?h:l,f=cc.v2(o.position.x,u.y),g=cc.v2(n.x,u.y),m=o.parent.convertToWorldSpaceAR(f),y=c.getChildByName("topLayer").convertToWorldSpaceAR(g),v=this.tempTopLayer.convertToNodeSpaceAR(m),_=this.tempTopLayer.convertToNodeSpaceAR(y),C=o.getComponent(d.default);cc.tween(o).delay(i).call(function(){C.duration=.01,C.isPlaying=!0,C.playLoop()}).to(.3,{position:cc.v2(o.position.x,u.y)}).call(function(){C.isPlaying=!1,o.setParent(r.tempTopLayer),o.setPosition(v)}).to(.3,{position:_}).call(function(){o.setParent(c.getChildByName("topLayer")),o.setPosition(cc.v2(n.x,u.y)),C.isPlaying=!0}).to(.4,{position:n}).call(function(){r._addMoveTimes(t),o.zIndex=o.position.y+1e3,o.startPos=o.position,C.isPlaying=!1,C.duration=.1,C.resetFrame()}).start()},e.prototype._getTimeByPos=function(t,e){var o=e.y-t.y,n=e.x-t.x,i=Math.sqrt(n*n+o*o);return this._getTimeByDistance(i)},e.prototype._getTimeByDistance=function(t){var e;return this._speed=200,(e=t/this._speed)<0?0:e},e.prototype._startAni=function(t){var e=t.node,o=this.getFrameAnim(e);e.stopAllActions(),e.startPos?e.setPosition(e.startPos):e.startPos=e.position,cc.tween(e).call(function(){e.isStartAni=!0,e.startPos=e.position,o.playLoop()}).by(.3,{position:cc.v2(0,30)}).call(function(){o.isPlaying=!1}).start()},e.prototype._removeStartAniByPlaces=function(t){if(t)for(var e=this.getDatasByNode(t),o=this.getSameDatasByDatas(e),n=0;n<o.length;n++)this._removeStartAni(o[n])},e.prototype._removeStartAni=function(t){var e=t.node;if(e.isStartAni){var o=this.getFrameAnim(e);o.isPlaying=!0,e.stopAllActions(),cc.tween(e).to(.3,{position:e.startPos}).call(function(){e.isStartAni=!1,o.isPlaying=!1,o.resetFrame()}).start()}},e.prototype.showTips=function(t){var e=this;if(!this._isShowTip){this.node_tip.active=!0,this.node_tip.opacity=0,this.node_tip.getComponent(cc.Label).string=t;var o=cc.scaleTo(1,1.2),n=cc.fadeIn(1),i=cc.spawn(o,n),r=cc.callFunc(function(){e._isShowTip=!1,e.node_tip.active=!1,e.node_tip.opacity=0,e.node_tip.setScale(1)}),a=cc.sequence(i,r);this.node_tip.runAction(a)}},e.prototype.setSprite=function(t,e){var o=t.getComponent(cc.Sprite);o.enabled=!0,o.spriteFrame=e},e.prototype.setAnimation=function(t,e,o,n,i){if(void 0===o&&(o=!1),void 0===n&&(n=""),void 0===i&&(i=null),t){var r=t.getComponent(sp.Skeleton);""!=n&&r.setSkin(n),r&&r.setAnimation(0,e,o),r.setCompleteListener(function(){r.setCompleteListener(null),i&&i()})}},e.prototype.getFrameAnim=function(t){return t.getComponent(d.default)},e.prototype.isFixedColorClassify=function(){return this.isFixedColor},e.prototype.getIsLockByGroupNode=function(t){return t[this._dataIsLock]},e.prototype.onInitPlaces=function(){},e.prototype.onCurPlaceFillSame=function(t,e,o){var n=this;this._isFinishDatas[o]=!0;var i=t.getChildByName("texiaoSpine");this.scheduleOnce(function(){i.active=!0,n.setAnimation(i,s.caidai,!1,"",function(){i.active=!1})},.5)},c([u({displayName:"\u662f\u5426\u56fa\u5b9a\u989c\u8272\u5206\u7c7b"})],e.prototype,"isFixedColor",void 0),c([u({tooltip:"y\u8f74\u95f4\u8ddd"})],e.prototype,"offsetY",void 0),c([u({tooltip:"x\u8f74\u95f4\u8ddd,\u6682\u65e0\u7528\u5230"})],e.prototype,"offsetX",void 0),c([u({tooltip:"\u6570\u91cf\u6700\u5927\u503c"})],e.prototype,"maxLength",void 0),c([u({tooltip:"\u6ee1\u6570\u91cf\u5410\u53f8\u6587\u672c"})],e.prototype,"fullTipString",void 0),c([u({tooltip:"\u4e0d\u540c\u79cd\u7c7b\u5410\u53f8\u6587\u672c"})],e.prototype,"differenceTipString",void 0),c([h],e)}(l.default);r.default=g,cc._RF.pop()},{}],classify_organizeMarker:[function(t,e,o){"use strict";cc._RF.push(e,"87b2dQQO/lDaZUwRc1rne+M","classify_organizeMarker");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.state=void 0;var s,l=i("BrainLevelBase"),d=i("LevelConstant"),p=cc._decorator,h=p.ccclass;p.property,function(t){t[t.init=0]="init",t[t.waitTouch=1]="waitTouch",t[t.checkWin=2]="checkWin",t[t.win=3]="win",t[t.lose=4]="lose",t[t.touching=5]="touching",t[t.moving=6]="moving",t[t.starting=7]="starting",t[t.backing=8]="backing"}(s=r.state||(r.state={}));var u=function(t,e,o,n){this.color_id=-1,this._indexX=-1,this._indexY=-1,this.node=null,this.color_id=t,this.node=n,this._indexX=e,this._indexY=o},f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_tip=null,e.tempMarkerLayer=null,e._config=[],e._rowStateData={},e._markerDatas=[],e._markerColorIdNumList={},e._curPlace=null,e._lastPlace=null,e.startPos=cc.v2(30,-30),e.endPos=cc.v2(100,-100),e._state=s.init,e._dataRowIdx=Symbol("_dataRowIdx"),e._dataPosIdx=Symbol("_dataCurIdx"),e._dataColorId=Symbol("_dataColorId"),e._isShowTip=!1,e}return a(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.onLevelAllAssetsLoaded=function(){this.state=s.waitTouch,this.initData(),this.initMap()},e.prototype.start=function(){this.initNode()},e.prototype.initData=function(){var t=this.levelJSON.json[this.levelID];this._config=t.map},e.prototype.initNode=function(){this.dict.presList.active=!1,this.mapContainer=this.dict.mapContainer,this.node_tip=this.dict.tipNode,this.tempMarkerLayer=this.dict.tempMarkerLayer,this.rowPre=this.dict.rowPre,this.markerList=this.dict.markerList.children,this.markerRootList=this.dict.markerRootList.children},e.prototype.initMap=function(){for(var t=0;t<this._config.length;t++){var e=this._config[t],o=e[0],n=e[1];this._markerDatas[t]=[];var i=cc.instantiate(this.rowPre);i[this._dataColorId]=o;for(var r=n.length,a=0;a<r;a++){var c=this._creat(o,n[a],i,t,a);this._markerDatas[t][a]=c}this.mapContainer.addChild(i),this._rowStateData[t]=!1}},e.prototype._creat=function(t,e,o,n,i){var r=cc.instantiate(this.markerRootList[t]);if(r.y=0,r.getChildByName("markerLayer").getComponent(cc.Mask).enabled=!1,r[this._dataRowIdx]=n,r[this._dataPosIdx]=i,r[this._dataColorId]=t,o.addChild(r),this.addEvent(r.getChildByName("touchArea")),-1!=e){this._markerColorIdNumList[e]||(this._markerColorIdNumList[e]=0),this._markerColorIdNumList[e]+=1;var a=cc.instantiate(this.markerList[e]);return a.setPosition(cc.v2()),a.getChildByName("gouNode").active=!1,r.getChildByName("markerLayer").addChild(a),new u(e,n,i,a)}return null},e.prototype.addEvent=function(t){t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t._touchListener.setSwallowTouches(!1)},e.prototype.onTouchEnd=function(t){if(this.state==s.waitTouch){var e=t.target;this.checkIsIntersectByTouchPoint(t.getLocation(),e)&&(this.playClickSound(),this.dealTouch(e.parent))}},e.prototype.checkIsIntersectByTouchPoint=function(t,e){var o=null;return cc.Intersection.pointInPolygon(t,this.getWPosByPolygon(e.getComponent(cc.PolygonCollider)))&&(o=e),o},e.prototype.getWPosByPolygon=function(t){for(var e=t.points,o=[],n=0;n<e.length;n++){var i=cc.v2(e[n].x+t.offset.x,e[n].y+t.offset.y),r=t.node.convertToWorldSpaceAR(i);o.push(r)}return o},e.prototype.dealTouch=function(t){this.state=s.touching;var e=t[this._dataRowIdx],o=(this.checkIsFinishByRowIdx(e),t[this._dataPosIdx]),n=this.getTouchMarkerByTouchIdx(e,o);if(this._lastPlace=this._curPlace,this._curPlace=t,this._lastPlace!=this._curPlace)if(this._lastPlace){var i=this.getTouchMarkerByMarkerRoot(this._curPlace),r=this.getTouchMarkerByMarkerRoot(this._lastPlace);i?(this.showTips("\u5df2\u6709\u9a6c\u514b\u7b14"),r?this._removeStartAnim(r):this.resetAll()):this._moveAnim(r,e,o)}else n?this._startAnim(n):this.resetAll();else this._removeStartAnim(n)},e.prototype._moveAnim=function(t,e,o){var n=this,i=this._lastPlace[this._dataRowIdx],r=this._lastPlace[this._dataPosIdx];this.setMarkerData(e,o,t),this.setMarkerData(i,r,null);var a=this.getColorIdByMarkerRoot(this._curPlace),c=this.getColorIdByMarkerRoot(this._lastPlace),s=this.getColorIdByMarkerData(t),l=t.node,d=this._curPlace.getChildByName("markerLayer"),p=d.convertToWorldSpaceAR(this.endPos),h=this.tempMarkerLayer.convertToNodeSpaceAR(p);cc.tween(l).to(.25,{position:this.endPos}).call(function(){var t=l.parent.convertToWorldSpaceAR(n.endPos),e=n.tempMarkerLayer.convertToNodeSpaceAR(t);l.parent=n.tempMarkerLayer,l.setPosition(e)}).to(.25,{position:h}).call(function(){l.parent=d,l.setPosition(n.endPos)}).to(.25,{position:cc.v2()}).call(function(){if(a==s){var t=!1,o=n.getRowSameColorNumByRowColorId(e,a),r=n.getRowDataNumByRowIdx(e);o==n._markerColorIdNumList[a]&&o==r&&(n.updateRowState(e),t=!0);var l=n.getRowSameColorNumByRowColorId(i,c),d=n.getRowDataNumByRowIdx(i);l==n._markerColorIdNumList[c]&&l==d&&(n.updateRowState(i),t=!0),t?n.checkIsWin():n.resetAll()}else n.resetAll()}).start()},e.prototype._startAnim=function(t){var e=this;this.state=s.starting;var o=t.node;o.stopAllActions(),cc.tween(o).to(.3,{position:this.startPos}).call(function(){e.resetState()}).start()},e.prototype._removeStartAnim=function(t){var e=this;this.state=s.backing;var o=t.node;cc.tween(o).to(.25,{position:cc.v2()}).call(function(){e.resetAll()}).start()},e.prototype.getTouchMarkerByTouchIdx=function(t,e){return this._markerDatas[t][e]},e.prototype.getTouchMarkerByMarkerRoot=function(t){var e=t[this._dataRowIdx],o=t[this._dataPosIdx];return this._markerDatas[e][o]},e.prototype.getColorIdByMarkerRoot=function(t){return t[this._dataColorId]},e.prototype.getColorIdByMarkerData=function(t){return t.color_id},e.prototype.getRowSameColorNumByRowColorId=function(t,e){return this._markerDatas[t].filter(function(t){return t&&t.color_id==e}).length},e.prototype.getRowDataNumByRowIdx=function(t){return this._markerDatas[t].filter(function(t){return null!=t}).length},e.prototype.updateRowState=function(t){this.state=s.checkWin,this._rowStateData[t]=!0,this._markerDatas[t].forEach(function(t){if(t&&t.node){var e=t.node.getChildByName("gouNode");e.active=!0,e.opacity=0,cc.tween(e).to(.15,{opacity:255}).delay(1.5).to(.15,{opacity:0}).call(function(){e.active=!1}).start()}}),this.playRemoteSound(d.AUDIO_URL.RIGHT)},e.prototype.checkIsWin=function(){for(var t=this,e=!0,o=0;o<this.mapContainer.childrenCount;o++)for(var n=this.mapContainer.children[o][this._dataColorId],i=this._markerDatas[o],r=0;r<i.length;r++){var a=i[r];if(a&&n!=a.color_id){e=!1;break}}e?this.scheduleOnce(function(){t.playRight(null,1.5)},.8):this.scheduleOnce(function(){t.resetAll()})},e.prototype.checkIsFinishByRowIdx=function(t){return this._rowStateData[t]},e.prototype.setMarkerData=function(t,e,o){this._markerDatas[t][e]=o},e.prototype.resetAll=function(){this.clearTouchData(),this.resetState()},e.prototype.clearTouchData=function(){this._curPlace=null,this._lastPlace=null},e.prototype.resetState=function(){this.state=s.waitTouch},e.prototype.showTips=function(t){var e=this;if(!this._isShowTip){this.node_tip.active=!0,this.node_tip.opacity=0,this.node_tip.children[0].getComponent(cc.Label).string=t;var o=cc.scaleTo(1,1.2),n=cc.fadeIn(1),i=cc.spawn(o,n),r=cc.callFunc(function(){e._isShowTip=!1,e.node_tip.active=!1,e.node_tip.opacity=0,e.node_tip.setScale(1)}),a=cc.sequence(i,cc.delayTime(.5),r);this.node_tip.runAction(a)}},e.prototype.onDestroy=function(){},c([h],e)}(l.default);r.default=f,cc._RF.pop()},{}],config:[function(t,e,o){"use strict";cc._RF.push(e,"0a26dew5WBGaIKy8zb3+Nzz","config");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_LOG_LEVEL=n.LIMIT_REPORT_INTERVAL=n.LIMIT_REPORT_COUNT=n.ONLINE_DEFAULT_INTERVAL=n.DOMAIN=n.API_SECRET=void 0,n.API_SECRET="A8VlJnyjXXdK3Csw6ZAN4KM9jFGHFk1G",n.DOMAIN="",n.ONLINE_DEFAULT_INTERVAL=1e4,n.LIMIT_REPORT_COUNT=10,n.LIMIT_REPORT_INTERVAL=10,n.DEFAULT_LOG_LEVEL="none",cc._RF.pop()},{}],"crypto-js":[function(t,e){"use strict";cc._RF.push(e,"51145ovcJtPpp2TgV5sVdNt","crypto-js"),cc._RF.pop()},{}],dogUgcBase:[function(t,e,o){"use strict";cc._RF.push(e,"8738c/3t11BPZ30xYTWSY9b","dogUgcBase");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("SceneConst"),l=i("PlatformManager"),d=i("SceneManager"),p=i("TipManager"),h=i("zqddn_level_base"),u=i("dogUgcMConstans"),f=i("dogUgc_createNode"),g=i("dogUgc_saveTipNode"),m=cc._decorator,y=m.ccclass,v=m.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gamebase=null,e.createNode=null,e.playNode=null,e.levelListNode=null,e.successNode=null,e.saveTipNode=null,e.tipsNode=null,e.playParentNode=null,e._canShareRecord=!1,e}return a(e,t),e.prototype.start=function(){this.tipsNode.active=!1,this.playNode.active=!1,this.onShowLevelNode(),this._canShareRecord=this.getShareRecordStatus()},e.prototype.onEnable=function(){cc.game.on(u.dogUgcMConstans.msg.playClickSound,this.onPlayClickSound,this),cc.game.on(u.dogUgcMConstans.msg.showCreateNode,this.onShowCreateNode,this),cc.game.on(u.dogUgcMConstans.msg.showPlayNode,this.onShowPlayNode,this),cc.game.on(u.dogUgcMConstans.msg.showLevelNode,this.onShowLevelNode,this),cc.game.on(u.dogUgcMConstans.msg.showSuccessNode,this.onShowSuccessNode,this),cc.game.on(u.dogUgcMConstans.msg.showTips,this.onShowTips,this),cc.game.on(u.dogUgcMConstans.msg.showSaveTipNode,this.onShowSaveTipNode,this),cc.game.on(u.dogUgcMConstans.msg.gameWrong,this.onGameWrong,this),cc.game.on(u.dogUgcMConstans.msg.startRecord,this.onStartRecord,this),cc.game.on(u.dogUgcMConstans.msg.stopRecord,this.onStopRecord,this),cc.game.on(u.dogUgcMConstans.msg.shareRecord,this.onShareRecord,this),cc.game.on(u.dogUgcMConstans.msg.exitDogUgc,this.onExit,this),window["dogugc-game"]=this},e.prototype.onDisable=function(){cc.game.off(u.dogUgcMConstans.msg.playClickSound,this.onPlayClickSound,this),cc.game.off(u.dogUgcMConstans.msg.showCreateNode,this.onShowCreateNode,this),cc.game.off(u.dogUgcMConstans.msg.showPlayNode,this.onShowPlayNode,this),cc.game.off(u.dogUgcMConstans.msg.showLevelNode,this.onShowLevelNode,this),cc.game.off(u.dogUgcMConstans.msg.showSuccessNode,this.onShowSuccessNode,this),cc.game.off(u.dogUgcMConstans.msg.showTips,this.onShowTips,this),cc.game.off(u.dogUgcMConstans.msg.showSaveTipNode,this.onShowSaveTipNode,this),cc.game.off(u.dogUgcMConstans.msg.gameWrong,this.onGameWrong,this),cc.game.off(u.dogUgcMConstans.msg.startRecord,this.onStartRecord,this),cc.game.off(u.dogUgcMConstans.msg.stopRecord,this.onStopRecord,this),cc.game.off(u.dogUgcMConstans.msg.shareRecord,this.onShareRecord,this),cc.game.off(u.dogUgcMConstans.msg.exitDogUgc,this.onExit,this),window["dogugc-game"]=null},e.prototype.onPlayClickSound=function(){this.gamebase.playClickSound()},e.prototype.onShowCreateNode=function(t){void 0===t&&(t=!1),this.playParentNode.removeAllChildren(),this.createNode.getComponent(f.default).initData(t),this.createNode.active=!0,this.playNode.active=!1,this.levelListNode.active=!1,this.successNode.active=!1},e.prototype.onShowPlayNode=function(){this.playParentNode.removeAllChildren(),this.createNode.active=!1,this.levelListNode.active=!1,this.successNode.active=!1;var t=cc.instantiate(this.playNode);t.active=!0,this.playParentNode.addChild(t)},e.prototype.onShowLevelNode=function(){this.playParentNode.removeAllChildren(),this.createNode.active=!1,this.playNode.active=!1,this.levelListNode.active=!0,this.successNode.active=!1},e.prototype.onShowSuccessNode=function(){this.successNode.active=!0},e.prototype.onShowTips=function(t){this.tipsNode.active=!0,this.tipsNode.y=80,this.tipsNode.opacity=255,this.tipsNode.scale=.8,this.tipsNode.stopAllActions(),this.tipsNode.getChildByName("lbTip").getComponent(cc.Label).string=t,this.tipsNode.runAction(cc.sequence(cc.scaleTo(.15,1).easing(cc.easeBackOut()),cc.delayTime(1.2),cc.fadeOut(.2)))},e.prototype.onShowSaveTipNode=function(t){this.saveTipNode.active=!0,this.saveTipNode.getComponent(g.default).initData(t)},e.prototype.onGameWrong=function(){this.onShowPlayNode()},e.prototype.getShareRecordStatus=function(){return console.log("\u83b7\u53d6\u5f55\u5c4f\u72b6\u6001"),!!l.Platform.getConfig().hasRecord},e.prototype.onStartRecord=function(){console.log("## onStartRecord"),l.Platform.startRecordCap()},e.prototype.onStopRecord=function(){console.log("## onStopRecord"),l.Platform.stopRecordCap()},e.prototype.onShareRecord=function(t){console.log("## onShareRecord"),l.Platform.shareRecordCap(function(e){0==e?(p.Tip.show("\u5206\u4eab\u5f55\u5c4f\u6210\u529f\uff01"),t.active=!1):-1==e&&p.Tip.show("\u5f55\u5c4f\u65f6\u95f4\u8fc7\u77ed\uff01")})},e.prototype.onExit=function(){console.log("## onExit"),d.Scene.loadScene(s.SceneConst.MAIN)},c([v(h.default)],e.prototype,"gamebase",void 0),c([v(cc.Node)],e.prototype,"createNode",void 0),c([v(cc.Node)],e.prototype,"playNode",void 0),c([v(cc.Node)],e.prototype,"levelListNode",void 0),c([v(cc.Node)],e.prototype,"successNode",void 0),c([v(cc.Node)],e.prototype,"saveTipNode",void 0),c([v(cc.Node)],e.prototype,"tipsNode",void 0),c([v(cc.Node)],e.prototype,"playParentNode",void 0),c([y],e)}(cc.Component);r.default=_,cc._RF.pop()},{}],dogUgcMConstans:[function(t,e,o){"use strict";cc._RF.push(e,"58bbek/hNVLlIZ5j9HPHimJ","dogUgcMConstans");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.dogUgcMConstans=void 0,function(t){(function(t){t.playClickSound="dogUgc_playClickSound",t.showCreateNode="dogUgc_showCreateNode",t.showPlayNode="dogUgc_showPlayNode",t.showLevelNode="dogUgc_showLevelNode",t.showSuccessNode="dogUgc_showSuccessNode",t.clickBoomListItem="dogUgc_clickBoomListItem",t.gameWrong="dogUgc_gameWrong",t.showTips="dogUgc_showTips",t.createNewLevel="dogUgc_createNewLevel",t.delLevel="dogUgc_delLevel",t.showSaveTipNode="dogUgc_showSaveTipNode",t.updateLevel="dogUgc_updateLevel",t.replay="dogUgc_replay",t.startRecord="dogUgc_startRecord",t.stopRecord="dogUgc_stopRecord",t.shareRecord="dogUgc_shareRecord",t.exitDogUgc="dogUgc_exit"})(t.msg||(t.msg={})),t.boomCreateItemIdList={0:{size:[3,3]},1:{size:[3,3]},2:{size:[3,3]},3:{size:[1,1]},4:{size:[1,1]}}}(n.dogUgcMConstans||(n.dogUgcMConstans={})),cc._RF.pop()},{}],dogUgc_BeeThornDog:[function(t,e,o){"use strict";cc._RF.push(e,"ce8a3/WvIlNT6hrRUnOSAyp","dogUgc_BeeThornDog");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BeeThornDog"),l=i("DrawPhysicsLineGame2"),d=i("dogUgcMConstans"),p=cc._decorator,h=p.ccclass,u=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.suc=function(){this.isOver||(this.isOver=!0,this.node.getComponent(l.default).lblTime.node.active=!1,this.gameRight(1))},e.prototype.fail=function(t){void 0===t&&(t=1),this.isOver||(this.isOver=!0,this.node.getComponent(l.default).lblTime.node.active=!1,this.base.showWrong(null,t,!1),this.scheduleOnce(function(){cc.game.emit(d.dogUgcMConstans.msg.gameWrong)},t))},e.prototype.gameRight=function(t,e){var o=this;if(void 0===t&&(t=.2),this.base.isGame){if(this.base.isGame=!1,e){var n=e.parent.convertToWorldSpaceAR(e.position),i=this.base.rightNode.parent.convertToNodeSpaceAR(n);this.base.rightNode.setPosition(i)}this.scheduleOnce(function(){o.base.rightNode.active=!0,o.base.rightNode.scale=0,cc.tween(o.base.rightNode).delay(.2).call(function(){cc.audioEngine.playEffect(o.base.rightSound,!1)}).to(.3,{scale:1},{easing:cc.easing.expoOu}).delay(1).call(function(){cc.game.emit(d.dogUgcMConstans.msg.stopRecord),cc.game.emit(d.dogUgcMConstans.msg.showSuccessNode)}).start()},t)}},c([h],e)}(s.default));r.default=u,cc._RF.pop()},{}],dogUgc_createBoomListItem:[function(t,e,o){"use strict";cc._RF.push(e,"dcba947UKpKC45BFYLJHW1M","dogUgc_createBoomListItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("dogUgcMConstans"),l=cc._decorator,d=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgIcon=null,e.selectNode=null,e._mid=0,e._mSpriteFrame=null,e}return a(e,t),e.prototype.start=function(){this.setSelect(!1)},e.prototype.initData=function(t,e){this._mid=t,this._mSpriteFrame=e,this._mSpriteFrame&&(this.imgIcon.spriteFrame=this._mSpriteFrame),this.node.on(cc.Node.EventType.TOUCH_START.toString(),this.touchStart,this)},e.prototype.getId=function(){return this._mid},e.prototype.touchStart=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound),cc.game.emit(s.dogUgcMConstans.msg.clickBoomListItem,this._mid,this.node)},e.prototype.setSelect=function(t){this.selectNode.active=t},c([p(cc.Sprite)],e.prototype,"imgIcon",void 0),c([p(cc.Node)],e.prototype,"selectNode",void 0),c([d],e)}(cc.Component);r.default=h,cc._RF.pop()},{}],dogUgc_createNode:[function(t,e,o){"use strict";cc._RF.push(e,"d0ed3ifzYdMbJ1i+ppakhNY","dogUgc_createNode");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("dogUgcMConstans"),d=i("dogUgc_createBoomListItem"),p=i("dogUgc_levelData"),h=cc._decorator,u=h.ccclass,f=h.property;(function(t){t[t.create=1]="create",t[t.move=2]="move",t[t.del=3]="del"})(s||(s={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delNode=null,e.scrollView=null,e.createBoomListItem=null,e.iconSpriteFrames=[],e.gridNode=null,e.createRoleParentNode=null,e.createItems=null,e.touchNode=null,e.boomScrollView=null,e._content=null,e._items=[],e._roleList={},e._dogNode=null,e._hiveLeftNode=null,e._hiveRightNode=null,e._createLandNode=null,e._createMagmaNode=null,e._curSelectItemInfo={id:-1,node:null},e._touchBeginPos=null,e._createOldPos=null,e._row=0,e._column=0,e._createIndex=0,e._gridData=[],e._createNodeList={},e._operationStepList=[],e._canTouchRevokeFlag=!0,e._createId=-1,e._reeditFlag=!1,e._initDoneFlag=!1,e}return a(e,t),e.prototype.onLoad=function(){cc.game.on(l.dogUgcMConstans.msg.clickBoomListItem,this.onClickBoomListItem,this)},e.prototype.onDestroy=function(){cc.game.off(l.dogUgcMConstans.msg.clickBoomListItem,this.onClickBoomListItem,this)},e.prototype.start=function(){this._initDoneFlag||(this.delNode.active=!1,this.createBoomListItem.node.active=!1,this._content=this.scrollView.node.getChildByName("view").getChildByName("content"),this.initList(),this.loadList()),this._initDoneFlag=!0},e.prototype.initData=function(t){this._reeditFlag=t},e.prototype.onEnable=function(){this._items.forEach(function(t){t.setSelect(!1)}),this._initDoneFlag||(this.delNode.active=!1,this.createBoomListItem.node.active=!1,this._content=this.scrollView.node.getChildByName("view").getChildByName("content"),this.initList(),this.loadList()),this._initDoneFlag=!0,this.loadData()},e.prototype.onDisable=function(){this.unscheduleAllCallbacks()},e.prototype.initList=function(){var t=this;this._dogNode=this.createItems.getChildByName("createDog"),this._hiveLeftNode=this.createItems.getChildByName("createHiveLeft"),this._hiveRightNode=this.createItems.getChildByName("createHiveRight"),this._createLandNode=this.createItems.getChildByName("createLand"),this._createMagmaNode=this.createItems.getChildByName("createMagma"),this._dogNode.active=!1,this._hiveLeftNode.active=!1,this._hiveRightNode.active=!1,this._createLandNode.active=!1,this._createMagmaNode.active=!1;var e,o,n={0:this._dogNode,1:this._hiveLeftNode,2:this._hiveRightNode,3:this._createLandNode,4:this._createMagmaNode},i=null,r=null,a=null;for(var c in n)r=(i=(a=n[c]).getChildByName("checkGirdNode")).getChildByName("leftNode"),this._roleList[c]={node:a,checkGirdNode:i,leftNode:r};this.touchNode.on(cc.Node.EventType.TOUCH_START.toString(),this.touchStart,this),this.touchNode.on(cc.Node.EventType.TOUCH_MOVE.toString(),this.touchMove,this),this.touchNode.on(cc.Node.EventType.TOUCH_END.toString(),this.touchEnd,this),this.touchNode.on(cc.Node.EventType.TOUCH_CANCEL.toString(),this.touchEnd,this),this.touchNode._touchListener.setSwallowTouches(!1),this.gridNode.children.forEach(function(n,i){e=Math.floor(i/15),o=Math.floor(i%15),n.name=e+":"+o,t._row<e&&(t._row=e),t._column<o&&(t._column=o),t._gridData[e]||(t._gridData[e]=[]),t._gridData[e].push({name:"",value:-1}),n.on(cc.Node.EventType.TOUCH_START.toString(),t.gridTouchStart,t),n.on(cc.Node.EventType.TOUCH_MOVE.toString(),t.gridTouchMove,t),n.on(cc.Node.EventType.TOUCH_END.toString(),t.gridTouchEnd,t)}),this._row+=1,this._column+=1},e.prototype.loadList=function(){var t=l.dogUgcMConstans.boomCreateItemIdList,e=0,o=null;for(var n in t){e=Number(n);var i=cc.instantiate(this.createBoomListItem.node);this._content.addChild(i),i.active=!0,(o=i.getComponent(d.default)).initData(e,this.iconSpriteFrames[e]),this._items.push(o)}},e.prototype.loadData=function(){this._createId=-1,this.createRoleParentNode.removeAllChildren(),this._curSelectItemInfo={id:-1,node:null};for(var t=0;t<this._gridData.length;t++)for(var e=0;e<this._gridData[t].length;e++)this._gridData[t][e]={name:"",value:-1};if(this._operationStepList=[],this._reeditFlag){var o=l.dogUgcMConstans.boomCreateItemIdList,n=p.default.GetInstance().getCurCreateDataArr();if(n.length>0){var i=p.default.GetInstance().getCurLevelDataId();this._createId=i}for(var r=void 0,a=void 0,c=(t=void 0,e=void 0,0);c<n.length;c++){a=(r=n[c])[0],r[1],t=r[2],e=r[3];var s=o[a].size,d=this.gridNode.getChildByName(t+":"+e);this.createRoleNode(d,a,t,e,s,!1)}}},e.prototype.btnClick_back=function(){cc.game.emit(l.dogUgcMConstans.msg.playClickSound),cc.game.emit(l.dogUgcMConstans.msg.showSaveTipNode,"edit")},e.prototype.btnClick_clean=function(){cc.game.emit(l.dogUgcMConstans.msg.playClickSound),this._items.forEach(function(t){t.setSelect(!1)}),this.createRoleParentNode.removeAllChildren();for(var t=0;t<this._gridData.length;t++)for(var e=0;e<this._gridData[t].length;e++)this._gridData[t][e]={name:"",value:-1};this._operationStepList=[]},e.prototype.btnClick_revoke=function(){var t=this;if(cc.game.emit(l.dogUgcMConstans.msg.playClickSound),this._canTouchRevokeFlag&&(this._canTouchRevokeFlag=!1,this.scheduleOnce(function(){t._canTouchRevokeFlag=!0},.2),!(this._operationStepList.length<=0))){var e=l.dogUgcMConstans.boomCreateItemIdList,o=this._operationStepList.pop(),n=o.id;switch(o.kind){case s.create:for(var i=this.createRoleParentNode.getChildByName(o.mNodeName),r=e[n].size,a=(h=this._createNodeList[i.name]).i+r[0],c=h.j+r[1],d=h.i;d<a;d++)for(var p=h.j;p<c;p++)this._gridData[d][p]={name:"",value:-1};this._createNodeList[i.name]=null,i.removeFromParent(),this.gridDataTest();break;case s.move:var h;for(i=this.createRoleParentNode.getChildByName(o.mNodeName),r=e[n].size,a=(h=this._createNodeList[i.name]).i+r[0],c=h.j+r[1],d=h.i;d<a;d++)for(p=h.j;p<c;p++)this._gridData[d][p]={name:"",value:-1};i.position=o.oldPos;var u=o.oldI,f=o.oldJ;for(this._createNodeList[i.name]={i:u,j:f},a=u+r[0],c=f+r[1],d=u;d<a;d++)for(p=f;p<c;p++)this._gridData[d][p]={name:i.name,value:n};this.gridDataTest();break;case s.del:var g=o.i,m=o.j,y=(r=e[n].size,this.gridNode.getChildByName(g+":"+m));this.createRoleNode(y,n,g,m,r,!1,o.createName)}}},e.prototype.btnClick_create=function(){var t=this;cc.game.emit(l.dogUgcMConstans.msg.playClickSound);var e,o,n,i,r=[],a=!1,c=!1,s=0;this.createRoleParentNode.children.forEach(function(l){e=Number(l.name.substring(0,l.name.lastIndexOf(":"))),o=l.parent.convertToWorldSpaceAR(l.position),n=t._createNodeList[l.name].i,i=t._createNodeList[l.name].j,r.push([e,o,n,i]),0==e?a=!0:1!=e&&2!=e||(c=!0,s+=1)}),a?c?s>8?cc.game.emit(l.dogUgcMConstans.msg.showTips,"\u8702\u5de2\u6700\u591a\u53ea\u80fd\u521b\u5efa8\u4e2a"):(p.default.GetInstance().setCurCreateDataArr(this._createId,r),cc.game.emit(l.dogUgcMConstans.msg.showPlayNode)):cc.game.emit(l.dogUgcMConstans.msg.showTips,"\u8fd8\u6ca1\u653e\u7f6e\u8702\u5de2\u3002"):cc.game.emit(l.dogUgcMConstans.msg.showTips,"\u8fd8\u6ca1\u653e\u7f6e\u72d7\u72d7\u3002")},e.prototype.onClickBoomListItem=function(t,e){this._items.forEach(function(e){e.getId()==t?e.setSelect(!0):e.setSelect(!1)});var o=this._roleList[t].node;o.active=!0,o.opacity=0;var n=e.parent.convertToWorldSpaceAR(e.position),i=o.parent.convertToNodeSpaceAR(n),r=cc.v2(i.x-.5*e.width,i.y+.5*e.height);3!=t&&4!=t||(r=cc.v2(i.x-.2*e.width,i.y+.2*e.height)),o.position=r,this._curSelectItemInfo={id:t,node:o}},e.prototype.touchStart=function(t){this._touchBeginPos=t.getLocation()},e.prototype.touchMove=function(t){var e=t.getDelta(),o=this._curSelectItemInfo.node;if(o){o.x+=e.x,o.y+=e.y;var n=t.getLocation();(Math.abs(n.x-this._touchBeginPos.x)>15||Math.abs(n.y-this._touchBeginPos.y)>15)&&(o.opacity=255)}},e.prototype.touchEnd=function(t){if("touchNode"==t.target.name){var e=this._curSelectItemInfo.node;if(e&&e.active){var o=!1,n=t.getLocation();if((Math.abs(n.x-this._touchBeginPos.x)>15||Math.abs(n.y-this._touchBeginPos.y)>15)&&(o=!0),o){var i=this._curSelectItemInfo.id,r=this._roleList[i].leftNode,a=this.checkInGrid(r);if(a){var c=Number(a.name.substring(0,a.name.lastIndexOf(":"))),s=Number(a.name.substring(a.name.lastIndexOf(":")+1)),d=l.dogUgcMConstans.boomCreateItemIdList[i].size;if(c+d[0]<=this._row&&s+d[1]<=this._column){for(var p=!0,h=c+d[0],u=s+d[1],f=c;f<h;f++){for(var g=s;g<u;g++)if(-1!=this._gridData[f][g].value){p=!1;break}if(!p){cc.game.emit(l.dogUgcMConstans.msg.showTips,"\u4f4d\u7f6e\u91cd\u53e0\u4e86\uff0c\u8bf7\u91cd\u65b0\u786e\u5b9a\u4f4d\u7f6e");break}}p&&this.createRoleNode(a,i,c,s,d)}}}e.active=!1,e.opacity=255,this._touchBeginPos=null}}},e.prototype.checkInGrid=function(t){var e,o;t.getBoundingBoxToWorld();for(var n=null,i=0;i<this.gridNode.childrenCount;i++)if(e=(n=this.gridNode.children[i]).parent.convertToWorldSpaceAR(n.position),o=t.parent.convertToNodeSpaceAR(e),t.position.sub(o).mag()<=65)return n;return null},e.prototype.createRoleNode=function(t,e,o,n,i,r,a){void 0===r&&(r=!0),void 0===a&&(a="");var c=cc.instantiate(this._roleList[e].node);c.active=!0,c.opacity=255,this.createRoleParentNode.addChild(c);var l=t.parent.convertToWorldSpaceAR(t.position),d=c.parent.convertToNodeSpaceAR(l);c.position=d,this._createIndex+=1,c.name=""==a?e+":"+this._createIndex:a;for(var p=o+i[0],h=n+i[1],u=o;u<p;u++)for(var f=n;f<h;f++)this._gridData[u][f]={name:c.name,value:e};this._createNodeList[c.name]||(this._createNodeList[c.name]={i:o,j:n}),c.on(cc.Node.EventType.TOUCH_START.toString(),this.createTouchStart,this),c.on(cc.Node.EventType.TOUCH_MOVE.toString(),this.createTouchMove,this),c.on(cc.Node.EventType.TOUCH_END.toString(),this.createTouchEnd,this),r&&this._operationStepList.push({kind:s.create,mNodeName:c.name,id:e,i:o,j:n}),this.gridDataTest()},e.prototype.gridTouchStart=function(){},e.prototype.gridTouchMove=function(t){var e=t.getLocation(),o=this._curSelectItemInfo.id;if(3==o||4==o){for(var n=null,i=!1,r=null,a=0;a<this.gridNode.childrenCount;a++)(r=this.gridNode.children[a]).getBoundingBoxToWorld().contains(e)&&(n=r,i=!0);if(!i)return;var c=Number(n.name.substring(0,n.name.lastIndexOf(":"))),s=Number(n.name.substring(n.name.lastIndexOf(":")+1)),d=l.dogUgcMConstans.boomCreateItemIdList[o].size;if(c+d[0]<=this._row&&s+d[1]<=this._column){for(var p=!0,h=c+d[0],u=s+d[1],f=c;f<h;f++){for(var g=s;g<u;g++)if(-1!=this._gridData[f][g].value){p=!1;break}if(!p)break}p&&this.createRoleNode(n,o,c,s,d)}}},e.prototype.gridTouchEnd=function(t){var e=this._curSelectItemInfo.id;if(this._curSelectItemInfo.node){var o=t.target,n=Number(o.name.substring(0,o.name.lastIndexOf(":"))),i=Number(o.name.substring(o.name.lastIndexOf(":")+1)),r=l.dogUgcMConstans.boomCreateItemIdList[e].size;if(n+r[0]<=this._row&&i+r[1]<=this._column){for(var a=!0,c=n+r[0],s=i+r[1],d=n;d<c;d++){for(var p=i;p<s;p++)if(-1!=this._gridData[d][p].value){a=!1;break}if(!a){cc.game.emit(l.dogUgcMConstans.msg.showTips,"\u4f4d\u7f6e\u91cd\u53e0\u4e86\uff0c\u8bf7\u91cd\u65b0\u786e\u5b9a\u4f4d\u7f6e");break}}a&&this.createRoleNode(o,e,n,i,r)}else cc.game.emit(l.dogUgcMConstans.msg.showTips,"\u8d85\u51fa\u8fb9\u754c")}},e.prototype.createTouchStart=function(t){if(!this._createOldPos){var e=t.target;this._createOldPos=e.position}},e.prototype.createTouchMove=function(t){var e=t.target,o=t.getDelta();e.x+=o.x,e.y+=o.y,this.delNode.active=!0,this.boomScrollView.x=150},e.prototype.createTouchEnd=function(t){var e=t.target,o=e.getBoundingBoxToWorld(),n=this.delNode.getBoundingBoxToWorld();if(cc.Intersection.rectRect(o,n)){for(var i=Number(e.name.substring(0,e.name.lastIndexOf(":"))),r=l.dogUgcMConstans.boomCreateItemIdList[i].size,a=(w=this._createNodeList[e.name]).i+r[0],c=w.j+r[1],d=w.i;d<a;d++)for(var p=w.j;p<c;p++)this._gridData[d][p]={name:"",value:-1};var h=e.name;this._createNodeList[h]=null,e.removeFromParent(),this.gridDataTest(),this._operationStepList.push({kind:s.del,id:i,i:w.i,j:w.j,createName:h})}else{var u=e.getChildByName("checkGirdNode").getChildByName("leftNode"),f=void 0,g=this.checkInGrid(u);if(g){var m=Number(g.name.substring(0,g.name.lastIndexOf(":"))),y=Number(g.name.substring(g.name.lastIndexOf(":")+1));if(i=Number(e.name.substring(0,e.name.lastIndexOf(":"))),m+(r=l.dogUgcMConstans.boomCreateItemIdList[i].size)[0]<=this._row&&y+r[1]<=this._column){var v=!0,_=m+r[0],C=y+r[1];for(d=m;d<_;d++){for(p=y;p<C;p++)if(-1!=this._gridData[d][p].value&&this._gridData[d][p].name!=e.name){v=!1;break}if(!v){cc.game.emit(l.dogUgcMConstans.msg.showTips,"\u4f4d\u7f6e\u91cd\u53e0\u4e86\uff0c\u8bf7\u91cd\u65b0\u786e\u5b9a\u4f4d\u7f6e");break}}if(v){var w;for(a=(w=this._createNodeList[e.name]).i+r[0],c=w.j+r[1],d=w.i;d<a;d++)for(p=w.j;p<c;p++)this._gridData[d][p]={name:"",value:-1};for(a=m+r[0],c=y+r[1],d=m;d<a;d++)for(p=y;p<c;p++)this._gridData[d][p]={name:e.name,value:i};this._createNodeList[e.name]={i:m,j:y};var P=g.parent.convertToWorldSpaceAR(g.position);f=e.parent.convertToNodeSpaceAR(P),this._operationStepList.push({kind:s.move,mNodeName:e.name,id:i,i:m,j:y,oldI:w.i,oldJ:w.j,oldPos:this._createOldPos}),this.gridDataTest()}else f=this._createOldPos}else f=this._createOldPos}else f=this._createOldPos;e.position=f}this._createOldPos=null,this.delNode.active=!1,this.boomScrollView.x=0},e.prototype.gridDataTest=function(){},c([f(cc.Node)],e.prototype,"delNode",void 0),c([f(cc.ScrollView)],e.prototype,"scrollView",void 0),c([f(d.default)],e.prototype,"createBoomListItem",void 0),c([f([cc.SpriteFrame])],e.prototype,"iconSpriteFrames",void 0),c([f(cc.Node)],e.prototype,"gridNode",void 0),c([f(cc.Node)],e.prototype,"createRoleParentNode",void 0),c([f(cc.Node)],e.prototype,"createItems",void 0),c([f(cc.Node)],e.prototype,"touchNode",void 0),c([f(cc.Node)],e.prototype,"boomScrollView",void 0),c([u],e)}(cc.Component);r.default=g,cc._RF.pop()},{}],dogUgc_levelData:[function(t,e,o){"use strict";cc._RF.push(e,"599e7pViJVKNJF4EWCYqTni","dogUgc_levelData");var n=o;Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this._curCreateArr=[],this._curLevelDataId=-1,this._lastPlayGameFlag=!1,this._levelDataList={},this._levelDataId=1,this.loadData()}return t.GetInstance=function(){return t.instance||(t.instance=new t),this.instance},t.prototype.setCurCreateDataArr=function(t,e){this._curLevelDataId=t,this._curCreateArr=e},t.prototype.getCurCreateDataArr=function(){return this._curCreateArr},t.prototype.getCurLevelDataId=function(){return this._curLevelDataId},t.prototype.loadData=function(){var t=cc.sys.localStorage.getItem("dogugc_levelDataId");t&&(this._levelDataId=Number(t));var e=cc.sys.localStorage.getItem("dogugc_levelData");if(e){var o=JSON.parse(e);this._levelDataList=o}},t.prototype.saveLevelData=function(){-1!=this._curLevelDataId?this._levelDataList[this._curLevelDataId.toString()]=this._curCreateArr:(this._levelDataList[this._levelDataId.toString()]=this._curCreateArr,this._levelDataId+=1,cc.sys.localStorage.setItem("dogugc_levelDataId",this._levelDataId)),cc.sys.localStorage.setItem("dogugc_levelData",JSON.stringify(this._levelDataList))},t.prototype.getLevelData=function(){return this._levelDataList},t.prototype.delLevelDataById=function(t){this._levelDataList[t]&&(this._levelDataList[t]=null),cc.sys.localStorage.setItem("dogugc_levelData",JSON.stringify(this._levelDataList))},t.prototype.getCurLevelDataIdInfo=function(){return-1==this._curLevelDataId?{id:this._levelDataId,newLevel:1}:{id:this._curLevelDataId,newLevel:0}},t.instance=null,t}();n.default=i,cc._RF.pop()},{}],dogUgc_levelListItem:[function(t,e,o){"use strict";cc._RF.push(e,"036622Oa6tHCqBnc6wAIiCM","dogUgc_levelListItem");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("dogUgcMConstans"),l=i("dogUgc_levelData"),d=cc._decorator,p=d.ccclass,h=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelNameBg=null,e.lbLevelNum=null,e.imgIcon=null,e.btnPlay=null,e.btnCreate=null,e.bg=null,e.btnDel=null,e.iconSpriteFrame=null,e._mIndex=0,e._arr=[],e._touchBeginPos=null,e._moveFlag=!1,e}return a(e,t),e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START.toString(),this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_END.toString(),this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL.toString(),this.touchEnd,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START.toString(),this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_END.toString(),this.touchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL.toString(),this.touchEnd,this)},e.prototype.onEnable=function(){this._moveFlag=!1},e.prototype.onDisable=function(){this.bg.stopAllActions(),this.bg.x=0,this._moveFlag=!1},e.prototype.initData=function(t,e){void 0===e&&(e=[]),this._mIndex=t,this._arr=e,this.setShowByState()},e.prototype.setShowByState=function(){0==this._mIndex?(this.levelNameBg.active=!1,this.btnPlay.active=!1,this.btnCreate.active=!0):(this.imgIcon.spriteFrame=this.iconSpriteFrame,this.levelNameBg.active=!0,this.btnPlay.active=!0,this.btnCreate.active=!1,this.lbLevelNum.string=this._mIndex.toString())},e.prototype.btnClick_play=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound),l.default.GetInstance().setCurCreateDataArr(this._mIndex,this._arr),cc.game.emit(s.dogUgcMConstans.msg.showPlayNode)},e.prototype.btnClick_create=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound),cc.game.emit(s.dogUgcMConstans.msg.showCreateNode)},e.prototype.btnClick_del=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound),cc.game.emit(s.dogUgcMConstans.msg.delLevel,this._mIndex)},e.prototype.touchStart=function(t){if(cc.game.emit(s.dogUgcMConstans.msg.playClickSound),this._touchBeginPos=t.getLocation(),0==this._mIndex)return this.bg.stopAllActions(),this.bg.scale=1,void cc.tween(this.bg).to(.15,{scale:1.1}).start()},e.prototype.touchEnd=function(t){var e=this,o=t.getLocation();if(o&&o.x&&this._touchBeginPos&&this._touchBeginPos.x)return 0==this._mIndex?(this.bg.scale=1,void cc.game.emit(s.dogUgcMConstans.msg.showCreateNode)):void(this._moveFlag||0==this._mIndex||(this._touchBeginPos.x-o.x>=15?(this._moveFlag=!0,this.bg.stopAllActions(),this.btnDel.active=!0,cc.tween(this.bg).to(.2,{x:-200}).call(function(){e._moveFlag=!1}).start()):o.x-this._touchBeginPos.x>=15&&(this._moveFlag=!0,this.bg.stopAllActions(),cc.tween(this.bg).to(.2,{x:0}).call(function(){e.btnDel.active=!1,e._moveFlag=!1}).start())))},c([h(cc.Node)],e.prototype,"levelNameBg",void 0),c([h(cc.Label)],e.prototype,"lbLevelNum",void 0),c([h(cc.Sprite)],e.prototype,"imgIcon",void 0),c([h(cc.Node)],e.prototype,"btnPlay",void 0),c([h(cc.Node)],e.prototype,"btnCreate",void 0),c([h(cc.Node)],e.prototype,"bg",void 0),c([h(cc.Node)],e.prototype,"btnDel",void 0),c([h(cc.SpriteFrame)],e.prototype,"iconSpriteFrame",void 0),c([p],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],dogUgc_levelList:[function(t,e,o){"use strict";cc._RF.push(e,"baa8c+30vBDUZB+Z7U19fcv","dogUgc_levelList");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("dogUgcMConstans"),l=i("dogUgc_levelData"),d=i("dogUgc_levelListItem"),p=cc._decorator,h=p.ccclass,u=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.levelItem=null,e._view=null,e._content=null,e}return a(e,t),e.prototype.onLoad=function(){cc.game.on(s.dogUgcMConstans.msg.createNewLevel,this.onCreateNewLevel,this),cc.game.on(s.dogUgcMConstans.msg.updateLevel,this.onUpdateLevel,this),cc.game.on(s.dogUgcMConstans.msg.delLevel,this.onDelLevel,this)},e.prototype.onDestroy=function(){cc.game.off(s.dogUgcMConstans.msg.createNewLevel,this.onCreateNewLevel,this),cc.game.off(s.dogUgcMConstans.msg.updateLevel,this.onUpdateLevel,this),cc.game.off(s.dogUgcMConstans.msg.delLevel,this.onDelLevel,this)},e.prototype.start=function(){var t=this;this.levelItem.node.active=!1,this._view=this.scrollView.node.getChildByName("view"),this._content=this._view.getChildByName("content"),this.scheduleOnce(function(){t._view.setContentSize(t.scrollView.node.width,t.scrollView.node.height),t.loadList()},.12)},e.prototype.loadList=function(){var t=cc.instantiate(this.levelItem.node);this._content.addChild(t),t.active=!0,t.getComponent(d.default).initData(0);var e,o=l.default.GetInstance().getLevelData(),n=[];for(var i in o)if(o[i]){e=Number(i),n=o[i];var r=cc.instantiate(this.levelItem.node);this._content.addChild(r),r.active=!0,r.name=i,r.getComponent(d.default).initData(e,n)}},e.prototype.onCreateNewLevel=function(t){var e=l.default.GetInstance().getLevelData(),o=Number(t),n=e[t],i=cc.instantiate(this.levelItem.node);this._content.addChild(i),i.active=!0,i.name=t.toString(),i.getComponent(d.default).initData(o,n)},e.prototype.onDelLevel=function(t){var e=this._content.getChildByName(t.toString());e&&(e.removeFromParent(),l.default.GetInstance().delLevelDataById(t.toString()))},e.prototype.onUpdateLevel=function(t){var e=l.default.GetInstance().getLevelData(),o=Number(t),n=e[t];this._content.getChildByName(t.toString()).getComponent(d.default).initData(o,n)},e.prototype.btnClick_back=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound),cc.game.emit(s.dogUgcMConstans.msg.exitDogUgc)},c([u(cc.ScrollView)],e.prototype,"scrollView",void 0),c([u(d.default)],e.prototype,"levelItem",void 0),c([h],e)}(cc.Component);r.default=f,cc._RF.pop()},{}],dogUgc_playNode:[function(t,e,o){"use strict";cc._RF.push(e,"8f9d6wMS3xA47JkfONkeYQ2","dogUgc_playNode");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("DrawPhysicsLineBody"),l=i("DrawPhysicsLineGame2"),d=i("dogUgcMConstans"),p=i("dogUgc_BeeThornDog"),h=i("dogUgc_levelData"),u=cc._decorator,f=u.ccclass,g=u.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleRoot=null,e.hiveRoot=null,e.otherRoot=null,e.roleItemNode=null,e.grassSpriteFrame=null,e.magmaSpriteFrames=[],e._mdrawPhysicsLineGame2=null,e._mdrawPhysicsLineBody=null,e._roleList={},e._dogNode=null,e._hiveLeftNode=null,e._hiveRightNode=null,e._magma=null,e._land=null,e._magmaMsk=null,e._pointNode=null,e}return a(e,t),e.prototype.onLoad=function(){cc.game.on(d.dogUgcMConstans.msg.gameWrong,this.onGameWrong,this),cc.game.on(d.dogUgcMConstans.msg.replay,this.onReplay,this)},e.prototype.onDestroy=function(){cc.game.off(d.dogUgcMConstans.msg.gameWrong,this.onGameWrong,this),cc.game.off(d.dogUgcMConstans.msg.replay,this.onReplay,this)},e.prototype.start=function(){this.initList(),this.loadRole(),this.initComponent(),cc.game.emit(d.dogUgcMConstans.msg.startRecord)},e.prototype.onEnable=function(){},e.prototype.initList=function(){this._pointNode=this.node.getChildByName("pointNode"),this._pointNode.active=!1,this._dogNode=this.roleItemNode.getChildByName("dog"),this._hiveLeftNode=this.roleItemNode.getChildByName("hiveLeft"),this._hiveRightNode=this.roleItemNode.getChildByName("hiveRight"),this._magma=this.roleItemNode.getChildByName("magma"),this._magmaMsk=this.roleItemNode.getChildByName("magmaMsk"),this._land=this.roleItemNode.getChildByName("land"),this._dogNode.active=!1,this._hiveLeftNode.active=!1,this._hiveRightNode.active=!1,this._magma.active=!1,this._magmaMsk.active=!1,this._land.active=!1,this._roleList={0:this._dogNode,1:this._hiveLeftNode,2:this._hiveRightNode,3:this._land,4:this._magma},this._mdrawPhysicsLineGame2=this.getComponent(l.default),this._mdrawPhysicsLineBody=this.getComponent(s.default)},e.prototype.loadRole=function(){for(var t,e,o,n,i,r,a,c,s=h.default.GetInstance().getCurCreateDataArr(),l=[],d=null,p=null,u={},f=0;f<s.length;f++)t=(l=s[f])[0],a=l[2],c=l[3],4==t&&(u[a]||(u[a]={}),u[a][c]||(u[a][c]={}));var g,m,y={};for(f=0;f<s.length;f++)t=(l=s[f])[0],g=l[2],m=l[3],3==t&&(y[g]||(y[g]={}),y[g][m]||(y[g][m]={}));for(f=0;f<s.length;f++){switch(t=(l=s[f])[0],e=l[1],i=l[2],r=l[3],(p=cc.instantiate(this._roleList[t])).active=!0,n=[.5*p.width,.5*-p.height],t){case 0:d=this.roleRoot;break;case 1:case 2:d=this.hiveRoot;break;case 3:case 4:d=this.otherRoot,n=[0,0]}if(d.addChild(p),o=p.parent.convertToNodeSpaceAR(e),p.position=cc.v2(o.x+n[0],o.y+n[1]),4!=t&&this._mdrawPhysicsLineGame2.polyNodes.push(p),3==t&&((!y[i-1]||y[i-1]&&!y[i-1][r])&&(p.getChildByName("imgLand").getComponent(cc.Sprite).spriteFrame=this.grassSpriteFrame,p.getChildByName("upLineNode").active=!0),(!y[i+1]||y[i+1]&&!y[i+1][r])&&(p.getChildByName("downLineNode").active=!0),(!y[i]||y[i]&&!y[i][r-1])&&(p.getChildByName("leftLineNode").active=!0),(!y[i]||y[i]&&!y[i][r+1])&&(p.getChildByName("rightLineNode").active=!0)),4==t){(!u[i-1]||u[i-1]&&!u[i-1][r])&&(p.getChildByName("upLineNode").active=!0),(!u[i+1]||u[i+1]&&!u[i+1][r])&&(p.getChildByName("downLineNode").active=!0),(!u[i]||u[i]&&!u[i][r-1])&&(p.getChildByName("leftLineNode").active=!0),(!u[i]||u[i]&&!u[i][r+1])&&(p.getChildByName("rightLineNode").active=!0);var v=this.myRandom(0,this.magmaSpriteFrames.length-1);p.getChildByName("iconMagma").getComponent(cc.Sprite).spriteFrame=this.magmaSpriteFrames[v]}}},e.prototype.initComponent=function(){this.node.addComponent(p.default)},e.prototype.onGameWrong=function(){},e.prototype.btnClick_back=function(){cc.game.emit(d.dogUgcMConstans.msg.stopRecord),cc.game.emit(d.dogUgcMConstans.msg.playClickSound),this._mdrawPhysicsLineGame2.isGame=!1,cc.game.emit(d.dogUgcMConstans.msg.showSaveTipNode,"play"),this.node.destroy()},e.prototype.btnClick_recreate=function(){cc.game.emit(d.dogUgcMConstans.msg.stopRecord),cc.game.emit(d.dogUgcMConstans.msg.playClickSound),this._mdrawPhysicsLineGame2.isGame=!1,cc.game.emit(d.dogUgcMConstans.msg.showCreateNode,!0),this.node.destroy()},e.prototype.btnClick_replay=function(){cc.game.emit(d.dogUgcMConstans.msg.stopRecord),cc.game.emit(d.dogUgcMConstans.msg.playClickSound),this.onReplay()},e.prototype.onReplay=function(){this._mdrawPhysicsLineGame2&&(this._mdrawPhysicsLineGame2.isGame=!1),cc.game.emit(d.dogUgcMConstans.msg.showPlayNode),this.node.destroy()},e.prototype.myRandom=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},c([g(cc.Node)],e.prototype,"roleRoot",void 0),c([g(cc.Node)],e.prototype,"hiveRoot",void 0),c([g(cc.Node)],e.prototype,"otherRoot",void 0),c([g(cc.Node)],e.prototype,"roleItemNode",void 0),c([g(cc.SpriteFrame)],e.prototype,"grassSpriteFrame",void 0),c([g([cc.SpriteFrame])],e.prototype,"magmaSpriteFrames",void 0),c([f],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],dogUgc_saveTipNode:[function(t,e,o){"use strict";cc._RF.push(e,"298c7tWwE1OJr+kTrdU/ANt","dogUgc_saveTipNode");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("dogUgcMConstans"),l=i("dogUgc_levelData"),d=cc._decorator,p=d.ccclass,h=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.btnEdit=null,e.btnSave=null,e._str="edit",e}return a(e,t),e.prototype.initData=function(t){switch(this._str=t,this._str){case"edit":this.btnEdit.active=!0,this.btnSave.active=!1;break;case"play":this.btnEdit.active=!1,this.btnSave.active=!0}},e.prototype.onEnable=function(){this.bg.scale=0,this.bg.runAction(cc.scaleTo(.3,1).easing(cc.easeBackOut()))},e.prototype.btnClick_back=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound),this.node.active=!1,cc.game.emit(s.dogUgcMConstans.msg.showLevelNode)},e.prototype.btnClick_edit=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound),this.node.active=!1},e.prototype.btnClick_save=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound);var t=l.default.GetInstance().getCurLevelDataIdInfo();l.default.GetInstance().saveLevelData(),cc.game.emit(s.dogUgcMConstans.msg.showLevelNode),t.newLevel?cc.game.emit(s.dogUgcMConstans.msg.createNewLevel,t.id):cc.game.emit(s.dogUgcMConstans.msg.updateLevel,t.id),this.node.active=!1},c([h(cc.Node)],e.prototype,"bg",void 0),c([h(cc.Node)],e.prototype,"btnEdit",void 0),c([h(cc.Node)],e.prototype,"btnSave",void 0),c([p],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],dogUgc_successNode:[function(t,e,o){"use strict";cc._RF.push(e,"5038bLWxhNCR5qXtvEZN4Z7","dogUgc_successNode");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("dogUgcMConstans"),l=i("dogUgc_levelData"),d=cc._decorator,p=d.ccclass,h=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.btnShare=null,e}return a(e,t),e.prototype.onEnable=function(){this.bg.scale=0,this.bg.runAction(cc.scaleTo(.3,1).easing(cc.easeBackOut())),this.btnShare.active=window["dogugc-game"]._canShareRecord},e.prototype.btnClick_saveLevel=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound);var t=l.default.GetInstance().getCurLevelDataIdInfo();l.default.GetInstance().saveLevelData(),cc.game.emit(s.dogUgcMConstans.msg.showLevelNode),t.newLevel?cc.game.emit(s.dogUgcMConstans.msg.createNewLevel,t.id):cc.game.emit(s.dogUgcMConstans.msg.updateLevel,t.id)},e.prototype.btnClick_saveNext=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound);var t=l.default.GetInstance().getCurLevelDataIdInfo();l.default.GetInstance().saveLevelData(),cc.game.emit(s.dogUgcMConstans.msg.showCreateNode),t.newLevel?cc.game.emit(s.dogUgcMConstans.msg.createNewLevel,t.id):cc.game.emit(s.dogUgcMConstans.msg.updateLevel,t.id)},e.prototype.btnClick_replay=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound),this.node.active=!1,cc.game.emit(s.dogUgcMConstans.msg.replay)},e.prototype.btnClick_share=function(){cc.game.emit(s.dogUgcMConstans.msg.playClickSound),cc.game.emit(s.dogUgcMConstans.msg.shareRecord,this.btnShare)},c([h(cc.Node)],e.prototype,"bg",void 0),c([h(cc.Node)],e.prototype,"btnShare",void 0),c([p],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],doubleFingerScaleCtl:[function(t,e,o){"use strict";cc._RF.push(e,"d25bcMmkrhKYYe0Mu3UA9h1","doubleFingerScaleCtl");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.doubleFingerScaleCtl=void 0;var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.map=null,e.defaultScaling=1.1,e.minScale=1,e.maxScale=3,e.moveOffset=2,e.increaseRate=1e4,e.fingerIncreaseRate=1,e.startResetMapBool=!0,e.locked=!1,e.singleTouchCb=null,e.imgScaleCb=null,e.touchMoveCb=null,e.touchEndCb=null,e.imgScaleStopByWheelCb=null,e.doubleFingerScaleFlag=!0,e.isMoving=!1,e.mapTouchList=[],e._wheelCancelCallback=null,e._mapAutoMoveX=0,e._mapAutoMoveY=0,e._mapAutoMoveSpeed=2,e._touchMoveParentNode=null,e._setTouchMoveParentFlag=!1,e._oldTouchMoveParentNode=null,e._newTouchMoveParentNode=null,e._oldSiblingIndex=0,e.isStrict=!1,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.addEvent(),this.startResetMapBool&&this.smoothOperate(this.map,cc.Vec2.ZERO,this.defaultScaling)},e.prototype.resetMap=function(){this.smoothOperate(this.map,cc.Vec2.ZERO,this.defaultScaling)},e.prototype.setMapScale=function(t,e){this.smoothOperate(this.map,cc.Vec2.ZERO,t),this.map.position=e},e.prototype.canStartMove=function(t){var e=t.getStartLocation(),o=t.getLocation();return Math.abs(o.x-e.x)>this.moveOffset||Math.abs(o.y-e.y)>this.moveOffset},e.prototype.addEvent=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){var e=this;if(!this.locked){var o=t.getTouches();if(this.isStrict&&(o.filter(function(t){var o=cc.v2(t.getStartLocation()),n=e.node.convertToWorldSpaceAR(cc.Vec2.ZERO);return cc.rect(n.x-e.node.width/2,n.y-e.node.height/2,e.node.width,e.node.height).contains(o)}).forEach(function(t){0===e.mapTouchList.filter(function(e){return e.id===t.getID()}).length&&(e.mapTouchList[e.mapTouchList.length]={id:t.getID(),touch:t})}),o=this.mapTouchList.map(function(t){return t.touch})),o.length>=2){if(!this.doubleFingerScaleFlag)return;this.isMoving=!0;var n,i=o[0],r=o[1],a=cc.v2(i.getDelta()),c=cc.v2(r.getDelta()),s=this.map.convertToNodeSpaceAR(cc.v2(i.getLocation())),l=this.map.convertToNodeSpaceAR(cc.v2(r.getLocation())),d=s.sub(l),p=cc.v2(this.fingerIncreaseRate,this.fingerIncreaseRate),h=a.sub(c).scale(p);n=Math.abs(d.x)>Math.abs(d.y)?(d.x+h.x)/d.x*this.map.scaleX:(d.y+h.y)/d.y*this.map.scaleY;var u=l.add(cc.v2(d.x/2,d.y/2));this.imgScaleCb&&this.imgScaleCb(),this._wheelCancelCallback&&this.unschedule(this._wheelCancelCallback),this.resetMapAutoVariate(),this.smoothOperate(this.map,u,n)}else if(1===o.length&&(this.isMoving||this.canStartMove(o[0]))){this.isMoving=!0;var f=cc.v2(o[0].getDelta());this.dealMove(f,this.map,this.map.parent),this.touchMoveCb&&this.touchMoveCb()}}},this),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(!this.locked){if((this.isStrict?this.mapTouchList:t.getTouches()).length<=1){if(!this.isMoving){var e=cc.v2(t.getLocation()),o=this.map.convertToNodeSpaceAR(e);this.dealSelect(e,o)}this.isMoving=!1}this.isStrict&&this.removeTouchFromContent(t,this.mapTouchList),this.touchEndCb&&this.touchEndCb()}},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){this.locked||((this.isStrict?this.mapTouchList:t.getTouches()).length<=1&&(this.isMoving=!1),this.isStrict&&this.removeTouchFromContent(t,this.mapTouchList),this.resetMapAutoVariate(),this.touchEndCb&&this.touchEndCb())},this),this.node.on(cc.Node.EventType.MOUSE_WHEEL,function(t){if(!this.locked&&this.doubleFingerScaleFlag){this._wheelCancelCallback&&this.unschedule(this._wheelCancelCallback);var e=cc.v2(t.getLocation()),o=t.getScrollY(),n=this.map.scale+o/this.increaseRate,i=this.map,r=i.convertToNodeSpaceAR(e);this.imgScaleCb&&this.imgScaleCb(),this._wheelCancelCallback=this.wheelCancelCallback.bind(this),this.scheduleOnce(this._wheelCancelCallback,.2),this.smoothOperate(i,r,n)}},this)},e.prototype.wheelCancelCallback=function(){this.imgScaleStopByWheelCb&&this.imgScaleStopByWheelCb()},e.prototype.removeTouchFromContent=function(t,e){for(var o=t.getTouches().map(function(t){return t.getID()}),n=e.length-1;n>=0;--n)o.indexOf(e[n].id)>-1&&e.splice(n,1)},e.prototype.smoothOperate=function(t,e,o){if(this.minScale<=o&&o<=this.maxScale){var n=o-t.scaleX,i=e.scale(cc.v2(n,n)),r=cc.v3(i.x,i.y),a=t.position.sub(r),c=cc.v2(a.x,a.y),s=this.fingerIncreaseRate.toString(),l=s.split(".")[1]?s.split(".")[1].length:0,d=Math.pow(10,2+l);o=Math.floor(o*d)/d,t.scale=o,this.dealScalePos(c,t)}else o=cc.misc.clampf(o,this.minScale,this.maxScale)},e.prototype.dealScalePos=function(t,e){if(1===e.scale);else{var o=this.map.parent.convertToWorldSpaceAR(t),n=this.map.parent.convertToNodeSpaceAR(o),i=this.calculateEdge(e,this.map.parent,n);i.left>0&&(t.x-=i.left),i.right>0&&(t.x+=i.right),i.top>0&&(t.y+=i.top),i.bottom>0&&(t.y-=i.bottom)}e.position=cc.v3(t)},e.prototype.dealMove=function(t,e,o){var n=e.convertToWorldSpaceAR(cc.Vec2.ZERO),i=o.convertToNodeSpaceAR(n);i.x+=t.x,i.y+=t.y;var r=this.calculateEdge(e,o,i);r.left<=0&&r.right<=0&&(e.x+=t.x,this._touchMoveParentNode&&(this._touchMoveParentNode.x=e.x)),r.top<=0&&r.bottom<=0&&(e.y+=t.y,this._touchMoveParentNode&&(this._touchMoveParentNode.y=e.y))},e.prototype.dealSelect=function(t,e){this.resetMapAutoVariate(),this.singleTouchCb&&this.singleTouchCb(t,e)},e.prototype.calculateEdge=function(t,e,o){var n=(e.width-t.width*t.scaleX)/2,i=(e.height-t.height*t.scaleY)/2;return{left:n+o.x,right:n-o.x,top:i-o.y,bottom:i+o.y}},e.prototype.setStrictPattern=function(t){this.isStrict=t},e.prototype.getStrictPattern=function(){return this.isStrict},e.prototype.mapFollowMove=function(t,e,o){var n=o&&o.offset||e.width/4;if(this._mapAutoMoveSpeed=o&&o.moveSpeed||1,this._touchMoveParentNode=o&&o.mMoveParentNode||null,!this._setTouchMoveParentFlag){this._oldSiblingIndex=e.getSiblingIndex();var i=null;if(o&&o.mMaskNode?i=o.mMaskNode:this.node.getComponent(cc.Mask)?i=this.node:this.node.children[0]&&this.node.children[0].getComponent(cc.Mask)&&(i=this.node.children[0]),this._oldTouchMoveParentNode=e.parent,this._newTouchMoveParentNode)this._newTouchMoveParentNode.scale=this.map.scale,s=e.parent.convertToWorldSpaceAR(e.position),e.parent=null,this._newTouchMoveParentNode.addChild(e),l=this._newTouchMoveParentNode.convertToNodeSpaceAR(s),e.position=l;else{var r=new cc.Node;if(this.node.parent.addChild(r),i){r.setContentSize(i.width,i.height),r.addComponent(cc.Mask);var a=i.parent.convertToWorldSpaceAR(i.position),c=r.parent.convertToNodeSpaceAR(a);r.position=c}this._newTouchMoveParentNode=new cc.Node,r.addChild(this._newTouchMoveParentNode),this._newTouchMoveParentNode.scale=this.map.scale;var s=e.parent.convertToWorldSpaceAR(e.position);e.parent=null,this._newTouchMoveParentNode.addChild(e);var l=this._newTouchMoveParentNode.convertToNodeSpaceAR(s);e.position=l}this._setTouchMoveParentFlag=!0}var d=e.parent.convertToWorldSpaceAR(e.position),p=this.map.parent.parent.convertToWorldSpaceAR(this.map.parent.position),h=0,u=0;t.x>0&&d.x>=p.x+.5*this.map.parent.width-n?h=-t.x-t.x/e.parent.scaleX:t.x<0&&d.x<=p.x-.5*this.map.parent.width+n&&(h=-t.x-t.x/e.parent.scaleX),t.y>0&&d.y>=p.y+.5*this.map.parent.height-n/e.parent.scaleY?u=-t.y-t.y/e.parent.scaleY:t.y<0&&d.y<=p.y-.5*this.map.parent.height+n/e.parent.scaleY&&(u=-t.y-t.y/e.parent.scaleY),this._mapAutoMoveX=h,this._mapAutoMoveY=u},e.prototype.mapMove=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.dealMove(cc.v2(t,e),this.map,this.map.parent)},e.prototype.update=function(){0==this._mapAutoMoveX&&0==this._mapAutoMoveY||this.mapMove(this._mapAutoMoveX*this._mapAutoMoveSpeed,this._mapAutoMoveY*this._mapAutoMoveSpeed)},e.prototype.stopMapFollowMove=function(t){if(this._oldTouchMoveParentNode&&t){var e=t.parent.convertToWorldSpaceAR(t.position);t.parent=null,this._oldTouchMoveParentNode.addChild(t);var o=this._oldTouchMoveParentNode.convertToNodeSpaceAR(e);t.position=o,t.setSiblingIndex(this._oldSiblingIndex)}this._oldTouchMoveParentNode=null,this._setTouchMoveParentFlag=!1,this.resetMapAutoVariate()},e.prototype.resetMapAutoVariate=function(){this._setTouchMoveParentFlag||(this._mapAutoMoveX=0,this._mapAutoMoveY=0,this._touchMoveParentNode=null)},a([l({type:cc.Node,tooltip:"\u76ee\u6807\u8282\u70b9"})],e.prototype,"map",void 0),a([l({tooltip:"\u56fe\u7247\u521d\u59cb\u7f29\u653e"})],e.prototype,"defaultScaling",void 0),a([l({tooltip:"\u56fe\u7247\u7f29\u653e\u6700\u5c0fscale"})],e.prototype,"minScale",void 0),a([l({tooltip:"\u56fe\u7247\u7f29\u653e\u6700\u5927scale"})],e.prototype,"maxScale",void 0),a([l({tooltip:"\u5355\u70b9\u89e6\u6478\u5bb9\u5fcd\u8bef\u5dee"})],e.prototype,"moveOffset",void 0),a([l({tooltip:"\u6eda\u8f6e\u7f29\u653e\u6bd4\u7387"})],e.prototype,"increaseRate",void 0),a([l({displayName:"\u53cc\u6307\u7f29\u653e\u901f\u7387",max:10,min:.001})],e.prototype,"fingerIncreaseRate",void 0),a([l({tooltip:"\u5f00\u59cb\u65f6\u5019\u81ea\u52a8\u8c03\u6574\u4f4d\u7f6e"})],e.prototype,"startResetMapBool",void 0),a([l],e.prototype,"isStrict",void 0),a([s],e)}(cc.Component);i.doubleFingerScaleCtl=d,cc._RF.pop()},{}],function:[function(t,e,o){"use strict";cc._RF.push(e,"19f12v0+VZFHoY6S5x6eIhn","function");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.getServerTime=i.getClientTime=i.getNonce=i.arrSort=i.getSign=i.response=i.formatDate=i.versionFormat=void 0;var r=n("Api"),a=n("md5"),c=n("config");function s(t){var e={};return Object.keys(t).sort().forEach(function(o){e[o]=t[o]}),e}function l(){return a.md5((d()+1e3*Math.random()).toString())}function d(){return Math.round(Date.now()/1e3)}i.versionFormat=function(t){return parseInt(t.replace(".",""))},i.formatDate=function(t,e){var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12==0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"\u661f\u671f":"\u5468":"")+"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".charAt(t.getDay()))),o)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return e},i.response=function(t,e,o){return void 0===t&&(t=0),void 0===e&&(e=""),void 0===o&&(o={}),{code:t,msg:e,data:o}},i.getSign=function(t){t.timestamp=d(),t.nonce=l(),t=s(t);var e=[];for(var o in t)e.push(o+"="+t[o]);var n=e.join("&")+c.API_SECRET;return t.sign=a.md5(n),t},i.arrSort=s,i.getNonce=l,i.getClientTime=d,i.getServerTime=function(t){r.serverTime(t)},cc._RF.pop()},{}],guessSentence_answerItem:[function(t,e,o){"use strict";cc._RF.push(e,"ce56cVjhSdPbZJthRoV+3xF","guessSentence_answerItem");var n,i,r,a=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(a,"__esModule",{value:!0}),function(t){t[t.init=1]="init",t[t.waitTouch=2]="waitTouch",t[t.checkWin=3]="checkWin",t[t.win=4]="win",t[t.lose=5]="lose"}(i||(i={})),function(t){t[t.white=0]="white",t[t.yellow=1]="yellow",t[t.green=2]="green",t[t.grey=3]="grey",t[t.red=4]="red"}(r||(r={}));var l=cc._decorator,d=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutNode=null,e.lbNum=null,e.imgBgSpriteFrames=[],e._itemNodeList={},e._imgBgList={},e._lbWordList={},e._imgBgByIndexList={},e._index=1,e._curAnswerIndex=0,e._sentenceIndexArr=[],e}return c(e,t),e.prototype.onLoad=function(){for(var t,e,o=null,n=0;n<this.layoutNode.childrenCount;n++)t=(o=this.layoutNode.children[n]).name,this._itemNodeList[t]||(this._itemNodeList[t]={}),this._itemNodeList[t]=o,this._imgBgList[t]||(this._imgBgList[t]={}),this._imgBgList[t]=o.getChildByName("imgBg").getComponent(cc.Sprite),this._lbWordList[t]||(this._lbWordList[t]={}),(e=o.getChildByName("lbWord").getComponent(cc.Label)).string="",this._lbWordList[t]=e},e.prototype.initData=function(t){this._index=t,this.lbNum.string=this._index+1+"."},e.prototype.getIndex=function(){return this._index},e.prototype.addWord=function(t,e){var o=this._imgBgList[this._curAnswerIndex];if(o){o.spriteFrame=this.imgBgSpriteFrames[r.white];var n=this._lbWordList[this._curAnswerIndex];n&&(n.string=t,this._sentenceIndexArr.push(e),this._imgBgByIndexList[e]||(this._imgBgByIndexList[e]={}),this._imgBgByIndexList[e]=o,this._curAnswerIndex+=1,this.setCurWaitAnswer())}},e.prototype.setCurWaitAnswer=function(){var t=this._imgBgList[this._curAnswerIndex];t&&(t.spriteFrame=this.imgBgSpriteFrames[r.red])},e.prototype.isAnswerDone=function(){return this._curAnswerIndex>=this.getJsonLength(this._imgBgList)},e.prototype.getJsonLength=function(t){var e=0;for(var o in t)e++;return e},e.prototype.getAnswerSentenceInfo=function(){return{key:this._lbWordList[0].string,sentenceIndexArr:this._sentenceIndexArr}},e.prototype.resetWord=function(){for(var t in this._curAnswerIndex=0,this._sentenceIndexArr=[],this._imgBgList)this._imgBgList[t].spriteFrame=this.imgBgSpriteFrames[r.white];for(var t in this._lbWordList)this._lbWordList[t].string="";this.setCurWaitAnswer()},e.prototype.setRight=function(){for(var t in this._imgBgList)this._imgBgList[t].spriteFrame=this.imgBgSpriteFrames[r.green]},e.prototype.showWrong=function(t){var e,o=[];for(var n in t)switch(n){case"right":e=t[n];for(var i=0;i<e.length;i++){var a=e[i].i;this._imgBgList[a].spriteFrame=this.imgBgSpriteFrames[r.green]}break;case"wrong":for(e=t[n],i=0;i<e.length;i++)a=e[i].i,this._imgBgList[a].spriteFrame=this.imgBgSpriteFrames[r.grey];break;case"in":o=t[n]}for(i=0;i<o.length;i++)a=o[i].i,this._imgBgList[a].spriteFrame=this.imgBgSpriteFrames[r.yellow]},s([p(cc.Node)],e.prototype,"layoutNode",void 0),s([p(cc.Label)],e.prototype,"lbNum",void 0),s([p([cc.SpriteFrame])],e.prototype,"imgBgSpriteFrames",void 0),s([d],e)}(cc.Component);a.default=h,cc._RF.pop()},{}],guessSentence_wordItem:[function(t,e,o){"use strict";cc._RF.push(e,"1c736WW6+1DBYkA4iqEDsT7","guessSentence_wordItem");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgBg=null,e.lbWord=null,e.imgBgSpriteFrames=[],e._index=0,e}return r(e,t),e.prototype.initData=function(t,e){this._index=t,this.lbWord.string=e},e.prototype.getIndex=function(){return this._index},e.prototype.setGrey=function(){this.imgBg.spriteFrame=this.imgBgSpriteFrames[1]},e.prototype.setWhite=function(){this.imgBg.spriteFrame=this.imgBgSpriteFrames[0]},a([l(cc.Sprite)],e.prototype,"imgBg",void 0),a([l(cc.Label)],e.prototype,"lbWord",void 0),a([l([cc.SpriteFrame])],e.prototype,"imgBgSpriteFrames",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],guessSentence:[function(t,e,o){"use strict";cc._RF.push(e,"9be83slk/xAo7pPZsATf8D4","guessSentence");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("zqddn_level_base"),d=i("GuessSentenceConfig"),p=i("guessSentence_answerItem"),h=i("guessSentence_wordItem");(function(t){t[t.init=1]="init",t[t.waitTouch=2]="waitTouch",t[t.checkWin=3]="checkWin",t[t.win=4]="win",t[t.lose=5]="lose"})(s||(s={}));var u=cc._decorator,f=u.ccclass,g=u.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.answerItem=null,e.wordItem=null,e.wordLayoutNode=null,e.answerParentNode=null,e.tipNode=null,e.lbTip=null,e.rightSentenceStr="",e.waitSentenceNum=5,e.levelId=-3402,e.showHandFlag=!1,e.imgHand=null,e._state=s.init,e._wordItemList={},e._answerItemList={},e._levelData=null,e._wordArr=[],e._curAnswerIndex=0,e._rightSentenceStrArr=[],e}return a(e,t),e.prototype.onLoad=function(){this.setState(s.init),this.answerItem.node.active=!1,this.wordItem.node.active=!1,this._tipNodeOldPos=this.tipNode.position,this.loadItem(),this.initTouchEvent(),this.setCurWaitAnswer(),this._rightSentenceStrArr=this.rightSentenceStr.split(""),this.setState(s.waitTouch)},e.prototype.showGuide=function(){this.showHandFlag&&(this.imgHand.active=!0,this.imgHand.stopAllActions(),this.imgHand.scale=1,cc.tween(this.imgHand).repeatForever(cc.tween().to(.3,{scale:1.2}).to(.3,{scale:1})).start())},e.prototype.onDisable=function(){this.unscheduleAllCallbacks()},e.prototype.setState=function(t){this._state=t},e.prototype.loadItem=function(){this._levelData=d.GuessSentenceConfig[this.levelId],this._levelData||(this._levelData=d.GuessSentenceConfig[-3733]),this._wordArr=this._levelData.arr;for(var t=null,e=null,o=[],n=0;n<this._wordArr.length;n++){var i=this._wordArr[n];t=cc.instantiate(this.wordItem.node),this.wordLayoutNode.addChild(t),t.active=!0,t.name=n.toString(),(e=t.getComponent(h.default)).initData(n,i),this._wordItemList[n]||(this._wordItemList[n]={}),this._wordItemList[n]=e,o.push(n)}o=this.arrSort(o);for(var r=0;r<o.length;r++){var a=o[r];this._wordItemList[a]&&(this._wordItemList[a].node.parent=null,this.wordLayoutNode.addChild(this._wordItemList[a].node))}var c=null;for(n=0;n<this.waitSentenceNum;n++)t=cc.instantiate(this.answerItem.node),this.answerParentNode.addChild(t),t.active=!0,(c=t.getComponent(p.default)).initData(n),this._answerItemList[n]||(this._answerItemList[n]={}),this._answerItemList[n]=c},e.prototype.setCurWaitAnswer=function(){var t=this._curAnswerIndex,e=this._answerItemList[t];e&&e.setCurWaitAnswer()},e.prototype.initTouchEvent=function(){var t=null;for(var e in this._wordItemList)(t=this._wordItemList[e].node).on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.onTouchStart=function(t){if(this.gameBase.playClickSound(),this._state==s.waitTouch){var e=t.target;e.stopAllActions(),e.scale=1,cc.tween(e).to(.15,{scale:1.2}).to(.15,{scale:1}).start()}},e.prototype.onTouchEnd=function(t){if(this._state==s.waitTouch&&this._levelData){this.setState(s.checkWin);var e=t.target.name,o=this._wordItemList[e].getIndex(),n=this._wordArr[o];this._answerItemList[this._curAnswerIndex].addWord(n,o),this.checkWin()}},e.prototype.onTouchCancel=function(){},e.prototype.checkWin=function(){var t=this;this.setState(s.checkWin);var e=this._curAnswerIndex,o=this._answerItemList[e];if(o){if(!o.isAnswerDone())return console.log("## \u672a\u56de\u7b54\u5b8c"),void this.setState(s.waitTouch);var n=this._levelData.indexArr,i=o.getAnswerSentenceInfo(),r=n[i.key];if(!r)return this.showTipStr("\u8fd9\u4e0d\u662f\u4e00\u53e5\u8bdd"),void this.scheduleOnce(function(){o.resetWord(),t.setState(s.waitTouch)},1);for(var a,c=i.sentenceIndexArr,l=0,d=!1,p=0;p<r.length;p++){a=r[p],l=0;for(var h=0;h<a.length&&c[h]==a[h];h++)l+=1;if(l>=a.length){d=!0;break}}if(!d)return console.log("## answerArr: "+i.key+" ["+c+"]"),this.showTipStr("\u8fd9\u4e0d\u662f\u4e00\u53e5\u8bdd"),void this.scheduleOnce(function(){o.resetWord(),t.setState(s.waitTouch)},1);var u=!0,f=void 0,g=void 0,m={};for(p=0;p<this._rightSentenceStrArr.length;p++)if(f=this._rightSentenceStrArr[p],g=this._wordItemList[c[p]])if(this._wordArr[c[p]]!=f)for(g.setGrey(),u=!1,m.wrong||(m.wrong=[]),m.wrong.push({i:p,wordIndex:c[p]}),h=0;h<this._rightSentenceStrArr.length;h++){var y=this._rightSentenceStrArr[h];this._wordArr[c[p]]==y&&(m.in||(m.in=[]),m.in.push({i:p,wordIndex:c[p]}),g.setWhite())}else m.right||(m.right=[]),m.right.push({i:p,wordIndex:c[p]});if(u)return this.setState(s.win),o.setRight(),console.log("## win"),void this.gameBase.gameRight(.5);o.showWrong(m),this._curAnswerIndex+=1,this._curAnswerIndex>=this.getJsonLength(this._answerItemList)?this.gameBase.showWrong(null,.8,!0):(this.setCurWaitAnswer(),this.setState(s.waitTouch))}else this.setState(s.waitTouch)},e.prototype.showTipStr=function(t){this.tipNode.active=!0,this.tipNode.stopAllActions(),this.tipNode.position=this._tipNodeOldPos,this.tipNode.opacity=255,this.tipNode.scale=1,this.lbTip.string=t,cc.tween(this.tipNode).to(.5,{position:cc.v2(this.tipNode.x,this.tipNode.y+100)}).delay(1).to(.5,{opacity:0,scale:0}).start()},e.prototype.getJsonLength=function(t){var e=0;for(var o in t)e++;return e},e.prototype.myRandom=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.prototype.arrSort=function(t){for(var e=t.length-1;e>=0;e--){var o=Math.floor(Math.random()*(e+1)),n=t[o];t[o]=t[e],t[e]=n}return t},c([g(l.default)],e.prototype,"gameBase",void 0),c([g(p.default)],e.prototype,"answerItem",void 0),c([g(h.default)],e.prototype,"wordItem",void 0),c([g(cc.Node)],e.prototype,"wordLayoutNode",void 0),c([g(cc.Node)],e.prototype,"answerParentNode",void 0),c([g(cc.Node)],e.prototype,"tipNode",void 0),c([g(cc.Label)],e.prototype,"lbTip",void 0),c([g({tooltip:"\u6b63\u786e\u53e5\u5b50"})],e.prototype,"rightSentenceStr",void 0),c([g({tooltip:"\u53e5\u5b50\u6570"})],e.prototype,"waitSentenceNum",void 0),c([g({tooltip:"\u5173\u5361id"})],e.prototype,"levelId",void 0),c([g({tooltip:"\u662f\u5426\u6709\u5f15\u5bfc"})],e.prototype,"showHandFlag",void 0),c([g({type:cc.Node,visible:function(){return this.showHandFlag}})],e.prototype,"imgHand",void 0),c([f],e)}(cc.Component);r.default=m,cc._RF.pop()},{}],imaginationPuzzle:[function(t,e,o){"use strict";cc._RF.push(e,"24a0eVdbz9BcrnN6fVT/P9V","imaginationPuzzle");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.state=void 0;var s,l=i("zqddn_level_base"),d=cc._decorator,p=d.ccclass,h=d.property;(function(t){t[t.init=1]="init",t[t.waitTouch=2]="waitTouch",t[t.move=3]="move",t[t.checkWin=4]="checkWin",t[t.win=5]="win",t[t.lose=6]="lose"})(s=r.state||(r.state={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.gameNode=null,e.boardNode=null,e.bg=null,e.showClickHideFlag=!1,e.clickHide=null,e.clickShowNode=[],e.starParticel=null,e.winCount=6,e._touchNodes=[],e._checkNodes=[],e._oldPosInfo={},e._curTouchNode=null,e._curTouchNodeInfo={},e._curMateNode=null,e._state=s.init,e._rightInfo={},e._moveFlag=!1,e._touchCount=0,e}return a(e,t),e.prototype.onLoad=function(){if(this.setState(s.init),this.clickHide&&(this.clickHide.active=!0),this.clickShowNode)for(var t=0;t<this.clickShowNode.length;t++)this.clickShowNode[t].active=!1;for(this.starParticel.node.active=!1,t=0;t<this.boardNode.children.length;t++){var e=this.boardNode.children[t];this._touchNodes[e.name]=e,this.setOldPos(e.name,e.position.x,e.position.y)}for(var o in this._touchNodes)this._checkNodes[o]=this.gameNode.getChildByName(o);this.initTouchEvent(),this.setState(s.waitTouch)},e.prototype.setOldPos=function(t,e,o){this._oldPosInfo[t]=cc.v2(e,o)},e.prototype.onDisable=function(){this.unscheduleAllCallbacks()},e.prototype.setState=function(t){this._state=t},e.prototype.initTouchEvent=function(){var t=null;for(var e in this._touchNodes)(t=this._touchNodes[e]).on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),t._touchListener.setSwallowTouches(!1);this.clickHide&&(t=this.clickHide).on(cc.Node.EventType.TOUCH_START,this.onTouchStart2,this)},e.prototype.onTouchStart2=function(){var t=this;if(this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t._touchCount=0},.3),this._touchCount+=1,this._touchCount>=2&&(this.clickHide&&(this.clickHide.active=!1),this.clickShowNode))for(var e=0;e<this.clickShowNode.length;e++)this.clickShowNode[e].active=!0},e.prototype.onTouchStart=function(t){if(this.gameBase.playClickSound(),this._state==s.waitTouch){this._moveFlag=!1,this._curTouchNode=t.target;for(var e=[],o=t.getLocation(),n=this._curTouchNode.getComponent(cc.PolygonCollider).points,i=0;i<n.length;i++){var r=this._curTouchNode.convertToWorldSpaceAR(n[i]);e.push(r)}cc.Intersection.pointInPolygon(o,e)?(this._curTouchNodeInfo[t.target.name]={},this._curTouchNode.parent=null,this.boardNode.addChild(this._curTouchNode),this.setState(s.move),t.stopPropagation(),this.touchStartHideMask()):(this._curTouchNodeInfo[t.target.name]=null,this._curTouchNode=null)}},e.prototype.onTouchMove=function(t){if(this._curTouchNode&&this._state!=s.win&&this._curTouchNodeInfo[t.target.name]){this._moveFlag=!0;var e=t.getDelta();this._curTouchNode.x+=e.x,this._curTouchNode.y+=e.y,this.checkMate()}},e.prototype.onTouchEnd=function(){this.gotoEnd()},e.prototype.onTouchCancel=function(){this.gotoEnd()},e.prototype.gotoEnd=function(){var t=this;if(this._state!=s.win)if(this._curTouchNodeInfo={},this._curTouchNode){var e=this._curTouchNode.name,o=this._checkNodes[e];if(this._checkNodes[e])for(var n=0;n<o.children.length;n++)o.children[n].opacity=0;this._curMateNode?(this._curMateNode.name,cc.tween(this._curTouchNode).to(.2,{position:this._curMateNode.position}).call(function(){t._rightInfo[e]=1,t.checkWin()}).start()):(this._moveFlag?(this._curTouchNode.position=this._oldPosInfo[e],this._rightInfo[e]=0,this.setState(s.waitTouch)):this.checkMate()?this.setState(s.waitTouch):(this._curTouchNode.position=this._oldPosInfo[e],this._rightInfo[e]=0,this.setState(s.waitTouch)),this.checkWin()),this._curTouchNode=null,this._curMateNode=null}else this.setState(s.waitTouch)},e.prototype.checkMate=function(){this._curMateNode=null;var t=this._curTouchNode.name,e=this._checkNodes[t];if(!this._checkNodes[t])return!1;for(var o=0;o<e.children.length;o++)(a=e.children[o]).opacity=0;var n=!1,i=100,r=-1;for(o=0;o<e.children.length;o++){n=!1;var a=e.children[o],c=this._curTouchNode.position.sub(a.position).mag();if(c<=80){if(!this._moveFlag)return this._curMateNode=a,!0;for(var s=[],l=a.getComponent(cc.PolygonCollider).points,d=0;d<l.length;d++){var p=a.convertToWorldSpaceAR(l[d]);s.push(p)}var h=[];for(var u in this._touchNodes)if(u!=this._curTouchNode.name&&(!this.clickHide||this.clickHide.active||u!=this.clickHide.name)){h=[];var f=this._touchNodes[u].getComponent(cc.PolygonCollider).points;for(d=0;d<f.length;d++)p=this._touchNodes[u].convertToWorldSpaceAR(f[d]),h.push(p);if(cc.Intersection.polygonPolygon(s,h)){n=!0;break}}if(n)continue;c<i&&(i=c,r=o)}}return-1!=r&&((a=e.children[r]).opacity=70,this._curMateNode=a,!0)},e.prototype.checkWin=function(){this.setState(s.checkWin);var t=0;for(var e in this._rightInfo)1==this._rightInfo[e]&&(t+=1);t>=this.winCount?this.gotoWin():this.setState(s.waitTouch)},e.prototype.gotoWin=function(){var t=this;console.log("## win"),this.setState(s.win),this.gameBase.playRightStarSound(),this.starParticel.node.active=!0,this.starParticel.resetSystem();var e=100-this.bg.y;cc.tween(this.bg).to(.5,{position:cc.v2(this.bg.x,100)}).call(function(){t.gameBase.gameRight(.8)}).start(),cc.tween(this.boardNode).to(.5,{position:cc.v2(this.boardNode.x,e)}).start()},e.prototype.touchStartHideMask=function(){console.log("## touchStartHideMask")},c([h(l.default)],e.prototype,"gameBase",void 0),c([h(cc.Node)],e.prototype,"gameNode",void 0),c([h(cc.Node)],e.prototype,"boardNode",void 0),c([h(cc.Node)],e.prototype,"bg",void 0),c([h({tooltip:"\u662f\u5426\u6709\u663e\u793a"})],e.prototype,"showClickHideFlag",void 0),c([h({type:cc.Node,visible:function(){return this.showClickHideFlag}})],e.prototype,"clickHide",void 0),c([h({type:[cc.Node],visible:function(){return this.showClickHideFlag}})],e.prototype,"clickShowNode",void 0),c([h(cc.ParticleSystem)],e.prototype,"starParticel",void 0),c([h({tooltip:"\u9700\u8981\u5339\u914d\u7684\u603b\u6570"})],e.prototype,"winCount",void 0),c([p],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],index:[function(t,e,o){"use strict";cc._RF.push(e,"5edcc/ARhBCbq396U5dWesz","index");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("Report"),a=n("Show"),c=n("Hide"),s=n("Login"),l=n("Api"),d=n("TimeManage"),p=n("config");window.wxapi=Object.assign({},window.tt);var h=n("ReportQueue");window.reportQueue=h.default;var u=n("Params");window.params=u.default;var f=n("LocalStorage"),g=n("Logger"),m=new(function(){function t(){this._initFlag=!1,this._showFlag=!1,f.default.removeItem(d.default.lockGetFirstServerTime),c.default.hide(function(){window.reportQueue.len()>0&&(window.Logger.info("## \u5904\u7406\u9000\u51fa\u672a\u4e0a\u62a5\u4e8b\u4ef6(\u5171\u8ba1"+window.reportQueue.len()+"\u6761)"),r.default.reportQueue()),window.Logger.info("## \u9000\u51fa\u4e0a\u62a5\u5728\u7ebf\u65f6\u957f\uff0c\u5f53\u524d\u5728\u7ebf\u65f6\u957f\u4e3a\uff1a",d.default.getOnlineTime()),r.default.online(),clearInterval(window.wonder_online),window.wonder_online=null})}return t.prototype.initParams=function(t){var e=this;if(window.Logger=new g.default(p.DEFAULT_LOG_LEVEL),window.Logger.setLogLevel(t.log_level),window.Logger.info("## \u521d\u59cb\u5316\u6e20\u9053\u53c2\u6570\uff1a",t,window.params),window.params.setGameParams(t),window.tt){var o=window.tt.getLaunchOptionsSync();window.Logger.info("## \u542f\u52a8\u53c2\u6570\uff1a",o.query),window.params.setShowParams(o.query),o.query&&(o.query.promotionid?window.ad_id=o.query.promotionid:o.query.adid?window.ad_id=o.query.adid:o.query.aid&&(window.ad_id=o.query.aid),o.query.creativeid&&(window.creative_id=o.query.creativeid))}this.initReport(),this.setInterval(),a.default.show(function(){e.setInterval()})},t.prototype.setInterval=function(){window.wonder_online||(d.default.setStartClientTime(),window.wonder_online=setInterval(function(){d.default.setEndClientTime(),window.Logger.info("## \u5728\u7ebf\u65f6\u957f\u5fc3\u8df3:",d.default.getOnlineTime()),r.default.checkReportQueue(!1)},p.ONLINE_DEFAULT_INTERVAL))},t.prototype.report=function(t,e){window.tt&&r.default.other(t,e)},t.prototype.initReport=function(){window.tt&&(window.params.getUserParams("openid")?(window.openid=window.params.getUserParams("openid"),window.Logger.info("## \u68c0\u67e5\u4e0a\u6b21\u662f\u5426\u6709\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u5728\u7ebf\u65f6\u957f\u672a\u4e0a\u62a5",d.default.getOnlineTime()),d.default.getOnlineTime()>0&&r.default.online(),window.Logger.info("## \u68c0\u67e5\u4e0a\u6b21\u662f\u5426\u6709\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u4e8b\u4ef6\u961f\u5217\u672a\u4e0a\u62a5",window.reportQueue.len()),window.reportQueue.len()>0&&r.default.reportQueue(),r.default.click(),r.default.active(),r.default.userInfo()):(window.Logger.info("## \u91cd\u65b0\u8c03\u7528\u767b\u5f55\u83b7\u53d6openid"),s.default.login({success:function(t){window.Logger.info("## login: ",t),window.Logger.info("## app_name: "+window.params.getGameParams("app_name")),l.getOpenid({code:t.code,app_name:window.params.getGameParams("app_name")},function(t){0==t.data.code?(window.Logger.info("## \u83b7\u53d6openid\u6210\u529f \uff1a",t.data.data.openid),window.openid=t.data.data.openid,window.params.setUserParams({openid:t.data.data.openid}),d.default.getOnlineTime()>0&&(window.Logger.info("## \u5904\u7406\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u672a\u4e0a\u62a5\u7684\u5728\u7ebf\u65f6\u957f"),r.default.online()),window.reportQueue.len()>0&&(window.Logger.info("## \u5904\u7406\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u672a\u4e0a\u62a5\u7684\u4e8b\u4ef6\u961f\u5217"),r.default.reportQueue()),r.default.click(),r.default.active(),r.default.userInfo()):window.Logger.warn("## \u83b7\u53d6openid\u5931\u8d25\uff0c\u8fd4\u56de\u53c2\u6570\u4e3a\uff1a",t.data)},function(t){window.Logger.warn("## \u8c03\u7528\u83b7\u53d6openid\u63a5\u53e3\u5931\u8d25\uff1a",t)})},fail:function(t){window.Logger.warn("\u8c03\u7528wx.login\u5931\u8d25\uff1a",t)}})))},t.prototype.getReportList=function(){return window.reportQueue.getList()},t.prototype.getFirstReportServerTime=function(){return d.default.getFirstReportServerTime()},t.prototype.getFirstReportClientTime=function(){return d.default.getFirstReportClientTime()},t.prototype.getOnlineTime=function(){return d.default.getOnlineTime()},t}());i.default=m,cc._RF.pop()},{}],md5:[function(t,e,o){"use strict";cc._RF.push(e,"fa926G0x9VAMaJ33dh402o3","md5");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.md5=void 0,n.md5=function(t){function e(t,e){return t<<e|t>>>32-e}function o(t,e){var o,n,i,r,a;return i=2147483648&t,r=2147483648&e,a=(1073741823&t)+(1073741823&e),(o=1073741824&t)&(n=1073741824&e)?2147483648^a^i^r:o|n?1073741824&a?3221225472^a^i^r:1073741824^a^i^r:a^i^r}function n(t,e,o){return t&e|~t&o}function i(t,e,o){return t&o|e&~o}function r(t,e,o){return t^e^o}function a(t,e,o){return e^(t|~o)}function c(t,i,r,a,c,s,l){return t=o(t,o(o(n(i,r,a),c),l)),o(e(t,s),i)}function s(t,n,r,a,c,s,l){return t=o(t,o(o(i(n,r,a),c),l)),o(e(t,s),n)}function l(t,n,i,a,c,s,l){return t=o(t,o(o(r(n,i,a),c),l)),o(e(t,s),n)}function d(t,n,i,r,c,s,l){return t=o(t,o(o(a(n,i,r),c),l)),o(e(t,s),n)}function p(t){var e,o="",n="";for(e=0;3>=e;e++)o+=(n="0"+(t>>>8*e&255).toString(16)).substr(n.length-2,2);return o}var h,u,f,g,m,y,v,_,C,w;for(w=function(t){for(var e,o=t.length,n=o+8,i=16*((n-n%64)/64+1),r=new Array(i-1),a=0,c=0;o>c;)a=c%4*8,r[e=(c-c%4)/4]=r[e]|t.charCodeAt(c)<<a,c++;return a=c%4*8,r[e=(c-c%4)/4]=r[e]|128<<a,r[i-2]=o<<3,r[i-1]=o>>>29,r}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",o=0;o<t.length;o++){var n=t.charCodeAt(o);128>n?e+=String.fromCharCode(n):n>127&&2048>n?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(t)),y=1732584193,v=4023233417,_=2562383102,C=271733878,h=0;h<w.length;h+=16)u=y,f=v,g=_,m=C,y=c(y,v,_,C,w[h+0],7,3614090360),C=c(C,y,v,_,w[h+1],12,3905402710),_=c(_,C,y,v,w[h+2],17,606105819),v=c(v,_,C,y,w[h+3],22,3250441966),y=c(y,v,_,C,w[h+4],7,4118548399),C=c(C,y,v,_,w[h+5],12,1200080426),_=c(_,C,y,v,w[h+6],17,2821735955),v=c(v,_,C,y,w[h+7],22,4249261313),y=c(y,v,_,C,w[h+8],7,1770035416),C=c(C,y,v,_,w[h+9],12,2336552879),_=c(_,C,y,v,w[h+10],17,4294925233),v=c(v,_,C,y,w[h+11],22,2304563134),y=c(y,v,_,C,w[h+12],7,1804603682),C=c(C,y,v,_,w[h+13],12,4254626195),_=c(_,C,y,v,w[h+14],17,2792965006),y=s(y,v=c(v,_,C,y,w[h+15],22,1236535329),_,C,w[h+1],5,4129170786),C=s(C,y,v,_,w[h+6],9,3225465664),_=s(_,C,y,v,w[h+11],14,643717713),v=s(v,_,C,y,w[h+0],20,3921069994),y=s(y,v,_,C,w[h+5],5,3593408605),C=s(C,y,v,_,w[h+10],9,38016083),_=s(_,C,y,v,w[h+15],14,3634488961),v=s(v,_,C,y,w[h+4],20,3889429448),y=s(y,v,_,C,w[h+9],5,568446438),C=s(C,y,v,_,w[h+14],9,3275163606),_=s(_,C,y,v,w[h+3],14,4107603335),v=s(v,_,C,y,w[h+8],20,1163531501),y=s(y,v,_,C,w[h+13],5,2850285829),C=s(C,y,v,_,w[h+2],9,4243563512),_=s(_,C,y,v,w[h+7],14,1735328473),y=l(y,v=s(v,_,C,y,w[h+12],20,2368359562),_,C,w[h+5],4,4294588738),C=l(C,y,v,_,w[h+8],11,2272392833),_=l(_,C,y,v,w[h+11],16,1839030562),v=l(v,_,C,y,w[h+14],23,4259657740),y=l(y,v,_,C,w[h+1],4,2763975236),C=l(C,y,v,_,w[h+4],11,1272893353),_=l(_,C,y,v,w[h+7],16,4139469664),v=l(v,_,C,y,w[h+10],23,3200236656),y=l(y,v,_,C,w[h+13],4,681279174),C=l(C,y,v,_,w[h+0],11,3936430074),_=l(_,C,y,v,w[h+3],16,3572445317),v=l(v,_,C,y,w[h+6],23,76029189),y=l(y,v,_,C,w[h+9],4,3654602809),C=l(C,y,v,_,w[h+12],11,3873151461),_=l(_,C,y,v,w[h+15],16,530742520),y=d(y,v=l(v,_,C,y,w[h+2],23,3299628645),_,C,w[h+0],6,4096336452),C=d(C,y,v,_,w[h+7],10,1126891415),_=d(_,C,y,v,w[h+14],15,2878612391),v=d(v,_,C,y,w[h+5],21,4237533241),y=d(y,v,_,C,w[h+12],6,1700485571),C=d(C,y,v,_,w[h+3],10,2399980690),_=d(_,C,y,v,w[h+10],15,4293915773),v=d(v,_,C,y,w[h+1],21,2240044497),y=d(y,v,_,C,w[h+8],6,1873313359),C=d(C,y,v,_,w[h+15],10,4264355552),_=d(_,C,y,v,w[h+6],15,2734768916),v=d(v,_,C,y,w[h+13],21,1309151649),y=d(y,v,_,C,w[h+4],6,4149444226),C=d(C,y,v,_,w[h+11],10,3174756917),_=d(_,C,y,v,w[h+2],15,718787259),v=d(v,_,C,y,w[h+9],21,3951481745),y=o(y,u),v=o(v,f),_=o(_,g),C=o(C,m);return(p(y)+p(v)+p(_)+p(C)).toLowerCase()},cc._RF.pop()},{}],myXxtea:[function(t,e,o){"use strict";cc._RF.push(e,"3e9f8Vkkv1Fcr1phqfpUtjg","myXxtea");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.myXxtea=void 0;var i=function(){function t(){}return t.prototype.xxtea_encrypt=function(t,e){if(""==t)return"";var o=this.str2long(t,!0),n=this.str2long(e,!1);if("string"==typeof t&&(t=this.toBytes(t)),"string"==typeof e&&(e=this.toBytes(e)),null==t||0===t.length)return t;o=this.toUint32Array(t,!0),n=this.toUint32Array(e,!1);for(var i,r,a=o.length-1,c=o[a],s=o[0],l=Math.floor(6+52/(a+1)),d=0;l-- >0;){r=(d=d+2654435769&4294967295)>>>2&3;for(var p=0;p<a;p++)i=(c>>>5^(s=o[p+1])<<2)+(s>>>3^c<<4)^(d^s)+(n[3&p^r]^c),c=o[p]=o[p]+i&4294967295;i=(c>>>5^(s=o[0])<<2)+(s>>>3^c<<4)^(d^s)+(n[3&p^r]^c),c=o[a]=o[a]+i&4294967295}return this.str2Hex(this.long2str(o,!1))},t.prototype.xxtea_decrypt=function(t,e){if(""==t)return"";t=this.hex2str(t);for(var o,n,i=this.str2long(t,!1),r=this.str2long(e,!1),a=i.length-1,c=i[a-1],s=i[0],l=2654435769*Math.floor(6+52/(a+1))&4294967295;0!=l;){n=l>>>2&3;for(var d=a;d>0;d--)o=((c=i[d-1])>>>5^s<<2)+(s>>>3^c<<4)^(l^s)+(r[3&d^n]^c),s=i[d]=i[d]-o&4294967295;o=((c=i[a])>>>5^s<<2)+(s>>>3^c<<4)^(l^s)+(r[3&d^n]^c),s=i[0]=i[0]-o&4294967295,l=l-2654435769&4294967295}var p=this.toUint8Array(i,!0);return this.toString(p)},t.prototype.long2str=function(t,e){for(var o=t.length,n=4294967295&t[o-1],i=0;i<o;i++)t[i]=String.fromCharCode(255&t[i],t[i]>>>8&255,t[i]>>>16&255,t[i]>>>24&255);return e?t.join("").substring(0,n):t.join("")},t.prototype.str2long=function(t,e){for(var o=t.length,n=[],i=0;i<o;i+=4)n[i>>2]=t.charCodeAt(i)|t.charCodeAt(i+1)<<8|t.charCodeAt(i+2)<<16|t.charCodeAt(i+3)<<24;return e&&(n[n.length]=o),n},t.prototype.str2Hex=function(t){var e="",o="",n=0;do{1==(o=t.charCodeAt(n++).toString(16)).length&&(o="0"+o),e+=o}while(n<t.length);return e},t.prototype.hex2str=function(t){for(var e="",o=0;o<t.length;){var n=parseInt(t.substr(o,1),16)<<4|parseInt(t.substr(++o,1),16);n&=255,e+=String.fromCharCode(n),++o}return e},t.prototype.toUint32Array=function(t,e){var o,n=t.length,i=n>>2;0!=(3&n)&&++i,e?(o=new Array(i+1))[i]=n:o=new Uint32Array(i);for(var r=0;r<n;++r)o[r>>2]|=t[r]<<((3&r)<<3);return o},t.prototype.toUint8Array=function(t,e){var o;o=e?t[t.length-1]:t.length<<2;for(var n=new Uint8Array(o),i=0;i<o;i++)n[i]=t[i>>2]>>((3&i)<<3);return n},t.prototype.toBytes=function(t){for(var e=t.length,o=new Uint8Array(3*e),n=0,i=0;i<e;i++){var r=t.charCodeAt(i);if(r<128)o[n++]=r;else if(r<2048)o[n++]=192|r>>6,o[n++]=128|63&r;else{if(!(r<55296||r>57343)){if(i+1<e){var a=t.charCodeAt(i+1);if(r<56320&&56320<=a&&a<=57343){var c=65536+((1023&r)<<10|1023&a);o[n++]=240|c>>18,o[n++]=128|c>>12&63,o[n++]=128|c>>6&63,o[n++]=128|63&c,i++;continue}}throw new Error("Malformed string")}o[n++]=224|r>>12,o[n++]=128|r>>6&63,o[n++]=128|63&r}}return o.subarray(0,n)},t.prototype.toShortString=function(t,e){for(var o=new Array(e),n=0,i=0,r=t.length;n<e&&i<r;n++){var a=t[i++];switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o[n]=a;break;case 12:case 13:if(!(i<r))throw new Error("Unfinished UTF-8 octet sequence");o[n]=(31&a)<<6|63&t[i++];break;case 14:if(!(i+1<r))throw new Error("Unfinished UTF-8 octet sequence");o[n]=(15&a)<<12|(63&t[i++])<<6|63&t[i++];break;case 15:if(!(i+2<r))throw new Error("Unfinished UTF-8 octet sequence");var c=((7&a)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536;if(!(0<=c&&c<=1048575))throw new Error("Character outside valid Unicode range: 0x"+c.toString(16));o[n++]=c>>10&1023|55296,o[n]=1023&c|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+a.toString(16))}}return n<e&&(o=o.slice(0,n)),String.fromCharCode.apply(String,o)},t.prototype.toLongString=function(t,e){for(var o=[],n=new Array(65535),i=0,r=0,a=t.length;i<e&&r<a;i++){var c=t[r++];switch(c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[i]=c;break;case 12:case 13:if(!(r<a))throw new Error("Unfinished UTF-8 octet sequence");n[i]=(31&c)<<6|63&t[r++];break;case 14:if(!(r+1<a))throw new Error("Unfinished UTF-8 octet sequence");n[i]=(15&c)<<12|(63&t[r++])<<6|63&t[r++];break;case 15:if(!(r+2<a))throw new Error("Unfinished UTF-8 octet sequence");var s=((7&c)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536;if(!(0<=s&&s<=1048575))throw new Error("Character outside valid Unicode range: 0x"+s.toString(16));n[i++]=s>>10&1023|55296,n[i]=1023&s|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+c.toString(16))}if(i>=65534){var l=i+1;o.push(String.fromCharCode.apply(String,n.subarray(0,l))),e-=l,i=-1}}return i>0&&o.push(String.fromCharCode.apply(String,n.slice(0,i))),o.join("")},t.prototype.toString=function(t){var e=t.length;return 0===e?"":e<1e5?this.toShortString(t,e):this.toLongString(t,e)},t}();n.myXxtea=i,cc._RF.pop()},{}],path_root:[function(t,e,o){"use strict";cc._RF.push(e,"9cc32Sh49FKy4ZGI5NqoHNf","path_root");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.road_data=[],e.path_count=0,e}return r(e,t),e.prototype.onLoad=function(){var t,e=this.node.getComponent(cc.Animation).getClips()[0].curveData.paths;for(t in console.log(e),this.road_data=[],this.path_count=0,e){var o=e[t].props.position;this.gen_path_data(o)}this.path_count=this.road_data.length},e.prototype.get_path_count=function(){return this.path_count},e.prototype.get_path=function(t){return this.road_data[t]},e.prototype.gen_path_data=function(t){for(var e=null,o=null,n=null,i=null,r=[],a=0;a<t.length;a++){var c=t[a];null!==e&&r.push([o,e,e,cc.v2(c.value[0],c.value[1])]),o=cc.v2(c.value[0],c.value[1]);for(var s=0;s<c.motionPath.length;s++)n=cc.v2(c.motionPath[s][0],c.motionPath[s][1]),i=cc.v2(c.motionPath[s][2],c.motionPath[s][3]),null===e&&(e=i),r.push([o,e,i,n]),e=cc.v2(c.motionPath[s][4],c.motionPath[s][5]),o=n}for(var l=[r[0][0]],d=0;d<r.length;d++){o=r[d][0],e=r[d][1],i=r[d][2],n=r[d][3];var p=this.bezier_length(o,e,i,n)/16,h=1/(p=Math.floor(p)),u=h;for(a=0;a<p;a++){var f=o.x*(1-u)*(1-u)*(1-u)+3*e.x*u*(1-u)*(1-u)+3*i.x*u*u*(1-u)+n.x*u*u*u,g=o.y*(1-u)*(1-u)*(1-u)+3*e.y*u*(1-u)*(1-u)+3*i.y*u*u*(1-u)+n.y*u*u*u;l.push(cc.v2(f,g)),u+=h}}this.road_data.push(l)},e.prototype.bezier_length=function(t,e,o,n){for(var i=t,r=0,a=.01,c=0;c<100;c++){var s=t.x*(1-a)*(1-a)*(1-a)+3*e.x*a*(1-a)*(1-a)+3*o.x*a*a*(1-a)+n.x*a*a*a,l=t.y*(1-a)*(1-a)*(1-a)+3*e.y*a*(1-a)*(1-a)+3*o.y*a*a*(1-a)+n.y*a*a*a,d=cc.v2(s,l),p=d.sub(i);i=d,r+=p.mag(),a+=.01}return r},a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],ttPostbackCtl:[function(t,e,o){"use strict";cc._RF.push(e,"b733fCBKrtGGauvrMx54orD","ttPostbackCtl");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=n("index"),a=n("Report"),c=function(){function t(){this._sdk=r.default}return t.GetInstance=function(){return t.instance||(t.instance=new t),this.instance},t.prototype.init=function(t,e){if(window.tt){var o=t,n=e;this._sdk.initParams({app_name:o,channel:"tt_minigame",version:n,log_level:"info"})}},t.prototype.adRequest=function(t){a.default.adRequest(t)},t.prototype.adClick=function(t){a.default.adClick(t)},t.prototype.adImpression=function(t){a.default.adImpression(t)},t.prototype.adFill=function(t){a.default.adFill(t)},t.prototype.adImpressionDone=function(t){a.default.adImpressionDone(t)},t.instance=null,t}();i.default=c,cc._RF.pop()},{}],zqddn_common:[function(t,e){"use strict";cc._RF.push(e,"6c860/uFS1B1ajnSjKgoDia","zqddn_common"),cc._RF.pop()},{}],zqddn_level_baseui:[function(t,e,o){"use strict";cc._RF.push(e,"a0356s0cetI84HAOZUd83DP","zqddn_level_baseui");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dict={},e.childNum=0,e}return r(e,t),e.prototype.onLoad=function(){this.node.setContentSize(cc.winSize),this.loadAllObj(this.node)},e.prototype.loadAllObj=function(t,e){if(void 0===e&&(e=""),"_"!=t.name[0]&&-1==t.name.indexOf("copy")){var o=e,n="";this.childNum&&(o=e+t.name,this.dict[t.name]||(this.dict[t.name]=t),n=o+"/");for(var i=0;i<t.children.length;++i)this.childNum++,this.loadAllObj(t.children[i],n)}},e.prototype.addButtonListen=function(t,e,o){var n=this.dict[t];if(!n)return console.warn("\u6ca1\u6709"+t+"\u8be5\u8282\u70b9");var i=n.getComponent(cc.Button);console.log("button",i),i||n.addComponent(cc.Button);var r=n.getComponent(cc.Button);r.transition=cc.Button.Transition.SCALE,r.duration=.1,r.zoomScale=1.2,n.on("click",e,o)},a([s],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],zqddn_level_base:[function(t,e,o){"use strict";cc._RF.push(e,"50d4cOhZY5J9L910Mi/SzMv","zqddn_level_base");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rightNode=null,e.wrongNode=null,e.rightSound=null,e.wrongSound=null,e.clickSound=null,e.rightStarSound=null,e.xiuSoundAudio=null,e.wrongFrams=[],e.needClickAudioNode=[],e.moveResetNode=null,e.bgNode=[],e.isGame=!0,e.shakeOriginPos={},e.goodsStartPos=[],e.clickSoundInterval=.1,e.clickSoundTimer=0,e.isWin=!1,e.isClick=!1,e}return r(e,t),e.prototype.onLoad=function(){var t=this;if(this.rightNode.active=!1,0!==this.needClickAudioNode.length)for(var e=0;e<this.needClickAudioNode.length;e++)this.needClickAudioNode[e].on(cc.Node.EventType.TOUCH_START,this.onClickSound,this);if(this.moveResetNode)for(e=0;e<this.moveResetNode.children.length;e++)this.goodsStartPos.push(this.moveResetNode.children[e].position),this.moveResetNode.children[e].on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.moveResetNode.children[e].on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.moveResetNode.children[e].on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.moveResetNode.children[e].on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this);if(0!==this.bgNode.length)for(e=0;e<this.bgNode.length;e++)this.bgNode[e].on(cc.Node.EventType.TOUCH_START,this.onTouchStart2,this);cc.game.on("play-sound",function(e){e&&"star"==e.name&&t.playRightStarSound()},this),cc.game.on("click-sound",function(){t.playClickSound()},this)},e.prototype.onDestroy=function(){cc.game.targetOff(this)},e.prototype.onTouchStart2=function(t){this.isGame&&this.showWrong(t)},e.prototype.onTouchStart=function(){this.onClickSound()},e.prototype.onTouchMove=function(t){if(!this.isWin){var e=t.target,o=t.touch.getDelta();e.x+=o.x,e.y+=o.y}},e.prototype.onTouchEnd=function(t){if(!this.isWin){var e=t.target;cc.tween(e).to(.3,{position:this.goodsStartPos[Number(e.name)]}).start(),this.wrongNode.position=this.node.convertToNodeSpaceAR(t.getLocation()),this.showWrong()}},e.prototype.gameRight=function(t,e){var o=this;if(void 0===t&&(t=.2),this.isGame){if(this.isGame=!1,e){var n=e.parent.convertToWorldSpaceAR(e.position),i=this.rightNode.parent.convertToNodeSpaceAR(n);this.rightNode.setPosition(i)}this.scheduleOnce(function(){o.rightNode.active=!0,o.rightNode.scale=0,cc.tween(o.rightNode).delay(.2).call(function(){cc.game.emit("game_success1"),cc.audioEngine.playEffect(o.rightSound,!1)}).to(.3,{scale:1},{easing:cc.easing.expoOut}).delay(1).call(function(){cc.game.emit("game_success2")}).start()},t)}},e.prototype.showWrong=function(t,e,o,n){if(void 0===e&&(e=0),void 0===o&&(o=!1),void 0===n&&(n=0),this.isGame){if(this.wrongNode.active=!0,this.wrongNode.scale=0,this.wrongNode.stopAllActions(),cc.audioEngine.playEffect(this.wrongSound,!1),cc.tween(this.wrongNode).to(.3,{scale:1}).delay(e).to(.3,{scale:0}).start(),t){var i=cc.v2();i=t instanceof cc.Event.EventTouch?t.getLocation():t.parent.convertToWorldSpaceAR(t.position);var r=this.wrongNode.parent.convertToNodeSpaceAR(i);this.wrongNode.setPosition(r)}o&&(this.isGame=!1,this.scheduleOnce(function(){cc.game.emit("onRestartBtn")},e));var a=this.wrongFrams[n];a&&(this.wrongNode.getComponent(cc.Sprite).spriteFrame=a)}},e.prototype.onClickSound=function(){cc.audioEngine.playEffect(this.clickSound,!1)},e.prototype.regTouchEvent=function(t,e,o,n){e&&t.on(cc.Node.EventType.TOUCH_START,e,this),o&&t.on(cc.Node.EventType.TOUCH_MOVE,o,this),n&&t.on(cc.Node.EventType.TOUCH_END,n,this),n&&t.on(cc.Node.EventType.TOUCH_CANCEL,n,this)},e.prototype.playLikeAnimSound=function(){var t=this;return new Promise(function(e){var o=0;t.schedule(function(){cc.audioEngine.playEffect(t.clickSound,!1),30==++o&&e()},.1,30)})},e.prototype.shakeNode=function(t,e){void 0===e&&(e=5);var o=this.shakeOriginPos[t.uuid];o||(o=t.position,this.shakeOriginPos[t.uuid]=o),t.setPosition(o),t.stopAllActions(),cc.tween(t).by(.05,{x:-e}).by(.05,{x:e}).by(.05,{x:e}).by(.05,{x:-e}).by(.05,{x:-e}).by(.05,{x:e}).by(.05,{x:e}).by(.05,{x:-e}).start()},e.prototype.getInstance=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position),n=e.parent.convertToWorldSpaceAR(e.position);return o.sub(n).mag()},e.prototype.isIntersects=function(t,e){return t.getBoundingBoxToWorld().intersects(e.getBoundingBoxToWorld())},e.prototype.playRightStarSound=function(){cc.audioEngine.playEffect(this.rightStarSound,!1)},e.prototype.playClickSoundInterval=function(){this.clickSoundTimer>this.clickSoundInterval&&(cc.audioEngine.playEffect(this.clickSound,!1),this.clickSoundTimer=0)},e.prototype.playClickSound=function(){cc.audioEngine.playEffect(this.clickSound,!1)},e.prototype.playXiuSound=function(){cc.audioEngine.playEffect(this.xiuSoundAudio,!1)},e.prototype.update=function(t){this.clickSoundTimer+=t},e.prototype.onLongClickSound=function(){var t=this;this.isClick||(this.isClick=!0,this.onClickSound(),this.scheduleOnce(function(){t.isClick=!1},.4))},e.prototype.fadeOut=function(t,e){cc.tween(t).to(.3,{opacity:0}).call(function(){e&&e()}).start()},e.prototype.restart=function(){cc.game.emit("onRestartBtn")},a([l(cc.Node)],e.prototype,"rightNode",void 0),a([l(cc.Node)],e.prototype,"wrongNode",void 0),a([l({type:cc.AudioClip})],e.prototype,"rightSound",void 0),a([l({type:cc.AudioClip})],e.prototype,"wrongSound",void 0),a([l({type:cc.AudioClip})],e.prototype,"clickSound",void 0),a([l({type:cc.AudioClip})],e.prototype,"rightStarSound",void 0),a([l({type:cc.AudioClip})],e.prototype,"xiuSoundAudio",void 0),a([l({type:[cc.SpriteFrame],tooltip:"\u9519\u8bef\u7cbe\u7075\u5e27\uff0c\u975e\u5fc5\u987b"})],e.prototype,"wrongFrams",void 0),a([l([cc.Node])],e.prototype,"needClickAudioNode",void 0),a([l(cc.Node)],e.prototype,"moveResetNode",void 0),a([l([cc.Node])],e.prototype,"bgNode",void 0),a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],zqddn_level_template:[function(t,e,o){"use strict";cc._RF.push(e,"9f162370jlPHpDhiYf86cLM","zqddn_level_template");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("zqddn_level_base"),l=cc._decorator,d=l.ccclass,p=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),c([d],e)}(s.default));r.default=p,cc._RF.pop()},{}],zqddn_zhb_beeDogDataModifyPanel:[function(t,e,o){"use strict";cc._RF.push(e,"215e9X2zgRETK5lCpiIAe2z","zqddn_zhb_beeDogDataModifyPanel");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BaseUI"),l=i("PopupManager"),d=i("TipManager"),p=cc._decorator,h=p.ccclass,u=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$editRoot=null,e.$amountDes_lbl=null,e.$powerDes_lbl=null,e.$lineWidthDes_lbl=null,e.$amountSubBtn=null,e.$amountAddBtn=null,e.$amount_lbl=null,e.$powerSubBtn=null,e.$powerAddBtn=null,e.$power_lbl=null,e.$lineWidthSubBtn=null,e.$lineWidthAddBtn=null,e.$lineWidth_lbl=null,e.$resetBtn=null,e.$applyBtn=null,e.$closeBtn=null,e.startAmount=8,e.curAmount=8,e.maxAmount=32,e.minAmount=8,e.amountStep=1,e.amount={start:8,cur:8,max:32,min:8,step:1},e.startPower=8.5,e.curPower=8.5,e.maxPower=30,e.minPower=5,e.powerStep=.5,e.power={start:8.5,cur:8.5,max:30,min:5,step:.5},e.lineWidth={start:20,cur:20,max:30,min:5,step:1},e.powerMistakeValue=25,e}var o;return a(e,t),o=e,e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.$editRoot=this.dict.$editRoot,this.$amountSubBtn=this.dict.$amountSubBtn,this.$amountAddBtn=this.dict.$amountAddBtn,this.$powerSubBtn=this.dict.$powerSubBtn,this.$powerAddBtn=this.dict.$powerAddBtn,this.$lineWidthSubBtn=this.dict.$lineWidthSubBtn,this.$lineWidthAddBtn=this.dict.$lineWidthAddBtn,this.$resetBtn=this.dict.$resetBtn,this.$applyBtn=this.dict.$applyBtn,this.$closeBtn=this.dict.$closeBtn,this.$amountDes_lbl=this.dict.$amountDes_lbl.getComponent(cc.Label),this.$powerDes_lbl=this.dict.$powerDes_lbl.getComponent(cc.Label),this.$lineWidthDes_lbl=this.dict.$lineWidthDes_lbl.getComponent(cc.Label),this.$amount_lbl=this.dict.$amount_lbl.getComponent(cc.Label),this.$lineWidth_lbl=this.dict.$lineWidth_lbl.getComponent(cc.Label),this.$power_lbl=this.dict.$power_lbl.getComponent(cc.Label),this.addBtnOn("$amountSubBtn",this.$$amountSubBtn_te,this),this.addBtnOn("$amountAddBtn",this.$$amountAddBtn_te,this),this.addBtnOn("$powerSubBtn",this.$$powerSubBtn_te,this),this.addBtnOn("$powerAddBtn",this.$$powerAddBtn_te,this),this.addBtnOn("$lineWidthSubBtn",this.$$lineWidthSubBtn_te,this),this.addBtnOn("$lineWidthAddBtn",this.$$lineWidthAddBtn_te,this),this.addBtnOn("$resetBtn",this.$$resetBtn_te,this),this.addBtnOn("$applyBtn",this.$$applyBtn_te,this),this.addBtnOn("$closeBtn",this.$$closeBtn_te,this),this.initData(),this.initUi()},e.prototype.$$amountSubBtn_te=function(){this.amount.cur<=this.amount.min||(this.amount.cur-=this.amount.step,this.$amount_lbl.string=this.amount.cur.toString())},e.prototype.$$amountAddBtn_te=function(){this.amount.cur>=this.amount.max||(this.amount.cur+=this.amount.step,this.$amount_lbl.string=this.amount.cur.toString())},e.prototype.$$powerSubBtn_te=function(){this.power.cur<=2*this.power.min||(this.power.cur-=2*this.power.step,this.$power_lbl.string=this.power.cur.toString())},e.prototype.$$powerAddBtn_te=function(){this.power.cur>=2*this.power.max||(this.power.cur+=2*this.power.step,this.$power_lbl.string=this.power.cur.toString())},e.prototype.$$lineWidthSubBtn_te=function(){this.lineWidth.cur<=this.lineWidth.min||(this.lineWidth.cur-=this.lineWidth.step,this.$lineWidth_lbl.string=this.lineWidth.cur.toString())},e.prototype.$$lineWidthAddBtn_te=function(){this.lineWidth.cur>=this.lineWidth.max||(this.lineWidth.cur+=this.lineWidth.step,this.$lineWidth_lbl.string=this.lineWidth.cur.toString())},e.prototype.$$resetBtn_te=function(){this.amount.cur=this.amount.start,this.power.cur=2*this.power.start,this.lineWidth.cur=this.lineWidth.start,this.$amount_lbl.string=this.amount.cur.toString(),this.$power_lbl.string=this.power.cur.toString(),this.$lineWidth_lbl.string=this.lineWidth.cur.toString(),window.beeThornDogAmount=this.amount.start,window.beeThornDogPower=this.power.start,window.beeThornDogLineWidth=this.lineWidth.start},e.prototype.$$applyBtn_te=function(){window.beeThornDogAmount=this.amount.cur,window.beeThornDogPower=this.power.cur/2,window.beeThornDogLineWidth=this.lineWidth.cur,d.Tip.show("\u6570\u503c\u8bbe\u7f6e\u5df2\u751f\u6548"),this.node.destroy()},e.prototype.$$closeBtn_te=function(){l.Popup.hide()},e.prototype.initData=function(){o.inited||(o.inited=!0,window.beeThornDogAmount=this.amount.start,window.beeThornDogPower=this.power.start,window.beeThornDogLineWidth=this.lineWidth.start)},e.prototype.initUi=function(){this.amount.cur=window.beeThornDogAmount,this.power.cur=2*window.beeThornDogPower,this.lineWidth.cur=window.beeThornDogLineWidth,this.$amount_lbl.string=this.amount.cur.toString(),this.$power_lbl.string=this.power.cur.toString(),this.$lineWidth_lbl.string=this.lineWidth.cur.toString(),this.$amountDes_lbl.string="\u871c\u8702\u6570\u91cf\uff08"+this.amount.min+"~"+this.amount.max+"\uff09",this.$powerDes_lbl.string="\u871c\u8702\u529b\u91cf\uff08"+2*this.power.min+"~"+2*this.power.max+"\uff09",this.$lineWidthDes_lbl.string="\u7ebf\u6761\u539a\u5ea6\uff08"+this.lineWidth.min+"~"+this.lineWidth.max+"\uff09"},e.prototype.start=function(){},e.inited=!1,o=c([h],e)}(s.default));r.default=u,cc._RF.pop()},{}],zqddn_zhb_frameanim:[function(t,e){"use strict";cc._RF.push(e,"c82b9Cfg7BCap6raD9u2+pL","zqddn_zhb_frameanim"),cc.Class({extends:cc.Component,properties:{sprite_frames:{default:[],type:cc.SpriteFrame},duration:.1,loop:!1,play_onload:!1},onLoad:function(){this.end_func=null,this.is_playing=!1,this.play_time=0,this.sprite=this.getComponent(cc.Sprite),this.sprite||(this.sprite=this.addComponent(cc.Sprite)),this.play_onload&&(this.loop?this.play_loop():this.play_once(null))},play_loop:function(){this.sprite_frames.length<=0||(this.loop=!0,this.end_func=null,this.is_playing=!0,this.play_time=0,this.sprite.spriteFrame=this.sprite_frames[0])},play_once:function(t){this.sprite_frames.length<=0||(this.end_func=t,this.loop=!1,this.is_playing=!0,this.play_time=0,this.sprite.spriteFrame=this.sprite_frames[0])},update:function(t){if(this.is_playing){this.play_time+=t;var e=Math.floor(this.play_time/this.duration);if(this.loop){for(;e>=this.sprite_frames.length;)e-=this.sprite_frames.length,this.play_time-=this.sprite_frames.length*this.duration;this.sprite.spriteFrame=this.sprite_frames[e]}else e>=this.sprite_frames.length?(this.is_playing=!1,this.end_func&&this.end_func()):this.sprite.spriteFrame=this.sprite_frames[e]}}}),cc._RF.pop()},{}],"zqddn_zhb_level-11266":[function(t,e){"use strict";cc._RF.push(e,"06f72s3NdxMQIJkJlH66C9K","zqddn_zhb_level-11266"),cc._RF.pop()},{}],"zqddn_zhb_level-11275":[function(t,e){"use strict";cc._RF.push(e,"52629cgqXtPMIH5zJe7BMQj","zqddn_zhb_level-11275"),cc._RF.pop()},{}],"zqddn_zhb_level-13043_base":[function(t,e,o){"use strict";cc._RF.push(e,"74542+4EYBJ+aCFIEOVSRWf","zqddn_zhb_level-13043_base");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("UserConst"),l=i("UserManager"),d=i("DrawPhysicsLineContact"),p=i("AudioConst"),h=i("zqddn_level_base"),u=i("AudioManager"),f=cc._decorator,g=f.ccclass,m=f.property,y=function(){function t(){this.node=null,this.isLockHole=!1,this.isLockNail=!1,this.isNail=!1}return c([m(cc.Node)],t.prototype,"node",void 0),c([m({tooltip:"\u662f\u5426\u9501\u4f4f\u6d1e"})],t.prototype,"isLockHole",void 0),c([m({tooltip:"\u662f\u5426\u9501\u4f4f\u9489\u5b50"})],t.prototype,"isLockNail",void 0),c([m({tooltip:"\u662f\u5426\u6709\u9489\u5b50"})],t.prototype,"isNail",void 0),c([g("holeData13042")],t)}(),v=function(){function t(){this.node=null,this.tag=1,this.nails=[]}return c([m(cc.Node)],t.prototype,"node",void 0),c([m(cc.Integer)],t.prototype,"tag",void 0),c([m(cc.Node)],t.prototype,"nails",void 0),c([g("boardData13042")],t)}(),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.nailLayer=null,e.holeLayer=null,e.boardLayer=null,e.touchLayer=null,e.holeDatas=[],e.boardDatas=[],e.holes=[],e.nails=[],e.boards=[],e.locks=[],e.isEnd=!1,e.isHoldNail=!1,e.curNail=null,e.isCanTouch=!0,e.nodeFinger=null,e.guideStep=0,e._curTouchId=-1,e}return a(e,t),e.prototype.onLoad=function(){this._init()},e.prototype._init=function(){this.gameBase=this.node.getComponent(h.default),this._initPhysics(),this._initTouchLayer(),this._initHoles(),this._initBoards(),this._initFinger(),this.switchSkin()},e.prototype.switchSkin=function(){var t=l.User.get(s.UserData.useSkinIDList),e=t[1]+1,o=t[2];if(0!=t[1]){for(var n=0;n<this.holeDatas.length;n++){var i=this.holeDatas[n].node;i.name.includes("preHole")&&i.getChildByName("img")&&this.loadImg("pifu"+e+"-4",i.getChildByName("img"))}var r=cc.find("game/element/imgBg",this.node);664==r.width?this.loadImg("pifu"+e+"-3",cc.find("game/element/imgBg",this.node)):734==r.width?this.loadImg("pifu"+e+"-1",cc.find("game/element/imgBg",this.node)):this.loadImg("pifu"+e+"-2",cc.find("game/element/imgBg",this.node))}if(0!=t[2]){var a=window.coloringSpinePrefab,c=cc.instantiate(a);this.nailLayer.children.forEach(function(t){var e=t.active;t.active=!0;var n=t.getChildByName("sk").getComponent(sp.Skeleton),i=n.animation;t.active=e,n.skeletonData=c.children[o-1].getComponent(sp.Skeleton).skeletonData,n.setSkin("default"),n.defaultSkin="default",n.setAnimation(0,i,!0),n.premultipliedAlpha=!1})}},e.prototype.loadImg=function(t,e){e.active=!1,cc.resources.load("texture/board/"+t,function(t,o){if(t)return console.log(t);e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),e.active=!0})},e.prototype._initFinger=function(){if(this.nodeFinger){var t=this.nails[0],e=t.parent.convertToWorldSpaceAR(t.position),o=this.nodeFinger.parent.convertToNodeSpaceAR(e);this.nodeFinger.setPosition(o),cc.tween(this.nodeFinger).repeatForever(cc.tween().to(.2,{scale:1.2}).to(.1,{scale:1})).start()}},e.prototype._hideFinger=function(){this.nodeFinger&&(this.nodeFinger.stopAllActions(),this.nodeFinger.setScale(1),this.nodeFinger.active=!1)},e.prototype._initPhysics=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0},e.prototype._initTouchLayer=function(){var t=this;this.touchLayer.on(cc.Node.EventType.TOUCH_START,function(e){t.isEnd||-1==t._curTouchId&&(t._curTouchId=e.getID(),t.checkTouch(e.getLocation()))}),this.touchLayer.on(cc.Node.EventType.TOUCH_END,function(e){t.isEnd||e.getID()==t._curTouchId&&(t._curTouchId=-1)}),this.touchLayer.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t.isEnd||e.getID()==t._curTouchId&&(t._curTouchId=-1)})},e.prototype._initBoards=function(){var t=this;this.boardDatas.length<=0||this.boardDatas.forEach(function(e){var o=e.node,n=o.getComponent(cc.PhysicsPolygonCollider);n.tag=e.tag,n.apply();var i=o.getComponent(cc.RigidBody);i.type=cc.RigidBodyType.Dynamic,i.gravityScale=5,i.enabledContactListener=!0,e.nails.forEach(function(t){var e=t.parent.convertToWorldSpaceAR(t.position),n=o.convertToNodeSpaceAR(e),i=o.addComponent(cc.RevoluteJoint);i.connectedBody=t.getComponent(cc.RigidBody),i.anchor=n,i.apply(),t.isConnectBoard=!0,t.connectRJ_UUID.push(i.uuid)}),o.addComponent(d.default).onBeginContact=function(e,o,n){t.isEnd||(20==n.tag&&(n.node.removeComponent(cc.PhysicsPolygonCollider),n.node.removeComponent(cc.RigidBody),t.checkLock(n.node)),10!=n.tag||o.node.isEnd||(o.node.isEnd=!0,t.checkIsWin()),n.tag>0&&n.tag<10&&n.tag!=o.tag&&(e.disabled=!0))},t.boards.push(o)})},e.prototype._initHoles=function(){var t=this;this.holeDatas.length<=0||this.holeDatas.forEach(function(e){var o=e.node;o.isLock=e.isLockHole,o.isEmpty=!e.isNail;var n=o.getChildByName("imgOutLine");n&&(n.active=!0),o.getChildByName("imgLock").active=o.isLock,o.isLock&&t.locks.push(o);var i=o.getComponent(cc.PhysicsPolygonCollider);i.sensor=!0,i.apply(),o.getComponent(cc.RigidBody).type=cc.RigidBodyType.Animated;var r=o.parent.convertToWorldSpaceAR(o.position),a=t.holeLayer.convertToNodeSpaceAR(r);o.setParent(t.holeLayer),o.setPosition(a),t.holes.push(o);var c=o.getChildByName("nodeNail");if(e.isNail){c.isLock=e.isLockNail,c.connectRJ_UUID=[],c.connectHole=o,c.getChildByName("sk").getComponent(sp.Skeleton).setAnimation(0,"daiji",!0),c.getChildByName("imgLock").active=c.isLock;var s=c.getComponent(cc.PhysicsPolygonCollider);s.sensor=!1,s.apply(),c.getComponent(cc.RigidBody).type=cc.RigidBodyType.Animated;var l=c.parent.convertToWorldSpaceAR(c.position),d=t.nailLayer.convertToNodeSpaceAR(l);c.setParent(t.nailLayer),c.setPosition(d),c.isLock&&t.locks.push(c),t.nails.push(c)}else c.active=!1})},e.prototype.checkLock=function(t){if(!(this.locks.length<=0)){var e=this.locks.pop(),o=e.parent.convertToWorldSpaceAR(e.position),n=t.parent.convertToNodeSpaceAR(o);cc.tween(t).to(.1,{scale:1.2}).to(.3,{position:n}).call(function(){e.getChildByName("imgLock").scale=1.2}).delay(.3).to(.1,{scale:1}).call(function(){e.isLock=!1,e.getChildByName("imgLock").active=!1,e.getChildByName("imgLock").scale=1,t.active=!1}).start()}},e.prototype.checkTouch=function(t){this.isCanTouch&&(this.checkIsTouchNail(t)||this.checkIsTouchHole(t))},e.prototype.checkIsTouchNail=function(t){var e=null;if(this.nails.forEach(function(o){var n=o.getComponent(cc.PhysicsPolygonCollider).points;n=n.map(function(t){return o.convertToWorldSpaceAR(t)}),cc.Intersection.pointInPolygon(t,n)&&(e=o)}),!e)return!1;if(0==this.guideStep&&this.node.getChildByName("sz")&&(this.guideStep=1,this.node.getChildByName("sz").position=cc.v3(35.674,191,0)),this._hideFinger(),e.isLock)this.isHoldNail&&this.curNail.isRise&&(this.curNail.zIndex=0,(o=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),o.addAnimation(0,"daiji",!0),this.curNail.isRise=!1,this.isHoldNail=!1,this.curNail=null);else if(this.isHoldNail)if(e.isRise){var o;e.isRise=!1,this.curNail=null,this.isHoldNail=!1,(o=e.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),o.addAnimation(0,"daiji",!0),e.zIndex=0}else{var n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton);n.setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.curNail.isRise=!1,this.curNail.zIndex=0,this.curNail=e,e.isRise=!0,e.getChildByName("sk").getComponent(sp.Skeleton).setAnimation(0,"baqi",!1),e.zIndex=9999,this.hammerIsTouchHole(e)}else e.isRise||(e.isRise=!0,this.isHoldNail=!0,this.curNail=e,(o=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"baqi",!1),e.zIndex=9999),this.hammerIsTouchHole(e);return!0},e.prototype.hammerIsTouchHole=function(t){u.Audio.playEffect(p.AudioConst.CLICK_DINGZI),1==l.User.get_hammer("hammer")&&(t.active=!1,t.connectHole.isEmpty=!0,t.connectHole=r,t.setPosition(this.curNail.parent.convertToNodeSpaceAR(2e4)),t.removeFromParent(),l.User.set_hammer(0),cc.game.emit("chuiziBtn"))},e.prototype.checkIsTouchHole=function(t){var e=this,o=null;if(this.holes.forEach(function(e){var n=e.getComponent(cc.PhysicsPolygonCollider).points;n=n.map(function(t){return e.convertToWorldSpaceAR(t)}),cc.Intersection.pointInPolygon(t,n)&&(o=e)}),1==this.guideStep&&(this.node.getChildByName("sz").active=!1),!o)return!1;if(o.isLock)return this.isHoldNail&&(this.curNail.zIndex=0,this.curNail.isRise=!1,(n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.isHoldNail=!1,this.curNail=null),!1;if(!o.isEmpty)return!1;if(!this.isHoldNail)return!1;var n,i=this.checkHoleCanSet(o),r=i.result,a=i.touchBoards;if(0==r)return this.isHoldNail&&(this.curNail.zIndex=0,this.curNail.isRise=!1,u.Audio.playEffect(p.AudioConst.CLICK_DINGZICUOWU),(n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.isHoldNail=!1,this.curNail=null),!1;if(a.length>0){var c=o.parent.convertToWorldSpaceAR(o.position),s=this.curNail.parent.convertToNodeSpaceAR(c),l=this.curNail.getComponent(cc.PhysicsPolygonCollider);l.sensor=!0,l.apply(),this.curNail.zIndex=0;var d=this.curNail.getChildByName("sk").getComponent(sp.Skeleton),h=d.node.parent.convertToWorldSpaceAR(d.node.position),f=this.nailLayer.convertToNodeSpaceAR(h);d.node.setParent(this.nailLayer),d.node.setPosition(f),d.node.zIndex=9999;var g=this.nailLayer.convertToNodeSpaceAR(c);return this.isCanTouch=!1,cc.tween(d.node).to(.5,{position:g}).call(function(){e.curNail.active=!1,e.curNail.setPosition(s),e.curNail.active=!0,e.curNail.connectHole.isEmpty=!0,e.curNail.connectHole=o,o.isEmpty=!1,d.node.setParent(e.curNail),d.node.setPosition(cc.v2(0,0));var t=o.getChildByName("imgOutLine");t&&(t.active=!1),e.curNail.isRise=!1,e.isHoldNail=!1,a.forEach(function(t){var o=e.curNail.parent.convertToWorldSpaceAR(e.curNail.position),n=t.convertToNodeSpaceAR(o),i=t.addComponent(cc.RevoluteJoint);i.connectedBody=e.curNail.getComponent(cc.RigidBody),i.anchor=n,i.apply(),e.curNail.isConnectBoard=!0,e.curNail.connectRJ_UUID.push(i.uuid)}),d.setAnimation(0,"charu",!1),d.addAnimation(0,"daiji",!0),e.isCanTouch=!0,l.sensor=!1,l.apply()}).start(),!0}var m=o.parent.convertToWorldSpaceAR(o.position),y=this.curNail.parent.convertToNodeSpaceAR(m),v=this.curNail.getComponent(cc.PhysicsPolygonCollider);v.sensor=!0,v.apply(),this.curNail.zIndex=0;var _=this.curNail.getChildByName("sk").getComponent(sp.Skeleton),C=_.node.parent.convertToWorldSpaceAR(_.node.position),w=this.nailLayer.convertToNodeSpaceAR(C);_.node.setParent(this.nailLayer),_.node.setPosition(w),_.node.zIndex=9999,this.isCanTouch=!1;var P=this.nailLayer.convertToNodeSpaceAR(m);return cc.tween(_.node).to(.5,{position:P}).call(function(){e.curNail.active=!1,e.curNail.setPosition(y),e.curNail.active=!0,e.curNail.connectHole.isEmpty=!0,e.curNail.connectHole=o,o.isEmpty=!1,_.node.setParent(e.curNail),_.node.setPosition(cc.v2(0,0));var t=o.getChildByName("imgOutLine");t&&(t.active=!1),e.curNail.isRise=!1,e.isHoldNail=!1,_.setAnimation(0,"charu",!1),_.setEndListener(function(){e.curNail.isConnectBoard&&e.boards.forEach(function(t){for(var o=t.getComponents(cc.RevoluteJoint),n=0;n<o.length;n++)for(var i=0;i<e.curNail.connectRJ_UUID.length;i++)o[n].uuid==e.curNail.connectRJ_UUID[i]&&t.removeComponent(o[n])}),_.setEndListener(null)}),_.addAnimation(0,"daiji",!0),e.isCanTouch=!0,v.sensor=!1,v.apply()}).start(),!0},e.prototype.checkHoleCanSet=function(t){var e=t.getComponent(cc.PhysicsPolygonCollider).points;e=e.map(function(e){return t.convertToWorldSpaceAR(e)});var o=[],n=0,i=0;return this.boards.forEach(function(t){var r=t.getComponent(cc.PhysicsPolygonCollider).points;if(r=r.map(function(e){return t.convertToWorldSpaceAR(e)}),cc.Intersection.polygonPolygon(e,r)){n++;var a=t.getChildByName("holes");if(!a)return;a.children.forEach(function(n){for(var r=n.getComponent(cc.PolygonCollider).points,a=r.length,c=0,s=0;s<r.length;s++){var l=n.convertToWorldSpaceAR(r[s]);cc.Intersection.pointInPolygon(l,e)&&c++}c>=.8*a&&(i++,o.push(t))})}}),{result:n<=0||n<=i,touchBoards:o}},e.prototype.checkIsWin=function(){var t=this;if(!this.isEnd){var e=!0;this.boards.forEach(function(t){t.isEnd||(e=!1)}),e&&(this.isEnd=!0,this.scheduleOnce(function(){t.gameBase.gameRight()},1))}},c([m(cc.Node)],e.prototype,"nailLayer",void 0),c([m(cc.Node)],e.prototype,"holeLayer",void 0),c([m(cc.Node)],e.prototype,"boardLayer",void 0),c([m(cc.Node)],e.prototype,"touchLayer",void 0),c([m([y])],e.prototype,"holeDatas",void 0),c([m([v])],e.prototype,"boardDatas",void 0),c([m(cc.Node)],e.prototype,"nodeFinger",void 0),c([g],e)}(cc.Component);r.default=_,cc._RF.pop()},{}],"zqddn_zhb_level-13209_base":[function(t,e,o){"use strict";cc._RF.push(e,"51972vJTCNIqJIwxXEw8FFh","zqddn_zhb_level-13209_base");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),n("LevelUtil"),n("zqddn_level_base");var r,a,c=n("zqddn_level_baseui"),s=cc._decorator;s.ccclass,s.property,function(t){t[t.none=0]="none",t[t.init=1]="init",t[t.waitTouch=2]="waitTouch",t[t.checkWin=3]="checkWin",t[t.over=4]="over"}(r||(r={})),function(t){t[t["\u4e0a"]=0]="\u4e0a",t[t["\u4e0b"]=1]="\u4e0b",t[t["\u5de6"]=2]="\u5de6",t[t["\u53f3"]=3]="\u53f3"}(a||(a={})),Symbol(),Symbol(),Symbol(),Symbol(),Symbol(),Symbol();var l=void c.default;i.default=l,cc._RF.pop()},{}],"zqddn_zhb_level-13209":[function(t,e){"use strict";cc._RF.push(e,"d6caaR3+1dCg6TzsA5YEJMS","zqddn_zhb_level-13209"),cc._RF.pop()},{}],"zqddn_zhb_level-13700":[function(t,e,o){"use strict";cc._RF.push(e,"c6a84ucG2hPkpyIXvjf7TkX","zqddn_zhb_level-13700");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.state=void 0;var s,l=i("zqddn_level_base"),d=cc._decorator,p=d.ccclass,h=d.property;(function(t){t[t.init=0]="init",t[t.waitTouch=1]="waitTouch",t[t.checkWin=2]="checkWin",t[t.win=3]="win",t[t.lose=4]="lose",t[t.moving=5]="moving"})(s=r.state||(r.state={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.point=null,e.graphics=null,e.image=null,e.effectLayer=null,e.oneByOneShow=!1,e.shiningParticle=null,e.guideHand=null,e._state=s.init,e._color=[cc.color().fromHEX("#2561b2"),cc.color().fromHEX("#BC6C0E")],e._drawPoints=[],e._lastPoints=null,e._linkNum=0,e._curInPoint=null,e}return a(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;this.point.children.forEach(function(e,o){e.children[0].getComponent(cc.Label).string=e.name,t.oneByOneShow&&o>=2&&(e.children[0].active=!1)}),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.guideHand&&this.showGuideAnimAction()},e.prototype.start=function(){this.state=s.waitTouch},e.prototype.onTouchStart=function(t){if(this.state==s.waitTouch){this.gameBase.playClickSound(),this.guideHand&&this.stopGuideAnimAction();var e=t.getLocation(),o=this.graphics.node.parent.convertToNodeSpaceAR(e);return cc.Intersection.pointInPolygon(e,this.getWPosByPolygon(this.point.children[0].getComponent(cc.PolygonCollider)))?(this._drawPoints.push(e),this.graphics.moveTo(o.x,o.y),this.linePoint(),void(this.state=s.moving)):void 0}},e.prototype.onTouchMove=function(t){if(this.state==s.moving&&(0!=t.getDeltaX()||0!=t.getDeltaY())){for(var e=t.getLocation(),o=0;o<this.point.children.length;o++){var n=this.point.children[o];if(cc.Intersection.pointInPolygon(e,this.getWPosByPolygon(n.getComponent(cc.PolygonCollider)))&&this._curInPoint&&this._curInPoint!=n)return void this.lose(t)}if(this._curInPoint&&!cc.Intersection.pointInPolygon(e,this.getWPosByPolygon(this._curInPoint.getComponent(cc.PolygonCollider)))&&(this._curInPoint=null),!this._curInPoint)if(this.checkCross(e,this._lastPoints)&&null!=this._lastPoints)this.lose(t);else{null==this._lastPoints?this._drawPoints.push(e):this._drawPoints.push(this._lastPoints);var i=this.graphics.node.parent.convertToNodeSpaceAR(e);for(this.graphics.lineTo(i.x,i.y),this.graphics.stroke(),this.graphics.moveTo(i.x,i.y),o=0;o<this.point.children.length;o++)if(n=this.point.children[o],cc.Intersection.pointInPolygon(e,this.getWPosByPolygon(n.getComponent(cc.PolygonCollider)))){if(this._linkNum==o){this.linePoint();break}return void this.lose(t)}this._lastPoints=e}}},e.prototype.onTouchEnd=function(t){this.state==s.moving&&this.lose(t)},e.prototype.linePoint=function(){var t=this.point.children[this._linkNum];this._curInPoint=t,t.getComponent(cc.Sprite).spriteFrame=this.image,t.children[0].getComponent(cc.LabelOutline).color=this._color[1],this.showEffect(t),this._linkNum++,this._linkNum>=this.point.childrenCount?this.win():this.oneByOneShow&&this._linkNum>=2&&(this.point.children[this._linkNum].children[0].active=!0)},e.prototype.checkCross=function(t,e){if(this._drawPoints.length>=3)for(var o=0;o<this._drawPoints.length;o++){var n=this._drawPoints[o],i=this._drawPoints[o+1];if(i&&cc.Intersection.lineLine(t,e,n,i))return!0}return!1},e.prototype.showEffect=function(t,e){void 0===e&&(e=!1);var o=2*t.scaleX,n=cc.instantiate(t);n.parent=this.effectLayer,n.setPosition(t.position),n.opacity=150,n.scaleX=t.scaleX,n.scaleY=t.scaleY,this.gameBase.playXiuSound(),cc.tween(n).to(.5,{opacity:0,scaleX:o,scaleY:2}).call(function(){n.removeFromParent(!0)}).start()},e.prototype.win=function(){this.state!=s.lose&&this.state!=s.win&&(this.state=s.win,this.gameBase.playRightStarSound(),this.shiningParticle&&(this.shiningParticle.node.active=!0,this.shiningParticle.resetSystem()),this.gameBase.gameRight(0))},e.prototype.lose=function(t,e){if(void 0===e&&(e=!0),this.state!=s.lose&&this.state!=s.win)if(e&&(this.state=s.lose),t)if(t instanceof cc.Node){var o=cc.instantiate(t);o.x+=70,o.y-=70,o.parent=t.parent,o.active=!1,this.gameBase.showWrong(o,1,e),o.destroy()}else this.gameBase.showWrong(t,1,e);else this.gameBase.showWrong(null,1,e)},e.prototype.showGuideAnimAction=function(){var t=this;this.guideHand.active=!0,this.guideHand.stopAllActions();var e=cc.v2(250,250);cc.tween(this.guideHand).repeatForever(cc.tween().call(function(){t.guideHand.position=cc.v2(-160,250)}).delay(.3).to(1,{position:e}).delay(1)).start()},e.prototype.stopGuideAnimAction=function(){this.guideHand.stopAllActions(),this.guideHand.active=!1},e.prototype.getWPosByPolygon=function(t){for(var e=t.points,o=[],n=0;n<e.length;n++){var i=cc.v2(e[n].x+t.offset.x,e[n].y+t.offset.y),r=t.node.convertToWorldSpaceAR(i);o.push(r)}return o},c([h(l.default)],e.prototype,"gameBase",void 0),c([h(cc.Node)],e.prototype,"point",void 0),c([h(cc.Graphics)],e.prototype,"graphics",void 0),c([h(cc.SpriteFrame)],e.prototype,"image",void 0),c([h(cc.Node)],e.prototype,"effectLayer",void 0),c([h({displayName:"\u662f\u5426\u9010\u4e2a\u663e\u793a"})],e.prototype,"oneByOneShow",void 0),c([h(cc.ParticleSystem)],e.prototype,"shiningParticle",void 0),c([h(cc.Node)],e.prototype,"guideHand",void 0),c([p],e)}(cc.Component);r.default=u,cc._RF.pop()},{}],"zqddn_zhb_level-14544_base":[function(t,e,o){"use strict";cc._RF.push(e,"daba9okSC5ENaOJZ2rKmRAN","zqddn_zhb_level-14544_base");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("UserConst"),l=i("UserManager"),d=i("DrawPhysicsLineContact"),p=i("AudioConst"),h=i("zqddn_level_base"),u=i("AudioManager"),f=cc._decorator,g=f.ccclass,m=f.property,y=function(){function t(){this.node=null,this.isLockHole=!1,this.isLockNail=!1,this.isNail=!1}return c([m(cc.Node)],t.prototype,"node",void 0),c([m({tooltip:"\u662f\u5426\u9501\u4f4f\u6d1e"})],t.prototype,"isLockHole",void 0),c([m({tooltip:"\u662f\u5426\u9501\u4f4f\u9489\u5b50"})],t.prototype,"isLockNail",void 0),c([m({tooltip:"\u662f\u5426\u6709\u9489\u5b50"})],t.prototype,"isNail",void 0),c([g("holeData14544")],t)}(),v=function(){function t(){this.node=null,this.tag=1,this.holes=[]}return c([m(cc.Node)],t.prototype,"node",void 0),c([m(cc.Integer)],t.prototype,"tag",void 0),c([m([cc.Node])],t.prototype,"holes",void 0),c([g("boardData14544")],t)}(),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.nailLayer=null,e.holeLayer=null,e.touchLayer=null,e.holeDatas=[],e.boardDatas=[],e.holes=[],e.nails=[],e.boards=[],e.locks=[],e.isEnd=!1,e.isHoldNail=!1,e.curNail=null,e.isCanTouch=!0,e.nodeFinger=null,e._curTouchId=-1,e}return a(e,t),e.prototype.onLoad=function(){this._init()},e.prototype._init=function(){this.gameBase=this.node.getComponent(h.default),this._initPhysics(),this._initVar(),this._initTouchLayer(),this._initHoles(),this._initBoards(),this._initFinger(),this.switchSkin()},e.prototype.switchSkin=function(){var t=l.User.get(s.UserData.useSkinIDList),e=t[1]+1,o=t[2];if(0!=t[1]){for(var n=0;n<this.holeDatas.length;n++){var i=this.holeDatas[n].node;i.name.includes("preHole")&&i.getChildByName("img")&&this.loadImg("pifu"+e+"-4",i.getChildByName("img"))}var r=cc.find("game/element/imgBg",this.node);664==r.width?this.loadImg("pifu"+e+"-3",cc.find("game/element/imgBg",this.node)):734==r.width?this.loadImg("pifu"+e+"-1",cc.find("game/element/imgBg",this.node)):this.loadImg("pifu"+e+"-2",cc.find("game/element/imgBg",this.node))}if(0!=t[2]){var a=window.coloringSpinePrefab,c=cc.instantiate(a);this.nailLayer.children.forEach(function(t){var e=t.active;t.active=!0;var n=t.getChildByName("sk").getComponent(sp.Skeleton),i=n.animation;t.active=e,console.log(o-1),n.skeletonData=c.children[o-1].getComponent(sp.Skeleton).skeletonData,n.setSkin("default"),n.defaultSkin="default",n.setAnimation(0,i,!0),n.premultipliedAlpha=!1})}},e.prototype.loadImg=function(t,e){e.active=!1,cc.resources.load("texture/board/"+t,function(t,o){if(t)return console.log(t);e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),e.active=!0})},e.prototype._initVar=function(){this.nailLayer=cc.find("game/element/nailLayer",this.node),this.holeLayer=cc.find("game/element/holeLayer",this.node),this.touchLayer=cc.find("game/element/touchLayer",this.node)},e.prototype._initFinger=function(){if(this.nodeFinger){var t=this.nails[0],e=t.parent.convertToWorldSpaceAR(t.position),o=this.nodeFinger.parent.convertToNodeSpaceAR(e);this.nodeFinger.setPosition(o),cc.tween(this.nodeFinger).repeatForever(cc.tween().to(.2,{scale:1.2}).to(.1,{scale:1})).start()}},e.prototype._hideFinger=function(){this.nodeFinger&&(this.nodeFinger.stopAllActions(),this.nodeFinger.setScale(1),this.nodeFinger.active=!1)},e.prototype._initPhysics=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0},e.prototype._initTouchLayer=function(){var t=this;this.touchLayer.on(cc.Node.EventType.TOUCH_START,function(e){t.isEnd||-1==t._curTouchId&&(t._curTouchId=e.getID(),t.checkTouch(e.getLocation()))}),this.touchLayer.on(cc.Node.EventType.TOUCH_END,function(e){t.isEnd||e.getID()==t._curTouchId&&(t._curTouchId=-1)}),this.touchLayer.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t.isEnd||e.getID()==t._curTouchId&&(t._curTouchId=-1)})},e.prototype._initBoards=function(){var t=this;this.boardDatas.length<=0||this.boardDatas.forEach(function(e){var o=e.node,n=o.getComponent(cc.PhysicsPolygonCollider);n.tag=e.tag,n.apply();var i=new cc.Node("holes");i.setParent(o),i.setPosition(cc.v2(0,0));var r=o.getComponent(cc.RigidBody);r.type=cc.RigidBodyType.Dynamic,r.gravityScale=5,r.enabledContactListener=!0,e.holes.forEach(function(t,e){var n=t.parent.convertToWorldSpaceAR(t.position),r=i.convertToNodeSpaceAR(n),a=new cc.Node("hole_"+e);a.setParent(i),a.setPosition(r),a.setScale(.8),a.addComponent(cc.PolygonCollider).points=t.getComponent(cc.PhysicsPolygonCollider).points;var c=t.parent.convertToWorldSpaceAR(t.position),s=o.convertToNodeSpaceAR(c);if(1==t.active){var l=o.addComponent(cc.RevoluteJoint);l.connectedBody=t.getComponent(cc.RigidBody),l.anchor=s,l.apply(),t.isConnectBoard=!0,t.connectRJ_UUID.push(l.uuid)}}),o.addComponent(d.default).onBeginContact=function(e,o,n){t.isEnd||(20==n.tag&&(n.node.removeComponent(cc.PhysicsPolygonCollider),n.node.removeComponent(cc.RigidBody),t.checkLock(n.node)),10!=n.tag||o.node.isEnd||(o.node.isEnd=!0,t.checkIsWin()),n.tag>0&&n.tag<10&&n.tag!=o.tag&&(e.disabled=!0))},t.boards.push(o)})},e.prototype._initHoles=function(){var t=this;this.holeDatas.length<=0||this.holeDatas.forEach(function(e){var o=e.node;o.isLock=e.isLockHole,o.isEmpty=!e.isNail;var n=o.getChildByName("imgOutLine");n&&(n.active=!0),o.getChildByName("imgLock").active=o.isLock,o.isLock&&t.locks.push(o);var i=o.getComponent(cc.PhysicsPolygonCollider);i.sensor=!0,i.apply(),o.getComponent(cc.RigidBody).type=cc.RigidBodyType.Animated;var r=o.parent.convertToWorldSpaceAR(o.position),a=t.holeLayer.convertToNodeSpaceAR(r);o.setParent(t.holeLayer),o.setPosition(a),t.holes.push(o);var c=o.getChildByName("nodeNail");if(e.isNail){c.isLock=e.isLockNail,c.connectRJ_UUID=[],c.connectHole=o,c.getChildByName("sk").getComponent(sp.Skeleton).setAnimation(0,"daiji",!0),c.getChildByName("imgLock").active=c.isLock;var s=c.getComponent(cc.PhysicsPolygonCollider);s.sensor=!1,s.friction=0,s.apply(),c.getComponent(cc.RigidBody).type=cc.RigidBodyType.Animated;var l=c.parent.convertToWorldSpaceAR(c.position),d=t.nailLayer.convertToNodeSpaceAR(l);c.setParent(t.nailLayer),c.setPosition(d),c.isLock&&t.locks.push(c),t.nails.push(c)}else c.active=!1})},e.prototype.checkLock=function(t){if(!(this.locks.length<=0)){var e=this.locks.pop(),o=e.parent.convertToWorldSpaceAR(e.position),n=t.parent.convertToNodeSpaceAR(o);cc.tween(t).to(.1,{scale:1.2}).to(.3,{position:n}).call(function(){e.getChildByName("imgLock").scale=1.2}).delay(.3).to(.1,{scale:1}).call(function(){e.isLock=!1,e.getChildByName("imgLock").active=!1,e.getChildByName("imgLock").scale=1,t.active=!1}).start()}},e.prototype.checkTouch=function(t){this.isCanTouch&&(this.checkIsTouchNail(t)||this.checkIsTouchHole(t))},e.prototype.checkIsTouchNail=function(t){var e=null;if(this.nails.forEach(function(o){var n=o.getComponent(cc.PhysicsPolygonCollider).points;n=n.map(function(t){return o.convertToWorldSpaceAR(t)}),cc.Intersection.pointInPolygon(t,n)&&(e=o)}),!e)return!1;if(this._hideFinger(),e.isLock)this.isHoldNail&&this.curNail.isRise&&(this.curNail.zIndex=0,(o=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),o.addAnimation(0,"daiji",!0),this.curNail.isRise=!1,this.isHoldNail=!1,this.curNail=null);else if(this.isHoldNail)if(e.isRise){var o;e.isRise=!1,this.curNail=null,this.isHoldNail=!1,(o=e.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),o.addAnimation(0,"daiji",!0),e.zIndex=0}else{var n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton);n.setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.curNail.isRise=!1,this.curNail.zIndex=0,this.curNail=e,e.isRise=!0,e.getChildByName("sk").getComponent(sp.Skeleton).setAnimation(0,"baqi",!1),e.zIndex=9999,this.hammerIsTouchHole(e)}else e.isRise||(e.isRise=!0,this.isHoldNail=!0,this.curNail=e,(o=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"baqi",!1),e.zIndex=9999),this.hammerIsTouchHole(e);return!0},e.prototype.hammerIsTouchHole=function(t){u.Audio.playEffect(p.AudioConst.CLICK_DINGZI),1==l.User.get_hammer("hammer")&&(t.active=!1,t.connectHole.isEmpty=!0,t.connectHole=r,t.setPosition(this.curNail.parent.convertToNodeSpaceAR(2e4)),t.removeFromParent(),l.User.set_hammer(0),cc.game.emit("destroyHand"),l.User.set("Beginner_Tutorial",1),cc.game.emit("chuiziBtn"))},e.prototype.checkIsTouchHole=function(t){var e=this,o=null;if(this.holes.forEach(function(e){var n=e.getComponent(cc.PhysicsPolygonCollider).points;n=n.map(function(t){return e.convertToWorldSpaceAR(t)}),cc.Intersection.pointInPolygon(t,n)&&(o=e)}),!o)return!1;if(o.isLock)return this.isHoldNail&&(this.curNail.zIndex=0,this.curNail.isRise=!1,(n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.isHoldNail=!1,this.curNail=null),!1;if(!o.isEmpty)return!1;if(!this.isHoldNail)return!1;var n,i=this.checkHoleCanSet(o),r=i.result,a=i.touchBoards;if(0==r)return this.isHoldNail&&(this.curNail.zIndex=0,this.curNail.isRise=!1,u.Audio.playEffect(p.AudioConst.CLICK_DINGZICUOWU),(n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.isHoldNail=!1,this.curNail=null),!1;if(a.length>0){var c=o.parent.convertToWorldSpaceAR(o.position),s=this.curNail.parent.convertToNodeSpaceAR(c),l=this.curNail.getComponent(cc.PhysicsPolygonCollider);l.sensor=!0,l.apply(),this.curNail.zIndex=0;var d=this.curNail.getChildByName("sk").getComponent(sp.Skeleton),h=d.node.parent.convertToWorldSpaceAR(d.node.position),f=this.nailLayer.convertToNodeSpaceAR(h);d.node.setParent(this.nailLayer),d.node.setPosition(f),d.node.zIndex=9999;var g=this.nailLayer.convertToNodeSpaceAR(c);return this.isCanTouch=!1,cc.tween(d.node).to(.5,{position:g}).call(function(){e.curNail.active=!1,e.curNail.setPosition(s),e.curNail.active=!0,e.curNail.connectHole.isEmpty=!0,e.curNail.connectHole=o,o.isEmpty=!1,d.node.setParent(e.curNail),d.node.setPosition(cc.v2(0,0));var t=o.getChildByName("imgOutLine");t&&(t.active=!1),e.curNail.isRise=!1,e.isHoldNail=!1,a.forEach(function(t){var o=e.curNail.parent.convertToWorldSpaceAR(e.curNail.position),n=t.convertToNodeSpaceAR(o),i=t.addComponent(cc.RevoluteJoint);i.connectedBody=e.curNail.getComponent(cc.RigidBody),i.anchor=n,i.apply(),e.curNail.isConnectBoard=!0,e.curNail.connectRJ_UUID.push(i.uuid)}),d.setAnimation(0,"charu",!1),d.addAnimation(0,"daiji",!0),e.isCanTouch=!0,l.sensor=!1,l.apply()}).start(),!0}if(console.log("--------\x3ethis.curNail.parent:",this.curNail.parent),null!=this.curNail.parent){var m=o.parent.convertToWorldSpaceAR(o.position),y=this.curNail.parent.convertToNodeSpaceAR(m),v=this.curNail.getComponent(cc.PhysicsPolygonCollider);v.sensor=!0,v.apply(),this.curNail.zIndex=0;var _=this.curNail.getChildByName("sk").getComponent(sp.Skeleton),C=_.node.parent.convertToWorldSpaceAR(_.node.position),w=this.nailLayer.convertToNodeSpaceAR(C);_.node.setParent(this.nailLayer),_.node.setPosition(w),_.node.zIndex=9999,this.isCanTouch=!1;var P=this.nailLayer.convertToNodeSpaceAR(m);return cc.tween(_.node).to(.5,{position:P}).call(function(){e.curNail.active=!1,e.curNail.setPosition(y),e.curNail.active=!0,e.curNail.connectHole.isEmpty=!0,e.curNail.connectHole=o,o.isEmpty=!1,_.node.setParent(e.curNail),_.node.setPosition(cc.v2(0,0));var t=o.getChildByName("imgOutLine");t&&(t.active=!1),e.curNail.isRise=!1,e.isHoldNail=!1,_.setAnimation(0,"charu",!1),_.setEndListener(function(){e.curNail.isConnectBoard&&e.boards.forEach(function(t){for(var o=t.getComponents(cc.RevoluteJoint),n=0;n<o.length;n++)for(var i=0;i<e.curNail.connectRJ_UUID.length;i++)o[n].uuid==e.curNail.connectRJ_UUID[i]&&t.removeComponent(o[n])}),_.setEndListener(null)}),_.addAnimation(0,"daiji",!0),e.isCanTouch=!0,v.sensor=!1,v.apply()}).start(),!0}},e.prototype.checkHoleCanSet=function(t){var e=t.getComponent(cc.PhysicsPolygonCollider).points;e=e.map(function(e){return t.convertToWorldSpaceAR(e)});var o=[],n=0,i=0;return this.boards.forEach(function(t){var r=t.getComponent(cc.PhysicsPolygonCollider).points;if(r=r.map(function(e){return t.convertToWorldSpaceAR(e)}),cc.Intersection.polygonPolygon(e,r)){n++;var a=t.getChildByName("holes");if(!a)return;a.children.forEach(function(n){for(var r=n.getComponent(cc.PolygonCollider).points,a=r.length,c=0,s=0;s<r.length;s++){var l=n.convertToWorldSpaceAR(r[s]);cc.Intersection.pointInPolygon(l,e)&&c++}c>=.8*a&&(i++,o.push(t))})}}),{result:n<=0||n<=i,touchBoards:o}},e.prototype.checkIsWin=function(){var t=this;if(!this.isEnd){var e=!0;this.boards.forEach(function(t){t.isEnd||(e=!1)}),e&&(this.isEnd=!0,this.scheduleOnce(function(){t.gameBase.gameRight()},1))}},c([m([y])],e.prototype,"holeDatas",void 0),c([m([v])],e.prototype,"boardDatas",void 0),c([m(cc.Node)],e.prototype,"nodeFinger",void 0),c([g],e)}(cc.Component);r.default=_,cc._RF.pop()},{}],"zqddn_zhb_level-15528_item":[function(t,e,o){"use strict";cc._RF.push(e,"263d1oldqZHCotr7UHGHOmh","zqddn_zhb_level-15528_item");var n,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.top=[],e.exit=cc.v2(),e.bottom=[],e.moved=!1,e._originX=0,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){this._originX=this.node.x},e.prototype.canMove=function(){for(var t=0;t<this.top.length;t++)if(!this.top[t].getComponent(o).moved)return!1;return!0},e.prototype.doMove=function(){var t=this;this.moved=!0,cc.tween(this.node).to(.3,{y:this.node.y+50}).to(.3,{position:this.exit}).call(function(){t.node.active=!1}).start(),this.bottomMove()},e.prototype.shake=function(){this.node.stopAllActions(),this.node.x=this._originX;for(var t=0,e=function(e){var i=n.node.children[e];if("wrong"==i.name){var r=n.top[t].getComponent(o);t++,r.moved||(i.stopAllActions(),i.active=!0,cc.tween(i).delay(.2).to(.1,{opacity:0}).call(function(){i.active=!1,i.opacity=255}).start())}},n=this,i=0;i<this.node.children.length;i++)e(i);cc.tween(this.node).to(.05,{x:this.node.x-5}).to(.05,{x:this.node.x+5}).to(.05,{x:this.node.x-5}).to(.05,{x:this.node.x+5}).to(.05,{x:this.node.x}).start()},e.prototype.bottomMove=function(){this.bottom.forEach(function(t){t.getComponent(cc.Sprite).enabled=!1,t.getChildByName("spine")&&(t.getChildByName("spine").active=!1),t.children[0].active=!0,cc.tween(t).to(1,{x:t.scaleX>0?600:-600}).call(function(){t.active=!1}).start(),cc.tween(t.children[0]).to(.1,{angle:-5}).to(.1,{angle:5}).union().repeatForever().start()})},a([l([cc.Node])],e.prototype,"top",void 0),a([l(cc.Vec2)],e.prototype,"exit",void 0),a([l([cc.Node])],e.prototype,"bottom",void 0),o=a([s],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],"zqddn_zhb_level-15528":[function(t,e,o){"use strict";cc._RF.push(e,"ceb2eL5qXlD/5fuwsBels77","zqddn_zhb_level-15528");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.state=void 0;var s,l=i("zqddn_level_base"),d=i("zqddn_zhb_level-15528_item"),p=cc._decorator,h=p.ccclass,u=p.property;(function(t){t[t.init=0]="init",t[t.waitTouch=1]="waitTouch",t[t.checkWin=2]="checkWin",t[t.win=3]="win",t[t.lose=4]="lose"})(s=r.state||(r.state={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e.map=null,e.shiningParticle=null,e.guideHand=null,e._state=s.init,e._moved=Symbol("_moved"),e}return a(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.guideHand&&this.showGuideAnimAction()},e.prototype.start=function(){this.state=s.waitTouch},e.prototype.onTouchStart=function(t){if(this.state==s.waitTouch){this.gameBase.playClickSound(),this.guideHand&&this.stopGuideAnimAction();for(var e=this.map.children.length-1;e>=0;e--){var o=this.map.children[e],n=o.getComponent(d.default);if(!n.moved&&cc.Intersection.pointInPolygon(t.getLocation(),this.getPolygonColliderPoints(o)))return void(n.canMove()?(o.setSiblingIndex(999),n.doMove(),this.checkWin()):n.shake())}}},e.prototype.checkWin=function(){for(var t=0;t<this.map.children.length;t++)if(!this.map.children[t].getComponent(d.default).moved)return;this.win()},e.prototype.win=function(){this.state!=s.lose&&this.state!=s.win&&(this.state=s.win,this.gameBase.playRightStarSound(),this.shiningParticle&&(this.shiningParticle.node.active=!0,this.shiningParticle.resetSystem()),this.gameBase.gameRight(0))},e.prototype.lose=function(t,e){if(void 0===e&&(e=!0),this.state!=s.lose&&this.state!=s.win)if(e&&(this.state=s.lose),t)if(t instanceof cc.Node){var o=cc.instantiate(t);o.x+=70,o.y-=70,o.parent=t.parent,o.active=!1,this.gameBase.showWrong(o,1,e),o.destroy()}else this.gameBase.showWrong(t,1,e);else this.gameBase.showWrong(null,1,e)},e.prototype.showGuideAnimAction=function(){var t=this;this.guideHand.active=!0,this.guideHand.stopAllActions();var e=cc.v2(250,250);cc.tween(this.guideHand).repeatForever(cc.tween().call(function(){t.guideHand.position=cc.v2(-160,250)}).delay(.3).to(1,{position:e}).delay(1)).start()},e.prototype.stopGuideAnimAction=function(){this.guideHand.stopAllActions(),this.guideHand.active=!1},e.prototype.getPolygonColliderPoints=function(t){var e=[];return t.getComponent(cc.PolygonCollider).points.forEach(function(o){var n=t.convertToWorldSpaceAR(o);e.push(n)}),e},c([u(l.default)],e.prototype,"gameBase",void 0),c([u(cc.Node)],e.prototype,"map",void 0),c([u(cc.ParticleSystem)],e.prototype,"shiningParticle",void 0),c([u(cc.Node)],e.prototype,"guideHand",void 0),c([h],e)}(cc.Component);r.default=f,cc._RF.pop()},{}],"zqddn_zhb_level-20249Auto_base":[function(t,e,o){"use strict";cc._RF.push(e,"8d02fGw9FdL8qScZeOFtSYl","zqddn_zhb_level-20249Auto_base");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("UserConst"),l=i("UserManager"),d=i("BrainLevelBase"),p=i("DrawPhysicsLineContact"),h=i("AudioConst"),u=i("AudioManager"),f=cc._decorator,g=f.ccclass,m=f.property,y=f.executeInEditMode,v=function(){function t(){this.node=null,this.isLockHole=!1,this.isLockNail=!1,this.isNail=!1,this.isLockAdHole=!1}return c([m(cc.Node)],t.prototype,"node",void 0),c([m({tooltip:"\u662f\u5426\u9501\u4f4f\u6d1e"})],t.prototype,"isLockHole",void 0),c([m({tooltip:"\u662f\u5426\u9501\u4f4f\u9489\u5b50"})],t.prototype,"isLockNail",void 0),c([m({tooltip:"\u662f\u5426\u6709\u9489\u5b50"})],t.prototype,"isNail",void 0),c([m({tooltip:"\u662f\u5426\u770b\u89c6\u5c4f\u9501\u4f4f\u6d1e"})],t.prototype,"isLockAdHole",void 0),c([g("holeData20249Auto")],t)}(),_=function(){function t(){this.node=null,this.tag=1,this.holes=[]}return c([m(cc.Node)],t.prototype,"node",void 0),c([m(cc.Integer)],t.prototype,"tag",void 0),c([m([cc.Node])],t.prototype,"holes",void 0),c([g("boardData20249Auto")],t)}(),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nailLayer=null,e.holeLayer=null,e.touchLayer=null,e.isShowLabel=!1,e.isAutoBine=!1,e.idCount=1,e.lbl_color="#000000",e.lbl_fontSize=65,e._nailLbls=[],e.holeDatas=[],e.boardDatas=[],e.holes=[],e.nails=[],e.boards=[],e.locks=[],e.lockAds=[],e._isEnd=!1,e.isHoldNail=!1,e.curNail=null,e.isCanTouch=!0,e.isGame=!1,e.nodeFinger=null,e._curTouchId=-1,e.amount=0,e.holdDataChangeAble=!0,e.boardDataChangeAble=!0,e.nailArr=[],e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._init()},e.prototype.onAssetLoadedAllFinishHandle=function(){this.isGame=!0,this._initTouchLayer(),this.switchSkin()},e.prototype._init=function(){this._initPhysics(),this._initVar(),this._initHoles(),this._initBoards(),this._initFinger(),this.hideSkinNode()},e.prototype.hideSkinNode=function(){cc.find("game/element/imgBg",this.node).active=!1,this.holeLayer.children.forEach(function(t){t.getChildByName("img").active=!1})},e.prototype.switchSkin=function(){var t=this,e=l.User.get(s.UserData.useSkinIDList),o=e[1]+1,n=e[2];if(0!=e[1]){var i=cc.find("game/element/imgBg",this.node);664==i.width?this.loadImg("pifu"+o+"-3",cc.find("game/element/imgBg",this.node)):734==i.width?this.loadImg("pifu"+o+"-1",cc.find("game/element/imgBg",this.node)):this.loadImg("pifu"+o+"-2",cc.find("game/element/imgBg",this.node)),this.holeLayer.children.forEach(function(e){t.loadImg("pifu"+o+"-4",e.getChildByName("img"))})}else cc.find("game/element/imgBg",this.node).active=!0,this.holeLayer.children.forEach(function(t){t.getChildByName("img").active=!0});if(0!=e[2]){var r=window.coloringSpinePrefab,a=cc.instantiate(r);this.nailLayer.children.forEach(function(t){var e=t.active;t.active=!0;var o=t.getChildByName("sk").getComponent(sp.Skeleton),i=o.animation;t.active=e,console.log(n-1),o.skeletonData=a.children[n-1].getComponent(sp.Skeleton).skeletonData,o.setSkin("default"),o.defaultSkin="default",o.setAnimation(0,i,!0),o.premultipliedAlpha=!1})}},e.prototype.loadImg=function(t,e){e.active=!1,cc.resources.load("texture/board/"+t,function(t,o){if(t)return console.log(t);e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),e.active=!0})},e.prototype._initVar=function(){this.nailLayer=this.dict.nailLayer,this.holeLayer=this.dict.holeLayer,this.touchLayer=this.dict.touchLayer,this.isShowLabel=!!window.isShowLabel,this.lbl_color=window.lbl_color?window.lbl_color:"#000000",this.lbl_fontSize=window.lbl_fontSize?window.lbl_fontSize:65,cc.log(this.isShowLabel,this.lbl_color,this.lbl_fontSize)},e.prototype._initFinger=function(){if(this.nodeFinger){var t=this.nails[0],e=t.parent.convertToWorldSpaceAR(t.position),o=this.nodeFinger.parent.convertToNodeSpaceAR(e);this.nodeFinger.setPosition(o),cc.tween(this.nodeFinger).repeatForever(cc.tween().to(.2,{scale:1.2}).to(.1,{scale:1})).start()}},e.prototype._hideFinger=function(){this.nodeFinger&&(this.nodeFinger.stopAllActions(),this.nodeFinger.setScale(1),this.nodeFinger.active=!1)},e.prototype._initPhysics=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0},e.prototype._initTouchLayer=function(){var t=this;this.touchLayer.on(cc.Node.EventType.TOUCH_START,function(e){t._isEnd||-1==t._curTouchId&&(t._curTouchId=e.getID(),t.checkTouch(e.getLocation()))}),this.touchLayer.on(cc.Node.EventType.TOUCH_END,function(e){t._isEnd||e.getID()==t._curTouchId&&(t._curTouchId=-1)}),this.touchLayer.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t._isEnd||e.getID()==t._curTouchId&&(t._curTouchId=-1)})},e.prototype._initBoards=function(){var t=this;this.boardDatas.length<=0||this.boardDatas.forEach(function(e){var o=e.node,n=o.getComponent(cc.PhysicsPolygonCollider);n.tag=e.tag,n.apply();var i=new cc.Node("holes");i.setParent(o),i.setPosition(cc.v2(0,0));var r=o.getComponent(cc.RigidBody);r.type=cc.RigidBodyType.Dynamic,r.gravityScale=5,r.enabledContactListener=!0,e.holes.forEach(function(t,e){var n=t.parent.convertToWorldSpaceAR(t.position),r=i.convertToNodeSpaceAR(n),a=new cc.Node("hole_"+e);a.setParent(i),a.setPosition(r),a.setScale(.8),a.addComponent(cc.PolygonCollider).points=t.getComponent(cc.PhysicsPolygonCollider).points;var c=t.parent.convertToWorldSpaceAR(t.position),s=o.convertToNodeSpaceAR(c);if(1==t.active){var l=o.addComponent(cc.RevoluteJoint);l.connectedBody=t.getComponent(cc.RigidBody),l.anchor=cc.v2(s.x,s.y),l.apply(),t.isConnectBoard=!0,t.connectRJ_UUID.push(l.uuid)}}),o.addComponent(p.default).onBeginContact=function(e,o,n){t._isEnd||(20==n.tag&&(n.node.removeComponent(cc.PhysicsPolygonCollider),n.node.removeComponent(cc.RigidBody),t.checkLock(n.node)),10!=n.tag||o.node._isEnd||(o.node._isEnd=!0,t.checkIsWin(),cc.log("\u7ec8\u70b9",o.node.name)),n.tag>0&&n.tag<10&&n.tag!=o.tag&&(e.disabled=!0))},t.boards.push(o)})},e.prototype._initHoles=function(){var t=this;this.holeDatas.length<=0||this.holeDatas.forEach(function(e){var o=e.node;o.isLockAd=e.isLockAdHole,o.isLock=e.isLockHole,o.isEmpty=!e.isNail;var n=o.getChildByName("imgOutLine");n&&(n.active=!0),o.isLock&&t.locks.push(o),o.isLockAd&&(o.isLock=!0,t.lockAds.push(o)),o.getChildByName("imgLock").active=o.isLock;var i=o.getComponent(cc.PhysicsPolygonCollider);i.sensor=!0,i.apply(),o.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var r=o.parent.convertToWorldSpaceAR(o.position),a=t.holeLayer.convertToNodeSpaceAR(r);o.setParent(t.holeLayer),o.setPosition(a),t.holes.push(o);var c=o.getChildByName("nodeNail");if(e.isNail){t.addLbl(c),c.isLock=e.isLockNail,c.connectRJ_UUID=[],c.connectHole=o,c.getChildByName("sk").getComponent(sp.Skeleton).setAnimation(0,"daiji",!0),c.getChildByName("imgLock").active=c.isLock;var s=c.getComponent(cc.PhysicsPolygonCollider);s.sensor=!1,s.friction=0,s.apply(),c.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var l=c.parent.convertToWorldSpaceAR(c.position),d=t.nailLayer.convertToNodeSpaceAR(l);c.setParent(t.nailLayer),c.setPosition(d),c.isLock&&t.locks.push(c),t.nails.push(c)}else c.active=!1})},e.prototype.checkAdLock=function(){if(!(this.lockAds.length<=0)){var t=this.lockAds.pop(),e=t.getChildByName("imgLock");e.runAction(this.shackAction(.1,10,function(){cc.tween(e).to(.2,{scale:1.2}).to(.1,{scale:1}).call(function(){t.isLock=!1,t.getChildByName("imgLock").active=!1}).start()}))}},e.prototype.shackAction=function(t,e,o){var n=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),r=cc.moveBy(.8*t,.8*e,.8*e),a=cc.moveBy(.8*t,.8*-e,.8*-e),c=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),l=cc.moveBy(.4*t,.4*e,.4*e),d=cc.moveBy(.4*t,.4*-e,.4*-e),p=cc.moveBy(.2*t,.2*e,.2*e),h=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(n,i,r,a,c,s,l,d,p,h,cc.callFunc(function(){o()},this))},e.prototype.addLbl=function(t){var e=new cc.Node("lbl_id");e.color=cc.color().fromHEX(this.lbl_color),e.setParent(t.getChildByName("sk")),e.setPosition(cc.v2(0,0)),e.opacity=this.isShowLabel?255:0;var o=e.addComponent(cc.Label);o.string=this.idCount.toString(),o.fontSize=this.lbl_fontSize,o.lineHeight=this.lbl_fontSize+5;var n=e.addComponent(cc.LabelOutline);n.color=cc.color().fromHEX(this.lbl_color),n.width=3,this.idCount++,this._nailLbls.push(e)},e.prototype.showNailLbl=function(t){this.isShowLabel&&(t.getChildByName("sk").getChildByName("lbl_id").opacity=255)},e.prototype.hideNailLbl=function(t){this.isShowLabel&&(t.getChildByName("sk").getChildByName("lbl_id").opacity=0)},e.prototype.updateNailLbl=function(t,e,o){void 0===t&&(t=!1),void 0===e&&(e="#000000"),void 0===o&&(o=65)},e.prototype.checkLock=function(t){if(!(this.locks.length<=0)){var e=this.locks.pop(),o=e.parent.convertToWorldSpaceAR(e.position),n=t.parent.convertToNodeSpaceAR(o);cc.tween(t).to(.1,{scale:1.2}).to(.3,{position:n}).call(function(){e.getChildByName("imgLock").scale=1.2}).delay(.3).to(.1,{scale:1}).call(function(){e.isLock=!1,e.getChildByName("imgLock").active=!1,e.getChildByName("imgLock").scale=1,t.active=!1}).start()}},e.prototype.checkTouch=function(t){if(this.isCanTouch){var e=this.lockAds[this.lockAds.length-1];if(e){var o=e.getComponent(cc.PhysicsPolygonCollider).points;if(o=o.map(function(t){return e.convertToWorldSpaceAR(t)}),cc.Intersection.pointInPolygon(t,o))return cc.log("\u76d1\u542c\u70b9\u51fb"),void cc.game.emit("boreBtn")}this.checkIsTouchNail(t)||this.checkIsTouchHole(t)}},e.prototype.checkIsTouchNail=function(t){var e=null;if(this.nails.forEach(function(o){var n=o.getComponent(cc.PhysicsPolygonCollider).points;n=n.map(function(t){return o.convertToWorldSpaceAR(t)}),cc.Intersection.pointInPolygon(t,n)&&(e=o)}),!e)return!1;if(this._hideFinger(),e.isLock)this.isHoldNail&&this.curNail.isRise&&(this.curNail.zIndex=0,(o=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),o.addAnimation(0,"daiji",!0),this.showNailLbl(this.curNail),this.curNail.isRise=!1,this.isHoldNail=!1,this.curNail=null);else if(this.isHoldNail)if(e.isRise){var o;e.isRise=!1,this.curNail=null,this.isHoldNail=!1,(o=e.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),o.addAnimation(0,"daiji",!0),this.showNailLbl(e),e.zIndex=0}else{var n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton);n.setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.showNailLbl(e),this.curNail.isRise=!1,this.curNail.zIndex=0,this.curNail=e,e.isRise=!0,e.getChildByName("sk").getComponent(sp.Skeleton).setAnimation(0,"baqi",!1),e.zIndex=9999,this.hideNailLbl(e),this.hammerIsTouchHole(e)}else e.isRise||(e.isRise=!0,this.isHoldNail=!0,this.curNail=e,(o=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"baqi",!1),e.zIndex=9999,this.hideNailLbl(e)),this.hammerIsTouchHole(e);return!0},e.prototype.hammerIsTouchHole=function(t){u.Audio.playEffect(h.AudioConst.CLICK_DINGZI),1==l.User.get_hammer("hammer")&&(t.active=!1,t.connectHole.isEmpty=!0,t.connectHole=r,t.setPosition(this.curNail.parent.convertToNodeSpaceAR(2e4)),t.removeFromParent(),l.User.set_hammer(0),cc.game.emit("chuiziBtn"))},e.prototype.checkIsTouchHole=function(t){var e=this,o=null;if(this.holes.forEach(function(e){var n=e.getComponent(cc.PhysicsPolygonCollider).points;n=n.map(function(t){return e.convertToWorldSpaceAR(t)}),cc.Intersection.pointInPolygon(t,n)&&(o=e)}),!o)return!1;if(o.isLock)return this.isHoldNail&&(this.curNail.zIndex=0,this.curNail.isRise=!1,(n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.showNailLbl(this.curNail),this.isHoldNail=!1,this.curNail=null),!1;if(!o.isEmpty)return!1;if(!this.isHoldNail)return!1;var n,i=this.checkHoleCanSet(o),r=i.result,a=i.touchBoards;if(0==r)return this.isHoldNail&&(this.curNail.zIndex=0,this.curNail.isRise=!1,u.Audio.playEffect(h.AudioConst.CLICK_DINGZICUOWU),(n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.showNailLbl(this.curNail),this.isHoldNail=!1,this.curNail=null),!1;if(a.length>0){var c=o.parent.convertToWorldSpaceAR(o.position),s=this.curNail.parent.convertToNodeSpaceAR(c),l=this.curNail.getComponent(cc.PhysicsPolygonCollider);l.sensor=!0,l.apply(),this.curNail.zIndex=0;var d=this.curNail.getChildByName("sk").getComponent(sp.Skeleton),p=d.node.parent.convertToWorldSpaceAR(d.node.position),f=this.nailLayer.convertToNodeSpaceAR(p);d.node.setParent(this.nailLayer),d.node.setPosition(f),d.node.zIndex=9999;var g=this.nailLayer.convertToNodeSpaceAR(c);return this.isCanTouch=!1,cc.tween(d.node).to(.5,{position:g}).call(function(){e.curNail.active=!1,e.curNail.setPosition(s),e.curNail.active=!0,e.curNail.connectHole.isEmpty=!0,e.curNail.connectHole=o,o.isEmpty=!1,d.node.setParent(e.curNail),d.node.setPosition(cc.v2(0,0));var t=o.getChildByName("imgOutLine");t&&(t.active=!1),e.curNail.isRise=!1,e.isHoldNail=!1,a.forEach(function(t){var o=e.curNail.parent.convertToWorldSpaceAR(e.curNail.position),n=t.convertToNodeSpaceAR(o),i=t.addComponent(cc.RevoluteJoint);i.connectedBody=e.curNail.getComponent(cc.RigidBody),i.anchor=n,i.apply(),e.curNail.isConnectBoard=!0,e.curNail.connectRJ_UUID.push(i.uuid)}),d.setAnimation(0,"charu",!1),d.addAnimation(0,"daiji",!0),e.showNailLbl(e.curNail),e.isCanTouch=!0,l.sensor=!1,l.apply()}).start(),!0}var m=o.parent.convertToWorldSpaceAR(o.position),y=this.curNail.parent.convertToNodeSpaceAR(m),v=this.curNail.getComponent(cc.PhysicsPolygonCollider);v.sensor=!0,v.apply(),this.curNail.zIndex=0;var _=this.curNail.getChildByName("sk").getComponent(sp.Skeleton),C=_.node.parent.convertToWorldSpaceAR(_.node.position),w=this.nailLayer.convertToNodeSpaceAR(C);_.node.setParent(this.nailLayer),_.node.setPosition(w),_.node.zIndex=9999,this.isCanTouch=!1;var P=this.nailLayer.convertToNodeSpaceAR(m);return cc.tween(_.node).to(.5,{position:P}).call(function(){e.curNail.active=!1,e.curNail.setPosition(y),e.curNail.active=!0,e.curNail.connectHole.isEmpty=!0,e.curNail.connectHole=o,o.isEmpty=!1,_.node.setParent(e.curNail),_.node.setPosition(cc.v2(0,0));var t=o.getChildByName("imgOutLine");t&&(t.active=!1),e.curNail.isRise=!1,e.isHoldNail=!1,_.setAnimation(0,"charu",!1),_.setEndListener(function(){e.showNailLbl(e.curNail),e.curNail.isConnectBoard&&e.boards.forEach(function(t){for(var o=t.getComponents(cc.RevoluteJoint),n=0;n<o.length;n++)for(var i=0;i<e.curNail.connectRJ_UUID.length;i++)o[n].uuid==e.curNail.connectRJ_UUID[i]&&t.removeComponent(o[n])}),_.setEndListener(null)}),_.addAnimation(0,"daiji",!0),e.isCanTouch=!0,v.sensor=!1,v.apply()}).start(),!0},e.prototype.checkHoleCanSet=function(t){var e=t.getComponent(cc.PhysicsPolygonCollider).points;e=e.map(function(e){return t.convertToWorldSpaceAR(e)});var o=[],n=0,i=0;return this.boards.forEach(function(t){var r=t.getComponent(cc.PhysicsPolygonCollider).points;if(r=r.map(function(e){return t.convertToWorldSpaceAR(e)}),cc.Intersection.polygonPolygon(e,r)){n++;var a=t.getChildByName("holes");if(!a)return;a.children.forEach(function(n){for(var r=n.getComponent(cc.PolygonCollider).points,a=r.length,c=0,s=0;s<r.length;s++){var l=n.convertToWorldSpaceAR(r[s]);cc.Intersection.pointInPolygon(l,e)&&c++}c>=.8*a&&(i++,o.push(t))})}}),{result:n<=0||n<=i,touchBoards:o}},e.prototype.checkIsWin=function(){var t=this;if(!this._isEnd){var e=!0;this.boards.forEach(function(t){t._isEnd||(e=!1)}),this.amount+=1,e&&(this._isEnd=!0,this.scheduleOnce(function(){t.playRight()},1))}},e.prototype.nodeEventListen=function(){var t=this,e=this.node.getChildByName("game").getChildByName("element").getChildByName("boardLayer"),o=this.node.getChildByName("game").getChildByName("element").getChildByName("pres");o.on("child-added",function(){t.holdDataChangeAble=!0,t.boardDataChangeAble=!0},this),o.on("child-removed",function(){t.holdDataChangeAble=!0,t.boardDataChangeAble=!0},this),e.on("child-added",function(){t.holdDataChangeAble=!0,t.boardDataChangeAble=!0},this),e.on("child-removed",function(){t.holdDataChangeAble=!0,t.boardDataChangeAble=!0},this)},e.prototype.update=function(){this.isAutoBine},e.prototype.getWorldPoints=function(t,e){for(var o=[],n=0;n<e.length;n++){var i=e[n],r=t.convertToWorldSpaceAR(i);o.push(r)}return o},c([m({tooltip:"\u662f\u5426\u663e\u793a\u9489\u5b50\u7f16\u53f7"})],e.prototype,"isShowLabel",void 0),c([m({tooltip:"\u662f\u5426\u81ea\u52a8\u7ed1\u5b9a\u9489\u677f\u5173\u7cfb"})],e.prototype,"isAutoBine",void 0),c([m([v])],e.prototype,"holeDatas",void 0),c([m([_])],e.prototype,"boardDatas",void 0),c([m(cc.Node)],e.prototype,"nodeFinger",void 0),c([g,y],e)}(d.default);r.default=C,cc._RF.pop()},{}],"zqddn_zhb_level-20249_base":[function(t,e,o){"use strict";cc._RF.push(e,"419d3vYTXFNIafPNAYIQ9Rx","zqddn_zhb_level-20249_base");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("UserConst"),l=i("UserManager"),d=i("AudioConst"),p=i("BrainLevelBase"),h=i("DrawPhysicsLineContact"),u=i("AudioManager"),f=cc._decorator,g=f.ccclass,m=f.property,y=function(){function t(){this.node=null,this.isLockHole=!1,this.isLockNail=!1,this.isNail=!1,this.isLockAdHole=!1}return c([m(cc.Node)],t.prototype,"node",void 0),c([m({tooltip:"\u662f\u5426\u9501\u4f4f\u6d1e"})],t.prototype,"isLockHole",void 0),c([m({tooltip:"\u662f\u5426\u9501\u4f4f\u9489\u5b50"})],t.prototype,"isLockNail",void 0),c([m({tooltip:"\u662f\u5426\u6709\u9489\u5b50"})],t.prototype,"isNail",void 0),c([m({tooltip:"\u662f\u5426\u770b\u89c6\u5c4f\u9501\u4f4f\u6d1e"})],t.prototype,"isLockAdHole",void 0),c([g("holeData20249")],t)}(),v=function(){function t(){this.node=null,this.tag=1,this.holes=[]}return c([m(cc.Node)],t.prototype,"node",void 0),c([m(cc.Integer)],t.prototype,"tag",void 0),c([m([cc.Node])],t.prototype,"holes",void 0),c([g("boardData20249")],t)}(),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nailLayer=null,e.holeLayer=null,e.touchLayer=null,e.holeDatas=[],e.boardDatas=[],e.holes=[],e.nails=[],e.boards=[],e.locks=[],e.lockAds=[],e._isEnd=!1,e.isHoldNail=!1,e.curNail=null,e.isCanTouch=!0,e.isGame=!1,e.nodeFinger=null,e._curTouchId=-1,e.amount=0,e}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._init()},e.prototype.onAssetLoadedAllFinishHandle=function(){this.isGame=!0,this._initTouchLayer(),this.switchSkin()},e.prototype._init=function(){this._initPhysics(),this._initVar(),this._initHoles(),this._initBoards(),this._initFinger(),this.hideSkinNode()},e.prototype.hideSkinNode=function(){cc.find("game/element/imgBg",this.node).active=!1,this.holeLayer.children.forEach(function(t){t.getChildByName("img").active=!1})},e.prototype.switchSkin=function(){var t=this,e=l.User.get(s.UserData.useSkinIDList),o=e[1]+1,n=e[2];if(0!=e[1]){var i=cc.find("game/element/imgBg",this.node);664==i.width?this.loadImg("pifu"+o+"-3",cc.find("game/element/imgBg",this.node)):734==i.width?this.loadImg("pifu"+o+"-1",cc.find("game/element/imgBg",this.node)):this.loadImg("pifu"+o+"-2",cc.find("game/element/imgBg",this.node)),this.holeLayer.children.forEach(function(e){t.loadImg("pifu"+o+"-4",e.getChildByName("img"))})}else cc.find("game/element/imgBg",this.node).active=!0,this.holeLayer.children.forEach(function(t){t.getChildByName("img").active=!0});if(0!=e[2]){var r=window.coloringSpinePrefab,a=cc.instantiate(r);this.nailLayer.children.forEach(function(t){var e=t.active;t.active=!0;var o=t.getChildByName("sk").getComponent(sp.Skeleton),i=o.animation;t.active=e,console.log(n-1),o.skeletonData=a.children[n-1].getComponent(sp.Skeleton).skeletonData,o.setSkin("default"),o.defaultSkin="default",o.setAnimation(0,i,!0),o.premultipliedAlpha=!1})}},e.prototype.loadImg=function(t,e){e.active=!1,cc.resources.load("texture/board/"+t,function(t,o){if(t)return console.log(t);e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),e.active=!0})},e.prototype._initVar=function(){this.nailLayer=this.dict.nailLayer,this.holeLayer=this.dict.holeLayer,this.touchLayer=this.dict.touchLayer},e.prototype._initFinger=function(){if(this.nodeFinger){var t=this.nails[0],e=t.parent.convertToWorldSpaceAR(t.position),o=this.nodeFinger.parent.convertToNodeSpaceAR(e);this.nodeFinger.setPosition(o),cc.tween(this.nodeFinger).repeatForever(cc.tween().to(.2,{scale:1.2}).to(.1,{scale:1})).start()}},e.prototype._hideFinger=function(){this.nodeFinger&&(this.nodeFinger.stopAllActions(),this.nodeFinger.setScale(1),this.nodeFinger.active=!1)},e.prototype._initPhysics=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0},e.prototype._initTouchLayer=function(){var t=this;this.touchLayer.on(cc.Node.EventType.TOUCH_START,function(e){t._isEnd||-1==t._curTouchId&&(t._curTouchId=e.getID(),t.checkTouch(e.getLocation()))}),this.touchLayer.on(cc.Node.EventType.TOUCH_END,function(e){t._isEnd||e.getID()==t._curTouchId&&(t._curTouchId=-1)}),this.touchLayer.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t._isEnd||e.getID()==t._curTouchId&&(t._curTouchId=-1)})},e.prototype._initBoards=function(){var t=this;this.boardDatas.length<=0||this.boardDatas.forEach(function(e){var o=e.node,n=o.getComponent(cc.PhysicsPolygonCollider);n.tag=e.tag,n.apply();var i=new cc.Node("holes");i.setParent(o),i.setPosition(cc.v2(0,0));var r=o.getComponent(cc.RigidBody);r.type=cc.RigidBodyType.Dynamic,r.gravityScale=5,r.enabledContactListener=!0,e.holes.forEach(function(t,e){var n=t.parent.convertToWorldSpaceAR(t.position),r=i.convertToNodeSpaceAR(n),a=new cc.Node("hole_"+e);a.setParent(i),a.setPosition(r),a.setScale(.8),a.addComponent(cc.PolygonCollider).points=t.getComponent(cc.PhysicsPolygonCollider).points;var c=t.parent.convertToWorldSpaceAR(t.position),s=o.convertToNodeSpaceAR(c);if(1==t.active){var l=o.addComponent(cc.RevoluteJoint);l.connectedBody=t.getComponent(cc.RigidBody),l.anchor=cc.v2(s.x,s.y),l.apply(),t.isConnectBoard=!0,t.connectRJ_UUID.push(l.uuid)}}),o.addComponent(h.default).onBeginContact=function(e,o,n){t._isEnd||(20==n.tag&&(n.node.removeComponent(cc.PhysicsPolygonCollider),n.node.removeComponent(cc.RigidBody),t.checkLock(n.node)),10!=n.tag||o.node._isEnd||(o.node._isEnd=!0,t.checkIsWin(),cc.log("\u7ec8\u70b9",o.node.name)),n.tag>0&&n.tag<10&&n.tag!=o.tag&&(e.disabled=!0))},t.boards.push(o)})},e.prototype._initHoles=function(){var t=this;this.holeDatas.length<=0||this.holeDatas.forEach(function(e){var o=e.node;o.isLockAd=e.isLockAdHole,o.isLock=e.isLockHole,o.isEmpty=!e.isNail;var n=o.getChildByName("imgOutLine");n&&(n.active=!0),o.isLock&&t.locks.push(o),o.isLockAd&&(o.isLock=!0,t.lockAds.push(o)),o.getChildByName("imgLock").active=o.isLock;var i=o.getComponent(cc.PhysicsPolygonCollider);i.sensor=!0,i.apply(),o.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var r=o.parent.convertToWorldSpaceAR(o.position),a=t.holeLayer.convertToNodeSpaceAR(r);o.setParent(t.holeLayer),o.setPosition(a),t.holes.push(o);var c=o.getChildByName("nodeNail");if(e.isNail){c.isLock=e.isLockNail,c.connectRJ_UUID=[],c.connectHole=o,c.getChildByName("sk").getComponent(sp.Skeleton).setAnimation(0,"daiji",!0),c.getChildByName("imgLock").active=c.isLock;var s=c.getComponent(cc.PhysicsPolygonCollider);s.sensor=!1,s.friction=0,s.apply(),c.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var l=c.parent.convertToWorldSpaceAR(c.position),d=t.nailLayer.convertToNodeSpaceAR(l);c.setParent(t.nailLayer),c.setPosition(d),c.isLock&&t.locks.push(c),t.nails.push(c)}else c.active=!1})},e.prototype.checkAdLock=function(){if(!(this.lockAds.length<=0)){var t=this.lockAds.pop(),e=t.getChildByName("imgLock");e.runAction(this.shackAction(.1,10,function(){cc.tween(e).to(.2,{scale:1.2}).to(.1,{scale:1}).call(function(){t.isLock=!1,t.getChildByName("imgLock").active=!1}).start()}))}},e.prototype.shackAction=function(t,e,o){var n=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),r=cc.moveBy(.8*t,.8*e,.8*e),a=cc.moveBy(.8*t,.8*-e,.8*-e),c=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),l=cc.moveBy(.4*t,.4*e,.4*e),d=cc.moveBy(.4*t,.4*-e,.4*-e),p=cc.moveBy(.2*t,.2*e,.2*e),h=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(n,i,r,a,c,s,l,d,p,h,cc.callFunc(function(){o()},this))},e.prototype.checkLock=function(t){if(!(this.locks.length<=0)){var e=this.locks.pop(),o=e.parent.convertToWorldSpaceAR(e.position),n=t.parent.convertToNodeSpaceAR(o);cc.tween(t).to(.1,{scale:1.2}).to(.3,{position:n}).call(function(){e.getChildByName("imgLock").scale=1.2}).delay(.3).to(.1,{scale:1}).call(function(){e.isLock=!1,e.getChildByName("imgLock").active=!1,e.getChildByName("imgLock").scale=1,t.active=!1}).start()}},e.prototype.checkTouch=function(t){if(this.isCanTouch){var e=this.lockAds[this.lockAds.length-1];if(e){var o=e.getComponent(cc.PhysicsPolygonCollider).points;if(o=o.map(function(t){return e.convertToWorldSpaceAR(t)}),cc.Intersection.pointInPolygon(t,o))return cc.log("\u76d1\u542c\u70b9\u51fb"),void cc.game.emit("boreBtn")}this.checkIsTouchNail(t)||this.checkIsTouchHole(t)}},e.prototype.checkIsTouchNail=function(t){var e=null;if(this.nails.forEach(function(o){var n=o.getComponent(cc.PhysicsPolygonCollider).points;n=n.map(function(t){return o.convertToWorldSpaceAR(t)}),cc.Intersection.pointInPolygon(t,n)&&(e=o)}),!e)return!1;if(this._hideFinger(),e.isLock)this.isHoldNail&&this.curNail.isRise&&(this.curNail.zIndex=0,(o=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),o.addAnimation(0,"daiji",!0),this.curNail.isRise=!1,this.isHoldNail=!1,this.curNail=null);else if(this.isHoldNail)if(e.isRise){var o;e.isRise=!1,this.curNail=null,this.isHoldNail=!1,(o=e.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),o.addAnimation(0,"daiji",!0),e.zIndex=0}else{var n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton);n.setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.curNail.isRise=!1,this.curNail.zIndex=0,this.curNail=e,e.isRise=!0,e.getChildByName("sk").getComponent(sp.Skeleton).setAnimation(0,"baqi",!1),e.zIndex=9999,this.hammerIsTouchHole(e)}else e.isRise||(e.isRise=!0,this.isHoldNail=!0,this.curNail=e,(o=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"baqi",!1),e.zIndex=9999),this.hammerIsTouchHole(e);return!0},e.prototype.hammerIsTouchHole=function(t){u.Audio.playEffect(d.AudioConst.CLICK_DINGZI),1==l.User.get_hammer("hammer")&&(t.active=!1,t.connectHole.isEmpty=!0,t.connectHole=r,t.setPosition(this.curNail.parent.convertToNodeSpaceAR(2e4)),t.removeFromParent(),l.User.set_hammer(0),cc.game.emit("chuiziBtn"))},e.prototype.checkIsTouchHole=function(t){var e=this,o=null;if(this.holes.forEach(function(e){var n=e.getComponent(cc.PhysicsPolygonCollider).points;n=n.map(function(t){return e.convertToWorldSpaceAR(t)}),cc.Intersection.pointInPolygon(t,n)&&(o=e)}),!o)return!1;if(o.isLock)return this.isHoldNail&&(this.curNail.zIndex=0,this.curNail.isRise=!1,(n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.isHoldNail=!1,this.curNail=null),!1;if(!o.isEmpty)return!1;if(!this.isHoldNail)return!1;var n,i=this.checkHoleCanSet(o),r=i.result,a=i.touchBoards;if(0==r)return this.isHoldNail&&(this.curNail.zIndex=0,this.curNail.isRise=!1,u.Audio.playEffect(d.AudioConst.CLICK_DINGZICUOWU),(n=this.curNail.getChildByName("sk").getComponent(sp.Skeleton)).setAnimation(0,"charu",!1),n.addAnimation(0,"daiji",!0),this.isHoldNail=!1,this.curNail=null),!1;if(a.length>0){var c=o.parent.convertToWorldSpaceAR(o.position),s=this.curNail.parent.convertToNodeSpaceAR(c),l=this.curNail.getComponent(cc.PhysicsPolygonCollider);l.sensor=!0,l.apply(),this.curNail.zIndex=0;var p=this.curNail.getChildByName("sk").getComponent(sp.Skeleton),h=p.node.parent.convertToWorldSpaceAR(p.node.position),f=this.nailLayer.convertToNodeSpaceAR(h);p.node.setParent(this.nailLayer),p.node.setPosition(f),p.node.zIndex=9999;var g=this.nailLayer.convertToNodeSpaceAR(c);return this.isCanTouch=!1,cc.tween(p.node).to(.5,{position:g}).call(function(){e.curNail.active=!1,e.curNail.setPosition(s),e.curNail.active=!0,e.curNail.connectHole.isEmpty=!0,e.curNail.connectHole=o,o.isEmpty=!1,p.node.setParent(e.curNail),p.node.setPosition(cc.v2(0,0));var t=o.getChildByName("imgOutLine");t&&(t.active=!1),e.curNail.isRise=!1,e.isHoldNail=!1,a.forEach(function(t){var o=e.curNail.parent.convertToWorldSpaceAR(e.curNail.position),n=t.convertToNodeSpaceAR(o),i=t.addComponent(cc.RevoluteJoint);i.connectedBody=e.curNail.getComponent(cc.RigidBody),i.anchor=n,i.apply(),e.curNail.isConnectBoard=!0,e.curNail.connectRJ_UUID.push(i.uuid)}),p.setAnimation(0,"charu",!1),p.addAnimation(0,"daiji",!0),e.isCanTouch=!0,l.sensor=!1,l.apply()}).start(),!0}var m=o.parent.convertToWorldSpaceAR(o.position),y=this.curNail.parent.convertToNodeSpaceAR(m),v=this.curNail.getComponent(cc.PhysicsPolygonCollider);v.sensor=!0,v.apply(),this.curNail.zIndex=0;var _=this.curNail.getChildByName("sk").getComponent(sp.Skeleton),C=_.node.parent.convertToWorldSpaceAR(_.node.position),w=this.nailLayer.convertToNodeSpaceAR(C);_.node.setParent(this.nailLayer),_.node.setPosition(w),_.node.zIndex=9999,this.isCanTouch=!1;var P=this.nailLayer.convertToNodeSpaceAR(m);return cc.tween(_.node).to(.5,{position:P}).call(function(){e.curNail.active=!1,e.curNail.setPosition(y),e.curNail.active=!0,e.curNail.connectHole.isEmpty=!0,e.curNail.connectHole=o,o.isEmpty=!1,_.node.setParent(e.curNail),_.node.setPosition(cc.v2(0,0));var t=o.getChildByName("imgOutLine");t&&(t.active=!1),e.curNail.isRise=!1,e.isHoldNail=!1,_.setAnimation(0,"charu",!1),_.setEndListener(function(){e.curNail.isConnectBoard&&e.boards.forEach(function(t){for(var o=t.getComponents(cc.RevoluteJoint),n=0;n<o.length;n++)for(var i=0;i<e.curNail.connectRJ_UUID.length;i++)o[n].uuid==e.curNail.connectRJ_UUID[i]&&t.removeComponent(o[n])}),_.setEndListener(null)}),_.addAnimation(0,"daiji",!0),e.isCanTouch=!0,v.sensor=!1,v.apply()}).start(),!0},e.prototype.checkHoleCanSet=function(t){var e=t.getComponent(cc.PhysicsPolygonCollider).points;e=e.map(function(e){return t.convertToWorldSpaceAR(e)});var o=[],n=0,i=0;return this.boards.forEach(function(t){var r=t.getComponent(cc.PhysicsPolygonCollider).points;if(r=r.map(function(e){return t.convertToWorldSpaceAR(e)}),cc.Intersection.polygonPolygon(e,r)){n++;var a=t.getChildByName("holes");if(!a)return;a.children.forEach(function(n){for(var r=n.getComponent(cc.PolygonCollider).points,a=r.length,c=0,s=0;s<r.length;s++){var l=n.convertToWorldSpaceAR(r[s]);cc.Intersection.pointInPolygon(l,e)&&c++}c>=.8*a&&(i++,o.push(t))})}}),{result:n<=0||n<=i,touchBoards:o}},e.prototype.checkIsWin=function(){var t=this;if(!this._isEnd){var e=!0;this.boards.forEach(function(t){t._isEnd||(e=!1)}),this.amount+=1,e&&(this._isEnd=!0,this.scheduleOnce(function(){t.playRight()},1))}},c([m([y])],e.prototype,"holeDatas",void 0),c([m([v])],e.prototype,"boardDatas",void 0),c([m(cc.Node)],e.prototype,"nodeFinger",void 0),c([g],e)}(p.default);r.default=_,cc._RF.pop()},{}],"zqddn_zhb_level-20984":[function(t,e,o){"use strict";cc._RF.push(e,"32a96gVlAdF8JEVj2OIFFjD","zqddn_zhb_level-20984");var n,i=t,r=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(r,"__esModule",{value:!0});var s=i("BrainLevelBase"),l=cc._decorator,d=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zipperSpineRoot=null,e.spineTime=1,e.minLen=10,e.heads=[],e.guaPoint=[],e.isAnim=!1,e.clickIndex=null,e.spineState=0,e.sucAmount=0,e.time=0,e.isWin=!1,e}return a(e,t),e.prototype.onLevelAllAssetsLoaded=function(){var t=this;this.zipperSpineRoot=this.dict.zipperSpineRoot;for(var e=cc.Node.EventType,o=function(o){var i=n.zipperSpineRoot.children[o].getComponent(sp.Skeleton);i.setCompleteListener(function(e){"animation2"==e.animation.name&&cc.tween(i.node).to(.3,{opacity:0}).call(function(){t.isAnim=!1,i.node.active=!1,t.sucAmount+=1,t.sucAmount>=t.zipperSpineRoot.childrenCount&&t.suc()}).start()});var r=i.attachUtil;r.generateAllAttachedNodes();var a=r.getAttachedNodes("toudian")[0],c=cc.instantiate(n.dict.prefab);c.name=""+o,c.parent=a,c.position=cc.v2(),c.on(e.TOUCH_START,n.touchStart,n),n.heads.push(c),n.guaPoint.push([]),n.createGuaPoint(r,1,o,"shangdian"),n.createGuaPoint(r,2,o,"shangdian"),n.createGuaPoint(r,1,o,"xiadian"),n.createGuaPoint(r,2,o,"xiadian")},n=this,i=0;i<this.zipperSpineRoot.children.length;i++)o(i)},e.prototype.createGuaPoint=function(t,e,o,n){var i=t.getAttachedNodes(""+n+e)[0],r=cc.instantiate(this.dict.pointPrefab);r.name=""+n+e+"_"+o,r.parent=i,r.position=cc.v2(),this.guaPoint[o].push(r)},e.prototype.touchStart=function(t){if(!this.isWin&&!(this.isAnim||t.getTouches().length>1)){var e=t.target;this.clickIndex=Number(e.name),this.isAnim=!0;var o=this.zipperSpineRoot.children[e.name].getComponent(sp.Skeleton);this.time=0,o.timeScale=0,o.setAnimation(0,"animation2",!1),this.spineState=1}},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),n=cc.moveBy(t,-e,-e),i=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),c=cc.moveBy(.6*t,.6*-e,.6*-e),s=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),d=cc.moveBy(.2*t,.2*e,.2*e),p=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,n,i,r,a,c,s,l,d,p)},e.prototype.update=function(t){if(1==this.spineState){var e=this.zipperSpineRoot.children[this.clickIndex].getComponent(sp.Skeleton);this.time+=t,this.updateSpine(e,this.time/this.spineTime)}if(2==this.spineState&&(e=this.zipperSpineRoot.children[this.clickIndex].getComponent(sp.Skeleton),this.time-=t,this.time<0&&(this.time=0,this.spineState=0),this.updateSpine(e,this.time/this.spineTime)),this.isAnim)for(var o=this.heads[this.clickIndex],n=this.getWPosByNode(o),i=(e=this.zipperSpineRoot.children[this.clickIndex].getComponent(sp.Skeleton),0);i<this.zipperSpineRoot.children.length;i++){var r=this.zipperSpineRoot.children[i],a=this.getWPosByNode(this.guaPoint[i][0]),c=this.getWPosByNode(this.guaPoint[i][1]),s=this.getWPosByNode(this.guaPoint[i][2]),l=this.getWPosByNode(this.guaPoint[i][3]),d=this.getWPosByNode(this.heads[i]);if(i>this.clickIndex&&r.active&&(cc.Intersection.pointLineDistance(n,a,c,!0)<this.minLen||cc.Intersection.pointLineDistance(n,c,d,!0)<this.minLen||cc.Intersection.pointLineDistance(n,s,l,!0)<this.minLen||cc.Intersection.pointLineDistance(n,l,d,!0)<this.minLen))return e.timeScale=0,console.log(this.time),this.isAnim=!1,this.spineState=2,void r.runAction(this.shackAction(.1,10))}},e.prototype.updateSpine=function(t,e){var o=t.getCurrent(0),n=o.animationEnd*e;o.animationStart=n,t.setToSetupPose()},e.prototype.getWPosByNode=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.suc=function(){this.isWin=!0,this.playRight(null,1)},e.prototype.fail=function(t){void 0===t&&(t=1),this.playError(null,t)},e.prototype.click=function(){this.playClickSound()},c([p],e.prototype,"spineTime",void 0),c([p],e.prototype,"minLen",void 0),c([d],e)}(s.default);r.default=h,cc._RF.pop()},{}]},{},["AddHomeBtn","AgeTip","Android","AndroidOPPO","AndroidVIVO","AndroidXiaoMi","Api","App","AudioConst","AudioManager","AudioSwitch","BallItem","BallItem2","BallItem3","BasePlatform","BaseUI","BaseboardItem","BeadCurtainsItem","BeadCurtainsMgr","Bee","BeeCannonBallBullet","BeeCannonBallItem","BeeCannonItem","BeeDogSpider","BeeDongFeng17Item","BeeItem","BeeItem2","BeeItemGivePower","BeeKingItem","BeeKingThornDog","BeePopeyeItem","BeeSpecialThornDog","BeeThornDog","BeeThornDogTag","BeeThornDogWater","BeetleItem","BmsManager","BoomItem","Bore","BottomBar","BottomBarTT","BrainLevelBase","BrainLevelTips","BrokenStoneItem","BubbleItem","ChallengeHttp","Cheats","ClickLock","Coin","Collision","Comment","ConfigConst","ConfigManager","ConfigUtils","CopyRightDialog","CrocodileItem","CryHelp","DealUnlock","DrawPhysicsLineBody","DrawPhysicsLineContact","DrawPhysicsLineCowGame","DrawPhysicsLineGame2","DrawPhysicsLineTagFilter","DrawPhysicsTipsData","DrawPhysicsTipsDataPlus","DrawPhysicsTipsData_f6999","DrawPhysicsTipsData_f8000","DrawPhysicsTipsData_f8983","EffectManager","Encrypt","EventConst","EventManager","Feedback","First","FloatEffect","FrameAnim","Game","Gear2","GetSkin","GuessPicture","GuessSentenceConfig","Hide","Hint","HintSystem","HitNut_GameMgr","Home","HomeItem","IGame","IOS","IUser","InfinitePower","KS","Key","LanguageManager","Level-19072","Level-19207","Level-20161","Level-20269","Level-20269_sheep","Level-20714","Level-20836_saveSunWuKong","Level-20841_RotateRopeSaveGear","Level-21150","Level-21150_item","Level-21298_saveSunWuKong","Level-21478","Level-21705","Level-22166","Level-22176","Level-22217_Item","Level-22217_animalRun_maps","Level-22223","Level-22258_klotski","Level-22281","Level-22339","LevelBase","LevelConstant","LevelSelect","LevelSelectItem","LevelUtil","LevelUtils","LimitRepeat","LimitWelfare","LiquidBox2d","Loading","LocalStorage","Logger","Login","Login2","MD5Type","Main","ModeSelect","ModeSelectItem","ModeUnlcok","MouseJointComponent","NodeAnimation","NodeRepeatAnima","NutItem1","NutItem2","OPPO","OPPOADMediatorUtils","OPPOAndroidAdUtils","OPPOMiniADMediatorUtils","OPPOMiniADUtils","OnCollisionCallBack","Params","Pause - 001","Pause","PhysicsPolygonMask","PlatformConst","PlatformManager","Play","PlayItem","PolygonMask2","PopupConst","PopupManager","Power","PowerShortage","PrivacyPolicy","QQ","Rank","RankItem","RecycleScroll","Report","ReportManager","ReportQueue","Request","ResManager","Revive","Rewrite","RewriteMask","SceneConst","SceneFit","SceneManager","ScreenshotUtils","ScrewItem","ScrewMgr","ScrewSkinItem","Set","Shop","Show","ShuShuConst","SignIn","SignInManager","Skin","SkinGetWay","SkinItem","Skip","SpiderItem","SpinBallMgr","SpinBallMgr2","SpinBallMgr3","SquarePuzzleMgr","SquarePuzzleMgr2","SquarePuzzleMgr3","SquarePuzzleTips","Stars","StorageSync","TaskManager","TimeEnd","TimeManage","Tip","TipManager","Tools","TopBar","TouchSound","TransportWatermelon","Ugc","UnlockAllMode","UnlockNewMode","UnlockUgc","UserConst","UserManager","Utils","VIVOADUtils","Win","XM","XMADMediatorUtils","XMADUtils","carttRun","checkTrandomRect","classify_nuts_lookVideo","classify_organizeMarker","config","crypto-js","dogUgcBase","dogUgcMConstans","dogUgc_BeeThornDog","dogUgc_createBoomListItem","dogUgc_createNode","dogUgc_levelData","dogUgc_levelList","dogUgc_levelListItem","dogUgc_playNode","dogUgc_saveTipNode","dogUgc_successNode","doubleFingerScaleCtl","function","guessSentence","guessSentence_answerItem","guessSentence_wordItem","imaginationPuzzle","index","md5","myXxtea","path_root","ttPostbackCtl","zqddn_common","zqddn_level_base","zqddn_level_baseui","zqddn_level_template","zqddn_zhb_beeDogDataModifyPanel","zqddn_zhb_frameanim","zqddn_zhb_level-11266","zqddn_zhb_level-11275","zqddn_zhb_level-13043_base","zqddn_zhb_level-13209","zqddn_zhb_level-13209_base","zqddn_zhb_level-13700","zqddn_zhb_level-14544_base","zqddn_zhb_level-15528","zqddn_zhb_level-15528_item","zqddn_zhb_level-20249Auto_base","zqddn_zhb_level-20249_base","zqddn_zhb_level-20984"]);